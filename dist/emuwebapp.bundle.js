!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=430)}([function(e,t,n){n(192),e.exports=angular},function(e,t,n){var r=n(5),i=n(210);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){var r=n(9),i=n(10),a=n(25),o=n(15),s=n(40),l=function(e,t,n){var c,u,h,p,f=e&l.F,d=e&l.G,v=e&l.S,m=e&l.P,g=e&l.B,S=d?r:v?r[t]||(r[t]={}):(r[t]||{}).prototype,w=d?i:i[t]||(i[t]={}),y=w.prototype||(w.prototype={});for(c in d&&(n=t),n)h=((u=!f&&S&&void 0!==S[c])?S:n)[c],p=g&&u?s(h,r):m&&"function"==typeof h?s(Function.call,h):h,S&&o(S,c,h,e&l.U),w[c]!=h&&a(w,c,p),m&&y[c]!=h&&(y[c]=h)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){var r=n(7);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],i=0;i<e.length;i++){var a=e[i],l=t.base?a[0]+t.base:a[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var h=s(u),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(o[h].references++,o[h].updater(p)):o.push({identifier:u,updater:m(p,t),references:1}),r.push(u)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,v=0;function m(e,t){var n,r,i;if(t.singleton){var a=v++;n=d||(d=c(t)),r=p.bind(null,n,a,!1),i=p.bind(null,n,a,!0)}else n=c(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var a=l(e,t),c=0;c<n.length;c++){var u=s(n[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=a}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var o,s,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(47)("wks"),i=n(46),a=n(9).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(3),i=n(108),a=n(34),o=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(36),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){var r=n(9),i=n(25),a=n(20),o=n(46)("src"),s=n(217),l=(""+s).split("toString");n(10).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(a(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(a(n,o)||i(n,o,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||s.call(this)}))},function(e,t,n){var r=n(31);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(2),i=n(4),a=n(31),o=/"/g,s=function(e,t,n,r){var i=String(a(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(o,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},function(e,t,n){var r;
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var a=[],o=Object.getPrototypeOf,s=a.slice,l=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},c=a.push,u=a.indexOf,h={},p=h.toString,f=h.hasOwnProperty,d=f.toString,v=d.call(Object),m={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},S=function(e){return null!=e&&e===e.window},w=n.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,a=(n=n||w).createElement("script");if(a.text=e,t)for(r in y)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[p.call(e)]||"object":typeof e}var k=function(e,t){return new k.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!S(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}k.fn=k.prototype={jquery:"3.6.0",constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(e){return this.pushStack(k.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(k.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||g(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],a=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,o[t]=k.extend(c,a,r)):void 0!==r&&(o[t]=r));return o},k.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e))&&(!(t=o(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&d.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(C(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?k.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(C(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return l(o)},guid:1,support:m}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=a[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var $=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(e){var t,n,r,i,a,o,s,l,c,u,h,p,f,d,v,m,g,S,w,y="sizzle"+1*new Date,b=e.document,x=0,k=0,C=le(),$=le(),P=le(),E=le(),T=function(e,t){return e===t&&(h=!0),0},_={}.hasOwnProperty,M=[],A=M.pop,D=M.push,L=M.push,V=M.slice,I=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+N+"*("+B+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+N+"*\\]",R=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(N+"+","g"),j=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),z=new RegExp("^"+N+"*,"+N+"*"),U=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp(N+"|>"),G=new RegExp(R),q=new RegExp("^"+B+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){p()},oe=ye((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{L.apply(M=V.call(b.childNodes),b.childNodes),M[b.childNodes.length].nodeType}catch(e){L={apply:M.length?function(e,t){D.apply(e,V.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var a,s,c,u,h,d,g,S=t&&t.ownerDocument,b=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return r;if(!i&&(p(t),t=t||f,v)){if(11!==b&&(h=Q.exec(e)))if(a=h[1]){if(9===b){if(!(c=t.getElementById(a)))return r;if(c.id===a)return r.push(c),r}else if(S&&(c=S.getElementById(a))&&w(t,c)&&c.id===a)return r.push(c),r}else{if(h[2])return L.apply(r,t.getElementsByTagName(e)),r;if((a=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!E[e+" "]&&(!m||!m.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(g=e,S=t,1===b&&(W.test(e)||U.test(e))){for((S=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(re,ie):t.setAttribute("id",u=y)),s=(d=o(e)).length;s--;)d[s]=(u?"#"+u:":scope")+" "+we(d[s]);g=d.join(",")}try{return L.apply(r,S.querySelectorAll(g)),r}catch(t){E(e,!0)}finally{u===y&&t.removeAttribute("id")}}}return l(e.replace(j,"$1"),t,r,i)}function le(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ce(e){return e[y]=!0,e}function ue(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ve(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce((function(t){return t=+t,ce((function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},a=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},p=se.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:b;return o!=f&&9===o.nodeType&&o.documentElement?(d=(f=o).documentElement,v=!a(f),b!=f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ae,!1):i.attachEvent&&i.attachEvent("onunload",ae)),n.scope=ue((function(e){return d.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ue((function(e){return d.appendChild(e).id=y,!f.getElementsByName||!f.getElementsByName(y).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&v)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(ue((function(e){var t;d.appendChild(e).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+N+"*(?:value|"+O+")"),e.querySelectorAll("[id~="+y+"-]").length||m.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+y+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(S=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=S.call(e,"*"),S.call(e,"[s!='']:x"),g.push("!=",R)})),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=J.test(d.compareDocumentPosition),w=t||J.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==f||e.ownerDocument==b&&w(b,e)?-1:t==f||t.ownerDocument==b&&w(b,t)?1:u?I(u,e)-I(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e==f?-1:t==f?1:i?-1:a?1:u?I(u,e)-I(u,t):0;if(i===a)return pe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?pe(o[r],s[r]):o[r]==b?-1:s[r]==b?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&v&&!E[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=S.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){E(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&p(e),w(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&p(e);var i=r.attrHandle[t.toLowerCase()],a=i&&_.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==a?a:n.attributes||!v?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,a=0;if(h=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(T),h){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return u=null,e},i=se.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ce,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,p,f,d,v=a!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),S=!l&&!s,w=!1;if(m){if(a){for(;v;){for(p=t;p=p[v];)if(s?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&S){for(w=(f=(c=(u=(h=(p=m)[y]||(p[y]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],p=f&&m.childNodes[f];p=++f&&p&&p[v]||(w=f=0)||d.pop();)if(1===p.nodeType&&++w&&p===t){u[e]=[x,f,w];break}}else if(S&&(w=f=(c=(u=(h=(p=t)[y]||(p[y]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===w)for(;(p=++f&&p&&p[v]||(w=f=0)||d.pop())&&((s?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++w||(S&&((u=(h=p[y]||(p[y]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]=[x,w]),p!==t)););return(w-=i)===r||w%r==0&&w/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=I(e,a[o])]=!(n[r]=a[o])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ce((function(e){var t=[],n=[],r=s(e.replace(j,"$1"));return r[y]?ce((function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ce((function(e){return q.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:me((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function Se(){}function we(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=k++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,l){var c,u,h,p=[x,s];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(u=(h=t[y]||(t[y]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[a])&&c[0]===x&&c[1]===s)return p[2]=c[2];if(u[a]=p,p[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,i){for(var a,o=[],s=0,l=e.length,c=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),c&&t.push(s)));return o}function ke(e,t,n,r,i,a){return r&&!r[y]&&(r=ke(r)),i&&!i[y]&&(i=ke(i,a)),ce((function(a,o,s,l){var c,u,h,p=[],f=[],d=o.length,v=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?v:xe(v,p,e,s,l),g=n?i||(a?e:d||r)?[]:o:m;if(n&&n(m,g,s,l),r)for(c=xe(g,f),r(c,[],s,l),u=c.length;u--;)(h=c[u])&&(g[f[u]]=!(m[f[u]]=h));if(a){if(i||e){if(i){for(c=[],u=g.length;u--;)(h=g[u])&&c.push(m[u]=h);i(null,g=[],c,l)}for(u=g.length;u--;)(h=g[u])&&(c=i?I(a,h):p[u])>-1&&(a[c]=!(o[c]=h))}}else g=xe(g===o?g.splice(d,g.length):g),i?i(null,o,g,l):L.apply(o,g)}))}function Ce(e){for(var t,n,i,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],l=o?1:0,u=ye((function(e){return e===t}),s,!0),h=ye((function(e){return I(t,e)>-1}),s,!0),p=[function(e,n,r){var i=!o&&(r||n!==c)||((t=n).nodeType?u(e,n,r):h(e,n,r));return t=null,i}];l<a;l++)if(n=r.relative[e[l].type])p=[ye(be(p),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[y]){for(i=++l;i<a&&!r.relative[e[i].type];i++);return ke(l>1&&be(p),l>1&&we(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(j,"$1"),n,l<i&&Ce(e.slice(l,i)),i<a&&Ce(e=e.slice(i)),i<a&&we(e))}p.push(n)}return be(p)}return Se.prototype=r.filters=r.pseudos,r.setFilters=new Se,o=se.tokenize=function(e,t){var n,i,a,o,s,l,c,u=$[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=r.preFilter;s;){for(o in n&&!(i=z.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),n=!1,(i=U.exec(s))&&(n=i.shift(),a.push({value:n,type:i[0].replace(j," ")}),s=s.slice(n.length)),r.filter)!(i=Y[o].exec(s))||c[o]&&!(i=c[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):$(e,l).slice(0)},s=se.compile=function(e,t){var n,i=[],a=[],s=P[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=Ce(t[n]))[y]?i.push(s):a.push(s);(s=P(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,s,l,u){var h,d,m,g=0,S="0",w=a&&[],y=[],b=c,k=a||i&&r.find.TAG("*",u),C=x+=null==b?1:Math.random()||.1,$=k.length;for(u&&(c=o==f||o||u);S!==$&&null!=(h=k[S]);S++){if(i&&h){for(d=0,o||h.ownerDocument==f||(p(h),s=!v);m=e[d++];)if(m(h,o||f,s)){l.push(h);break}u&&(x=C)}n&&((h=!m&&h)&&g--,a&&w.push(h))}if(g+=S,n&&S!==g){for(d=0;m=t[d++];)m(w,y,o,s);if(a){if(g>0)for(;S--;)w[S]||y[S]||(y[S]=A.call(l));y=xe(y)}L.apply(l,y),u&&!a&&y.length>0&&g+t.length>1&&se.uniqueSort(l)}return u&&(x=C,c=b),w};return n?ce(a):a}(a,i))).selector=e}return s},l=se.select=function(e,t,n,i){var a,l,c,u,h,p="function"==typeof e&&e,f=!i&&o(e=p.selector||e);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&v&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=Y.needsContext.test(e)?0:l.length;a--&&(c=l[a],!r.relative[u=c.type]);)if((h=r.find[u])&&(i=h(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(a,1),!(e=i.length&&we(l)))return L.apply(n,i),n;break}}return(p||s(e,f))(i,t,!v,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=y.split("").sort(T).join("")===y,n.detectDuplicates=!!h,p(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||he(O,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(n);k.find=$,k.expr=$.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=$.uniqueSort,k.text=$.getText,k.isXMLDoc=$.isXML,k.contains=$.contains,k.escapeSelector=$.escape;var P=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},T=k.expr.match.needsContext;function _(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(e,t,n){return g(t)?k.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?k.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?k.grep(e,(function(e){return u.call(t,e)>-1!==n})):k.filter(t,e,n)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,(function(e){return 1===e.nodeType})))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter((function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return r>1?k.uniqueSort(n):n},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&T.test(e)?k(e):e||[],!1).length}});var D,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),M.test(r[1])&&k.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=w.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,D=k(w);var V=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&k(e);if(!T.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?k.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?u.call(k(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(_(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},(function(e,t){k.fn[e]=function(n,r){var i=k.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=k.filter(r,i)),this.length>1&&(I[e]||k.uniqueSort(i),V.test(e)&&i.reverse()),this.pushStack(i)}}));var N=/[^\x20\t\r\n\f]+/g;function B(e){return e}function F(e){throw e}function R(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return k.each(e.match(N)||[],(function(e,n){t[n]=!0})),t}(e):k.extend({},e);var t,n,r,i,a=[],o=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(s=a.length-1,o.push(n)),function t(n){k.each(n,(function(n,r){g(r)?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==x(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return k.each(arguments,(function(e,t){for(var n;(n=k.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(e){return e?k.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},k.extend({Deferred:function(e){var t=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return k.Deferred((function(n){k.each(t,(function(t,r){var i=g(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var a=0;function o(e,t,r,i){return function(){var s=this,l=arguments,c=function(){var n,c;if(!(e<a)){if((n=r.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,g(c)?i?c.call(n,o(a,t,B,i),o(a,t,F,i)):(a++,c.call(n,o(a,t,B,i),o(a,t,F,i),o(a,t,B,t.notifyWith))):(r!==B&&(s=void 0,l=[n]),(i||t.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(n){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(n,u.stackTrace),e+1>=a&&(r!==F&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?u():(k.Deferred.getStackHook&&(u.stackTrace=k.Deferred.getStackHook()),n.setTimeout(u))}}return k.Deferred((function(n){t[0][3].add(o(0,n,g(i)?i:B,n.notifyWith)),t[1][3].add(o(0,n,g(e)?e:B)),t[2][3].add(o(0,n,g(r)?r:F))})).promise()},promise:function(e){return null!=e?k.extend(e,i):i}},a={};return k.each(t,(function(e,n){var o=n[2],s=n[5];i[n[1]]=o.add,s&&o.add((function(){r=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=o.fireWith})),i.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),a=k.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(R(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)R(i[n],o(n),a.reject);return a.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&H.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){n.setTimeout((function(){throw e}))};var j=k.Deferred();function z(){w.removeEventListener("DOMContentLoaded",z),n.removeEventListener("load",z),k.ready()}k.fn.ready=function(e){return j.then(e).catch((function(e){k.readyException(e)})),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==e&&--k.readyWait>0||j.resolveWith(w,[k]))}}),k.ready.then=j.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?n.setTimeout(k.ready):(w.addEventListener("DOMContentLoaded",z),n.addEventListener("load",z));var U=function(e,t,n,r,i,a,o){var s=0,l=e.length,c=null==n;if("object"===x(n))for(s in i=!0,n)U(e,t,s,n[s],!0,a,o);else if(void 0!==r&&(i=!0,g(r)||(o=!0),c&&(o?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(k(e),n)})),t))for(;s<l;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):a},W=/^-ms-/,G=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function Y(e){return e.replace(W,"ms-").replace(G,q)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=k.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[Y(t)]=n;else for(r in t)i[Y(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in r?[t]:t.match(N)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var K=new Z,J=new Z,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(n)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||K.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return K.access(e,t,n)},_removeData:function(e,t){K.remove(e,t)}}),k.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=J.get(a),1===a.nodeType&&!K.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=Y(r.slice(5)),te(a,r,i[r]));K.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){J.set(this,e)})):U(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=J.get(a,e))||void 0!==(n=te(a,e))?n:void 0;this.each((function(){J.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){J.remove(this,e)}))}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=K.get(e,t),n&&(!r||Array.isArray(n)?r=K.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),a=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,(function(){k.dequeue(e,t)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return K.get(e,n)||K.access(e,n,{empty:k.Callbacks("once memory").add((function(){K.remove(e,[t+"queue",n])}))})}}),k.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?k.queue(this[0],e):void 0===t?this:this.each((function(){var n=k.queue(this,e,t);k._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&k.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){k.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=K.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],ae=w.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},se={composed:!0};ae.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(se)===e.ownerDocument});var le=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")};function ce(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},l=s(),c=n&&n[3]||(k.cssNumber[t]?"":"px"),u=e.nodeType&&(k.cssNumber[t]||"px"!==c&&+l)&&re.exec(k.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)k.style(e,t,u+c),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),u/=a;u*=2,k.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var ue={};function he(e){var t,n=e.ownerDocument,r=e.nodeName,i=ue[r];return i||(t=n.body.appendChild(n.createElement(r)),i=k.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ue[r]=i,i)}function pe(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=K.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&le(r)&&(i[a]=he(r))):"none"!==n&&(i[a]="none",K.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}k.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){le(this)?k(this).show():k(this).hide()}))}});var fe,de,ve=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;fe=w.createDocumentFragment().appendChild(w.createElement("div")),(de=w.createElement("input")).setAttribute("type","radio"),de.setAttribute("checked","checked"),de.setAttribute("name","t"),fe.appendChild(de),m.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue,fe.innerHTML="<option></option>",m.option=!!fe.lastChild;var Se={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function we(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&_(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)K.set(e[n],"globalEval",!t||K.get(t[n],"globalEval"))}Se.tbody=Se.tfoot=Se.colgroup=Se.caption=Se.thead,Se.th=Se.td,m.option||(Se.optgroup=Se.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var a,o,s,l,c,u,h=t.createDocumentFragment(),p=[],f=0,d=e.length;f<d;f++)if((a=e[f])||0===a)if("object"===x(a))k.merge(p,a.nodeType?[a]:a);else if(be.test(a)){for(o=o||h.appendChild(t.createElement("div")),s=(me.exec(a)||["",""])[1].toLowerCase(),l=Se[s]||Se._default,o.innerHTML=l[1]+k.htmlPrefilter(a)+l[2],u=l[0];u--;)o=o.lastChild;k.merge(p,o.childNodes),(o=h.firstChild).textContent=""}else p.push(t.createTextNode(a));for(h.textContent="",f=0;a=p[f++];)if(r&&k.inArray(a,r)>-1)i&&i.push(a);else if(c=oe(a),o=we(h.appendChild(a),"script"),c&&ye(o),n)for(u=0;a=o[u++];)ge.test(a.type||"")&&n.push(a);return h}var ke=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function $e(){return!1}function Pe(e,t){return e===function(){try{return w.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=$e;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return k().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=k.guid++)),e.each((function(){k.event.add(this,t,i,r,n)}))}function Te(e,t,n){n?(K.set(e,t,!1),k.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=K.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(k.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=s.call(arguments),K.set(this,t,a),r=n(this,t),this[t](),a!==(i=K.get(this,t))||r?K.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else a.length&&(K.set(this,t,{value:k.event.trigger(k.extend(a[0],k.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===K.get(e,t)&&k.event.add(e,t,Ce)}k.event={global:{},add:function(e,t,n,r,i){var a,o,s,l,c,u,h,p,f,d,v,m=K.get(e);if(X(e))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&k.find.matchesSelector(ae,i),n.guid||(n.guid=k.guid++),(l=m.events)||(l=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(N)||[""]).length;c--;)f=v=(s=ke.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),f&&(h=k.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=k.event.special[f]||{},u=k.extend({type:f,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:d.join(".")},a),(p=l[f])||((p=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,d,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,u):p.push(u),k.event.global[f]=!0)},remove:function(e,t,n,r,i){var a,o,s,l,c,u,h,p,f,d,v,m=K.hasData(e)&&K.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(N)||[""]).length;c--;)if(f=v=(s=ke.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),f){for(h=k.event.special[f]||{},p=l[f=(r?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=p.length;a--;)u=p[a],!i&&v!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(a,1),u.selector&&p.delegateCount--,h.remove&&h.remove.call(e,u));o&&!p.length&&(h.teardown&&!1!==h.teardown.call(e,d,m.handle)||k.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)k.event.remove(e,f+t[c],n,r,!0);k.isEmptyObject(l)&&K.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=new Array(arguments.length),l=k.event.fix(e),c=(K.get(this,"events")||Object.create(null))[l.type]||[],u=k.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=k.event.handlers.call(this,l,c),t=0;(i=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(r=((k.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,a,o,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],o={},n=0;n<l;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),o[i]&&a.push(r);a.length&&s.push({elem:c,handlers:a})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ve.test(t.type)&&t.click&&_(t,"input")&&Te(t,"click",Ce),!1},trigger:function(e){var t=this||e;return ve.test(t.type)&&t.click&&_(t,"input")&&Te(t,"click"),!0},_default:function(e){var t=e.target;return ve.test(t.type)&&t.click&&_(t,"input")&&K.get(t,"click")||_(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:$e,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:$e,isPropagationStopped:$e,isImmediatePropagationStopped:$e,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},(function(e,t){k.event.special[e]={setup:function(){return Te(this,e,Pe),!1},trigger:function(){return Te(this,e),!0},_default:function(){return!0},delegateType:t}})),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){k.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return i&&(i===r||k.contains(r,i))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),k.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=$e),this.each((function(){k.event.remove(this,e,n,t)}))}});var _e=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){return _(e,"table")&&_(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ve(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,r,i,a,o,s;if(1===t.nodeType){if(K.hasData(e)&&(s=K.get(e).events))for(i in K.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)k.event.add(t,i,s[i][n]);J.hasData(e)&&(a=J.access(e),o=k.extend({},a),J.set(t,o))}}function Oe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ve.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ne(e,t,n,r){t=l(t);var i,a,o,s,c,u,h=0,p=e.length,f=p-1,d=t[0],v=g(d);if(v||p>1&&"string"==typeof d&&!m.checkClone&&Me.test(d))return e.each((function(i){var a=e.eq(i);v&&(t[0]=d.call(this,i,a.html())),Ne(a,t,n,r)}));if(p&&(a=(i=xe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(s=(o=k.map(we(i,"script"),Le)).length;h<p;h++)c=i,h!==f&&(c=k.clone(c,!0,!0),s&&k.merge(o,we(c,"script"))),n.call(e[h],c,h);if(s)for(u=o[o.length-1].ownerDocument,k.map(o,Ve),h=0;h<s;h++)c=o[h],ge.test(c.type||"")&&!K.access(c,"globalEval")&&k.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?k._evalUrl&&!c.noModule&&k._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):b(c.textContent.replace(Ae,""),c,u))}return e}function Be(e,t,n){for(var r,i=t?k.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||k.cleanData(we(r)),r.parentNode&&(n&&oe(r)&&ye(we(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,a,o,s=e.cloneNode(!0),l=oe(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(o=we(s),r=0,i=(a=we(e)).length;r<i;r++)Oe(a[r],o[r]);if(t)if(n)for(a=a||we(e),o=o||we(s),r=0,i=a.length;r<i;r++)Ie(a[r],o[r]);else Ie(e,s);return(o=we(s,"script")).length>0&&ye(o,!l&&we(e,"script")),s},cleanData:function(e){for(var t,n,r,i=k.event.special,a=0;void 0!==(n=e[a]);a++)if(X(n)){if(t=n[K.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[K.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return U(this,(function(e){return void 0===e?k.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ne(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)}))},prepend:function(){return Ne(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=De(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(we(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return k.clone(this,e,t)}))},html:function(e){return U(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!_e.test(e)&&!Se[(me.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(we(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,(function(t){var n=this.parentNode;k.inArray(this,e)<0&&(k.cleanData(we(this)),n&&n.replaceChild(t,this))}),e)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){k.fn[e]=function(e){for(var n,r=[],i=k(e),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),k(i[o])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var Fe=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},He=function(e,t,n){var r,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=a[i];return r},je=new RegExp(ie.join("|"),"i");function ze(e,t,n){var r,i,a,o,s=e.style;return(n=n||Re(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||oe(e)||(o=k.style(e,t)),!m.pixelBoxStyles()&&Fe.test(o)&&je.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(c).appendChild(u);var e=n.getComputedStyle(u);r="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),i=36===t(e.width),u.style.position="absolute",a=12===t(u.offsetWidth/3),ae.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var r,i,a,o,s,l,c=w.createElement("div"),u=w.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,r,i;return null==s&&(e=w.createElement("table"),t=w.createElement("tr"),r=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",ae.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,ae.removeChild(e)),s}}))}();var We=["Webkit","Moz","ms"],Ge=w.createElement("div").style,qe={};function Ye(e){var t=k.cssProps[e]||qe[e];return t||(e in Ge?e:qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=We.length;n--;)if((e=We[n]+t)in Ge)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Ze=/^--/,Ke={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Qe(e,t,n){var r=re.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,a){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=k.css(e,n+ie[o],!0,i)),r?("content"===n&&(l-=k.css(e,"padding"+ie[o],!0,i)),"margin"!==n&&(l-=k.css(e,"border"+ie[o]+"Width",!0,i))):(l+=k.css(e,"padding"+ie[o],!0,i),"padding"!==n?l+=k.css(e,"border"+ie[o]+"Width",!0,i):s+=k.css(e,"border"+ie[o]+"Width",!0,i));return!r&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))||0),l}function tt(e,t,n){var r=Re(e),i=(!m.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),a=i,o=ze(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Fe.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&_(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(a=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+et(e,t,n||(i?"border":"content"),a,r,o)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=Y(t),l=Ze.test(t),c=e.style;if(l||(t=Ye(s)),o=k.cssHooks[t]||k.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:c[t];"string"===(a=typeof n)&&(i=re.exec(n))&&i[1]&&(n=ce(e,t,i),a="number"),null!=n&&n==n&&("number"!==a||l||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,a,o,s=Y(t);return Ze.test(t)||(t=Ye(s)),(o=k.cssHooks[t]||k.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=ze(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),k.each(["height","width"],(function(e,t){k.cssHooks[t]={get:function(e,n,r){if(n)return!Xe.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,r):He(e,Ke,(function(){return tt(e,t,r)}))},set:function(e,n,r){var i,a=Re(e),o=!m.scrollboxSize()&&"absolute"===a.position,s=(o||r)&&"border-box"===k.css(e,"boxSizing",!1,a),l=r?et(e,t,r,s,a):0;return s&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-et(e,t,"border",!1,a)-.5)),l&&(i=re.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=k.css(e,t)),Qe(0,n,l)}}})),k.cssHooks.marginLeft=Ue(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),k.each({margin:"",padding:"",border:"Width"},(function(e,t){k.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ie[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(k.cssHooks[e+t].set=Qe)})),k.fn.extend({css:function(e,t){return U(this,(function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;o<i;o++)a[t[o]]=k.css(e,t[o],!1,r);return a}return void 0!==n?k.style(e,t,n):k.css(e,t)}),e,t,arguments.length>1)}}),k.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,at=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function st(){it&&(!1===w.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(st):n.setTimeout(st,k.fx.interval),k.fx.tick())}function lt(){return n.setTimeout((function(){rt=void 0})),rt=Date.now()}function ct(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ie[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function ht(e,t,n){var r,i,a=0,o=ht.prefilters.length,s=k.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=rt||lt(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),a=0,o=c.tweens.length;a<o;a++)c.tweens[a].run(r);return s.notifyWith(e,[c,r,n]),r<1&&o?n:(o||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||lt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=k.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=Y(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=k.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);a<o;a++)if(r=ht.prefilters[a].call(c,e,u,c.opts))return g(r.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return k.map(u,ut,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(N);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,s,l,c,u,h="width"in t||"height"in t,p=this,f={},d=e.style,v=e.nodeType&&le(e),m=K.get(e,"fxshow");for(r in n.queue||(null==(o=k._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,p.always((function(){p.always((function(){o.unqueued--,k.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[r],at.test(i)){if(delete t[r],a=a||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;v=!0}f[r]=m&&m[r]||k.style(e,r)}if((l=!k.isEmptyObject(t))||!k.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=m&&m.display)&&(c=K.get(e,"display")),"none"===(u=k.css(e,"display"))&&(c?u=c:(pe([e],!0),c=e.style.display||c,u=k.css(e,"display"),pe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===k.css(e,"float")&&(l||(p.done((function(){d.display=c})),null==c&&(u=d.display,c="none"===u?"":u)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),l=!1,f)l||(m?"hidden"in m&&(v=m.hidden):m=K.access(e,"fxshow",{display:c}),a&&(m.hidden=!v),v&&pe([e],!0),p.done((function(){for(r in v||pe([e]),K.remove(e,"fxshow"),f)k.style(e,r,f[r])}))),l=ut(v?m[r]:0,r,p),r in m||(m[r]=l.start,v&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=k.isEmptyObject(e),a=k.speed(t,n,r),o=function(){var t=ht(this,k.extend({},e),a);(i||K.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",a=k.timers,o=K.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&ot.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||k.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=K.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=k.timers,o=r?r.length:0;for(n.finish=!0,k.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),k.each(["toggle","show","hide"],(function(e,t){var n=k.fn[t];k.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,r,i)}})),k.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){k.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,st())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,t){return e=k.fx&&k.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=w.createElement("input"),t=w.createElement("select").appendChild(w.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=w.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var pt,ft=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return U(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){k.removeAttr(this,e)}))}}),k.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?k.prop(e,t,n):(1===a&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&_(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(N);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ft[t]||k.find.attr;ft[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=ft[o],ft[o]=i,i=null!=n(e,t,r)?o:null,ft[o]=a),i}}));var dt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function mt(e){return(e.match(N)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}k.fn.extend({prop:function(e,t){return U(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[k.propFix[e]||e]}))}}),k.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){k.propFix[this.toLowerCase()]=this})),k.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,l=0;if(g(e))return this.each((function(t){k(this).addClass(e.call(this,t,gt(this)))}));if((t=St(e)).length)for(;n=this[l++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,a,o,s,l=0;if(g(e))return this.each((function(t){k(this).removeClass(e.call(this,t,gt(this)))}));if(!arguments.length)return this.attr("class","");if((t=St(e)).length)for(;n=this[l++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each((function(n){k(this).toggleClass(e.call(this,n,gt(this),t),t)})):this.each((function(){var t,i,a,o;if(r)for(i=0,a=k(this),o=St(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":K.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=g(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,k(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,(function(e){return null==e?"":e+""}))),(t=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(wt,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],l=o?a+1:i.length;for(r=a<0?l:o?a:0;r<l;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){if(t=k(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=k.makeArray(t),o=i.length;o--;)((r=i[o]).selected=k.inArray(k.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),k.each(["radio","checkbox"],(function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=k.inArray(k(e).val(),t)>-1}},m.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in n;var yt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,r,i){var a,o,s,l,c,u,h,p,d=[r||w],v=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(o=p=s=r=r||w,3!==r.nodeType&&8!==r.nodeType&&!yt.test(v+k.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,(e=e[k.expando]?e:new k.Event(v,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:k.makeArray(t,[e]),h=k.event.special[v]||{},i||!h.trigger||!1!==h.trigger.apply(r,t))){if(!i&&!h.noBubble&&!S(r)){for(l=h.delegateType||v,yt.test(l+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),s=o;s===(r.ownerDocument||w)&&d.push(s.defaultView||s.parentWindow||n)}for(a=0;(o=d[a++])&&!e.isPropagationStopped();)p=o,e.type=a>1?l:h.bindType||v,(u=(K.get(o,"events")||Object.create(null))[e.type]&&K.get(o,"handle"))&&u.apply(o,t),(u=c&&o[c])&&u.apply&&X(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),t)||!X(r)||c&&g(r[v])&&!S(r)&&((s=r[c])&&(r[c]=null),k.event.triggered=v,e.isPropagationStopped()&&p.addEventListener(v,bt),r[v](),e.isPropagationStopped()&&p.removeEventListener(v,bt),k.event.triggered=void 0,s&&(r[c]=s)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each((function(){k.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),m.focusin||k.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){k.event.simulate(t,e.target,k.event.fix(e))};k.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=K.access(r,t);i||r.addEventListener(e,n,!0),K.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=K.access(r,t)-1;i?K.access(r,t,i):(r.removeEventListener(e,n,!0),K.remove(r,t))}}}));var xt=n.location,kt={guid:Date.now()},Ct=/\?/;k.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||k.error("Invalid XML: "+(r?k.map(r.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var $t=/\[\]$/,Pt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;function _t(e,t,n,r){var i;if(Array.isArray(t))k.each(t,(function(t,i){n||$t.test(e)?r(e,i):_t(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==x(t))r(e,t);else for(i in t)_t(e+"["+i+"]",t[i],n,r)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,(function(){i(this.name,this.value)}));else for(n in e)_t(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Tt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!ve.test(e))})).map((function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,(function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}})):{name:t.name,value:n.replace(Pt,"\r\n")}})).get()}});var Mt=/%20/g,At=/#.*$/,Dt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vt=/^(?:GET|HEAD)$/,It=/^\/\//,Ot={},Nt={},Bt="*/".concat("*"),Ft=w.createElement("a");function Rt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(N)||[];if(g(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ht(e,t,n,r){var i={},a=e===Nt;function o(s){var l;return i[s]=!0,k.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||i[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),l}return o(t.dataTypes[0])||!i["*"]&&o("*")}function jt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=xt.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,k.ajaxSettings),t):jt(k.ajaxSettings,e)},ajaxPrefilter:Rt(Ot),ajaxTransport:Rt(Nt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,a,o,s,l,c,u,h,p,f=k.ajaxSetup({},t),d=f.context||f,v=f.context&&(d.nodeType||d.jquery)?k(d):k.event,m=k.Deferred(),g=k.Callbacks("once memory"),S=f.statusCode||{},y={},b={},x="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o)for(o={};t=Lt.exec(a);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=b[e.toLowerCase()]=b[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)C.always(e[C.status]);else for(t in e)S[t]=[S[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),$(0,t),this}};if(m.promise(C),f.url=((e||f.url||xt.href)+"").replace(It,xt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(N)||[""],null==f.crossDomain){l=w.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ft.protocol+"//"+Ft.host!=l.protocol+"//"+l.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=k.param(f.data,f.traditional)),Ht(Ot,f,t,C),c)return C;for(h in(u=k.event&&f.global)&&0==k.active++&&k.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Vt.test(f.type),i=f.url.replace(At,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Mt,"+")):(p=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Ct.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Dt,"$1"),p=(Ct.test(i)?"&":"?")+"_="+kt.guid+++p),f.url=i+p),f.ifModified&&(k.lastModified[i]&&C.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&C.setRequestHeader("If-None-Match",k.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Bt+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(d,C,f)||c))return C.abort();if(x="abort",g.add(f.complete),C.done(f.success),C.fail(f.error),r=Ht(Nt,f,t,C)){if(C.readyState=1,u&&v.trigger("ajaxSend",[C,f]),c)return C;f.async&&f.timeout>0&&(s=n.setTimeout((function(){C.abort("timeout")}),f.timeout));try{c=!1,r.send(y,$)}catch(e){if(c)throw e;$(-1,e)}}else $(-1,"No Transport");function $(e,t,o,l){var h,p,w,y,b,x=t;c||(c=!0,s&&n.clearTimeout(s),r=void 0,a=l||"",C.readyState=e>0?4:0,h=e>=200&&e<300||304===e,o&&(y=function(e,t,n){for(var r,i,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}(f,C,o)),!h&&k.inArray("script",f.dataTypes)>-1&&k.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),y=function(e,t,n,r){var i,a,o,s,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=c[l+" "+a]||c["* "+a]))for(i in c)if((s=i.split(" "))[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[i]:!0!==c[i]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(f,y,C,h),h?(f.ifModified&&((b=C.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=b),(b=C.getResponseHeader("etag"))&&(k.etag[i]=b)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=y.state,p=y.data,h=!(w=y.error))):(w=x,!e&&x||(x="error",e<0&&(e=0))),C.status=e,C.statusText=(t||x)+"",h?m.resolveWith(d,[p,x,C]):m.rejectWith(d,[C,x,w]),C.statusCode(S),S=void 0,u&&v.trigger(h?"ajaxSuccess":"ajaxError",[C,f,h?p:w]),g.fireWith(d,[C,x]),u&&(v.trigger("ajaxComplete",[C,f]),--k.active||k.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],(function(e,t){k[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),k.ajax(k.extend({url:e,type:t,dataType:i,data:n,success:r},k.isPlainObject(e)&&e))}})),k.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),k._evalUrl=function(e,t,n){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t,n)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){k(this).wrapInner(e.call(this,t))})):this.each((function(){var t=k(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){k(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){k(this).replaceWith(this.childNodes)})),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var zt={0:200,1223:204},Ut=k.ajaxSettings.xhr();m.cors=!!Ut&&"withCredentials"in Ut,m.ajax=Ut=!!Ut,k.ajaxTransport((function(e){var t,r;if(m.cors||Ut&&!e.crossDomain)return{send:function(i,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(zt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),k.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),k.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=k("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Wt,Gt=[],qt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt.guid++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",(function(e,t,r){var i,a,o,s=!1!==e.jsonp&&(qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(qt,"$1"+i):!1!==e.jsonp&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||k.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=n[i],n[i]=function(){o=arguments},r.always((function(){void 0===a?k(n).removeProp(i):n[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(i)),o&&g(a)&&a(o[0]),o=a=void 0})),"script"})),m.createHTMLDocument=((Wt=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(r)):t=w),a=!n&&[],(i=M.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,a),a&&a.length&&k(a).remove(),k.merge([],i.childNodes)));var r,i,a},k.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");return s>-1&&(r=mt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){a=arguments,o.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},k.expr.pseudos.animated=function(e){return k.grep(k.timers,(function(t){return e===t.elem})).length},k.offset={setOffset:function(e,t,n){var r,i,a,o,s,l,c=k.css(e,"position"),u=k(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),a=k.css(e,"top"),l=k.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1?(o=(r=u.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),g(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(h.top=t.top-s.top+o),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):u.css(h)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){k.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||ae}))}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;k.fn[e]=function(r){return U(this,(function(e,r,i){var a;if(S(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i}),e,r,arguments.length)}})),k.each(["top","left"],(function(e,t){k.cssHooks[t]=Ue(m.pixelPosition,(function(e,n){if(n)return n=ze(e,t),Fe.test(n)?k(e).position()[t]+"px":n}))})),k.each({Height:"height",Width:"width"},(function(e,t){k.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){k.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return U(this,(function(t,n,i){var a;return S(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?k.css(t,n,s):k.style(t,n,i,s)}),t,o?i:void 0,o)}}))})),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){k.fn[t]=function(e){return this.on(t,e)}})),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){k.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Yt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=_,k.isFunction=g,k.isWindow=S,k.camelCase=Y,k.type=x,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},k.trim=function(e){return null==e?"":(e+"").replace(Yt,"")},void 0===(r=function(){return k}.apply(t,[]))||(e.exports=r);var Xt=n.jQuery,Zt=n.$;return k.noConflict=function(e){return n.$===k&&(n.$=Zt),e&&n.jQuery===k&&(n.jQuery=Xt),k},void 0===i&&(n.jQuery=n.$=k),k}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(48),i=n(31);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(2),i=n(10),a=n(4);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*a((function(){n(1)})),"Object",o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(18),i=n(37),a=n(44),o=n(71),s=n(54),l=n(14),c=n(38),u=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a.a;break;case 1:if(!n){o.destination=a.a;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new h(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new h(o,n,r,i)}return o}return r.a(t,e),t.prototype[s.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.a),h=function(e){function t(t,n,r,o){var s,l=e.call(this)||this;l._parentSubscriber=t;var c=l;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&l.add(c.unsubscribe.bind(c)),c.unsubscribe=l.unsubscribe.bind(l))),l._context=c,l._next=s,l._error=r,l._complete=o,l}return r.a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=l.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(c.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(c.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};l.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),l.a.useDeprecatedSynchronousErrorHandling)throw e;Object(c.a)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!l.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return l.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Object(c.a)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t,n){var r=n(11),i=n(39);e.exports=n(12)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(20),i=n(16),a=n(79)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var r=n(40),i=n(48),a=n(16),o=n(13),s=n(317);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,h=6==e,p=5==e||h,f=t||s;return function(t,s,d){for(var v,m,g=a(t),S=i(g),w=r(s,d,3),y=o(S.length),b=0,x=n?f(t,y):l?f(t,0):void 0;y>b;b++)if((p||b in S)&&(m=w(v=S[b],b,g),e))if(n)x[b]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return b;case 2:x.push(v)}else if(u)return!1;return h?-1:c||u?u:x}}},function(e,t,n){var r=n(141),i=n(2),a=n(47)("metadata"),o=a.store||(a.store=new(n(357))),s=function(e,t,n){var i=o.get(e);if(!i){if(!n)return;o.set(e,i=new r)}var a=i.get(t);if(!a){if(!n)return;i.set(t,a=new r)}return a};e.exports={store:o,map:s,has:function(e,t,n){var r=s(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=s(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){s(n,r,!0).set(e,t)},keys:function(e,t){var n=s(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(46)("meta"),i=n(7),a=n(20),o=n(11).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(4)((function(){return l(Object.preventExtensions({}))})),u=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&l(e)&&!a(e,r)&&u(e),e}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(61),i=n(39),a=n(22),o=n(34),s=n(20),l=n(108),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=a(e),t=o(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},,function(e,t,n){var r=n(7);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,"a",(function(){return r}))},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(111),i=n(80);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(3),i=n(113),a=n(80),o=n(79)("IE_PROTO"),s=function(){},l=function(){var e,t=n(109)("iframe"),r=a.length;for(t.style.display="none",n(114).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[a[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(7);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),i=n(38),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},,function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(10),i=n(9),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(58)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(36),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){var r=n(111),i=n(80).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){e.exports={}},function(e,t,n){var r=n(8)("unscopables"),i=Array.prototype;null==i[r]&&n(25)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r,i,a;i=[],void 0===(a="function"==typeof(r=function(){var e,t,n,r;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=(n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var a=[];for(var o in i)e.call(i,o)&&a.push(o);if(t)for(var s=0;s<r;s++)e.call(i,n[s])&&a.push(n[s]);return a})),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var i=function(e,t,n,r,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,r&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=n,this.definedKeywords={},e)for(var a in e.definedKeywords)this.definedKeywords[a]=e.definedKeywords[a].slice(0)};function a(e,t){if(e===t)return!0;if("object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1}else{var r;for(r in e)if(void 0===t[r]&&void 0!==e[r])return!1;for(r in t)if(void 0===e[r]&&void 0!==t[r])return!1;for(r in e)if(!a(e[r],t[r]))return!1}return!0}return!1}function o(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function s(e,t){return t=o(t||""),e=o(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(n=t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,r=[],n.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,(function(e){"/.."===e?r.pop():r.push(e)})),r.join("").replace(/^\//,"/"===n.charAt(0)?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null;var n,r}function l(e){return e.split("#")[0]}function c(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=s(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)c(e[n],t);else for(var r in"string"==typeof e.$ref&&(e.$ref=s(t,e.$ref)),e)"enum"!==r&&c(e[r],t)}i.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},i.prototype.createError=function(e,t,n,r,i){var a=this.errorMessages[e]||f[e];return new d(e,"string"!=typeof a?"Unknown error code "+e+": "+JSON.stringify(t):a.replace(/\{([^{}]*)\}/g,(function(e,n){var r=t[n];return"string"==typeof r||"number"==typeof r?r:e})),n,r,i)},i.prototype.returnError=function(e){return e},i.prototype.collectError=function(e){return e&&this.errors.push(e),null},i.prototype.prefixErrors=function(e,t,n){for(var r=e;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(t,n);return this},i.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(u.UNKNOWN_PROPERTY,{path:e},e,""),n=this.handleError(t);if(n)return n}return null},i.prototype.addFormat=function(e,t){if("object"==typeof e){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},i.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(u.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},i.prototype.getSchema=function(e,t){var n;if(void 0!==this.schemas[e])return n=this.schemas[e],this.resolveRefs(n,t);var r=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[r]){n=this.schemas[r];var a=decodeURIComponent(i);if(""===a)return this.resolveRefs(n,t);if("/"!==a.charAt(0))return;for(var o=a.split("/").slice(1),s=0;s<o.length;s++){var l=o[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[l]){n=void 0;break}n=n[l]}if(void 0!==n)return this.resolveRefs(n,t)}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},i.prototype.searchSchemas=function(e,t){if(e&&"object"==typeof e)for(var n in"string"==typeof e.id&&function(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],t);else if("$ref"===n){var r=l(e[n]);r&&void 0===this.schemas[r]&&void 0===this.missingMap[r]&&(this.missingMap[r]=r)}},i.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!=typeof e||"string"!=typeof e.id)return;e=(t=e).id}(e=l(e)+"#")&&(e=l(e)),this.schemas[e]=t,delete this.missingMap[e],c(t,e),this.searchSchemas(t,e)},i.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},i.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)e&&!e.test(n)||t.push(n);return t},i.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)e&&!e.test(n)||t.push(n);return t},i.prototype.dropSchemas=function(){this.schemas={},this.reset()},i.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},i.prototype.validateAll=function(e,t,n,r,i){var a;if(!(t=this.resolveRefs(t)))return null;if(t instanceof d)return this.errors.push(t),t;var o,s=this.errors.length,l=null,c=null;if(this.checkRecursive&&e&&"object"==typeof e){if(a=!this.scanned.length,e[this.validatedSchemasKey]){var u=e[this.validatedSchemasKey].indexOf(t);if(-1!==u)return this.errors=this.errors.concat(e[this.validationErrorsKey][u]),null}if(Object.isFrozen(e)&&-1!==(o=this.scannedFrozen.indexOf(e))){var h=this.scannedFrozenSchemas[o].indexOf(t);if(-1!==h)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[o][h]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===o&&(o=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),l=this.scannedFrozenSchemas[o].length,this.scannedFrozenSchemas[o][l]=t,this.scannedFrozenValidationErrors[o][l]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}c=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][c]=t,e[this.validationErrorsKey][c]=[]}}var p=this.errors.length,f=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(a){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(f||p!==this.errors.length)for(;n&&n.length||r&&r.length;){var v=n&&n.length?""+n.pop():null,m=r&&r.length?""+r.pop():null;f&&(f=f.prefixWith(v,m)),this.prefixErrors(p,v,m)}return null!==l?this.scannedFrozenValidationErrors[o][l]=this.errors.slice(s):null!==c&&(e[this.validationErrorsKey][c]=this.errors.slice(s)),this.handleError(f)},i.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return"string"==typeof n||"number"==typeof n?this.createError(u.FORMAT_CUSTOM,{message:n}).prefixWith(null,"format"):n&&"object"==typeof n?this.createError(u.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||null,n.schemaPath||"/format"):null},i.prototype.validateDefinedKeywords=function(e,t){for(var n in this.definedKeywords)if(void 0!==t[n])for(var r=this.definedKeywords[n],i=0;i<r.length;i++){var a=(0,r[i])(e,t[n],t);if("string"==typeof a||"number"==typeof a)return this.createError(u.KEYWORD_CUSTOM,{key:n,message:a}).prefixWith(null,"format");if(a&&"object"==typeof a){var o=a.code||u.KEYWORD_CUSTOM;if("string"==typeof o){if(!u[o])throw new Error("Undefined error code (use defineError): "+o);o=u[o]}var s="object"==typeof a.message?a.message:{key:n,message:a.message||"?"},l=a.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(o,s,a.dataPath||null,l)}}return null},i.prototype.validateBasic=function(e,t,n){var r;return(r=this.validateType(e,t,n))||(r=this.validateEnum(e,t,n))?r.prefixWith(null,"type"):null},i.prototype.validateType=function(e,t){if(void 0===t.type)return null;var n=typeof e;null===e?n="null":Array.isArray(e)&&(n="array");var r=t.type;"object"!=typeof r&&(r=[r]);for(var i=0;i<r.length;i++){var a=r[i];if(a===n||"integer"===a&&"number"===n&&e%1==0)return null}return this.createError(u.INVALID_TYPE,{type:n,expected:r.join("/")})},i.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var n=0;n<t.enum.length;n++)if(a(e,t.enum[n]))return null;return this.createError(u.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e})},i.prototype.validateNumeric=function(e,t,n){return this.validateMultipleOf(e,t,n)||this.validateMinMax(e,t,n)||null},i.prototype.validateMultipleOf=function(e,t){var n=t.multipleOf||t.divisibleBy;return void 0===n?null:"number"==typeof e&&e%n!=0?this.createError(u.NUMBER_MULTIPLE_OF,{value:e,multipleOf:n}):null},i.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(u.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(u.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(u.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(u.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},i.prototype.validateString=function(e,t,n){return this.validateStringLength(e,t,n)||this.validateStringPattern(e,t,n)||null},i.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(u.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(u.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},i.prototype.validateStringPattern=function(e,t){return"string"!=typeof e||void 0===t.pattern||new RegExp(t.pattern).test(e)?null:this.createError(u.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},i.prototype.validateArray=function(e,t,n){return Array.isArray(e)&&(this.validateArrayLength(e,t,n)||this.validateArrayUniqueItems(e,t,n)||this.validateArrayItems(e,t,n))||null},i.prototype.validateArrayLength=function(e,t){var n;return void 0!==t.minItems&&e.length<t.minItems&&(n=this.createError(u.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(n))||void 0!==t.maxItems&&e.length>t.maxItems&&(n=this.createError(u.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(n))?n:null},i.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var n=0;n<e.length;n++)for(var r=n+1;r<e.length;r++)if(a(e[n],e[r])){var i=this.createError(u.ARRAY_UNIQUE,{match1:n,match2:r}).prefixWith(null,"uniqueItems");if(this.handleError(i))return i}return null},i.prototype.validateArrayItems=function(e,t,n){if(void 0===t.items)return null;var r,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(r=this.validateAll(e[i],t.items[i],[i],["items",i],n+"/"+i))return r}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(r=this.createError(u.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+i,"additionalItems"),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],n+"/"+i))return r}else for(i=0;i<e.length;i++)if(r=this.validateAll(e[i],t.items,[i],["items"],n+"/"+i))return r;return null},i.prototype.validateObject=function(e,t,n){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,n)||this.validateObjectRequiredProperties(e,t,n)||this.validateObjectProperties(e,t,n)||this.validateObjectDependencies(e,t,n)||null},i.prototype.validateObjectMinMaxProperties=function(e,t){var n,r=Object.keys(e);return void 0!==t.minProperties&&r.length<t.minProperties&&(n=this.createError(u.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(n))||void 0!==t.maxProperties&&r.length>t.maxProperties&&(n=this.createError(u.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(n))?n:null},i.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var n=0;n<t.required.length;n++){var r=t.required[n];if(void 0===e[r]){var i=this.createError(u.OBJECT_REQUIRED,{key:r}).prefixWith(null,""+n).prefixWith(null,"required");if(this.handleError(i))return i}}return null},i.prototype.validateObjectProperties=function(e,t,n){var r;for(var i in e){var a=n+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),o=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(o=!0,r=this.validateAll(e[i],t.properties[i],[i],["properties",i],a)))return r;if(void 0!==t.patternProperties)for(var s in t.patternProperties)if(new RegExp(s).test(i)&&(o=!0,r=this.validateAll(e[i],t.patternProperties[s],[i],["patternProperties",s],a)))return r;if(o)this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(r=this.createError(u.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(i,"additionalProperties"),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],a))return r}else this.trackUnknownProperties&&!this.knownPropertyPaths[a]&&(this.unknownPropertyPaths[a]=!0)}return null},i.prototype.validateObjectDependencies=function(e,t,n){var r;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var a=t.dependencies[i];if("string"==typeof a){if(void 0===e[a]&&(r=this.createError(u.OBJECT_DEPENDENCY_KEY,{key:i,missing:a}).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(Array.isArray(a))for(var o=0;o<a.length;o++){var s=a[o];if(void 0===e[s]&&(r=this.createError(u.OBJECT_DEPENDENCY_KEY,{key:i,missing:s}).prefixWith(null,""+o).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(r=this.validateAll(e,a,[],["dependencies",i],n))return r}return null},i.prototype.validateCombinations=function(e,t,n){return this.validateAllOf(e,t,n)||this.validateAnyOf(e,t,n)||this.validateOneOf(e,t,n)||this.validateNot(e,t,n)||null},i.prototype.validateAllOf=function(e,t,n){if(void 0===t.allOf)return null;for(var r,i=0;i<t.allOf.length;i++){var a=t.allOf[i];if(r=this.validateAll(e,a,[],["allOf",i],n))return r}return null},i.prototype.validateAnyOf=function(e,t,n){if(void 0===t.anyOf)return null;var r,i,a=[],o=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[l],h=this.errors.length,p=this.validateAll(e,c,[],["anyOf",l],n);if(null===p&&h===this.errors.length){if(this.errors=this.errors.slice(0,o),this.trackUnknownProperties){for(var f in this.knownPropertyPaths)i[f]=!0,delete r[f];for(var d in this.unknownPropertyPaths)i[d]||(r[d]=!0);s=!1;continue}return null}p&&a.push(p.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),s?(a=a.concat(this.errors.slice(o)),this.errors=this.errors.slice(0,o),this.createError(u.ANY_OF_MISSING,{},"","/anyOf",a)):void 0},i.prototype.validateOneOf=function(e,t,n){if(void 0===t.oneOf)return null;var r,i,a=null,o=[],s=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[l],h=this.errors.length,p=this.validateAll(e,c,[],["oneOf",l],n);if(null===p&&h===this.errors.length){if(null!==a)return this.errors=this.errors.slice(0,s),this.createError(u.ONE_OF_MULTIPLE,{index1:a,index2:l},"","/oneOf");if(a=l,this.trackUnknownProperties){for(var f in this.knownPropertyPaths)i[f]=!0,delete r[f];for(var d in this.unknownPropertyPaths)i[d]||(r[d]=!0)}}else p&&o.push(p.prefixWith(null,""+l).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===a?(o=o.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(u.ONE_OF_MISSING,{},"","/oneOf",o)):(this.errors=this.errors.slice(0,s),null)},i.prototype.validateNot=function(e,t,n){if(void 0===t.not)return null;var r,i,a=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var o=this.validateAll(e,t.not,null,null,n),s=this.errors.slice(a);return this.errors=this.errors.slice(0,a),this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===o&&0===s.length?this.createError(u.NOT_PASSED,{},"","/not"):null};var u={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},h={};for(var p in u)h[u[p]]=p;var f={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function d(e,t,n,r,i){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.code=e,this.dataPath=n||"",this.schemaPath=r||"",this.subErrors=i||null;var a=new Error(this.message);if(this.stack=a.stack||a.stacktrace,!this.stack)try{throw a}catch(a){this.stack=a.stack||a.stacktrace}}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ValidationError",d.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var v={},m=function e(t){var n=new i,r=t||"en";return{addFormat:function(){n.addFormat.apply(n,arguments)},language:function(e){return e?(v[e]||(e=e.split("-")[0]),!!v[e]&&(r=e,e)):r},addLanguage:function(e,t){var n;for(n in u)t[n]&&!t[u[n]]&&(t[u[n]]=t[n]);var r=e.split("-")[0];if(v[r])for(n in v[e]=Object.create(v[r]),t)void 0===v[r][n]&&(v[r][n]=t[n]),v[e][n]=t[n];else v[e]=t,v[r]=t;return this},freshApi:function(t){var n=e();return t&&n.language(t),n},validate:function(e,t,a,o){var s=new i(n,!1,v[r],a,o);"string"==typeof t&&(t={$ref:t}),s.addSchema("",t);var l=s.validateAll(e,t,null,null,"");return!l&&o&&(l=s.banUnknownProperties()),this.error=l,this.missing=s.missing,this.valid=null===l,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,t,a,o){var s=new i(n,!0,v[r],a,o);"string"==typeof t&&(t={$ref:t}),s.addSchema("",t),s.validateAll(e,t,null,null,""),o&&s.banUnknownProperties();var l={};return l.errors=s.errors,l.missing=s.missing,l.valid=0===l.errors.length,l},addSchema:function(){return n.addSchema.apply(n,arguments)},getSchema:function(){return n.getSchema.apply(n,arguments)},getSchemaMap:function(){return n.getSchemaMap.apply(n,arguments)},getSchemaUris:function(){return n.getSchemaUris.apply(n,arguments)},getMissingUris:function(){return n.getMissingUris.apply(n,arguments)},dropSchemas:function(){n.dropSchemas.apply(n,arguments)},defineKeyword:function(){n.defineKeyword.apply(n,arguments)},defineError:function(e,t,n){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==u[e])throw new Error("Error already defined: "+e+" as "+u[e]);if(void 0!==h[t])throw new Error("Error code already used: "+h[t]+" as "+t);for(var r in u[e]=t,h[t]=e,f[e]=f[t]=n,v){var i=v[r];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){n.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:c,resolveUrl:s,getDocumentUri:l,errorCodes:u}}();return m.addLanguage("en-gb",f),m.tv4=m,m})?r.apply(t,i):r)||(e.exports=a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},,,,function(e,t){e.exports=!1},function(e,t,n){var r=n(11).f,i=n(20),a=n(8)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(82),i={};i[n(8)("toStringTag")]="z",i+""!="[object z]"&&n(15)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(2),i=n(31),a=n(4),o=n(84),s="["+o+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(e,t,n){var i={},s=a((function(){return!!o[e]()||"​"!="​"[e]()})),l=i[e]=s?t(h):o[e];n&&(i[n]=l),r(r.P+r.F*s,"String",i)},h=u.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},function(e,t,n){"use strict";var r=n(88)(!0);n(89)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(82),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(127);var r=n(15),i=n(25),a=n(4),o=n(31),s=n(8),l=n(94),c=s("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=s(e),f=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),d=f?!a((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!t})):void 0;if(!f||!d||"replace"===e&&!u||"split"===e&&!h){var v=/./[p],m=n(o,p,""[e],(function(e,t,n,r,i){return t.exec===l?f&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=m[0],S=m[1];r(String.prototype,e,g),i(RegExp.prototype,p,2==t?function(e,t){return S.call(e,this,t)}:function(e){return S.call(e,this)})}}},function(e,t,n){"use strict";var r=n(3);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(40),i=n(131),a=n(132),o=n(3),s=n(13),l=n(134),c={},u={};(t=e.exports=function(e,t,n,h,p){var f,d,v,m,g=p?function(){return e}:l(e),S=r(n,h,t?2:1),w=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(f=s(e.length);f>w;w++)if((m=t?S(o(d=e[w])[0],d[1]):S(e[w]))===c||m===u)return m}else for(v=g.call(e);!(d=v.next()).done;)if((m=i(v,S,d.value,t))===c||m===u)return m}).BREAK=c,t.RETURN=u},function(e,t,n){e.exports=n(208).wrap(n(209)()),e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},function(e,t,n){"use strict";var r=n(70);var i=n(37),a=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();n.d(t,"a",(function(){return o}));var o=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n,o=this._parentOrParents,l=this._ctorUnsubscribe,c=this._unsubscribe,u=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof e)o.remove(this);else if(null!==o)for(var h=0;h<o.length;++h){o[h].remove(this)}if(Object(i.a)(c)){l&&(this._unsubscribe=void 0);try{c.call(this)}catch(e){t=e instanceof a?s(e.errors):[e]}}if(Object(r.a)(u)){h=-1;for(var p=u.length;++h<p;){var f=u[h];if(null!==(n=f)&&"object"==typeof n)try{f.unsubscribe()}catch(e){t=t||[],e instanceof a?t=t.concat(s(e.errors)):t.push(e)}}}if(t)throw new a(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function s(e){return e.reduce((function(e,t){return e.concat(t instanceof a?t.errors:t)}),[])}},,,,,,,,function(e,t,n){var r=n(47)("keys"),i=n(46);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(35);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(35),i=n(8)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){var r=n(7),i=n(3),a=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(40)(Function.call,n(32).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(7),i=n(83).set;e.exports=function(e,t,n){var a,o=t.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&r(a)&&i&&i(e,a),e}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(36),i=n(31);e.exports=function(e){return function(t,n){var a,o,s=String(i(t)),l=r(n),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(58),i=n(2),a=n(15),o=n(25),s=n(51),l=n(125),c=n(59),u=n(26),h=n(8)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,d,v,m,g){l(n,t,d);var S,w,y,b=function(e){if(!p&&e in $)return $[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",k="values"==v,C=!1,$=e.prototype,P=$[h]||$["@@iterator"]||v&&$[v],E=P||b(v),T=v?k?b("entries"):E:void 0,_="Array"==t&&$.entries||P;if(_&&(y=u(_.call(new e)))!==Object.prototype&&y.next&&(c(y,x,!0),r||"function"==typeof y[h]||o(y,h,f)),k&&P&&"values"!==P.name&&(C=!0,E=function(){return P.call(this)}),r&&!g||!p&&!C&&$[h]||o($,h,E),s[t]=E,s[x]=f,v)if(S={values:k?E:b("values"),keys:m?E:b("keys"),entries:T},g)for(w in S)w in $||a($,w,S[w]);else i(i.P+i.F*(p||C),t,S);return S}},function(e,t,n){var r=n(91),i=n(31);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(7),i=n(35),a=n(8)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(8)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";var r=n(88)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r,i,a=n(67),o=RegExp.prototype.exec,s=String.prototype.replace,l=o,c=(r=/a/,i=/b*/g,o.call(r,"a"),o.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,n,r,i,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),c&&(t=l.lastIndex),r=o.call(l,e),c&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t,n){"use strict";var r=n(9),i=n(11),a=n(12),o=n(8)("species");e.exports=function(e){var t=r[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var r=n(9),i=n(2),a=n(15),o=n(96),s=n(30),l=n(68),c=n(97),u=n(7),h=n(4),p=n(135),f=n(59),d=n(85);e.exports=function(e,t,n,v,m,g){var S=r[e],w=S,y=m?"set":"add",b=w&&w.prototype,x={},k=function(e){var t=b[e];a(b,e,"delete"==e||"has"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof w&&(g||b.forEach&&!h((function(){(new w).entries().next()})))){var C=new w,$=C[y](g?{}:-0,1)!=C,P=h((function(){C.has(1)})),E=p((function(e){new w(e)})),T=!g&&h((function(){for(var e=new w,t=5;t--;)e[y](t,t);return!e.has(-0)}));E||((w=t((function(t,n){c(t,w,e);var r=d(new S,t,w);return null!=n&&l(n,m,r[y],r),r}))).prototype=b,b.constructor=w),(P||T)&&(k("delete"),k("has"),m&&k("get")),(T||$)&&k(y),g&&b.clear&&delete b.clear}else w=v.getConstructor(t,e,m,y),o(w.prototype,n),s.NEED=!0;return f(w,e),x[e]=w,i(i.G+i.W+i.F*(w!=S),x),g||v.setStrong(w,e,m),w}},function(e,t,n){var r;/*! showdown v 1.9.1 - 02-11-2019 */
(function(){function i(e){"use strict";var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,description:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,description:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,description:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,description:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},completeHTMLDocument:{defaultValue:!1,description:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,description:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,description:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r].defaultValue);return n}var a={},o={},s={},l=i(!0),c="vanilla",u={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:i(!0),allOn:function(){"use strict";var e=i(!0),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}()};function h(e,t){"use strict";var n=t?"Error in "+t+" extension->":"Error in unnamed extension",r={valid:!0,error:""};a.helper.isArray(e)||(e=[e]);for(var i=0;i<e.length;++i){var o=n+" sub-extension "+i+": ",s=e[i];if("object"!=typeof s)return r.valid=!1,r.error=o+"must be an object, but "+typeof s+" given",r;if(!a.helper.isString(s.type))return r.valid=!1,r.error=o+'property "type" must be a string, but '+typeof s.type+" given",r;var l=s.type=s.type.toLowerCase();if("language"===l&&(l=s.type="lang"),"html"===l&&(l=s.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return r.valid=!1,r.error=o+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===l){if(a.helper.isUndefined(s.listeners))return r.valid=!1,r.error=o+'. Extensions of type "listener" must have a property called "listeners"',r}else if(a.helper.isUndefined(s.filter)&&a.helper.isUndefined(s.regex))return r.valid=!1,r.error=o+l+' extensions must define either a "regex" property or a "filter" method',r;if(s.listeners){if("object"!=typeof s.listeners)return r.valid=!1,r.error=o+'"listeners" property must be an object but '+typeof s.listeners+" given",r;for(var c in s.listeners)if(s.listeners.hasOwnProperty(c)&&"function"!=typeof s.listeners[c])return r.valid=!1,r.error=o+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof s.listeners[c]+" given",r}if(s.filter){if("function"!=typeof s.filter)return r.valid=!1,r.error=o+'"filter" must be a function, but '+typeof s.filter+" given",r}else if(s.regex){if(a.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!(s.regex instanceof RegExp))return r.valid=!1,r.error=o+'"regex" property must either be a string or a RegExp object, but '+typeof s.regex+" given",r;if(a.helper.isUndefined(s.replace))return r.valid=!1,r.error=o+'"regex" extensions must implement a replace string or function',r}}return r}function p(e,t){"use strict";return"¨E"+t.charCodeAt(0)+"E"}a.helper={},a.extensions={},a.setOption=function(e,t){"use strict";return l[e]=t,this},a.getOption=function(e){"use strict";return l[e]},a.getOptions=function(){"use strict";return l},a.resetOptions=function(){"use strict";l=i(!0)},a.setFlavor=function(e){"use strict";if(!u.hasOwnProperty(e))throw Error(e+" flavor was not found");a.resetOptions();var t=u[e];for(var n in c=e,t)t.hasOwnProperty(n)&&(l[n]=t[n])},a.getFlavor=function(){"use strict";return c},a.getFlavorOptions=function(e){"use strict";if(u.hasOwnProperty(e))return u[e]},a.getDefaultOptions=function(e){"use strict";return i(e)},a.subParser=function(e,t){"use strict";if(a.helper.isString(e)){if(void 0===t){if(o.hasOwnProperty(e))return o[e];throw Error("SubParser named "+e+" not registered!")}o[e]=t}},a.extension=function(e,t){"use strict";if(!a.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=a.helper.stdExtName(e),a.helper.isUndefined(t)){if(!s.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return s[e]}"function"==typeof t&&(t=t()),a.helper.isArray(t)||(t=[t]);var n=h(t,e);if(!n.valid)throw Error(n.error);s[e]=t},a.getAllExtensions=function(){"use strict";return s},a.removeExtension=function(e){"use strict";delete s[e]},a.resetExtensions=function(){"use strict";s={}},a.validateExtension=function(e){"use strict";var t=h(e,null);return!!t.valid||(console.warn(t.error),!1)},a.hasOwnProperty("helper")||(a.helper={}),a.helper.isString=function(e){"use strict";return"string"==typeof e||e instanceof String},a.helper.isFunction=function(e){"use strict";return e&&"[object Function]"==={}.toString.call(e)},a.helper.isArray=function(e){"use strict";return Array.isArray(e)},a.helper.isUndefined=function(e){"use strict";return void 0===e},a.helper.forEach=function(e,t){"use strict";if(a.helper.isUndefined(e))throw new Error("obj param is required");if(a.helper.isUndefined(t))throw new Error("callback param is required");if(!a.helper.isFunction(t))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(t);else if(a.helper.isArray(e))for(var n=0;n<e.length;n++)t(e[n],n,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e)}},a.helper.stdExtName=function(e){"use strict";return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},a.helper.escapeCharactersCallback=p,a.helper.escapeCharacters=function(e,t,n){"use strict";var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,p)},a.helper.unescapeHTMLEntities=function(e){"use strict";return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var f=function(e,t,n,r){"use strict";var i,a,o,s,l,c=r||"",u=c.indexOf("g")>-1,h=new RegExp(t+"|"+n,"g"+c.replace(/g/g,"")),p=new RegExp(t,c.replace(/g/g,"")),f=[];do{for(i=0;o=h.exec(e);)if(p.test(o[0]))i++||(s=(a=h.lastIndex)-o[0].length);else if(i&&!--i){l=o.index+o[0].length;var d={left:{start:s,end:a},match:{start:a,end:o.index},right:{start:o.index,end:l},wholeMatch:{start:s,end:l}};if(f.push(d),!u)return f}}while(i&&(h.lastIndex=a));return f};a.helper.matchRecursiveRegExp=function(e,t,n,r){"use strict";for(var i=f(e,t,n,r),a=[],o=0;o<i.length;++o)a.push([e.slice(i[o].wholeMatch.start,i[o].wholeMatch.end),e.slice(i[o].match.start,i[o].match.end),e.slice(i[o].left.start,i[o].left.end),e.slice(i[o].right.start,i[o].right.end)]);return a},a.helper.replaceRecursiveRegExp=function(e,t,n,r,i){"use strict";if(!a.helper.isFunction(t)){var o=t;t=function(){return o}}var s=f(e,n,r,i),l=e,c=s.length;if(c>0){var u=[];0!==s[0].wholeMatch.start&&u.push(e.slice(0,s[0].wholeMatch.start));for(var h=0;h<c;++h)u.push(t(e.slice(s[h].wholeMatch.start,s[h].wholeMatch.end),e.slice(s[h].match.start,s[h].match.end),e.slice(s[h].left.start,s[h].left.end),e.slice(s[h].right.start,s[h].right.end))),h<c-1&&u.push(e.slice(s[h].wholeMatch.end,s[h+1].wholeMatch.start));s[c-1].wholeMatch.end<e.length&&u.push(e.slice(s[c-1].wholeMatch.end)),l=u.join("")}return l},a.helper.regexIndexOf=function(e,t,n){"use strict";if(!a.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(t instanceof RegExp==!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var r=e.substring(n||0).search(t);return r>=0?r+(n||0):r},a.helper.splitAtIndex=function(e,t){"use strict";if(!a.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,t),e.substring(t)]},a.helper.encodeEmailAddress=function(e){"use strict";var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}))},a.helper.padEnd=function(e,t,n){"use strict";return t>>=0,n=String(n||" "),e.length>t?String(e):((t-=e.length)>n.length&&(n+=n.repeat(t/n.length)),String(e)+n.slice(0,t))},"undefined"==typeof console&&(console={warn:function(e){"use strict";alert(e)},log:function(e){"use strict";alert(e)},error:function(e){"use strict";throw e}}),a.helper.regexes={asteriskDashAndColon:/([*_:~])/g},a.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},a.Converter=function(e){"use strict";var t={},n=[],r=[],i={},o=c,p={parsed:{},raw:"",format:""};function f(e,t){if(t=t||null,a.helper.isString(e)){if(t=e=a.helper.stdExtName(e),a.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new a.Converter));a.helper.isArray(e)||(e=[e]);var i=h(e,t);if(!i.valid)throw Error(i.error);for(var o=0;o<e.length;++o)switch(e[o].type){case"lang":n.push(e[o]);break;case"output":r.push(e[o]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(a.extensions[e],e);if(a.helper.isUndefined(s[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=s[e]}"function"==typeof e&&(e=e()),a.helper.isArray(e)||(e=[e]);var i=h(e,t);if(!i.valid)throw Error(i.error);for(var o=0;o<e.length;++o){switch(e[o].type){case"lang":n.push(e[o]);break;case"output":r.push(e[o])}if(e[o].hasOwnProperty("listeners"))for(var l in e[o].listeners)e[o].listeners.hasOwnProperty(l)&&d(l,e[o].listeners[l])}}function d(e,t){if(!a.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof t+" given");i.hasOwnProperty(e)||(i[e]=[]),i[e].push(t)}!function(){for(var n in e=e||{},l)l.hasOwnProperty(n)&&(t[n]=l[n]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.extensions&&a.helper.forEach(t.extensions,f)}(),this._dispatch=function(e,t,n,r){if(i.hasOwnProperty(e))for(var a=0;a<i[e].length;++a){var o=i[e][a](e,t,this,n,r);o&&void 0!==o&&(t=o)}return t},this.listen=function(e,t){return d(e,t),this},this.makeHtml=function(e){if(!e)return e;var i={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:n,outputModifiers:r,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return e=(e=(e=(e=(e=e.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),t.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,n=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(n,"")}(e)),e="\n\n"+e+"\n\n",e=(e=a.subParser("detab")(e,t,i)).replace(/^[ \t]+$/gm,""),a.helper.forEach(n,(function(n){e=a.subParser("runExtension")(n,e,t,i)})),e=a.subParser("metadata")(e,t,i),e=a.subParser("hashPreCodeTags")(e,t,i),e=a.subParser("githubCodeBlocks")(e,t,i),e=a.subParser("hashHTMLBlocks")(e,t,i),e=a.subParser("hashCodeTags")(e,t,i),e=a.subParser("stripLinkDefinitions")(e,t,i),e=a.subParser("blockGamut")(e,t,i),e=a.subParser("unhashHTMLSpans")(e,t,i),e=(e=(e=a.subParser("unescapeSpecialChars")(e,t,i)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),e=a.subParser("completeHTMLDocument")(e,t,i),a.helper.forEach(r,(function(n){e=a.subParser("runExtension")(n,e,t,i)})),p=i.metadata,e},this.makeMarkdown=this.makeMd=function(e,t){if(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!t){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");t=window.document}var n=t.createElement("div");n.innerHTML=e;var r={preList:function(e){for(var t=e.querySelectorAll("pre"),n=[],r=0;r<t.length;++r)if(1===t[r].childElementCount&&"code"===t[r].firstChild.tagName.toLowerCase()){var i=t[r].firstChild.innerHTML.trim(),o=t[r].firstChild.getAttribute("data-language")||"";if(""===o)for(var s=t[r].firstChild.className.split(" "),l=0;l<s.length;++l){var c=s[l].match(/^language-(.+)$/);if(null!==c){o=c[1];break}}i=a.helper.unescapeHTMLEntities(i),n.push(i),t[r].outerHTML='<precode language="'+o+'" precodenum="'+r.toString()+'"></precode>'}else n.push(t[r].innerHTML),t[r].innerHTML="",t[r].setAttribute("prenum",r.toString());return n}(n)};!function e(t){for(var n=0;n<t.childNodes.length;++n){var r=t.childNodes[n];3===r.nodeType?/\S/.test(r.nodeValue)?(r.nodeValue=r.nodeValue.split("\n").join(" "),r.nodeValue=r.nodeValue.replace(/(\s)+/g,"$1")):(t.removeChild(r),--n):1===r.nodeType&&e(r)}}(n);for(var i=n.childNodes,o="",s=0;s<i.length;s++)o+=a.subParser("makeMarkdown.node")(i[s],r);return o},this.setOption=function(e,n){t[e]=n},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){f(e,t=t||null)},this.useExtension=function(e){f(e)},this.setFlavor=function(e){if(!u.hasOwnProperty(e))throw Error(e+" flavor was not found");var n=u[e];for(var r in o=e,n)n.hasOwnProperty(r)&&(t[r]=n[r])},this.getFlavor=function(){return o},this.removeExtension=function(e){a.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var i=e[t],o=0;o<n.length;++o)n[o]===i&&n[o].splice(o,1);for(;0<r.length;++o)r[0]===i&&r[0].splice(o,1)}},this.getAllExtensions=function(){return{language:n,output:r}},this.getMetadata=function(e){return e?p.raw:p.parsed},this.getMetadataFormat=function(){return p.format},this._setMetadataPair=function(e,t){p.parsed[e]=t},this._setMetadataFormat=function(e){p.format=e},this._setMetadataRaw=function(e){p.raw=e}},a.subParser("anchors",(function(e,t,n){"use strict";var r=function(e,r,i,o,s,l,c){if(a.helper.isUndefined(c)&&(c=""),i=i.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(!o){if(i||(i=r.toLowerCase().replace(/ ?\n/g," ")),o="#"+i,a.helper.isUndefined(n.gUrls[i]))return e;o=n.gUrls[i],a.helper.isUndefined(n.gTitles[i])||(c=n.gTitles[i])}var u='<a href="'+(o=o.replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'"';return""!==c&&null!==c&&(u+=' title="'+(c=(c=c.replace(/"/g,"&quot;")).replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'"'),t.openLinksInNewWindow&&!/^#/.test(o)&&(u+=' rel="noopener noreferrer" target="¨E95Eblank"'),u+=">"+r+"</a>"};return e=(e=(e=(e=(e=n.converter._dispatch("anchors.before",e,t,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[([^\[\]]+)]()()()()()/g,r),t.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(e,n,r,i,o){if("\\"===r)return n+i;if(!a.helper.isString(t.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var s=t.ghMentionsLink.replace(/\{u}/g,o),l="";return t.openLinksInNewWindow&&(l=' rel="noopener noreferrer" target="¨E95Eblank"'),n+'<a href="'+s+'"'+l+">"+i+"</a>"}))),e=n.converter._dispatch("anchors.after",e,t,n)}));var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,v=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,g=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,S=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,w=function(e){"use strict";return function(t,n,r,i,o,s,l){var c=r=r.replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback),u="",h="",p=n||"",f=l||"";return/^www\./i.test(r)&&(r=r.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&s&&(u=s),e.openLinksInNewWindow&&(h=' rel="noopener noreferrer" target="¨E95Eblank"'),p+'<a href="'+r+'"'+h+">"+c+"</a>"+u+f}},y=function(e,t){"use strict";return function(n,r,i){var o="mailto:";return r=r||"",i=a.subParser("unescapeSpecialChars")(i,e,t),e.encodeEmails?(o=a.helper.encodeEmailAddress(o+i),i=a.helper.encodeEmailAddress(i)):o+=i,r+'<a href="'+o+'">'+i+"</a>"}};a.subParser("autoLinks",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("autoLinks.before",e,t,n)).replace(m,w(t))).replace(S,y(t,n)),e=n.converter._dispatch("autoLinks.after",e,t,n)})),a.subParser("simplifiedAutoLinks",(function(e,t,n){"use strict";return t.simplifiedAutoLink?(e=n.converter._dispatch("simplifiedAutoLinks.before",e,t,n),e=(e=t.excludeTrailingPunctuationFromURLs?e.replace(v,w(t)):e.replace(d,w(t))).replace(g,y(t,n)),e=n.converter._dispatch("simplifiedAutoLinks.after",e,t,n)):e})),a.subParser("blockGamut",(function(e,t,n){"use strict";return e=n.converter._dispatch("blockGamut.before",e,t,n),e=a.subParser("blockQuotes")(e,t,n),e=a.subParser("headers")(e,t,n),e=a.subParser("horizontalRule")(e,t,n),e=a.subParser("lists")(e,t,n),e=a.subParser("codeBlocks")(e,t,n),e=a.subParser("tables")(e,t,n),e=a.subParser("hashHTMLBlocks")(e,t,n),e=a.subParser("paragraphs")(e,t,n),e=n.converter._dispatch("blockGamut.after",e,t,n)})),a.subParser("blockQuotes",(function(e,t,n){"use strict";e=n.converter._dispatch("blockQuotes.before",e,t,n),e+="\n\n";var r=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return t.splitAdjacentBlockquotes&&(r=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),e=e.replace(r,(function(e){return e=(e=(e=e.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),e=a.subParser("githubCodeBlocks")(e,t,n),e=(e=(e=a.subParser("blockGamut")(e,t,n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"¨0")).replace(/¨0/g,"")})),a.subParser("hashBlock")("<blockquote>\n"+e+"\n</blockquote>",t,n)})),e=n.converter._dispatch("blockQuotes.after",e,t,n)})),a.subParser("codeBlocks",(function(e,t,n){"use strict";e=n.converter._dispatch("codeBlocks.before",e,t,n);return e=(e=(e+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,(function(e,r,i){var o=r,s=i,l="\n";return o=a.subParser("outdent")(o,t,n),o=a.subParser("encodeCode")(o,t,n),o=(o=(o=a.subParser("detab")(o,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(l=""),o="<pre><code>"+o+l+"</code></pre>",a.subParser("hashBlock")(o,t,n)+s}))).replace(/¨0/,""),e=n.converter._dispatch("codeBlocks.after",e,t,n)})),a.subParser("codeSpans",(function(e,t,n){"use strict";return void 0===(e=n.converter._dispatch("codeSpans.before",e,t,n))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,r,i,o){var s=o;return s=(s=s.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),s=r+"<code>"+(s=a.subParser("encodeCode")(s,t,n))+"</code>",s=a.subParser("hashHTMLSpans")(s,t,n)})),e=n.converter._dispatch("codeSpans.after",e,t,n)})),a.subParser("completeHTMLDocument",(function(e,t,n){"use strict";if(!t.completeHTMLDocument)return e;e=n.converter._dispatch("completeHTMLDocument.before",e,t,n);var r="html",i="<!DOCTYPE HTML>\n",a="",o='<meta charset="utf-8">\n',s="",l="";for(var c in void 0!==n.metadata.parsed.doctype&&(i="<!DOCTYPE "+n.metadata.parsed.doctype+">\n","html"!==(r=n.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==r||(o='<meta charset="utf-8">')),n.metadata.parsed)if(n.metadata.parsed.hasOwnProperty(c))switch(c.toLowerCase()){case"doctype":break;case"title":a="<title>"+n.metadata.parsed.title+"</title>\n";break;case"charset":o="html"===r||"html5"===r?'<meta charset="'+n.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+n.metadata.parsed.charset+'">\n';break;case"language":case"lang":s=' lang="'+n.metadata.parsed[c]+'"',l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n';break;default:l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n'}return e=i+"<html"+s+">\n<head>\n"+a+o+l+"</head>\n<body>\n"+e.trim()+"\n</body>\n</html>",e=n.converter._dispatch("completeHTMLDocument.after",e,t,n)})),a.subParser("detab",(function(e,t,n){"use strict";return e=(e=(e=(e=(e=(e=n.converter._dispatch("detab.before",e,t,n)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,(function(e,t){for(var n=t,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n}))).replace(/¨A/g,"    ")).replace(/¨B/g,""),e=n.converter._dispatch("detab.after",e,t,n)})),a.subParser("ellipsis",(function(e,t,n){"use strict";return e=(e=n.converter._dispatch("ellipsis.before",e,t,n)).replace(/\.\.\./g,"…"),e=n.converter._dispatch("ellipsis.after",e,t,n)})),a.subParser("emoji",(function(e,t,n){"use strict";if(!t.emoji)return e;return e=(e=n.converter._dispatch("emoji.before",e,t,n)).replace(/:([\S]+?):/g,(function(e,t){return a.helper.emojis.hasOwnProperty(t)?a.helper.emojis[t]:e})),e=n.converter._dispatch("emoji.after",e,t,n)})),a.subParser("encodeAmpsAndAngles",(function(e,t,n){"use strict";return e=(e=(e=(e=(e=n.converter._dispatch("encodeAmpsAndAngles.before",e,t,n)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=n.converter._dispatch("encodeAmpsAndAngles.after",e,t,n)})),a.subParser("encodeBackslashEscapes",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("encodeBackslashEscapes.before",e,t,n)).replace(/\\(\\)/g,a.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|-])/g,a.helper.escapeCharactersCallback),e=n.converter._dispatch("encodeBackslashEscapes.after",e,t,n)})),a.subParser("encodeCode",(function(e,t,n){"use strict";return e=(e=n.converter._dispatch("encodeCode.before",e,t,n)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,a.helper.escapeCharactersCallback),e=n.converter._dispatch("encodeCode.after",e,t,n)})),a.subParser("escapeSpecialCharsWithinTagAttributes",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,t,n)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,a.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(e){return e.replace(/([\\`*_~=|])/g,a.helper.escapeCharactersCallback)})),e=n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,t,n)})),a.subParser("githubCodeBlocks",(function(e,t,n){"use strict";return t.ghCodeBlocks?(e=n.converter._dispatch("githubCodeBlocks.before",e,t,n),e=(e=(e+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(e,r,i,o){var s=t.omitExtraWLInCodeBlocks?"":"\n";return o=a.subParser("encodeCode")(o,t,n),o="<pre><code"+(i?' class="'+i+" language-"+i+'"':"")+">"+(o=(o=(o=a.subParser("detab")(o,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+s+"</code></pre>",o=a.subParser("hashBlock")(o,t,n),"\n\n¨G"+(n.ghCodeBlocks.push({text:e,codeblock:o})-1)+"G\n\n"}))).replace(/¨0/,""),n.converter._dispatch("githubCodeBlocks.after",e,t,n)):e})),a.subParser("hashBlock",(function(e,t,n){"use strict";return e=(e=n.converter._dispatch("hashBlock.before",e,t,n)).replace(/(^\n+|\n+$)/g,""),e="\n\n¨K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n",e=n.converter._dispatch("hashBlock.after",e,t,n)})),a.subParser("hashCodeTags",(function(e,t,n){"use strict";e=n.converter._dispatch("hashCodeTags.before",e,t,n);return e=a.helper.replaceRecursiveRegExp(e,(function(e,r,i,o){var s=i+a.subParser("encodeCode")(r,t,n)+o;return"¨C"+(n.gHtmlSpans.push(s)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),e=n.converter._dispatch("hashCodeTags.after",e,t,n)})),a.subParser("hashElement",(function(e,t,n){"use strict";return function(e,t){var r=t;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),r="\n\n¨K"+(n.gHtmlBlocks.push(r)-1)+"K\n\n"}})),a.subParser("hashHTMLBlocks",(function(e,t,n){"use strict";e=n.converter._dispatch("hashHTMLBlocks.before",e,t,n);var r=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],i=function(e,t,r,i){var a=e;return-1!==r.search(/\bmarkdown\b/)&&(a=r+n.converter.makeHtml(t)+i),"\n\n¨K"+(n.gHtmlBlocks.push(a)-1)+"K\n\n"};t.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,(function(e,t){return"&lt;"+t+"&gt;"})));for(var o=0;o<r.length;++o)for(var s,l=new RegExp("^ {0,3}(<"+r[o]+"\\b[^>]*>)","im"),c="<"+r[o]+"\\b[^>]*>",u="</"+r[o]+">";-1!==(s=a.helper.regexIndexOf(e,l));){var h=a.helper.splitAtIndex(e,s),p=a.helper.replaceRecursiveRegExp(h[1],i,c,u,"im");if(p===h[1])break;e=h[0].concat(p)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,a.subParser("hashElement")(e,t,n)),e=(e=a.helper.replaceRecursiveRegExp(e,(function(e){return"\n\n¨K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,a.subParser("hashElement")(e,t,n)),e=n.converter._dispatch("hashHTMLBlocks.after",e,t,n)})),a.subParser("hashHTMLSpans",(function(e,t,n){"use strict";function r(e){return"¨C"+(n.gHtmlSpans.push(e)-1)+"C"}return e=(e=(e=(e=(e=n.converter._dispatch("hashHTMLSpans.before",e,t,n)).replace(/<[^>]+?\/>/gi,(function(e){return r(e)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(e){return r(e)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(e){return r(e)}))).replace(/<[^>]+?>/gi,(function(e){return r(e)})),e=n.converter._dispatch("hashHTMLSpans.after",e,t,n)})),a.subParser("unhashHTMLSpans",(function(e,t,n){"use strict";e=n.converter._dispatch("unhashHTMLSpans.before",e,t,n);for(var r=0;r<n.gHtmlSpans.length;++r){for(var i=n.gHtmlSpans[r],a=0;/¨C(\d+)C/.test(i);){var o=RegExp.$1;if(i=i.replace("¨C"+o+"C",n.gHtmlSpans[o]),10===a){console.error("maximum nesting of 10 spans reached!!!");break}++a}e=e.replace("¨C"+r+"C",i)}return e=n.converter._dispatch("unhashHTMLSpans.after",e,t,n)})),a.subParser("hashPreCodeTags",(function(e,t,n){"use strict";e=n.converter._dispatch("hashPreCodeTags.before",e,t,n);return e=a.helper.replaceRecursiveRegExp(e,(function(e,r,i,o){var s=i+a.subParser("encodeCode")(r,t,n)+o;return"\n\n¨G"+(n.ghCodeBlocks.push({text:e,codeblock:s})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),e=n.converter._dispatch("hashPreCodeTags.after",e,t,n)})),a.subParser("headers",(function(e,t,n){"use strict";e=n.converter._dispatch("headers.before",e,t,n);var r=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),i=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,o=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=(e=e.replace(i,(function(e,i){var o=a.subParser("spanGamut")(i,t,n),s=t.noHeaderId?"":' id="'+l(i)+'"',c="<h"+r+s+">"+o+"</h"+r+">";return a.subParser("hashBlock")(c,t,n)}))).replace(o,(function(e,i){var o=a.subParser("spanGamut")(i,t,n),s=t.noHeaderId?"":' id="'+l(i)+'"',c=r+1,u="<h"+c+s+">"+o+"</h"+c+">";return a.subParser("hashBlock")(u,t,n)}));var s=t.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function l(e){var r,i;if(t.customizedHeaderId){var o=e.match(/\{([^{]+?)}\s*$/);o&&o[1]&&(e=o[1])}return r=e,i=a.helper.isString(t.prefixHeaderId)?t.prefixHeaderId:!0===t.prefixHeaderId?"section-":"",t.rawPrefixHeaderId||(r=i+r),r=t.ghCompatibleHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():t.rawHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():r.replace(/[^\w]/g,"").toLowerCase(),t.rawPrefixHeaderId&&(r=i+r),n.hashLinkCounts[r]?r=r+"-"+n.hashLinkCounts[r]++:n.hashLinkCounts[r]=1,r}return e=e.replace(s,(function(e,i,o){var s=o;t.customizedHeaderId&&(s=o.replace(/\s?\{([^{]+?)}\s*$/,""));var c=a.subParser("spanGamut")(s,t,n),u=t.noHeaderId?"":' id="'+l(o)+'"',h=r-1+i.length,p="<h"+h+u+">"+c+"</h"+h+">";return a.subParser("hashBlock")(p,t,n)})),e=n.converter._dispatch("headers.after",e,t,n)})),a.subParser("horizontalRule",(function(e,t,n){"use strict";e=n.converter._dispatch("horizontalRule.before",e,t,n);var r=a.subParser("hashBlock")("<hr />",t,n);return e=(e=(e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,r),e=n.converter._dispatch("horizontalRule.after",e,t,n)})),a.subParser("images",(function(e,t,n){"use strict";function r(e,t,r,i,o,s,l,c){var u=n.gUrls,h=n.gTitles,p=n.gDimensions;if(r=r.toLowerCase(),c||(c=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)i="";else if(""===i||null===i){if(""!==r&&null!==r||(r=t.toLowerCase().replace(/ ?\n/g," ")),i="#"+r,a.helper.isUndefined(u[r]))return e;i=u[r],a.helper.isUndefined(h[r])||(c=h[r]),a.helper.isUndefined(p[r])||(o=p[r].width,s=p[r].height)}t=t.replace(/"/g,"&quot;").replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback);var f='<img src="'+(i=i.replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'" alt="'+t+'"';return c&&a.helper.isString(c)&&(f+=' title="'+(c=c.replace(/"/g,"&quot;").replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'"'),o&&s&&(f+=' width="'+(o="*"===o?"auto":o)+'"',f+=' height="'+(s="*"===s?"auto":s)+'"'),f+=" />"}return e=(e=(e=(e=(e=(e=n.converter._dispatch("images.before",e,t,n)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(e,t,n,i,a,o,s,l){return r(e,t,n,i=i.replace(/\s/g,""),a,o,s,l)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,r)).replace(/!\[([^\[\]]+)]()()()()()/g,r),e=n.converter._dispatch("images.after",e,t,n)})),a.subParser("italicsAndBold",(function(e,t,n){"use strict";function r(e,t,n){return t+e+n}return e=n.converter._dispatch("italicsAndBold.before",e,t,n),e=t.literalMidWordUnderscores?(e=(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return r(t,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return r(t,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(e,t){return r(t,"<em>","</em>")})):(e=(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}))).replace(/_([^\s_][\s\S]*?)_/g,(function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),e=t.literalMidWordAsterisks?(e=(e=e.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<em>","</em>")})):(e=(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),e=n.converter._dispatch("italicsAndBold.after",e,t,n)})),a.subParser("lists",(function(e,t,n){"use strict";function r(e,r){n.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,o=/\n[ \t]*\n(?!¨0)/.test(e+="¨0");return t.disableForced4SpacesIndentedSublists&&(i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),e=(e=e.replace(i,(function(e,r,i,s,l,c,u){u=u&&""!==u.trim();var h=a.subParser("outdent")(l,t,n),p="";return c&&t.tasklists&&(p=' class="task-list-item" style="list-style-type: none;"',h=h.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(e+=" checked"),e+=">"}))),h=h.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(e){return"¨A"+e})),r||h.search(/\n{2,}/)>-1?(h=a.subParser("githubCodeBlocks")(h,t,n),h=a.subParser("blockGamut")(h,t,n)):(h=(h=a.subParser("lists")(h,t,n)).replace(/\n$/,""),h=(h=a.subParser("hashHTMLBlocks")(h,t,n)).replace(/\n\n+/g,"\n\n"),h=o?a.subParser("paragraphs")(h,t,n):a.subParser("spanGamut")(h,t,n)),h="<li"+p+">"+(h=h.replace("¨A",""))+"</li>\n"}))).replace(/¨0/g,""),n.gListLevel--,r&&(e=e.replace(/\s+$/,"")),e}function i(e,t){if("ol"===t){var n=e.match(/^ *(\d+)\./);if(n&&"1"!==n[1])return' start="'+n[1]+'"'}return""}function o(e,n,a){var o=t.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,s=t.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===n?o:s,c="";if(-1!==e.search(l))!function t(u){var h=u.search(l),p=i(e,n);-1!==h?(c+="\n\n<"+n+p+">\n"+r(u.slice(0,h),!!a)+"</"+n+">\n",l="ul"===(n="ul"===n?"ol":"ul")?o:s,t(u.slice(h))):c+="\n\n<"+n+p+">\n"+r(u,!!a)+"</"+n+">\n"}(e);else{var u=i(e,n);c="\n\n<"+n+u+">\n"+r(e,!!a)+"</"+n+">\n"}return c}return e=n.converter._dispatch("lists.before",e,t,n),e+="¨0",e=(e=n.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n){return o(t,n.search(/[*+-]/g)>-1?"ul":"ol",!0)})):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n,r){return o(n,r.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/¨0/,""),e=n.converter._dispatch("lists.after",e,t,n)})),a.subParser("metadata",(function(e,t,n){"use strict";if(!t.metadata)return e;function r(e){n.metadata.raw=e,(e=(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(e,t,r){return n.metadata.parsed[t]=r,""}))}return e=(e=(e=(e=n.converter._dispatch("metadata.before",e,t,n)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,(function(e,t,n){return r(n),"¨M"}))).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(e,t,i){return t&&(n.metadata.format=t),r(i),"¨M"}))).replace(/¨M/g,""),e=n.converter._dispatch("metadata.after",e,t,n)})),a.subParser("outdent",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("outdent.before",e,t,n)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),e=n.converter._dispatch("outdent.after",e,t,n)})),a.subParser("paragraphs",(function(e,t,n){"use strict";for(var r=(e=(e=(e=n.converter._dispatch("paragraphs.before",e,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),i=[],o=r.length,s=0;s<o;s++){var l=r[s];l.search(/¨(K|G)(\d+)\1/g)>=0?i.push(l):l.search(/\S/)>=0&&(l=(l=a.subParser("spanGamut")(l,t,n)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",i.push(l))}for(o=i.length,s=0;s<o;s++){for(var c="",u=i[s],h=!1;/¨(K|G)(\d+)\1/.test(u);){var p=RegExp.$1,f=RegExp.$2;c=(c="K"===p?n.gHtmlBlocks[f]:h?a.subParser("encodeCode")(n.ghCodeBlocks[f].text,t,n):n.ghCodeBlocks[f].codeblock).replace(/\$/g,"$$$$"),u=u.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(u)&&(h=!0)}i[s]=u}return e=(e=(e=i.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.converter._dispatch("paragraphs.after",e,t,n)})),a.subParser("runExtension",(function(e,t,n,r){"use strict";if(e.filter)t=e.filter(t,r.converter,n);else if(e.regex){var i=e.regex;i instanceof RegExp||(i=new RegExp(i,"g")),t=t.replace(i,e.replace)}return t})),a.subParser("spanGamut",(function(e,t,n){"use strict";return e=n.converter._dispatch("spanGamut.before",e,t,n),e=a.subParser("codeSpans")(e,t,n),e=a.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,n),e=a.subParser("encodeBackslashEscapes")(e,t,n),e=a.subParser("images")(e,t,n),e=a.subParser("anchors")(e,t,n),e=a.subParser("autoLinks")(e,t,n),e=a.subParser("simplifiedAutoLinks")(e,t,n),e=a.subParser("emoji")(e,t,n),e=a.subParser("underline")(e,t,n),e=a.subParser("italicsAndBold")(e,t,n),e=a.subParser("strikethrough")(e,t,n),e=a.subParser("ellipsis")(e,t,n),e=a.subParser("hashHTMLSpans")(e,t,n),e=a.subParser("encodeAmpsAndAngles")(e,t,n),t.simpleLineBreaks?/\n\n¨K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),e=n.converter._dispatch("spanGamut.after",e,t,n)})),a.subParser("strikethrough",(function(e,t,n){"use strict";return t.strikethrough&&(e=(e=n.converter._dispatch("strikethrough.before",e,t,n)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(e,r){return function(e){return t.simplifiedAutoLink&&(e=a.subParser("simplifiedAutoLinks")(e,t,n)),"<del>"+e+"</del>"}(r)})),e=n.converter._dispatch("strikethrough.after",e,t,n)),e})),a.subParser("stripLinkDefinitions",(function(e,t,n){"use strict";var r=function(e,r,i,o,s,l,c){return r=r.toLowerCase(),i.match(/^data:.+?\/.+?;base64,/)?n.gUrls[r]=i.replace(/\s/g,""):n.gUrls[r]=a.subParser("encodeAmpsAndAngles")(i,t,n),l?l+c:(c&&(n.gTitles[r]=c.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&o&&s&&(n.gDimensions[r]={width:o,height:s}),"")};return e=(e=(e=(e+="¨0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,r)).replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,r)).replace(/¨0/,"")})),a.subParser("tables",(function(e,t,n){"use strict";if(!t.tables)return e;function r(e,r){return"<td"+r+">"+a.subParser("spanGamut")(e,t,n)+"</td>\n"}function i(e){var i,o=e.split("\n");for(i=0;i<o.length;++i)/^ {0,3}\|/.test(o[i])&&(o[i]=o[i].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(o[i])&&(o[i]=o[i].replace(/\|[ \t]*$/,"")),o[i]=a.subParser("codeSpans")(o[i],t,n);var s,l,c,u,h=o[0].split("|").map((function(e){return e.trim()})),p=o[1].split("|").map((function(e){return e.trim()})),f=[],d=[],v=[],m=[];for(o.shift(),o.shift(),i=0;i<o.length;++i)""!==o[i].trim()&&f.push(o[i].split("|").map((function(e){return e.trim()})));if(h.length<p.length)return e;for(i=0;i<p.length;++i)v.push((s=p[i],/^:[ \t]*--*$/.test(s)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(s)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(s)?' style="text-align:center;"':""));for(i=0;i<h.length;++i)a.helper.isUndefined(v[i])&&(v[i]=""),d.push((l=h[i],c=v[i],u=void 0,u="",l=l.trim(),(t.tablesHeaderId||t.tableHeaderId)&&(u=' id="'+l.replace(/ /g,"_").toLowerCase()+'"'),"<th"+u+c+">"+(l=a.subParser("spanGamut")(l,t,n))+"</th>\n"));for(i=0;i<f.length;++i){for(var g=[],S=0;S<d.length;++S)a.helper.isUndefined(f[i][S]),g.push(r(f[i][S],v[S]));m.push(g)}return function(e,t){for(var n="<table>\n<thead>\n<tr>\n",r=e.length,i=0;i<r;++i)n+=e[i];for(n+="</tr>\n</thead>\n<tbody>\n",i=0;i<t.length;++i){n+="<tr>\n";for(var a=0;a<r;++a)n+=t[i][a];n+="</tr>\n"}return n+="</tbody>\n</table>\n"}(d,m)}return e=(e=(e=(e=n.converter._dispatch("tables.before",e,t,n)).replace(/\\(\|)/g,a.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,i)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,i),e=n.converter._dispatch("tables.after",e,t,n)})),a.subParser("underline",(function(e,t,n){"use strict";return t.underline?(e=n.converter._dispatch("underline.before",e,t,n),e=(e=t.literalMidWordUnderscores?(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return"<u>"+t+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return"<u>"+t+"</u>"})):(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/(_)/g,a.helper.escapeCharactersCallback),e=n.converter._dispatch("underline.after",e,t,n)):e})),a.subParser("unescapeSpecialChars",(function(e,t,n){"use strict";return e=(e=n.converter._dispatch("unescapeSpecialChars.before",e,t,n)).replace(/¨E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)})),e=n.converter._dispatch("unescapeSpecialChars.after",e,t,n)})),a.subParser("makeMarkdown.blockquote",(function(e,t){"use strict";var n="";if(e.hasChildNodes())for(var r=e.childNodes,i=r.length,o=0;o<i;++o){var s=a.subParser("makeMarkdown.node")(r[o],t);""!==s&&(n+=s)}return n="> "+(n=n.trim()).split("\n").join("\n> ")})),a.subParser("makeMarkdown.codeBlock",(function(e,t){"use strict";var n=e.getAttribute("language"),r=e.getAttribute("precodenum");return"```"+n+"\n"+t.preList[r]+"\n```"})),a.subParser("makeMarkdown.codeSpan",(function(e){"use strict";return"`"+e.innerHTML+"`"})),a.subParser("makeMarkdown.emphasis",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="*";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="*"}return n})),a.subParser("makeMarkdown.header",(function(e,t,n){"use strict";var r=new Array(n+1).join("#"),i="";if(e.hasChildNodes()){i=r+" ";for(var o=e.childNodes,s=o.length,l=0;l<s;++l)i+=a.subParser("makeMarkdown.node")(o[l],t)}return i})),a.subParser("makeMarkdown.hr",(function(){"use strict";return"---"})),a.subParser("makeMarkdown.image",(function(e){"use strict";var t="";return e.hasAttribute("src")&&(t+="!["+e.getAttribute("alt")+"](",t+="<"+e.getAttribute("src")+">",e.hasAttribute("width")&&e.hasAttribute("height")&&(t+=" ="+e.getAttribute("width")+"x"+e.getAttribute("height")),e.hasAttribute("title")&&(t+=' "'+e.getAttribute("title")+'"'),t+=")"),t})),a.subParser("makeMarkdown.links",(function(e,t){"use strict";var n="";if(e.hasChildNodes()&&e.hasAttribute("href")){var r=e.childNodes,i=r.length;n="[";for(var o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="](",n+="<"+e.getAttribute("href")+">",e.hasAttribute("title")&&(n+=' "'+e.getAttribute("title")+'"'),n+=")"}return n})),a.subParser("makeMarkdown.list",(function(e,t,n){"use strict";var r="";if(!e.hasChildNodes())return"";for(var i=e.childNodes,o=i.length,s=e.getAttribute("start")||1,l=0;l<o;++l)if(void 0!==i[l].tagName&&"li"===i[l].tagName.toLowerCase()){r+=("ol"===n?s.toString()+". ":"- ")+a.subParser("makeMarkdown.listItem")(i[l],t),++s}return(r+="\n\x3c!-- --\x3e\n").trim()})),a.subParser("makeMarkdown.listItem",(function(e,t){"use strict";for(var n="",r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);return/\n$/.test(n)?n=n.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):n+="\n",n})),a.subParser("makeMarkdown.node",(function(e,t,n){"use strict";n=n||!1;var r="";if(3===e.nodeType)return a.subParser("makeMarkdown.txt")(e,t);if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e\n\n";if(1!==e.nodeType)return"";switch(e.tagName.toLowerCase()){case"h1":n||(r=a.subParser("makeMarkdown.header")(e,t,1)+"\n\n");break;case"h2":n||(r=a.subParser("makeMarkdown.header")(e,t,2)+"\n\n");break;case"h3":n||(r=a.subParser("makeMarkdown.header")(e,t,3)+"\n\n");break;case"h4":n||(r=a.subParser("makeMarkdown.header")(e,t,4)+"\n\n");break;case"h5":n||(r=a.subParser("makeMarkdown.header")(e,t,5)+"\n\n");break;case"h6":n||(r=a.subParser("makeMarkdown.header")(e,t,6)+"\n\n");break;case"p":n||(r=a.subParser("makeMarkdown.paragraph")(e,t)+"\n\n");break;case"blockquote":n||(r=a.subParser("makeMarkdown.blockquote")(e,t)+"\n\n");break;case"hr":n||(r=a.subParser("makeMarkdown.hr")(e,t)+"\n\n");break;case"ol":n||(r=a.subParser("makeMarkdown.list")(e,t,"ol")+"\n\n");break;case"ul":n||(r=a.subParser("makeMarkdown.list")(e,t,"ul")+"\n\n");break;case"precode":n||(r=a.subParser("makeMarkdown.codeBlock")(e,t)+"\n\n");break;case"pre":n||(r=a.subParser("makeMarkdown.pre")(e,t)+"\n\n");break;case"table":n||(r=a.subParser("makeMarkdown.table")(e,t)+"\n\n");break;case"code":r=a.subParser("makeMarkdown.codeSpan")(e,t);break;case"em":case"i":r=a.subParser("makeMarkdown.emphasis")(e,t);break;case"strong":case"b":r=a.subParser("makeMarkdown.strong")(e,t);break;case"del":r=a.subParser("makeMarkdown.strikethrough")(e,t);break;case"a":r=a.subParser("makeMarkdown.links")(e,t);break;case"img":r=a.subParser("makeMarkdown.image")(e,t);break;default:r=e.outerHTML+"\n\n"}return r})),a.subParser("makeMarkdown.paragraph",(function(e,t){"use strict";var n="";if(e.hasChildNodes())for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);return n=n.trim()})),a.subParser("makeMarkdown.pre",(function(e,t){"use strict";var n=e.getAttribute("prenum");return"<pre>"+t.preList[n]+"</pre>"})),a.subParser("makeMarkdown.strikethrough",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="~~";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="~~"}return n})),a.subParser("makeMarkdown.strong",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="**";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="**"}return n})),a.subParser("makeMarkdown.table",(function(e,t){"use strict";var n,r,i="",o=[[],[]],s=e.querySelectorAll("thead>tr>th"),l=e.querySelectorAll("tbody>tr");for(n=0;n<s.length;++n){var c=a.subParser("makeMarkdown.tableCell")(s[n],t),u="---";if(s[n].hasAttribute("style"))switch(s[n].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":u=":---";break;case"text-align:right;":u="---:";break;case"text-align:center;":u=":---:"}o[0][n]=c.trim(),o[1][n]=u}for(n=0;n<l.length;++n){var h=o.push([])-1,p=l[n].getElementsByTagName("td");for(r=0;r<s.length;++r){var f=" ";void 0!==p[r]&&(f=a.subParser("makeMarkdown.tableCell")(p[r],t)),o[h].push(f)}}var d=3;for(n=0;n<o.length;++n)for(r=0;r<o[n].length;++r){var v=o[n][r].length;v>d&&(d=v)}for(n=0;n<o.length;++n){for(r=0;r<o[n].length;++r)1===n?":"===o[n][r].slice(-1)?o[n][r]=a.helper.padEnd(o[n][r].slice(-1),d-1,"-")+":":o[n][r]=a.helper.padEnd(o[n][r],d,"-"):o[n][r]=a.helper.padEnd(o[n][r],d);i+="| "+o[n].join(" | ")+" |\n"}return i.trim()})),a.subParser("makeMarkdown.tableCell",(function(e,t){"use strict";var n="";if(!e.hasChildNodes())return"";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t,!0);return n.trim()})),a.subParser("makeMarkdown.txt",(function(e){"use strict";var t=e.nodeValue;return t=(t=t.replace(/ +/g," ")).replace(/¨NBSP;/g," "),t=(t=(t=(t=(t=(t=(t=(t=(t=a.helper.unescapeHTMLEntities(t)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")}));void 0===(r=function(){"use strict";return a}.call(t,n,t,e))||(e.exports=r)}).call(this)},function(e,t,n){"use strict";function r(e){e=e||window.Worker,this.url=this.getWorkerURL(),this.worker=new e(this.url)}n.d(t,"a",(function(){return r})),r.prototype={getWorkerScript:function(){var e="";return e+="("+this.workerInit+")(this);"},workerInit:function(e){e.executed=!1,e.PI=3.141592653589793,e.TWO_PI=6.283185307179586,e.totalMax=0,e.dynRangeInDB=50,e.myWindow={BARTLETT:1,BARTLETTHANN:2,BLACKMAN:3,COSINE:4,GAUSS:5,HAMMING:6,HANN:7,LANCZOS:8,RECTANGULAR:9,TRIANGULAR:10},e.imgWidth=0,e.imgHeight=0,e.upperFreq=0,e.lowerFreq=0,e.pixelRatio=1,e.heatMapColorAnchors=[[255,0,0],[0,255,0],[0,0,0]],e.samplesPerPxl=0,e.sampleRate=0,e.preEmphasisFilterFactor=.97,e.transparency=0,e.drawHeatMapColors=!1,e.N=0,e.windowSizeInSecs=.01,e.audioBuffer=void 0,e.audioBufferChannels=0,e.wFunction=0,e.myFFT=void 0,e.pixelHeight=1,e.internalalpha=1,e.maxPsd=0,e.HzStep=0,e.paint=[],e.sin=void 0,e.cos=void 0,e.ceilingFreqFftIdx=0,e.floorFreqFftIdx=0,e.resultImgArr=void 0,e.toLinearLevel=function(e){return Math.pow(10,e/10)},e.log10=function(e){return Math.log(e)/2.302585092994046},e.magnitude=function(e,t){return Math.sqrt(e*e+t*t)},e.FFT=function(){var t,n,r,i=e.N;if(t=parseInt(Math.log(i)/.6931471805599453,10),void 0===e.cos||i!==e.N)for(e.cos=new Float32Array(i/2),r=0;r<i/2;r++)e.cos[r]=Math.cos(-2*e.PI*r/i);if(void 0===e.sin||i!==e.N)for(e.sin=new Float32Array(i/2),r=0;r<i/2;r++)e.sin[r]=Math.sin(-2*e.PI*r/i);this.applyWindowFuncAndPreemph=function(t,r,i,a){switch(this.alpha=r,t){case e.myWindow.BARTLETT:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionBartlett(a,n);break;case e.myWindow.BARTLETTHANN:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionBartlettHann(a,n);break;case e.myWindow.BLACKMAN:for(this.alpha=this.alpha||.16,n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionBlackman(a,n,r);break;case e.myWindow.COSINE:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionCosine(a,n);break;case e.myWindow.GAUSS:for(this.alpha=this.alpha||.25,n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionGauss(a,n,r);break;case e.myWindow.HAMMING:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionHamming(a,n);break;case e.myWindow.HANN:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionHann(a,n);break;case e.myWindow.LANCZOS:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionLanczos(a,n);break;case e.myWindow.RECTANGULAR:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionRectangular(a,n);break;case e.myWindow.TRIANGULAR:for(n=0;n<a;n++)n>0&&(i[n]=this.applyPreEmph(i[n],i[n-1])),i[n]*=this.wFunctionTriangular(a,n)}return i},this.wFunctionBartlett=function(e,t){return 2/(e-1)*((e-1)/2-Math.abs(t-(e-1)/2))},this.wFunctionBartlettHann=function(t,n){return.62-.48*Math.abs(n/(t-1)-.5)-.38*Math.cos(e.TWO_PI*n/(t-1))},this.wFunctionBlackman=function(t,n,r){var i=r/2;return(1-r)/2-.5*Math.cos(e.TWO_PI*n/(t-1))+i*Math.cos(4*e.PI*n/(t-1))},this.wFunctionCosine=function(t,n){return Math.cos(e.PI*n/(t-1)-e.PI/2)},this.wFunctionGauss=function(e,t,n){return Math.pow(Math.E,-.5*Math.pow((t-(e-1)/2)/(n*(e-1)/2),2))},this.wFunctionHamming=function(t,n){return.54-.46*Math.cos(e.TWO_PI*n/(t-1))},this.wFunctionHann=function(t,n){return.5*(1-Math.cos(e.TWO_PI*n/(t-1)))},this.wFunctionLanczos=function(t,n){var r=2*n/(t-1)-1;return Math.sin(e.PI*r)/(e.PI*r)},this.wFunctionRectangular=function(){return 1},this.wFunctionTriangular=function(e,t){return 2/e*(e/2-Math.abs(t-(e-1)/2))},this.applyPreEmph=function(t,n){return t-e.preEmphasisFilterFactor*n},this.fft=function(n,r){var a,o,s,l,c,u,h,p,f,d;for(o=0,c=i/2,a=1;a<i-1;a++){for(l=c;o>=l;)o-=l,l/=2;a<(o+=l)&&(f=n[a],n[a]=n[o],n[o]=f,f=r[a],r[a]=r[o],r[o]=f)}for(l=0,c=1,a=0;a<t;a++)for(l=c,c+=c,u=0,o=0;o<l;o++)for(h=e.cos[u],p=e.sin[u],u+=1<<t-a-1,s=o;s<i;s+=c)f=h*n[s+l]-p*r[s+l],d=p*n[s+l]+h*r[s+l],n[s+l]=n[s]-f,r[s+l]=r[s]-d,n[s]=n[s]+f,r[s]=r[s]+d}},e.convertToHeatmap=function(e,t,n,r){var i=r.length-1,a=(n-e)/(t-e)*i,o=Math.floor(a),s=Math.min.apply(null,[Math.floor(a)+1,i]),l=r[o],c=r[s],u=a-o;return{r:Math.floor(l[0]+u*(c[0]-l[0])),g:Math.floor(l[1]+u*(c[1]-l[1])),b:Math.floor(l[2]+u*(c[2]-l[2]))}},e.drawVerticalLineOfSpectogram=function(t){var n,r,i=e.pixelHeight,a=2*Math.pow(e.paint[t][1],2)/e.N,o=10*e.log10(a/e.maxPsd),s=(o+e.dynRangeInDB)/e.dynRangeInDB;s>1?s=1:s<0&&(s=0);for(var l=0;l<e.paint[t].length;l++){var c=s;a=2*Math.pow(e.paint[t][l],2)/e.N,(s=((o=10*e.log10(a/e.maxPsd))+e.dynRangeInDB)/e.dynRangeInDB)>1&&(s=1),s<0&&(s=0);var u=s;if(e.pixelHeight>=1)for(var h=0;h<e.pixelHeight;h++){var p=c+(u-c)/i*h;if(n=e.invert?Math.round(255*p):255-Math.round(255*p),r=4*(Math.floor(t)+Math.floor(e.imgHeight-(e.pixelHeight*(l-2)+h))*e.imgWidth),e.drawHeatMapColors)if(isNaN(n))e.resultImgArr[r+0]=n,e.resultImgArr[r+1]=n,e.resultImgArr[r+2]=n,e.resultImgArr[r+3]=e.transparency;else{var f=e.convertToHeatmap(0,255,n,e.heatMapColorAnchors);e.resultImgArr[r+0]=f.r,e.resultImgArr[r+1]=f.g,e.resultImgArr[r+2]=f.b,e.resultImgArr[r+3]=e.transparency}else e.resultImgArr[r+0]=n,e.resultImgArr[r+1]=n,e.resultImgArr[r+2]=n,e.resultImgArr[r+3]=e.transparency}else n=255-Math.round(255*u),r=4*(Math.floor(t)+Math.floor(e.imgHeight-e.pixelHeight*(l-2))*e.imgWidth),e.resultImgArr[r+0]=n,e.resultImgArr[r+1]=n,e.resultImgArr[r+2]=n,e.resultImgArr[r+3]=e.transparency}},e.calcMagnitudeSpectrum=function(t,n){for(var r=new Float32Array(e.N),i=new Float32Array(e.N),a=new Float32Array(e.ceilingFreqFftIdx-e.floorFreqFftIdx),o=0;o<n;o++)i[o]=e.audioBuffer[t+o];e.myFFT.applyWindowFuncAndPreemph(e.wFunction,e.internalalpha,i,n),e.myFFT.fft(i,r);for(var s=0;s<=e.ceilingFreqFftIdx-e.floorFreqFftIdx;s++)a[s]=e.magnitude(i[s+e.floorFreqFftIdx],r[s+e.floorFreqFftIdx]),e.totalMax<a[s]&&(e.totalMax=a[s]);return a},e.renderSpectrogram=function(){if(!e.executed){e.executed=!0;var t=e.sampleRate*e.windowSizeInSecs;e.myFFT=new e.FFT,e.paint=new Array(e.imgWidth),e.HzStep=e.sampleRate/2/(e.N/2),e.ceilingFreqFftIdx=Math.ceil(e.upperFreq/e.HzStep),e.floorFreqFftIdx=Math.floor(e.lowerFreq/e.HzStep),e.pixelHeight=e.imgHeight/(e.ceilingFreqFftIdx-e.floorFreqFftIdx-2),"undefined"==typeof Uint8ClampedArray&&(Uint8ClampedArray=Uint8Array),e.resultImgArr=new Uint8ClampedArray(Math.ceil(e.imgWidth*e.imgHeight*4));for(var n=0;n<e.imgWidth;n++)e.paint[n]=e.calcMagnitudeSpectrum(Math.round(n*e.samplesPerPxl),t),e.maxPsd=2*Math.pow(e.totalMax,2)/e.N;for(var r=0;r<e.imgWidth;r++)e.drawVerticalLineOfSpectogram(r);e.postMessage({window:e.wFunction,samplesPerPxl:e.samplesPerPxl,pixelHeight:e.pixelHeight,pixelRatio:e.pixelRatio,width:e.imgWidth,height:e.imgHeight,img:e.resultImgArr.buffer},[e.resultImgArr.buffer]),e.myFFT=null,e.executed=!1}},e.onmessage=function(t){if(void 0!==t.data){var n=!0,r="",i=t.data;if(void 0!==i.windowSizeInSecs?e.windowSizeInSecs=i.windowSizeInSecs:(r="windowSizeInSecs",n=!1),void 0!==i.fftN?e.N=i.fftN:(r="fftN",n=!1),void 0!==i.alpha?e.internalalpha=i.alpha:(r="alpha",n=!1),void 0!==i.upperFreq?e.upperFreq=i.upperFreq:(r="upperFreq",n=!1),void 0!==i.lowerFreq?e.lowerFreq=i.lowerFreq:(r="lowerFreq",n=!1),void 0!==i.samplesPerPxl?e.samplesPerPxl=i.samplesPerPxl:(r="samplesPerPxl",n=!1),void 0!==i.window)switch(i.window){case 1:e.wFunction=e.myWindow.BARTLETT;break;case 2:e.wFunction=e.myWindow.BARTLETTHANN;break;case 3:e.wFunction=e.myWindow.BLACKMAN;break;case 4:e.wFunction=e.myWindow.COSINE;break;case 5:e.wFunction=e.myWindow.GAUSS;break;case 6:e.wFunction=e.myWindow.HAMMING;break;case 7:e.wFunction=e.myWindow.HANN;break;case 8:e.wFunction=e.myWindow.LANCZOS;break;case 9:e.wFunction=e.myWindow.RECTANGULAR;break;case 10:e.wFunction=e.myWindow.TRIANGULAR}else r="window",n=!1;void 0!==i.imgWidth?e.imgWidth=i.imgWidth:(r="imgWidth",n=!1),void 0!==i.imgHeight?e.imgHeight=i.imgHeight:(r="imgHeight",n=!1),void 0!==i.dynRangeInDB?e.dynRangeInDB=i.dynRangeInDB:(r="dynRangeInDB",n=!1),void 0!==i.pixelRatio?e.pixelRatio=i.pixelRatio:(r="pixelRatio",n=!1),void 0!==i.sampleRate?e.sampleRate=i.sampleRate:(r="sampleRate",n=!1),void 0!==i.audioBufferChannels?e.audioBufferChannels=i.audioBufferChannels:(r="audioBufferChannels",n=!1),void 0!==i.transparency?e.transparency=i.transparency:(r="transparency",n=!1),void 0!==i.audioBuffer?e.audioBuffer=i.audioBuffer:(r="audioBuffer",n=!1),void 0!==i.drawHeatMapColors?e.drawHeatMapColors=i.drawHeatMapColors:(r="drawHeatMapColors",n=!1),void 0!==i.preEmphasisFilterFactor?e.preEmphasisFilterFactor=i.preEmphasisFilterFactor:(r="preEmphasisFilterFactor",n=!1),void 0!==i.heatMapColorAnchors?e.heatMapColorAnchors=i.heatMapColorAnchors:(r="heatMapColorAnchors",n=!1),void 0!==i.invert?e.invert=i.invert:(r="invert",n=!1),n?e.renderSpectrogram():e.postMessage({status:{type:"ERROR",message:r+" is undefined"}})}else e.postMessage({status:{type:"ERROR",message:"Undefined message was sent to spectroDrawingWorker"}})}},getWorkerURL:function(){var e;try{e=new Blob([this.getWorkerScript()],{type:"application/javascript"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(e=new BlobBuilder).append(r),e=e.getBlob()}return"object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.createObjectURL(e):URL.createObjectURL(e)},kill:function(){this.worker&&this.worker.terminate(),this.url&&("object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.revokeObjectURL(this.url):URL.revokeObjectURL(this.url))},tell:function(e){this.worker&&this.worker.postMessage(e)},says:function(e){this.worker&&this.worker.addEventListener("message",(function(t){e(t.data)}))}}},,,,,,,function(e,t,n){"use strict";var r=n(9),i=n(20),a=n(12),o=n(2),s=n(15),l=n(30).KEY,c=n(4),u=n(47),h=n(59),p=n(46),f=n(8),d=n(110),v=n(218),m=n(219),g=n(81),S=n(3),w=n(7),y=n(16),b=n(22),x=n(34),k=n(39),C=n(42),$=n(115),P=n(32),E=n(60),T=n(11),_=n(41),M=P.f,A=T.f,D=$.f,L=r.Symbol,V=r.JSON,I=V&&V.stringify,O=f("_hidden"),N=f("toPrimitive"),B={}.propertyIsEnumerable,F=u("symbol-registry"),R=u("symbols"),H=u("op-symbols"),j=Object.prototype,z="function"==typeof L&&!!E.f,U=r.QObject,W=!U||!U.prototype||!U.prototype.findChild,G=a&&c((function(){return 7!=C(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=M(j,t);r&&delete j[t],A(e,t,n),r&&e!==j&&A(j,t,r)}:A,q=function(e){var t=R[e]=C(L.prototype);return t._k=e,t},Y=z&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},X=function(e,t,n){return e===j&&X(H,t,n),S(e),t=x(t,!0),S(n),i(R,t)?(n.enumerable?(i(e,O)&&e[O][t]&&(e[O][t]=!1),n=C(n,{enumerable:k(0,!1)})):(i(e,O)||A(e,O,k(1,{})),e[O][t]=!0),G(e,t,n)):A(e,t,n)},Z=function(e,t){S(e);for(var n,r=m(t=b(t)),i=0,a=r.length;a>i;)X(e,n=r[i++],t[n]);return e},K=function(e){var t=B.call(this,e=x(e,!0));return!(this===j&&i(R,e)&&!i(H,e))&&(!(t||!i(this,e)||!i(R,e)||i(this,O)&&this[O][e])||t)},J=function(e,t){if(e=b(e),t=x(t,!0),e!==j||!i(R,t)||i(H,t)){var n=M(e,t);return!n||!i(R,t)||i(e,O)&&e[O][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=D(b(e)),r=[],a=0;n.length>a;)i(R,t=n[a++])||t==O||t==l||r.push(t);return r},ee=function(e){for(var t,n=e===j,r=D(n?H:b(e)),a=[],o=0;r.length>o;)!i(R,t=r[o++])||n&&!i(j,t)||a.push(R[t]);return a};z||(s((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call(H,n),i(this,O)&&i(this[O],e)&&(this[O][e]=!1),G(this,e,k(1,n))};return a&&W&&G(j,e,{configurable:!0,set:t}),q(e)}).prototype,"toString",(function(){return this._k})),P.f=J,T.f=X,n(50).f=$.f=Q,n(61).f=K,E.f=ee,a&&!n(58)&&s(j,"propertyIsEnumerable",K,!0),d.f=function(e){return q(f(e))}),o(o.G+o.W+o.F*!z,{Symbol:L});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var re=_(f.store),ie=0;re.length>ie;)v(re[ie++]);o(o.S+o.F*!z,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=L(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!z,"Object",{create:function(e,t){return void 0===t?C(e):Z(C(e),t)},defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var ae=c((function(){E.f(1)}));o(o.S+o.F*ae,"Object",{getOwnPropertySymbols:function(e){return E.f(y(e))}}),V&&o(o.S+o.F*(!z||c((function(){var e=L();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(w(t)||void 0!==e)&&!Y(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,I.apply(V,r)}}),L.prototype[N]||n(25)(L.prototype,N,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t,n){e.exports=!n(12)&&!n(4)((function(){return 7!=Object.defineProperty(n(109)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(7),i=n(9).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){t.f=n(8)},function(e,t,n){var r=n(20),i=n(22),a=n(112)(!1),o=n(79)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=o&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){var r=n(22),i=n(13),a=n(49);e.exports=function(e){return function(t,n,o){var s,l=r(t),c=i(l.length),u=a(o,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(11),i=n(3),a=n(41);e.exports=n(12)?Object.defineProperties:function(e,t){i(e);for(var n,o=a(t),s=o.length,l=0;s>l;)r.f(e,n=o[l++],t[n]);return e}},function(e,t,n){var r=n(9).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(22),i=n(50).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return o.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r=n(12),i=n(41),a=n(60),o=n(61),s=n(16),l=n(48),c=Object.assign;e.exports=!c||n(4)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=s(e),c=arguments.length,u=1,h=a.f,p=o.f;c>u;)for(var f,d=l(arguments[u++]),v=h?i(d).concat(h(d)):i(d),m=v.length,g=0;m>g;)f=v[g++],r&&!p.call(d,f)||(n[f]=d[f]);return n}:c},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(29),i=n(7),a=n(239),o=[].slice,s={},l=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),s=function(){var r=n.concat(o.call(arguments));return this instanceof s?l(t,r.length,r):a(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,n){var r=n(9).parseInt,i=n(63).trim,a=n(84),o=/^[-+]?0[xX]/;e.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(o.test(n)?16:10))}:r},function(e,t,n){var r=n(9).parseFloat,i=n(63).trim;e.exports=1/r(n(84)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(35);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var r=n(36),i=n(31);e.exports=function(e){var t=String(i(this)),n="",a=r(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,n){var r=n(7),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(42),i=n(39),a=n(59),o={};n(25)(o,n(8)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(3),i=n(13),a=n(93),o=n(65);n(66)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=r(e),c=String(this);if(!l.global)return o(l,c);var u=l.unicode;l.lastIndex=0;for(var h,p=[],f=0;null!==(h=o(l,c));){var d=String(h[0]);p[f]=d,""===d&&(l.lastIndex=a(c,i(l.lastIndex),u)),f++}return 0===f?null:p}]}))},function(e,t,n){"use strict";var r=n(94);n(2)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){"use strict";var r=n(3),i=n(16),a=n(13),o=n(36),s=n(93),l=n(65),c=Math.max,u=Math.min,h=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;n(66)("replace",2,(function(e,t,n,d){return[function(r,i){var a=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},function(e,t){var i=d(n,e,this,t);if(i.done)return i.value;var h=r(e),p=String(this),f="function"==typeof t;f||(t=String(t));var m=h.global;if(m){var g=h.unicode;h.lastIndex=0}for(var S=[];;){var w=l(h,p);if(null===w)break;if(S.push(w),!m)break;""===String(w[0])&&(h.lastIndex=s(p,a(h.lastIndex),g))}for(var y,b="",x=0,k=0;k<S.length;k++){w=S[k];for(var C=String(w[0]),$=c(u(o(w.index),p.length),0),P=[],E=1;E<w.length;E++)P.push(void 0===(y=w[E])?y:String(y));var T=w.groups;if(f){var _=[C].concat(P,$,p);void 0!==T&&_.push(T);var M=String(t.apply(void 0,_))}else M=v(C,p,$,P,T,t);$>=x&&(b+=p.slice(x,$)+M,x=$+C.length)}return b+p.slice(x)}];function v(e,t,r,a,o,s){var l=r+e.length,c=a.length,u=f;return void 0!==o&&(o=i(o),u=p),n.call(s,u,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":s=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>c){var p=h(u/10);return 0===p?n:p<=c?void 0===a[p-1]?i.charAt(1):a[p-1]+i.charAt(1):n}s=a[u-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(3),i=n(117),a=n(65);n(66)("search",1,(function(e,t,n,o){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=o(n,e,this);if(t.done)return t.value;var s=r(e),l=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var u=a(s,l);return i(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]}))},function(e,t,n){"use strict";var r=n(91),i=n(3),a=n(300),o=n(93),s=n(13),l=n(65),c=n(94),u=n(4),h=Math.min,p=[].push,f="length",d=!u((function(){RegExp(4294967295,"y")}));n(66)("split",2,(function(e,t,n,u){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[f]||2!="ab".split(/(?:ab)*/)[f]||4!=".".split(/(.?)(.?)/)[f]||".".split(/()()/)[f]>1||"".split(/.?/)[f]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var a,o,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,d=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,u+"g");(a=c.call(v,i))&&!((o=v.lastIndex)>h&&(l.push(i.slice(h,a.index)),a[f]>1&&a.index<i[f]&&p.apply(l,a.slice(1)),s=a[0][f],h=o,l[f]>=d));)v.lastIndex===a.index&&v.lastIndex++;return h===i[f]?!s&&v.test("")||l.push(""):l.push(i.slice(h)),l[f]>d?l.slice(0,d):l}:"0".split(void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,i,r):v.call(String(i),n,r)},function(e,t){var r=u(v,e,this,t,v!==n);if(r.done)return r.value;var c=i(e),p=String(this),f=a(c,RegExp),m=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(d?"y":"g"),S=new f(d?c:"^(?:"+c.source+")",g),w=void 0===t?4294967295:t>>>0;if(0===w)return[];if(0===p.length)return null===l(S,p)?[p]:[];for(var y=0,b=0,x=[];b<p.length;){S.lastIndex=d?b:0;var k,C=l(S,d?p:p.slice(b));if(null===C||(k=h(s(S.lastIndex+(d?0:b)),p.length))===y)b=o(p,b,m);else{if(x.push(p.slice(y,b)),x.length===w)return x;for(var $=1;$<=C.length-1;$++)if(x.push(C[$]),x.length===w)return x;b=y=k}}return x.push(p.slice(y)),x}]}))},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t,n){var r=n(51),i=n(8)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(39);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(82),i=n(8)("iterator"),a=n(51);e.exports=n(10).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[r(e)]}},function(e,t,n){var r=n(8)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:n=!0}},a[r]=function(){return o},e(a)}catch(e){}return n}},function(e,t,n){var r=n(29),i=n(16),a=n(48),o=n(13);e.exports=function(e,t,n,s,l){r(t);var c=i(e),u=a(c),h=o(c.length),p=l?h-1:0,f=l?-1:1;if(n<2)for(;;){if(p in u){s=u[p],p+=f;break}if(p+=f,l?p<0:h<=p)throw TypeError("Reduce of empty array with no initial value")}for(;l?p>=0:h>p;p+=f)p in u&&(s=t(s,u[p],p,c));return s}},function(e,t,n){"use strict";var r=n(52),i=n(138),a=n(51),o=n(22);e.exports=n(89)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(12)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(67)})},function(e,t,n){for(var r=n(137),i=n(41),a=n(15),o=n(9),s=n(25),l=n(51),c=n(8),u=c("iterator"),h=c("toStringTag"),p=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(f),v=0;v<d.length;v++){var m,g=d[v],S=f[g],w=o[g],y=w&&w.prototype;if(y&&(y[u]||s(y,u,p),y[h]||s(y,h,g),l[g]=p,S))for(m in r)y[m]||a(y,m,r[m],!0)}},function(e,t,n){"use strict";var r=n(142),i=n(43);e.exports=n(98)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(11).f,i=n(42),a=n(96),o=n(40),s=n(97),l=n(68),c=n(89),u=n(138),h=n(95),p=n(12),f=n(30).fastKey,d=n(43),v=p?"_s":"size",m=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,r){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=r&&l(r,n,e[c],e)}));return a(u.prototype,{clear:function(){for(var e=d(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=d(this,t),r=m(n,e);if(r){var i=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=i),i&&(i.p=a),n._f==r&&(n._f=i),n._l==r&&(n._l=a),n[v]--}return!!r},forEach:function(e){d(this,t);for(var n,r=o(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(d(this,t),e)}}),p&&r(u.prototype,"size",{get:function(){return d(this,t)[v]}}),u},def:function(e,t,n){var r,i,a=m(e,t);return a?a.v=n:(e._l=a={i:i=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[v]++,"F"!==i&&(e._i[i]=a)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=d(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){"use strict";var r=n(142),i=n(43);e.exports=n(98)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e){e.exports=JSON.parse('{"a":"1.6.0"}')},function(e,t,n){"use strict";var r=n(24);var i=n(54),a=n(44);var o=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function s(e){return e}function l(e){return 0===e.length?s:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var c=n(14),u=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o=this.operator,s=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(a.a)}(e,t,n);if(o?s.add(o.call(s,this.source)):s.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,i=t.destination,a=t.isStopped;if(n||a)return!1;e=i&&i instanceof r.a?i:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=h(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:l(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=h(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function h(e){if(e||(e=c.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var p=n(70),f=n(37),d=n(18);var v=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new m(e,this.project,this.thisArg))},e}(),m=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return d.a(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(r.a);n.d(t,"a",(function(){return g}));function g(e,t,n,r){return Object(f.a)(n)&&(r=n,n=void 0),r?g(e,t,n).pipe((i=function(e){return Object(p.a)(e)?r.apply(void 0,e):r(e)},function(e){if("function"!=typeof i)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new v(i,a))})):new u((function(r){!function e(t,n,r,i,a){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,a),o=function(){return s.removeEventListener(n,r,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var l=t;t.on(n,r),o=function(){return l.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,r),o=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,h=t.length;u<h;u++)e(t[u],n,r,i,a)}i.add(o)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}));var i,a}},function(e,t,n){"use strict";var r=n(18),i=n(24),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.a(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return r.a(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(71).a)),o=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),s=new(function(e){function t(n,r){void 0===r&&(r=o.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.a(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(o))(a);function l(e,t){return void 0===t&&(t=s),function(n){return n.lift(new c(e,t))}}n.d(t,"a",(function(){return l}));var c=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.dueTime,this.scheduler))},e}(),u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.a(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(h,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(i.a);function h(e){e.debouncedNext()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(e){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";var n={objectMaxDepth:5,urlErrorParamsEnabled:!0};function r(e){if(!R(e))return n;F(e.objectMaxDepth)&&(n.objectMaxDepth=i(e.objectMaxDepth)?e.objectMaxDepth:NaN),F(e.urlErrorParamsEnabled)&&K(e.urlErrorParamsEnabled)&&(n.urlErrorParamsEnabled=e.urlErrorParamsEnabled)}function i(e){return z(e)&&e>0}function a(e,t){t=t||Error;var r="https://errors.angularjs.org/1.8.0/",i=r.replace(".","\\.")+"[\\s\\S]*",a=new RegExp(i,"g");return function(){var i,o,s=arguments[0],l=arguments[1],c="["+(e?e+":":"")+s+"] ",u=pe(arguments,2).map((function(e){return Ue(e,n.objectMaxDepth)}));if(c+=l.replace(/\{\d+\}/g,(function(e){var t=+e.slice(1,-1);return t<u.length?u[t].replace(a,""):e})),c+="\n"+r+(e?e+"/":"")+s,n.urlErrorParamsEnabled)for(o=0,i="?";o<u.length;o++,i="&")c+=i+"p"+o+"="+encodeURIComponent(u[o]);return new t(c)}}var o,s,l,c,u=/^\/(.+)\/([a-z]*)$/,h=Object.prototype.hasOwnProperty,p=function(e){return j(e)?e.toLowerCase():e},f=function(e){return j(e)?e.toUpperCase():e},d=[].slice,v=[].splice,m=[].push,g=Object.prototype.toString,S=Object.getPrototypeOf,w=a("ng"),y=t.angular||(t.angular={}),b=0;function x(e){if(null==e||X(e))return!1;if(W(e)||j(e)||s&&e instanceof s)return!0;var t="length"in Object(e)&&e.length;return z(t)&&(t>=0&&t-1 in e||"function"==typeof e.item)}function k(e,t,n){var r,i;if(e)if(q(e))for(r in e)"prototype"!==r&&"length"!==r&&"name"!==r&&e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else if(W(e)||x(e)){var a="object"!=typeof e;for(r=0,i=e.length;r<i;r++)(a||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==k)e.forEach(t,n,e);else if(H(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)h.call(e,r)&&t.call(n,e[r],r,e);return e}function C(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function $(e){return function(t,n){e(n,t)}}function P(){return++b}function E(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function T(e,t,n){for(var r=e.$$hashKey,i=0,a=t.length;i<a;++i){var o=t[i];if(R(o)||q(o))for(var s=Object.keys(o),l=0,c=s.length;l<c;l++){var u=s[l],h=o[u];n&&R(h)?U(h)?e[u]=new Date(h.valueOf()):Y(h)?e[u]=new RegExp(h):h.nodeName?e[u]=h.cloneNode(!0):ne(h)?e[u]=h.clone():"__proto__"!==u&&(R(e[u])||(e[u]=W(h)?[]:{}),T(e[u],[h],!0)):e[u]=h}}return E(e,r),e}function _(e){return T(e,d.call(arguments,1),!1)}function M(e){return T(e,d.call(arguments,1),!0)}function A(e){return parseInt(e,10)}o=t.document.documentMode;var D=Number.isNaN||function(e){return e!=e};function L(e,t){return _(Object.create(e),t)}function V(){}function I(e){return e}function O(e){return function(){return e}}function N(e){return q(e.toString)&&e.toString!==g}function B(e){return void 0===e}function F(e){return void 0!==e}function R(e){return null!==e&&"object"==typeof e}function H(e){return null!==e&&"object"==typeof e&&!S(e)}function j(e){return"string"==typeof e}function z(e){return"number"==typeof e}function U(e){return"[object Date]"===g.call(e)}function W(e){return Array.isArray(e)||e instanceof Array}function G(e){switch(g.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function q(e){return"function"==typeof e}function Y(e){return"[object RegExp]"===g.call(e)}function X(e){return e&&e.window===e}function Z(e){return e&&e.$evalAsync&&e.$watch}function K(e){return"boolean"==typeof e}function J(e){return e&&q(e.then)}V.$inject=[],I.$inject=[];var Q=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var ee=function(e){return j(e)?e.trim():e},te=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function ne(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function re(e){return p(e.nodeName||e[0]&&e[0].nodeName)}function ie(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function ae(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function oe(e,t,n){var r,a,o=[],s=[];if(n=i(n)?n:NaN,t){if((a=t)&&z(a.length)&&Q.test(g.call(a))||(r=t,"[object ArrayBuffer]"===g.call(r)))throw w("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw w("cpi","Can't copy! Source and destination are identical.");return W(t)?t.length=0:k(t,(function(e,n){"$$hashKey"!==n&&delete t[n]})),o.push(e),s.push(t),l(e,t,n)}return c(e,n);function l(e,t,n){if(--n<0)return"...";var r,i=t.$$hashKey;if(W(e))for(var a=0,o=e.length;a<o;a++)t.push(c(e[a],n));else if(H(e))for(r in e)t[r]=c(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=c(e[r],n));else for(r in e)h.call(e,r)&&(t[r]=c(e[r],n));return E(t,i),t}function c(e,t){if(!R(e))return e;var n=o.indexOf(e);if(-1!==n)return s[n];if(X(e)||Z(e))throw w("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(e){switch(g.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(c(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(q(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===i&&(i=W(e)?[]:Object.create(S(e)),r=!0),o.push(e),s.push(i),r?l(e,i,t):i}}function se(e,t){return e===t||e!=e&&t!=t}function le(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,i,a=typeof e;if(a===typeof t&&"object"===a){if(!W(e)){if(U(e))return!!U(t)&&se(e.getTime(),t.getTime());if(Y(e))return!!Y(t)&&e.toString()===t.toString();if(Z(e)||Z(t)||X(e)||X(t)||W(t)||U(t)||Y(t))return!1;for(r in i=Re(),e)if("$"!==r.charAt(0)&&!q(e[r])){if(!le(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&F(t[r])&&!q(t[r]))return!1;return!0}if(!W(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!le(e[r],t[r]))return!1;return!0}}return!1}var ce=function(){if(!F(ce.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ce.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ce.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return ce.rules},ue=function(){if(F(ue.name_))return ue.name_;var e,n,r,i,a=Pe.length;for(n=0;n<a;++n)if(r=Pe[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return ue.name_=i};function he(e,t,n){return e.concat(d.call(t,n))}function pe(e,t){return d.call(e,t||0)}function fe(e,t){var n=arguments.length>2?pe(arguments,2):[];return!q(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,he(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function de(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:X(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":Z(n)&&(r="$SCOPE"),r}function ve(e,t){if(!B(e))return z(t)||(t=t?2:null),JSON.stringify(e,de,t)}function me(e){return j(e)?JSON.parse(e):e}var ge=/:/g;function Se(e,t){e=e.replace(ge,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return D(n)?t:n}function we(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function ye(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return we(e,n*(Se(t,r)-r))}function be(e){e=s(e).clone().empty();var t=s("<div></div>").append(e).html();try{return e[0].nodeType===je?p(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(e,t){return"<"+p(t)}))}catch(e){return p(t)}}function xe(e){try{return decodeURIComponent(e)}catch(e){}}function ke(e){var t={};return k((e||"").split("&"),(function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),-1!==(n=e.indexOf("="))&&(r=e.substring(0,n),i=e.substring(n+1)),F(r=xe(r))&&(i=!F(i)||xe(i),h.call(t,r)?W(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))})),t}function Ce(e){return $e(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function $e(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var Pe=["ng-","data-ng-","ng:","x-ng-"];var Ee=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Te(e,n){var r,i,a={};if(k(Pe,(function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))})),k(Pe,(function(t){var n,a=t+"app";!r&&(n=e.querySelector("["+a.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(a))})),r){if(!Ee)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==function(e,t){var n,r,i=Pe.length;for(r=0;r<i;++r)if(n=Pe[r]+t,j(n=e.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],a)}}function _e(e,n,r){R(r)||(r={});r=_({strictDi:!1},r);var i=function(){if((e=s(e)).injector()){var i=e[0]===t.document?"document":be(e);throw w("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var a=Jt(n,r.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply((function(){t.data("$injector",r),n(t)(e)}))}]),a},a=/^NG_ENABLE_DEBUG_INFO!/,o=/^NG_DEFER_BOOTSTRAP!/;if(t&&a.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!o.test(t.name))return i();t.name=t.name.replace(o,""),y.resumeBootstrap=function(e){return k(e,(function(e){n.push(e)})),i()},q(y.resumeDeferredBootstrap)&&y.resumeDeferredBootstrap()}function Me(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Ae(e){var t=y.element(e).injector();if(!t)throw w("test","no injector found for element argument to getTestability");return t.get("$$testability")}var De=/[A-Z]/g;function Le(e,t){return t=t||"_",e.replace(De,(function(e,n){return(n?t:"")+e.toLowerCase()}))}var Ve=!1;function Ie(){ft.legacyXHTMLReplacement=!0}function Oe(e,t,n){if(!e)throw w("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function Ne(e,t,n){return n&&W(e)&&(e=e[e.length-1]),Oe(q(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function Be(e,t){if("hasOwnProperty"===e)throw w("badname","hasOwnProperty is not a valid {0} name",t)}function Fe(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=s(d.call(e,0,i))),t.push(n));return t||e}function Re(){return Object.create(null)}function He(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!N(e)||W(e)||U(e)?ve(e):e.toString()}return e}var je=3;function ze(e,t){if(W(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(R(e))for(var i in t=t||{},e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i]);return t||e}function Ue(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):B(e)?"undefined":"string"!=typeof e?function(e,t){var n=[];return i(t)&&(e=y.copy(e,null,t)),JSON.stringify(e,(function(e,t){if(R(t=de(e,t))){if(n.indexOf(t)>=0)return"...";n.push(t)}return t}))}(e,t):e}var We={full:"1.8.0",major:1,minor:8,dot:0,codeName:"nested-vaccination"};ft.expando="ng339";var Ge=ft.cache={},qe=1;ft._data=function(e){return this.cache[e[this.expando]]||{}};var Ye=/-([a-z])/g,Xe=/^-ms-/,Ze={mouseleave:"mouseout",mouseenter:"mouseover"},Ke=a("jqLite");function Je(e,t){return t.toUpperCase()}function Qe(e){return e.replace(Ye,Je)}var et=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,tt=/<|&#?\w+;/,nt=/<([\w:-]+)/,rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,it={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};it.tbody=it.tfoot=it.colgroup=it.caption=it.thead,it.th=it.td;var at={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var ot in it){var st=it[ot],lt=st.slice().reverse();at[ot]=[lt.length,"<"+lt.join("><")+">","</"+st.join("></")+">"]}function ct(e){return!tt.test(e)}function ut(e){var t=e.nodeType;return 1===t||!t||9===t}function ht(e,n){var r,i,a,s,l,c=n.createDocumentFragment(),u=[];if(ct(e))u.push(n.createTextNode(e));else{if(r=c.appendChild(n.createElement("div")),i=(nt.exec(e)||["",""])[1].toLowerCase(),s=ft.legacyXHTMLReplacement?e.replace(rt,"<$1></$2>"):e,o<10)for(a=at[i]||at._default,r.innerHTML=a[1]+s+a[2],l=a[0];l--;)r=r.firstChild;else{for(l=(a=it[i]||[]).length;--l>-1;)r.appendChild(t.document.createElement(a[l])),r=r.firstChild;r.innerHTML=s}u=he(u,r.childNodes),(r=c.firstChild).textContent=""}return c.textContent="",c.innerHTML="",k(u,(function(e){c.appendChild(e)})),c}at.optgroup=at.option;var pt=t.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function ft(e){if(e instanceof ft)return e;var n,r,i,a;if(j(e)&&(e=ee(e),n=!0),!(this instanceof ft)){if(n&&"<"!==e.charAt(0))throw Ke("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ft(e)}n?$t(this,(r=e,i=i||t.document,(a=et.exec(r))?[i.createElement(a[1])]:(a=ht(r,i))?a.childNodes:[])):q(e)?Mt(e):$t(this,e)}function dt(e){return e.cloneNode(!0)}function vt(e,t){!t&&ut(e)&&s.cleanData([e]),e.querySelectorAll&&s.cleanData(e.querySelectorAll("*"))}function mt(e){var t;for(t in e)return!1;return!0}function gt(e){var t=e.ng339,n=t&&Ge[t],r=n&&n.events,i=n&&n.data;i&&!mt(i)||r&&!mt(r)||(delete Ge[t],e.ng339=void 0)}function St(e,t,n,r){if(F(r))throw Ke("offargs","jqLite#off() does not support the `selector` argument");var i=yt(e),a=i&&i.events,o=i&&i.handle;if(o){if(t){var s=function(t){var r=a[t];F(n)&&ae(r||[],n),F(n)&&r&&r.length>0||(e.removeEventListener(t,o),delete a[t])};k(t.split(" "),(function(e){s(e),Ze[e]&&s(Ze[e])}))}else for(t in a)"$destroy"!==t&&e.removeEventListener(t,o),delete a[t];gt(e)}}function wt(e,t){var n=e.ng339,r=n&&Ge[n];r&&(t?delete r.data[t]:r.data={},gt(e))}function yt(e,t){var n=e.ng339,r=n&&Ge[n];return t&&!r&&(e.ng339=n=++qe,r=Ge[n]={events:{},data:{},handle:void 0}),r}function bt(e,t,n){if(ut(e)){var r,i=F(n),a=!i&&t&&!R(t),o=!t,s=yt(e,!a),l=s&&s.data;if(i)l[Qe(t)]=n;else{if(o)return l;if(a)return l&&l[Qe(t)];for(r in t)l[Qe(r)]=t[r]}}}function xt(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function kt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;k(t.split(" "),(function(e){e=ee(e),r=r.replace(" "+e+" "," ")})),r!==n&&e.setAttribute("class",ee(r))}}function Ct(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;k(t.split(" "),(function(e){e=ee(e),-1===r.indexOf(" "+e+" ")&&(r+=e+" ")})),r!==n&&e.setAttribute("class",ee(r))}}function $t(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Pt(e,t){return Et(e,"$"+(t||"ngController")+"Controller")}function Et(e,t,n){9===e.nodeType&&(e=e.documentElement);for(var r=W(t)?t:[t];e;){for(var i=0,a=r.length;i<a;i++)if(F(n=s.data(e,r[i])))return n;e=e.parentNode||11===e.nodeType&&e.host}}function Tt(e){for(vt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function _t(e,t){t||vt(e);var n=e.parentNode;n&&n.removeChild(e)}function Mt(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var At=ft.prototype={ready:Mt,toString:function(){var e=[];return k(this,(function(t){e.push(""+t)})),"["+e.join(", ")+"]"},eq:function(e){return s(e>=0?this[e]:this[this.length+e])},length:0,push:m,sort:[].sort,splice:[].splice},Dt={};k("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(e){Dt[p(e)]=e}));var Lt={};k("input,select,option,textarea,button,form,details".split(","),(function(e){Lt[e]=!0}));var Vt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function It(e,t){var n=Dt[t.toLowerCase()];return n&&Lt[re(e)]&&n}function Ot(e,t,n){n.call(e,t)}function Nt(e,t,n){var r=t.relatedTarget;r&&(r===e||pt.call(e,r))||n.call(e,t)}function Bt(){this.$get=function(){return _(ft,{hasClass:function(e,t){return e.attr&&(e=e[0]),xt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Ct(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),kt(e,t)}})}}function Ft(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||P)():r+":"+e}k({data:bt,removeData:wt,hasData:function(e){for(var t in Ge[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)wt(e[t]),St(e[t])}},(function(e,t){ft[t]=e})),k({data:bt,inheritedData:Et,scope:function(e){return s.data(e,"$scope")||Et(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return s.data(e,"$isolateScope")||s.data(e,"$isolateScopeNoTemplate")},controller:Pt,injector:function(e){return Et(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:xt,css:function(e,t,n){if(t=function(e){return Qe(e.replace(Xe,"ms-"))}(t),!F(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var r,i=e.nodeType;if(i!==je&&2!==i&&8!==i&&e.getAttribute){var a=p(t),o=Dt[a];if(!F(n))return r=e.getAttribute(t),o&&null!==r&&(r=a),null===r?void 0:r;null===n||!1===n&&o?e.removeAttribute(t):e.setAttribute(t,o?a:n)}},prop:function(e,t,n){if(!F(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(B(t)){var n=e.nodeType;return 1===n||n===je?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(B(t)){if(e.multiple&&"select"===re(e)){var n=[];return k(e.options,(function(e){e.selected&&n.push(e.value||e.text)})),n}return e.value}e.value=t},html:function(e,t){if(B(t))return e.innerHTML;vt(e,!0),e.innerHTML=t},empty:Tt},(function(e,t){ft.prototype[t]=function(t,n){var r,i,a=this.length;if(e!==Tt&&B(2===e.length&&e!==xt&&e!==Pt?t:n)){if(R(t)){for(r=0;r<a;r++)if(e===bt)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var o=e.$dv,s=B(o)?Math.min(a,1):a,l=0;l<s;l++){var c=e(this[l],t,n);o=o?o+c:c}return o}for(r=0;r<a;r++)e(this[r],t,n);return this}})),k({removeData:wt,on:function(e,t,n,r){if(F(r))throw Ke("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ut(e)){var i=yt(e,!0),a=i.events,o=i.handle;o||(o=i.handle=function(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(B(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Ot;a>1&&(i=ze(i));for(var l=0;l<a;l++)n.isImmediatePropagationStopped()||s(e,n,i[l])}};return n.elem=e,n}(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length,c=function(t,r,i){var s=a[t];s||((s=a[t]=[]).specialHandlerWrapper=r,"$destroy"===t||i||e.addEventListener(t,o)),s.push(n)};l--;)t=s[l],Ze[t]?(c(Ze[t],Nt),c(t,void 0,!0)):c(t)}},off:St,one:function(e,t,n){(e=s(e)).on(t,(function r(){e.off(t,n),e.off(t,r)})),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;vt(e),k(new ft(t),(function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t}))},children:function(e){var t=[];return k(e.childNodes,(function(e){1===e.nodeType&&t.push(e)})),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(1===n||11===n)for(var r=0,i=(t=new ft(t)).length;r<i;r++){var a=t[r];e.appendChild(a)}},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;k(new ft(t),(function(t){e.insertBefore(t,n)}))}},wrap:function(e,t){var n,r,i;n=e,r=s(t).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:_t,detach:function(e){_t(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r)for(var i=0,a=(t=new ft(t)).length;i<a;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:Ct,removeClass:kt,toggleClass:function(e,t,n){t&&k(t.split(" "),(function(t){var r=n;B(r)&&(r=!xt(e,t)),(r?Ct:kt)(e,t)}))},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:dt,triggerHandler:function(e,t,n){var r,i,a,o=t.type||t,s=yt(e),l=s&&s.events,c=l&&l[o];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:V,type:o,target:e},t.type&&(r=_(r,t)),i=ze(c),a=n?[r].concat(n):[r],k(i,(function(t){r.isImmediatePropagationStopped()||t.apply(e,a)})))}},(function(e,t){ft.prototype[t]=function(t,n,r){for(var i,a=0,o=this.length;a<o;a++)B(i)?F(i=e(this[a],t,n,r))&&(i=s(i)):$t(i,e(this[a],t,n,r));return F(i)?i:this}})),ft.prototype.bind=ft.prototype.on,ft.prototype.unbind=ft.prototype.off;var Rt=Object.create(null);function Ht(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ht.prototype={_idx:function(e){return e!==this._lastKey&&(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return D(e)?Rt:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},has:function(e){return e=this._transformKey(e),-1!==this._idx(e)},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var jt=Ht,zt=[function(){this.$get=[function(){return jt}]}],Ut=/^([^(]+?)=>/,Wt=/^[^(]*\(\s*([^)]*)\)/m,Gt=/,/,qt=/^\s*(_?)(\S+?)\1\s*$/,Yt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Xt=a("$injector");function Zt(e){return Function.prototype.toString.call(e)}function Kt(e){var t=Zt(e).replace(Yt,"");return t.match(Ut)||t.match(Wt)}function Jt(e,t){t=!0===t;var n={},r=[],i=new jt,a={$provide:{provider:f(d),factory:f(m),service:f((function(e,t){return m(e,["$injector",function(e){return e.instantiate(t)}])})),value:f((function(e,t){return m(e,O(t),!1)})),constant:f((function(e,t){Be(e,"constant"),a[e]=t,l[e]=t})),decorator:function(e,t){var n=s.get(e+"Provider"),r=n.$get;n.$get=function(){var e=h.invoke(r,n);return h.invoke(t,null,{$delegate:e})}}}},s=a.$injector=S(a,(function(e,t){throw y.isString(t)&&r.push(t),Xt("unpr","Unknown provider: {0}",r.join(" <- "))})),l={},u=S(l,(function(e,t){var n=s.get(e+"Provider",t);return h.invoke(n.$get,n,void 0,e)})),h=u;a.$injectorProvider={$get:O(u)},h.modules=s.modules=Re();var p=g(e);return(h=u.get("$injector")).strictDi=t,k(p,(function(e){e&&h.invoke(e)})),h.loadNewModules=function(e){k(g(e),(function(e){e&&h.invoke(e)}))},h;function f(e){return function(t,n){if(!R(t))return e(t,n);k(t,$(e))}}function d(e,t){if(Be(e,"service"),(q(t)||W(t))&&(t=s.instantiate(t)),!t.$get)throw Xt("pget","Provider '{0}' must define $get factory method.",e);return a[e+"Provider"]=t}function v(e,t){return function(){var n=h.invoke(t,this);if(B(n))throw Xt("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function m(e,t,n){return d(e,{$get:!1!==n?v(e,t):t})}function g(e){Oe(B(e)||W(e),"modulesToLoad","not an array");var t,n=[];return k(e,(function(e){if(!i.get(e)){i.set(e,!0);try{j(e)?(t=c(e),h.modules[e]=t,n=n.concat(g(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):q(e)||W(e)?n.push(s.invoke(e)):Ne(e,"module")}catch(t){throw W(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Xt("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=s.get(r[0]);i[r[1]].apply(i,r[2])}}})),n}function S(e,i){function s(t,a){if(e.hasOwnProperty(t)){if(e[t]===n)throw Xt("cdep","Circular dependency found: {0}",t+" <- "+r.join(" <- "));return e[t]}try{return r.unshift(t),e[t]=n,e[t]=i(t,a),e[t]}catch(r){throw e[t]===n&&delete e[t],r}finally{r.shift()}}function l(e,n,r){for(var i=[],a=Jt.$$annotate(e,t,r),o=0,l=a.length;o<l;o++){var c=a[o];if("string"!=typeof c)throw Xt("itkn","Incorrect injection token! Expected service name as string, got {0}",c);i.push(n&&n.hasOwnProperty(c)?n[c]:s(c,r))}return i}return{invoke:function(e,t,n,r){"string"==typeof n&&(r=n,n=null);var i=l(e,n,r);return W(e)&&(e=e[e.length-1]),function(e){if(o||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return K(t)||(t=e.$$ngIsClass=/^class\b/.test(Zt(e))),t}(e)?(i.unshift(null),new(Function.prototype.bind.apply(e,i))):e.apply(t,i)},instantiate:function(e,t,n){var r=W(e)?e[e.length-1]:e,i=l(e,t,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:s,annotate:Jt.$$annotate,has:function(t){return a.hasOwnProperty(t+"Provider")||e.hasOwnProperty(t)}}}}function Qt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var a=n.document;function o(e){if(e){e.scrollIntoView();var t=function(){var e=l.yOffset;if(q(e))e=e();else if(ne(e)){var t=e[0];e="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else z(e)||(e=0);return e}();if(t){var r=e.getBoundingClientRect().top;n.scrollBy(0,r-t)}}else n.scrollTo(0,0)}function l(e){var t,n,i;(e=j(e)?e:z(e)?e.toString():r.hash())?(t=a.getElementById(e))?o(t):(n=a.getElementsByName(e),i=null,Array.prototype.some.call(n,(function(e){if("a"===re(e))return i=e,!0})),(t=i)?o(t):"top"===e&&o(null)):o(null)}return e&&i.$watch((function(){return r.hash()}),(function(e,n){var r,a;e===n&&""===e||(r=function(){i.$evalAsync(l)},"complete"===(a=a||t).document.readyState?a.setTimeout(r):s(a).on("load",r))})),l}]}Jt.$$annotate=function(e,t,n){var r,i;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw j(n)&&n||(n=e.name||function(e){var t=Kt(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(e)),Xt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);k(Kt(e)[1].split(Gt),(function(e){e.replace(qt,(function(e,t,n){r.push(n)}))}))}e.$inject=r}}else W(e)?(Ne(e[i=e.length-1],"fn"),r=e.slice(0,i)):Ne(e,"fn",!0);return r};var en=a("$animate");function tn(e,t){return e||t?e?t?(W(e)&&(e=e.join(" ")),W(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function nn(e){return R(e)?e:{}}var rn=function(){this.$get=V},an=function(){var e=new jt,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:V,on:V,off:V,pin:V,push:function(o,s,l,c){c&&c(),(l=l||{}).from&&o.css(l.from),l.to&&o.css(l.to),(l.addClass||l.removeClass)&&function(n,o,s){var l=e.get(n)||{},c=i(l,o,!0),u=i(l,s,!1);(c||u)&&(e.set(n,l),t.push(n),1===t.length&&r.$$postDigest(a))}(o,l.addClass,l.removeClass);var u=new n;return u.complete(),u}};function i(e,t,n){var r=!1;return t&&k(t=j(t)?t.split(" "):W(t)?t:[],(function(t){t&&(r=!0,e[t]=n)})),r}function a(){k(t,(function(t){var n=e.get(t);if(n){var r=function(e){j(e)&&(e=e.split(" "));var t=Re();return k(e,(function(e){e.length&&(t[e]=!0)})),t}(t.attr("class")),i="",a="";k(n,(function(e,t){e!==!!r[t]&&(e?i+=(i.length?" ":"")+t:a+=(a.length?" ":"")+t)})),k(t,(function(e){i&&Ct(e,i),a&&kt(e,a)})),e.delete(t)}})),t.length=0}}]},on=["$provide",function(e){var t=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw en("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.customFilter=function(e){return 1===arguments.length&&(r=q(e)?e:null),r},this.classNameFilter=function(e){if(1===arguments.length&&(n=e instanceof RegExp?e:null)){var t=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(t.test(n.toString()))throw n=null,en("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return n},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.cancel&&e.cancel()},enter:function(n,r,i,a){return r=r&&s(r),i=i&&s(i),t(n,r=r||i.parent(),i),e.push(n,"enter",nn(a))},move:function(n,r,i,a){return r=r&&s(r),i=i&&s(i),t(n,r=r||i.parent(),i),e.push(n,"move",nn(a))},leave:function(t,n){return e.push(t,"leave",nn(n),(function(){t.remove()}))},addClass:function(t,n,r){return(r=nn(r)).addClass=tn(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return(r=nn(r)).removeClass=tn(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return(i=nn(i)).addClass=tn(i.addClass,n),i.removeClass=tn(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,a){return(a=nn(a)).from=a.from?_(a.from,n):n,a.to=a.to?_(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=tn(a.tempClasses,i),e.push(t,"animate",a)}}}]}],sn=function(){this.$get=["$$rAF",function(e){var t=[];function n(n){t.push(n),t.length>1||e((function(){for(var e=0;e<t.length;e++)t[e]();t=[]}))}return function(){var e=!1;return n((function(){e=!0})),function(t){e?t():n(t)}}}]},ln=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,r,i){function a(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){r()?function(e){i(e,0,!1)}(e):t(e)},this._state=0}return a.chain=function(e,t){var n=0;!function r(){if(n===e.length)return void t(!0);e[n]((function(e){!1!==e?(n++,r()):t(!1)}))}()},a.all=function(e,t){var n=0,r=!0;function i(i){r=r&&i,++n===e.length&&t(r)}k(e,(function(e){e.done(i)}))},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:V,getPromise:function(){if(!this.promise){var t=this;this.promise=e((function(e,n){t.done((function(t){!1===t?n():e()}))}))}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick((function(){t._resolve(e)})))},_resolve:function(e){2!==this._state&&(k(this._doneCallbacks,(function(t){t(e)})),this._doneCallbacks.length=0,this._state=2)}},a}]},cn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){var i=r||{};i.$$prepared||(i=oe(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(t.css(i.from),i.from=null);var a,o=new n;return{start:s,end:s};function s(){return e((function(){!function(){i.addClass&&(t.addClass(i.addClass),i.addClass=null);i.removeClass&&(t.removeClass(i.removeClass),i.removeClass=null);i.to&&(t.css(i.to),i.to=null)}(),a||o.complete(),a=!0})),o}}}]};function un(e,t,n,r,i){var a=this,o=e.location,l=e.history,c=e.setTimeout,u=e.clearTimeout,h={},p=i(n);a.isMock=!1,a.$$completeOutstandingRequest=p.completeTask,a.$$incOutstandingRequestCount=p.incTaskCount,a.notifyWhenNoOutstandingRequests=p.notifyWhenNoPendingTasks;var f,d,v=o.href,m=t.find("base"),g=null,S=r.history?function(){try{return l.state}catch(e){}}:V;C(),a.url=function(t,n,i){if(B(i)&&(i=null),o!==e.location&&(o=e.location),l!==e.history&&(l=e.history),t){var s=d===i;if(t=ci(t).href,v===t&&(!r.history||s))return a;var c=v&&lr(v)===lr(t);return v=t,d=i,!r.history||c&&s?(c||(g=t),n?o.replace(t):c?o.hash=function(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}(t):o.href=t,o.href!==t&&(g=t)):(l[n?"replaceState":"pushState"](i,"",t),C()),g&&(g=t),a}return function(e){return e.replace(/#$/,"")}(g||o.href)},a.state=function(){return f};var w=[],y=!1;function b(){g=null,$()}var x=null;function C(){le(f=B(f=S())?null:f,x)&&(f=x),x=f,d=f}function $(){var e=d;C(),v===a.url()&&e===f||(v=a.url(),d=f,k(w,(function(e){e(a.url(),f)})))}a.onUrlChange=function(t){return y||(r.history&&s(e).on("popstate",b),s(e).on("hashchange",b),y=!0),w.push(t),t},a.$$applicationDestroyed=function(){s(e).off("hashchange popstate",b)},a.$$checkUrlChange=$,a.baseHref=function(){var e=m.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},a.defer=function(e,t,n){var r;return t=t||0,n=n||p.DEFAULT_TASK_TYPE,p.incTaskCount(n),r=c((function(){delete h[r],p.completeTask(e,n)}),t),h[r]=n,r},a.defer.cancel=function(e){if(h.hasOwnProperty(e)){var t=h[e];return delete h[e],u(e),p.completeTask(V,t),!0}return!1}}function hn(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(e,t,n,r,i){return new un(e,r,t,n,i)}]}function pn(){this.$get=function(){var e={};function t(t,n){if(t in e)throw a("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var r=0,i=_({},n,{id:t}),o=Re(),s=n&&n.capacity||Number.MAX_VALUE,l=Re(),c=null,u=null;return e[t]={put:function(e,t){if(!B(t)){if(s<Number.MAX_VALUE)h(l[e]||(l[e]={key:e}));return e in o||r++,o[e]=t,r>s&&this.remove(u.key),t}},get:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;h(t)}return o[e]},remove:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;t===c&&(c=t.p),t===u&&(u=t.n),p(t.n,t.p),delete l[e]}e in o&&(delete o[e],r--)},removeAll:function(){o=Re(),r=0,l=Re(),c=u=null},destroy:function(){o=null,i=null,l=null,delete e[t]},info:function(){return _({},i,{size:r})}};function h(e){e!==c&&(u?u===e&&(u=e.n):u=e,p(e.n,e.p),p(e,c),(c=e).n=null)}function p(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}}return t.info=function(){var t={};return k(e,(function(e,n){t[n]=e.info()})),t},t.get=function(t){return e[t]},t}}function fn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var dn=a("$compile");var vn=new function(){};function mn(e,n){var r={},i=/^\s*directive:\s*([\w-]+)\s+(.*)$/,a=/(([\w-]+)(?::([^;]+))?;?)/,l=function(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),c=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,u=/^(on[a-z]+|formaction)$/,f=Re();function d(e,t,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=Re();return k(e,(function(e,a){if((e=e.trim())in f)i[a]=f[e];else{var o=e.match(r);if(!o)throw dn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,a,e,n?"controller bindings definition":"isolate scope definition");i[a]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||a},o[4]&&(f[e]=i[a])}})),i}function v(e,t){var n={isolateScope:null,bindToController:null};if(R(e.scope)&&(!0===e.bindToController?(n.bindToController=d(e.scope,t,!0),n.isolateScope={}):n.isolateScope=d(e.scope,t,!1)),R(e.bindToController)&&(n.bindToController=d(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw dn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}this.directive=function t(n,i){return Oe(n,"name"),Be(n,"directive"),j(n)?(!function(e){var t=e.charAt(0);if(!t||t!==p(t))throw dn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw dn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(n),Oe(i,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+"Directive",["$injector","$exceptionHandler",function(e,t){var i=[];return k(r[n],(function(r,a){try{var o=e.invoke(r);q(o)?o={compile:O(o)}:!o.compile&&o.link&&(o.compile=O(o.link)),o.priority=o.priority||0,o.index=a,o.name=o.name||n,o.require=function(e){var t=e.require||e.controller&&e.name;return!W(t)&&R(t)&&k(t,(function(e,n){var r=e.match(c);e.substring(r[0].length)||(t[n]=r[0]+n)})),t}(o),o.restrict=function(e,t){if(e&&(!j(e)||!/[EACM]/.test(e)))throw dn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}(o.restrict,n),o.$$moduleName=r.$$moduleName,i.push(o)}catch(e){t(e)}})),i}])),r[n].push(i)):k(n,$(t)),this},this.component=function e(t,n){if(!j(t))return k(t,$(fe(this,e))),this;var r=n.controller||function(){};function i(e){function t(t){return q(t)||W(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var i=n.template||n.templateUrl?n.template:"",a={controller:r,controllerAs:$n(n.controller)||n.controllerAs||"$ctrl",template:t(i),templateUrl:t(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return k(n,(function(e,t){"$"===t.charAt(0)&&(a[t]=e)})),a}return k(n,(function(e,t){"$"===t.charAt(0)&&(i[t]=e,q(r)&&(r[t]=e))})),i.$inject=["$injector"],this.directive(t,i)},this.aHrefSanitizationWhitelist=function(e){return F(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return F(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var m=!0;this.debugInfoEnabled=function(e){return F(e)?(m=e,this):m};var S=!1;this.strictComponentBindingsEnabled=function(e){return F(e)?(S=e,this):S};var w=10;this.onChangesTtl=function(e){return arguments.length?(w=e,this):w};var y=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(y=e,this):y};var b=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(b=e,this):b};var x=Re();this.addPropertySecurityContext=function(e,t,n){var r=e.toLowerCase()+"|"+t.toLowerCase();if(r in x&&x[r]!==n)throw dn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",e,t,x[r],n);return x[r]=n,this},function(){function e(e,t){k(t,(function(t){x[t.toLowerCase()]=e}))}e(Wr.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),e(Wr.CSS,["*|style"]),e(Wr.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),e(Wr.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),e(Wr.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,f,d,C,$,P,E,T){var M,A=/^\w/,D=t.document.createElement("div"),O=y,N=b,F=w;function H(){try{if(!--F)throw M=void 0,dn("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);P.$apply((function(){for(var e=0,t=M.length;e<t;++e)try{M[e]()}catch(e){f(e)}M=void 0}))}finally{F++}}function z(e,t){if(!e)return e;if(!j(e))throw dn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',t,e.toString());for(var n="",r=ee(e),i=/\s/.test(r)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,a=r.split(i),o=Math.floor(a.length/2),s=0;s<o;s++){var l=2*s;n+=E.getTrustedMediaUrl(ee(a[l])),n+=" "+ee(a[l+1])}var c=ee(a[2*s]).split(/\s/);return n+=E.getTrustedMediaUrl(ee(c[0])),2===c.length&&(n+=" "+ee(c[1])),n}function U(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;n<r;n++)this[i=a[n]]=t[i]}else this.$attr={};this.$$element=e}function Y(e,t){try{e.addClass(t)}catch(e){}}U.prototype={$normalize:yn,$addClass:function(e){e&&e.length>0&&T.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&T.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=bn(e,t);n&&n.length&&T.addClass(this.$$element,n);var r=bn(t,e);r&&r.length&&T.removeClass(this.$$element,r)},$set:function(e,t,n,r){var i=It(this.$$element[0],e),a=Vt[e],o=e;i?(this.$$element.prop(e,t),r=i):a&&(this[a]=t,o=a),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e])||(this.$attr[e]=r=Le(e,"-")),"img"===re(this.$$element)&&"srcset"===e&&(this[e]=t=z(t,"$set('srcset', value)")),!1!==n&&(null===t||B(t)?this.$$element.removeAttr(r):A.test(r)?i&&!1===t?this.$$element.removeAttr(r):this.$$element.attr(r,t):function(e,t,n){D.innerHTML="<span "+t+">";var r=D.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}(this.$$element[0],r,t));var s=this.$$observers;s&&k(s[o],(function(e){try{e(t)}catch(e){f(e)}}))},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=Re()),i=r[e]||(r[e]=[]);return i.push(t),P.$evalAsync((function(){i.$$inter||!n.hasOwnProperty(e)||B(n[e])||t(n[e])})),function(){ae(i,t)}}};var X=n.startSymbol(),J=n.endSymbol(),Q="{{"===X&&"}}"===J?I:function(e){return e.replace(/\{\{/g,X).replace(/}}/g,J)},te=/^ng(Attr|Prop|On)([A-Z].*)$/,ne=/^(.+)Start$/;return ie.$$addBindingInfo=m?function(e,t){var n=e.data("$binding")||[];W(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:V,ie.$$addBindingClass=m?function(e){Y(e,"ng-binding")}:V,ie.$$addScopeInfo=m?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:V,ie.$$addScopeClass=m?function(e,t){Y(e,t?"ng-isolate-scope":"ng-scope")}:V,ie.$$createComment=function(e,n){var r="";return m&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},ie;function ie(e,t,n,r,i){e instanceof s||(e=s(e));var a=oe(e,t,e,n,r,i);ie.$$addScopeClass(e);var o=null;return function(t,n,r){if(!e)throw dn("multilink","This element has already been linked.");Oe(t,"scope"),i&&i.needsNewScope&&(t=t.$parent.$new());var l,c,u,h=(r=r||{}).parentBoundTranscludeFn,p=r.transcludeControllers,f=r.futureParentElement;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),o||(c=(l=f)&&l[0],o=c&&"foreignobject"!==re(c)&&g.call(c).match(/SVG/)?"svg":"html"),u="html"!==o?s(Ee(o,s("<div></div>").append(e).html())):n?At.clone.call(e):e,p)for(var d in p)u.data("$"+d+"Controller",p[d].instance);return ie.$$addScopeInfo(u,t),n&&n(u,t),a&&a(t,u,u,h),n||(e=a=null),u}}function oe(e,t,n,r,i,a){for(var l,c,u,h,p,f,d,v=[],m=W(e)||e instanceof s,g=0;g<e.length;g++)l=new U,11===o&&ce(e,g,m),(u=(c=he(e[g],[],l,0===g?r:void 0,i)).length?ge(c,e[g],l,t,n,null,[],[],a):null)&&u.scope&&ie.$$addScopeClass(l.$$element),p=u&&u.terminal||!(h=e[g].childNodes)||!h.length?null:oe(h,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||p)&&(v.push(g,u,p),f=!0,d=d||u),a=null;return f?function(e,n,r,i){var a,o,l,c,u,h,p,f,m;if(d){var g=n.length;for(m=new Array(g),u=0;u<v.length;u+=3)p=v[u],m[p]=n[p]}else m=n;for(u=0,h=v.length;u<h;)l=m[v[u++]],a=v[u++],o=v[u++],a?(a.scope?(c=e.$new(),ie.$$addScopeInfo(s(l),c)):c=e,f=a.transcludeOnThisElement?ue(e,a.transclude,i):!a.templateOnThisElement&&i?i:!i&&t?ue(e,t):null,a(o,c,l,r,f)):o&&o(e,l.childNodes,void 0,i)}:null}function ce(e,t,n){var r,i=e[t],a=i.parentNode;if(i.nodeType===je)for(;(r=a?i.nextSibling:e[t+1])&&r.nodeType===je;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}function ue(e,t,n){function r(r,i,a,o,s){return r||((r=e.$new(!1,s)).$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}var i=r.$$slots=Re();for(var a in t.$$slots)t.$$slots[a]?i[a]=ue(e,t.$$slots[a],n):i[a]=null;return r}function he(e,t,r,o,s){var l,c,u,h=e.nodeType,p=r.$attr;switch(h){case 1:ye(t,yn(c=re(e)),"E",o,s);for(var f,d,v,m,g,S=e.attributes,w=0,y=S&&S.length;w<y;w++){var b,x=!1,k=!1,C=!1,$=!1,P=!1;d=(f=S[w]).name,m=f.value,(g=(v=yn(d.toLowerCase())).match(te))?(C="Attr"===g[1],$="Prop"===g[1],P="On"===g[1],d=d.replace(Sn,"").toLowerCase().substr(4+g[1].length).replace(/_(.)/g,(function(e,t){return t.toUpperCase()}))):(b=v.match(ne))&&xe(b[1])&&(x=d,k=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),$||P?(r[v]=m,p[v]=f.name,$?_e(e,t,v,d):Me(t,v,d)):(p[v=yn(d.toLowerCase())]=d,!C&&r.hasOwnProperty(v)||(r[v]=m,It(e,v)&&(r[v]=!0)),Ae(e,t,m,v,C),ye(t,v,"A",o,s,x,k))}if("input"===c&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!N)break;if(R(u=e.className)&&(u=u.animVal),j(u)&&""!==u)for(;l=a.exec(u);)ye(t,v=yn(l[2]),"C",o,s)&&(r[v]=ee(l[3])),u=u.substr(l.index+l[0].length);break;case je:!function(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&ie.$$addBindingClass(t),function(e,t){var i=t.parent();n||ie.$$addBindingClass(i),ie.$$addBindingInfo(i,r.expressions),e.$watch(r,(function(e){t[0].nodeValue=e}))}}})}(t,e.nodeValue);break;case 8:if(!O)break;!function(e,t,n,r,a){try{var o=i.exec(e.nodeValue);if(o){var s=yn(o[1]);ye(t,s,"M",r,a)&&(n[s]=ee(o[2]))}}catch(e){}}(e,t,r,o,s)}return t.sort($e),t}function de(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw dn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1===e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0);else r.push(e);return s(r)}function ve(e,t,n){return function(r,i,a,o,s){return i=de(i[0],t,n),e(r,i,a,o,s)}}function me(e,t,n,r,i,a){var o;return e?ie(t,n,r,i,a):function(){return o||(o=ie(t,n,r,i,a),t=n=a=null),o.apply(this,arguments)}}function ge(e,n,r,i,a,o,l,c,u){u=u||{};for(var h,p,d,v,m,g=-Number.MAX_VALUE,S=u.newScopeDirective,w=u.controllerDirectives,y=u.newIsolateScopeDirective,b=u.templateDirective,x=u.nonTlbTranscludeDirective,C=!1,P=!1,E=u.hasElementTranscludeDirective,T=r.$$element=s(n),M=o,A=i,D=!1,L=!1,V=0,I=e.length;V<I;V++){var O=(h=e[V]).$$start,N=h.$$end;if(O&&(T=de(n,O,N)),d=void 0,g>h.priority)break;if((m=h.scope)&&(h.templateUrl||(R(m)?(Pe("new/isolated scope",y||S,h,T),y=h):Pe("new/isolated scope",y,h,T)),S=S||h),p=h.name,!D&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var F,H=V+1;F=e[H++];)if(F.transclude&&!F.$$tlb||F.replace&&(F.templateUrl||F.template)){L=!0;break}D=!0}if(!h.templateUrl&&h.controller&&(w=w||Re(),Pe("'"+p+"' controller",w[p],h,T),w[p]=h),m=h.transclude)if(C=!0,h.$$tlb||(Pe("transclusion",x,h,T),x=h),"element"===m)E=!0,g=h.priority,d=T,T=r.$$element=s(ie.$$createComment(p,r[p])),n=T[0],De(a,pe(d),n),A=me(L,d,i,g,M&&M.name,{nonTlbTranscludeDirective:x});else{var j=Re();if(R(m)){d=t.document.createDocumentFragment();var z=Re(),G=Re();for(var Y in k(m,(function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,z[e]=t,j[t]=null,G[t]=n})),k(T.contents(),(function(e){var n=z[yn(re(e))];n?(G[n]=!0,j[n]=j[n]||t.document.createDocumentFragment(),j[n].appendChild(e)):d.appendChild(e)})),k(G,(function(e,t){if(!e)throw dn("reqslot","Required transclusion slot `{0}` was not filled.",t)})),j)if(j[Y]){var X=s(j[Y].childNodes);j[Y]=me(L,X,i)}d=s(d.childNodes)}else d=s(dt(n)).contents();T.empty(),(A=me(L,d,i,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=j}if(h.template)if(P=!0,Pe("template",b,h,T),b=h,m=q(h.template)?h.template(T,r):h.template,m=Q(m),h.replace){if(M=h,d=ct(m)?[]:xn(Ee(h.templateNamespace,ee(m))),n=d[0],1!==d.length||1!==n.nodeType)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");De(a,T,n);var K={$attr:{}},J=he(n,[],K),te=e.splice(V+1,e.length-(V+1));(y||S)&&we(J,y,S),e=e.concat(J).concat(te),ke(r,K),I=e.length}else T.html(m);if(h.templateUrl)P=!0,Pe("template",b,h,T),b=h,h.replace&&(M=h),oe=Ce(e.splice(V,e.length-V),T,r,a,C&&A,l,c,{controllerDirectives:w,newScopeDirective:S!==h&&S,newIsolateScopeDirective:y,templateDirective:b,nonTlbTranscludeDirective:x}),I=e.length;else if(h.compile)try{v=h.compile(T,r,A);var ne=h.$$originalDirective||h;q(v)?ae(null,fe(ne,v),O,N):v&&ae(fe(ne,v.pre),fe(ne,v.post),O,N)}catch(e){f(e,be(T))}h.terminal&&(oe.terminal=!0,g=Math.max(g,h.priority))}return oe.scope=S&&!0===S.scope,oe.transcludeOnThisElement=C,oe.templateOnThisElement=P,oe.transclude=A,u.hasElementTranscludeDirective=E,oe;function ae(e,t,n,r){e&&(n&&(e=ve(e,n,r)),e.require=h.require,e.directiveName=p,(y===h||h.$$isolateScope)&&(e=Ve(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=ve(t,n,r)),t.require=h.require,t.directiveName=p,(y===h||h.$$isolateScope)&&(t=Ve(t,{isolateScope:!0})),c.push(t))}function oe(e,t,i,a,o){var u,h,p,d,v,m,g,x,C,P;for(var T in n===i?(C=r,x=r.$$element):C=new U(x=s(i),r),v=t,y?d=t.$new(!0):S&&(v=t.$parent),o&&((g=function(e,t,n,r){var i;Z(e)||(r=n,n=t,t=e,e=void 0);E&&(i=m);n||(n=E?x.parent():x);if(!r)return o(e,t,i,n,L);var a=o.$$slots[r];if(a)return a(e,t,i,n,L);if(B(a))throw dn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,be(x))}).$$boundTransclude=o,g.isSlotFilled=function(e){return!!o.$$slots[e]}),w&&(m=function(e,t,n,r,i,a,o){var s=Re();for(var l in r){var c=r[l],u={$scope:c===o||c.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:n},h=c.controller;"@"===h&&(h=t[c.name]);var p=$(h,u,!0,c.controllerAs);s[c.name]=p,e.data("$"+c.name+"Controller",p.instance)}return s}(x,C,g,w,d,t,y)),y&&(ie.$$addScopeInfo(x,d,!0,!(b&&(b===y||b===y.$$originalDirective))),ie.$$addScopeClass(x,!0),d.$$isolateBindings=y.$$isolateBindings,(P=Be(t,C,d,d.$$isolateBindings,y)).removeWatches&&d.$on("$destroy",P.removeWatches)),m){var M=w[T],A=m[T],D=M.$$bindings.bindToController;A.instance=A(),x.data("$"+M.name+"Controller",A.instance),A.bindingInfo=Be(v,C,A.instance,D,M)}for(k(w,(function(e,t){var n=e.require;e.bindToController&&!W(n)&&R(n)&&_(m[t].instance,Se(t,n,x,m))})),k(m,(function(e){var t=e.instance;if(q(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){f(e)}if(q(t.$onInit))try{t.$onInit()}catch(e){f(e)}q(t.$doCheck)&&(v.$watch((function(){t.$doCheck()})),t.$doCheck()),q(t.$onDestroy)&&v.$on("$destroy",(function(){t.$onDestroy()}))})),u=0,h=l.length;u<h;u++)Ie(p=l[u],p.isolateScope?d:t,x,C,p.require&&Se(p.directiveName,p.require,x,m),g);var L=t;for(y&&(y.template||null===y.templateUrl)&&(L=d),e&&e(L,i.childNodes,void 0,o),u=c.length-1;u>=0;u--)Ie(p=c[u],p.isolateScope?d:t,x,C,p.require&&Se(p.directiveName,p.require,x,m),g);k(m,(function(e){var t=e.instance;q(t.$postLink)&&t.$postLink()}))}}function Se(e,t,n,r){var i;if(j(t)){var a=t.match(c),o=t.substring(a[0].length),s=a[1]||a[3],l="?"===a[2];if("^^"===s?n=n.parent():i=(i=r&&r[o])&&i.instance,!i){var u="$"+o+"Controller";i="^^"===s&&n[0]&&9===n[0].nodeType?null:s?n.inheritedData(u):n.data(u)}if(!i&&!l)throw dn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,e)}else if(W(t)){i=[];for(var h=0,p=t.length;h<p;h++)i[h]=Se(e,t[h],n,r)}else R(t)&&(i={},k(t,(function(t,a){i[a]=Se(e,t,n,r)})));return i||null}function we(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=L(e[r],{$$isolateScope:t,$$newScope:n})}function ye(t,n,i,a,o,s,l){if(n===o)return null;var c=null;if(r.hasOwnProperty(n))for(var u,h=e.get(n+"Directive"),p=0,f=h.length;p<f;p++)if(u=h[p],(B(a)||a>u.priority)&&-1!==u.restrict.indexOf(i)){if(s&&(u=L(u,{$$start:s,$$end:l})),!u.$$bindings){var d=u.$$bindings=v(u,u.name);R(d.isolateScope)&&(u.$$isolateBindings=d.isolateScope)}t.push(u),c=u}return c}function xe(t){if(r.hasOwnProperty(t))for(var n=e.get(t+"Directive"),i=0,a=n.length;i<a;i++)if(n[i].multiElement)return!0;return!1}function ke(e,t){var n=t.$attr,r=e.$attr;k(e,(function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r.length?r+=("style"===i?";":" ")+t[i]:r=t[i]),e.$set(i,r,!0,n[i]))})),k(t,(function(t,i){e.hasOwnProperty(i)||"$"===i.charAt(0)||(e[i]=t,"class"!==i&&"style"!==i&&(r[i]=n[i]))}))}function Ce(e,t,n,r,i,a,o,l){var c,u,h=[],p=t[0],v=e.shift(),m=L(v,{templateUrl:null,transclude:null,replace:null,$$originalDirective:v}),g=q(v.templateUrl)?v.templateUrl(t,n):v.templateUrl,S=v.templateNamespace;return t.empty(),d(g).then((function(f){var d,w,y,b;if(f=Q(f),v.replace){if(y=ct(f)?[]:xn(Ee(S,ee(f))),d=y[0],1!==y.length||1!==d.nodeType)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v.name,g);w={$attr:{}},De(r,t,d);var x=he(d,[],w);R(v.scope)&&we(x,!0),e=x.concat(e),ke(n,w)}else d=p,t.html(f);for(e.unshift(m),c=ge(e,d,n,i,t,v,a,o,l),k(r,(function(e,n){e===d&&(r[n]=t[0])})),u=oe(t[0].childNodes,i);h.length;){var C=h.shift(),$=h.shift(),P=h.shift(),E=h.shift(),T=t[0];if(!C.$$destroyed){if($!==p){var _=$.className;l.hasElementTranscludeDirective&&v.replace||(T=dt(d)),De(P,s($),T),Y(s(T),_)}b=c.transcludeOnThisElement?ue(C,c.transclude,E):E,c(u,C,T,r,b)}}h=null})).catch((function(e){G(e)&&f(e)})),function(e,t,n,r,i){var a=i;t.$$destroyed||(h?h.push(t,n,r,a):(c.transcludeOnThisElement&&(a=ue(t,c.transclude,i)),c(u,t,n,r,a)))}}function $e(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Pe(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw dn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,be(r))}function Ee(e,n){switch(e=p(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function Te(e){return z(E.valueOf(e),"ng-prop-srcset")}function _e(e,t,n,r){if(u.test(r))throw dn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var i=re(e),a=function(e,t){var n=t.toLowerCase();return x[e+"|"+n]||x["*|"+n]}(i,r),o=I;"srcset"!==r||"img"!==i&&"source"!==i?a&&(o=E.getTrusted.bind(E,a)):o=Te,t.push({priority:100,compile:function(e,t){var i=C(t[n]),a=C(t[n],(function(e){return E.valueOf(e)}));return{pre:function(e,t){function n(){var n=i(e);t[0][r]=o(n)}n(),e.$watch(a,n)}}}})}function Me(e,t,n){e.push(Da(C,P,f,t,n,!1))}function Ae(e,t,r,i,a){var o=re(e),s=function(e,t){return"srcdoc"===t?E.HTML:"src"===t||"ngSrc"===t?-1===["img","video","audio","source","track"].indexOf(e)?E.RESOURCE_URL:E.MEDIA_URL:"xlinkHref"===t?"image"===e?E.MEDIA_URL:"a"===e?E.URL:E.RESOURCE_URL:"form"===e&&"action"===t||"base"===e&&"href"===t||"link"===e&&"href"===t?E.RESOURCE_URL:"a"!==e||"href"!==t&&"ngHref"!==t?void 0:E.URL}(o,i),c=!a,h=l[i]||a,p=n(r,c,s,h);if(p){if("multiple"===i&&"select"===o)throw dn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",be(e));if(u.test(i))throw dn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");t.push({priority:100,compile:function(){return{pre:function(e,t,a){var o=a.$$observers||(a.$$observers=Re()),l=a[i];l!==r&&(p=l&&n(l,!0,s,h),r=l),p&&(a[i]=p(e),(o[i]||(o[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||e).$watch(p,(function(e,t){"class"===i&&e!==t?a.$updateClass(e,t):a.$set(i,e)})))}}}})}}function De(e,n,r){var i,a,o=n[0],l=n.length,c=o.parentNode;if(e)for(i=0,a=e.length;i<a;i++)if(e[i]===o){e[i++]=r;for(var u=i,h=u+l-1,p=e.length;u<p;u++,h++)h<p?e[u]=e[h]:delete e[u];e.length-=l-1,e.context===o&&(e.context=r);break}c&&c.replaceChild(r,o);var f=t.document.createDocumentFragment();for(i=0;i<l;i++)f.appendChild(n[i]);for(s.hasData(o)&&(s.data(r,s.data(o)),s(o).off("$destroy")),s.cleanData(f.querySelectorAll("*")),i=1;i<l;i++)delete n[i];n[0]=r,n.length=1}function Ve(e,t){return _((function(){return e.apply(null,arguments)}),e,t)}function Ie(e,t,n,r,i,a){try{e(t,n,r,i,a)}catch(e){f(e,be(n))}}function Ne(e,t){if(S)throw dn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function Be(e,t,r,i,a){var o,s=[],l={};function c(t,n,i){q(r.$onChanges)&&!se(n,i)&&(M||(e.$$postDigest(H),M=[]),o||(o={},M.push(u)),o[t]&&(i=o[t].previousValue),o[t]=new gn(i,n))}function u(){r.$onChanges(o),o=void 0}return k(i,(function(i,o){var u,p,f,d,v,m=i.attrName,g=i.optional;switch(i.mode){case"@":g||h.call(t,m)||(Ne(m,a.name),r[o]=t[m]=void 0),v=t.$observe(m,(function(e){if(j(e)||K(e)){var t=r[o];c(o,e,t),r[o]=e}})),t.$$observers[m].$$scope=e,j(u=t[m])?r[o]=n(u)(e):K(u)&&(r[o]=u),l[o]=new gn(vn,r[o]),s.push(v);break;case"=":if(!h.call(t,m)){if(g)break;Ne(m,a.name),t[m]=void 0}if(g&&!t[m])break;p=C(t[m]),d=p.literal?le:se,f=p.assign||function(){throw u=r[o]=p(e),dn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[m],m,a.name)},u=r[o]=p(e);var S=function(t){return d(t,r[o])||(d(t,u)?f(e,t=r[o]):r[o]=t),u=t};S.$stateful=!0,v=i.collection?e.$watchCollection(t[m],S):e.$watch(C(t[m],S),null,p.literal),s.push(v);break;case"<":if(!h.call(t,m)){if(g)break;Ne(m,a.name),t[m]=void 0}if(g&&!t[m])break;var w=(p=C(t[m])).literal,y=r[o]=p(e);l[o]=new gn(vn,r[o]),v=e[i.collection?"$watchCollection":"$watch"](p,(function(e,t){if(t===e){if(t===y||w&&le(t,y))return;t=y}c(o,e,t),r[o]=e})),s.push(v);break;case"&":if(g||h.call(t,m)||Ne(m,a.name),(p=t.hasOwnProperty(m)?C(t[m]):V)===V&&g)break;r[o]=function(t){return p(e,t)}}})),{initialChanges:l,removeWatches:s.length&&function(){for(var e=0,t=s.length;e<t;++e)s[e]()}}}}]}function gn(e,t){this.previousValue=e,this.currentValue=t}mn.$inject=["$provide","$$sanitizeUriProvider"],gn.prototype.isFirstChange=function(){return this.previousValue===vn};var Sn=/^((?:x|data)[:\-_])/i,wn=/[:\-_]+(.)/g;function yn(e){return e.replace(Sn,"").replace(wn,(function(e,t,n){return n?t.toUpperCase():t}))}function bn(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o===i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function xn(e){var t=(e=s(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(8===n.nodeType||n.nodeType===je&&""===n.nodeValue.trim())&&v.call(e,t,1)}return e}var kn=a("$controller"),Cn=/^(\S+)(\s+as\s+([\w$]+))?$/;function $n(e,t){if(t&&j(t))return t;if(j(e)){var n=Cn.exec(e);if(n)return n[3]}}function Pn(){var e={};this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){Be(t,"controller"),R(t)?_(e,t):e[t]=n},this.$get=["$injector",function(t){return function(r,i,a,o){var s,l,c,u;if(a=!0===a,o&&j(o)&&(u=o),j(r)){if(!(l=r.match(Cn)))throw kn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(c=l[1],u=u||l[3],!(r=e.hasOwnProperty(c)?e[c]:function(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;s<o;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&q(e)?fe(a,e):e}(i.$scope,c,!0)))throw kn("ctrlreg","The controller with the name '{0}' is not registered.",c);Ne(r,c,!0)}if(a){var h=(W(r)?r[r.length-1]:r).prototype;return s=Object.create(h||null),u&&n(i,u,s,c||r.name),_((function(){var e=t.invoke(r,s,i,c);return e!==s&&(R(e)||q(e))&&(s=e,u&&n(i,u,s,c||r.name)),s}),{instance:s,identifier:u})}return s=t.instantiate(r,i,c),u&&n(i,u,s,c||r.name),s};function n(e,t,n,r){if(!e||!R(e.$scope))throw a("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}}]}function En(){this.$get=["$window",function(e){return s(e.document)}]}function Tn(){this.$get=["$document","$rootScope",function(e,t){var n=e[0],r=n&&n.hidden;function i(){r=n.hidden}return e.on("visibilitychange",i),t.$on("$destroy",(function(){e.off("visibilitychange",i)})),function(){return r}}]}function _n(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}var Mn=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof s&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},An={"Content-Type":"application/json;charset=utf-8"},Dn=/^\[|^\{(?!\{)/,Ln={"[":/]$/,"{":/}$/},Vn=/^\)]\}',?\n/,In=a("$http");function On(e){return R(e)?U(e)?e.toISOString():ve(e):e}function Nn(){this.$get=function(){return function(e){if(!e)return"";var t=[];return C(e,(function(e,n){null===e||B(e)||q(e)||(W(e)?k(e,(function(e){t.push($e(n)+"="+$e(On(e)))})):t.push($e(n)+"="+$e(On(e))))})),t.join("&")}}}function Bn(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function e(n,r,i){W(n)?k(n,(function(t,n){e(t,r+"["+(R(t)?n:"")+"]")})):R(n)&&!U(n)?C(n,(function(t,n){e(t,r+(i?"":"[")+n+(i?"":"]"))})):(q(n)&&(n=n()),t.push($e(r)+"="+(null==n?"":$e(On(n)))))}(e,"",!0),t.join("&")}}}function Fn(e,t){if(j(e)){var n=e.replace(Vn,"").trim();if(n){var r=t("Content-Type"),i=r&&0===r.indexOf("application/json");if(i||(o=(a=n).match(Dn))&&Ln[o[0]].test(a))try{e=me(n)}catch(t){if(!i)return e;throw In("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}var a,o;return e}function Rn(e){var t,n=Re();function r(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return j(e)?k(e.split("\n"),(function(e){t=e.indexOf(":"),r(p(ee(e.substr(0,t))),ee(e.substr(t+1)))})):R(e)&&k(e,(function(e,t){r(p(t),ee(e))})),n}function Hn(e){var t;return function(n){if(t||(t=Rn(e)),n){var r=t[p(n)];return void 0===r&&(r=null),r}return t}}function jn(e,t,n,r){return q(r)?r(e,t,n):(k(r,(function(r){e=r(e,t,n)})),e)}function zn(e){return 200<=e&&e<300}function Un(){var e=this.defaults={transformResponse:[Fn],transformRequest:[function(e){return!R(e)||(t=e,"[object File]"===g.call(t))||function(e){return"[object Blob]"===g.call(e)}(e)||function(e){return"[object FormData]"===g.call(e)}(e)?e:ve(e);var t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ze(An),put:ze(An),patch:ze(An)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},t=!1;this.useApplyAsync=function(e){return F(e)?(t=!!e,this):t};var n=this.interceptors=[],r=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(i,o,s,l,c,u,h,d){var v=l("$http");e.paramSerializer=j(e.paramSerializer)?h.get(e.paramSerializer):e.paramSerializer;var m=[];k(n,(function(e){m.unshift(j(e)?h.get(e):h.invoke(e))}));var g,S=(g=[si].concat(r.map(ci)),function(e){var t=ci(e);return g.some(ui.bind(null,t))});function w(n){if(!R(n))throw a("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!j(d.valueOf(n.url)))throw a("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=_({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},n);r.headers=function(t){var n,r,i,a=e.headers,o=_({},t.headers);a=_({},a.common,a[p(t.method)]);e:for(n in a){for(i in r=p(n),o)if(p(i)===r)continue e;o[n]=a[n]}return function(e,t){var n,r={};return k(e,(function(e,i){q(e)?null!=(n=e(t))&&(r[i]=n):r[i]=e})),r}(o,ze(t))}(n),r.method=f(r.method),r.paramSerializer=j(r.paramSerializer)?h.get(r.paramSerializer):r.paramSerializer,i.$$incOutstandingRequestCount("$http");var l=[],g=[],y=u.resolve(r);return k(m,(function(e){(e.request||e.requestError)&&l.unshift(e.request,e.requestError),(e.response||e.responseError)&&g.push(e.response,e.responseError)})),y=b(y,l),y=(y=b(y=y.then((function(n){var r=n.headers,i=jn(n.data,Hn(r),void 0,n.transformRequest);B(i)&&k(r,(function(e,t){"content-type"===p(t)&&delete r[t]}));B(n.withCredentials)&&!B(e.withCredentials)&&(n.withCredentials=e.withCredentials);return function(n,r){var i,a,l=u.defer(),h=l.promise,f=n.headers,m="jsonp"===p(n.method),g=n.url;m?g=d.getTrustedResourceUrl(g):j(g)||(g=d.valueOf(g));g=function(e,t){t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t);return e}(g,n.paramSerializer(n.params)),m&&(g=function(e,t){var n=e.split("?");if(n.length>2)throw In("badjsonp",'Illegal use more than one "?", in url, "{1}"',e);return k(ke(n[1]),(function(n,r){if("JSON_CALLBACK"===n)throw In("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(r===t)throw In("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e)})),e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}(g,n.jsonpCallbackParam));w.pendingRequests.push(n),h.then($,$),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=R(n.cache)?n.cache:R(e.cache)?e.cache:v);i&&(F(a=i.get(g))?J(a)?a.then(C,C):W(a)?x(a[1],a[0],ze(a[2]),a[3],a[4]):x(a,200,{},"OK","complete"):i.put(g,h));if(B(a)){var y=S(n.url)?s()[n.xsrfCookieName||e.xsrfCookieName]:void 0;y&&(f[n.xsrfHeaderName||e.xsrfHeaderName]=y),o(n.method,g,r,(function(e,n,r,a,o){i&&(zn(e)?i.put(g,[e,n,Rn(r),a,o]):i.remove(g));function s(){x(n,e,r,a,o)}t?c.$applyAsync(s):(s(),c.$$phase||c.$apply())}),f,n.timeout,n.withCredentials,n.responseType,b(n.eventHandlers),b(n.uploadEventHandlers))}return h;function b(e){if(e){var n={};return k(e,(function(e,r){n[r]=function(n){function r(){e(n)}t?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}})),n}}function x(e,t,r,i,a){(zn(t=t>=-1?t:0)?l.resolve:l.reject)({data:e,status:t,headers:Hn(r),config:n,statusText:i,xhrStatus:a})}function C(e){x(e.data,e.status,ze(e.headers()),e.statusText,e.xhrStatus)}function $(){var e=w.pendingRequests.indexOf(n);-1!==e&&w.pendingRequests.splice(e,1)}}(n,i).then(x,x)})),g)).finally((function(){i.$$completeOutstandingRequest(V,"$http")}));function b(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],a=t[n++];e=e.then(i,a)}return t.length=0,e}function x(e){var t=_({},e);return t.data=jn(e.data,e.headers,e.status,r.transformResponse),zn(e.status)?t:u.reject(t)}}return w.pendingRequests=[],function(e){k(arguments,(function(e){w[e]=function(t,n){return w(_({},n||{},{method:e,url:t}))}}))}("get","delete","head","jsonp"),function(e){k(arguments,(function(e){w[e]=function(t,n,r){return w(_({},r||{},{method:e,url:t,data:n}))}}))}("post","put","patch"),w.defaults=e,w}]}function Wn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Gn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return function(e,t,n,r,i){return function(a,o,s,l,c,u,h,f,d,v){if(o=o||e.url(),"jsonp"===p(a))var m=r.createCallback(o),g=function(e,t,n){e=e.replace("JSON_CALLBACK",t);var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=e,a.async=!0,o=function(e){a.removeEventListener("load",o),a.removeEventListener("error",o),i.body.removeChild(a),a=null;var s=-1,l="unknown";e&&("load"!==e.type||r.wasCalled(t)||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},a.addEventListener("load",o),a.addEventListener("error",o),i.body.appendChild(a),o}(o,m,(function(e,t){var n=200===e&&r.getResponse(m);x(l,e,n,"",t,"complete"),r.removeCallback(m)}));else{var S=t(a,o),w=!1;S.open(a,o,!0),k(c,(function(e,t){F(e)&&S.setRequestHeader(t,e)})),S.onload=function(){var e=S.statusText||"",t="response"in S?S.response:S.responseText,n=1223===S.status?204:S.status;0===n&&(n=t?200:"file"===ci(o).protocol?404:0),x(l,n,t,S.getAllResponseHeaders(),e,"complete")};if(S.onerror=function(){x(l,-1,null,null,"","error")},S.ontimeout=function(){x(l,-1,null,null,"","timeout")},S.onabort=function(){x(l,-1,null,null,"",w?"timeout":"abort")},k(d,(function(e,t){S.addEventListener(t,e)})),k(v,(function(e,t){S.upload.addEventListener(t,e)})),h&&(S.withCredentials=!0),f)try{S.responseType=f}catch(e){if("json"!==f)throw e}S.send(B(s)?null:s)}if(u>0)var y=n((function(){b("timeout")}),u);else J(u)&&u.then((function(){b(F(u.$$timeoutId)?"timeout":"abort")}));function b(e){w="timeout"===e,g&&g(),S&&S.abort()}function x(e,t,r,i,a,o){F(y)&&n.cancel(y),g=S=null,e(t,r,i,a,o)}}}(e,r,e.defer,t,n[0])}]}var qn=y.$interpolateMinErr=a("$interpolate");function Yn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var a=e.length,o=t.length,s=new RegExp(e.replace(/./g,c),"g"),l=new RegExp(t.replace(/./g,c),"g");function c(e){return"\\\\\\"+e}function u(n){return n.replace(s,e).replace(l,t)}function h(e,t,n,r){var i=e.$watch((function(e){return i(),r(e)}),t,n);return i}function p(s,l,c,p){var f=c===i.URL||c===i.MEDIA_URL;if(!s.length||-1===s.indexOf(e)){if(l)return;var d=u(s);f&&(d=i.getTrusted(c,d));var v=O(d);return v.exp=s,v.expressions=[],v.$$watchDelegate=h,v}p=!!p;for(var m,g,S,w,y,b=0,x=[],k=s.length,C=[],$=[];b<k;){if(-1===(m=s.indexOf(e,b))||-1===(g=s.indexOf(t,m+a))){b!==k&&C.push(u(s.substring(b)));break}b!==m&&C.push(u(s.substring(b,m))),w=s.substring(m+a,g),x.push(w),b=g+o,$.push(C.length),C.push("")}y=1===C.length&&1===$.length;var P=f&&y?void 0:function(e){try{return e=c&&!f?i.getTrusted(c,e):i.valueOf(e),p&&!F(e)?e:He(e)}catch(e){r(qn.interr(s,e))}};if(S=x.map((function(e){return n(e,P)})),!l||x.length){var E=function(e){for(var t=0,n=x.length;t<n;t++){if(p&&B(e[t]))return;C[$[t]]=e[t]}return f?i.getTrusted(c,y?C[0]:C.join("")):(c&&C.length>1&&qn.throwNoconcat(s),C.join(""))};return _((function(e){var t=0,n=x.length,i=new Array(n);try{for(;t<n;t++)i[t]=S[t](e);return E(i)}catch(e){r(qn.interr(s,e))}}),{exp:s,expressions:x,$$watchDelegate:function(e,t){var n;return e.$watchGroup(S,(function(r,i){var a=E(r);t.call(this,a,r!==i?n:a,e),n=a}))}})}}return p.startSymbol=function(){return e},p.endSymbol=function(){return t},p}]}qn.throwNoconcat=function(e){throw qn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},qn.interr=function(e,t){return qn("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Xn=a("$interval");function Zn(){this.$get=["$$intervalFactory","$window",function(e,t){var n={},r=function(e){t.clearInterval(e),delete n[e]},i=e((function(e,r,i){var a=t.setInterval(e,r);return n[a]=i,a}),r);return i.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$intervalId"))throw Xn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(e.$$intervalId))return!1;var t=e.$$intervalId,i=n[t];return Rr(i.promise),i.reject("canceled"),r(t),!0},i}]}function Kn(){this.$get=["$browser","$q","$$q","$rootScope",function(e,t,n,r){return function(i,a){return function(o,s,l,c){var u=arguments.length>4,h=u?pe(arguments,4):[],p=0,f=F(c)&&!c,d=(f?n:t).defer(),v=d.promise;function m(){u?o.apply(null,h):o(p)}function g(){f?e.defer(m):r.$evalAsync(m),d.notify(p++),l>0&&p>=l&&(d.resolve(p),a(v.$$intervalId)),f||r.$apply()}return l=F(l)?l:0,v.$$intervalId=i(g,s,d,f),v}}}]}var Jn=function(){this.$get=function(){var e=y.callbacks,t={};return{createCallback:function(n){var r="_"+(e.$$counter++).toString(36),i="angular.callbacks."+r,a=function(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}(r);return t[i]=e[r]=a,i},wasCalled:function(e){return t[e].called},getResponse:function(e){return t[e].data},removeCallback:function(n){var r=t[n];delete e[r.id],delete t[n]}}}},Qn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,er={http:80,https:443,ftp:21},tr=a("$location");function nr(e,t,n){var r,i=(r=[],k(t,(function(e,t){W(e)?k(e,(function(e){r.push($e(t,!0)+(!0===e?"":"="+$e(e,!0)))})):r.push($e(t,!0)+(!0===e?"":"="+$e(e,!0)))})),r.length?r.join("&"):""),a=n?"#"+Ce(n):"";return function(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Ce(t[n].replace(/%2F/g,"/"));return t.join("/")}(e)+(i?"?"+i:"")+a}function rr(e,t){var n=ci(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=A(n.port)||er[n.protocol]||null}var ir=/^\s*[\\/]{2,}/;function ar(e,t,n){if(ir.test(e))throw tr("badpath",'Invalid url "{0}".',e);var r="/"!==e.charAt(0);r&&(e="/"+e);var i=ci(e),a=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;t.$$path=function(e,t){for(var n=e.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),t&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(a,n),t.$$search=ke(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function or(e,t){return e.slice(0,t.length)===t}function sr(e,t){if(or(t,e))return t.substr(e.length)}function lr(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function cr(e,t,n){this.$$html5=!0,n=n||"",rr(e,this),this.$$parse=function(e){var n=sr(t,e);if(!j(n))throw tr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);ar(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(e){return t+e.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(F(a=sr(e,r))?(o=a,s=n&&F(a=sr(n,a))?t+(sr("/",a)||a):e+o):F(a=sr(t,r))?s=t+a:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s);var a,o,s}}function ur(e,t,n){rr(e,this),this.$$parse=function(r){var i,a=sr(e,r)||sr(t,r);B(a)||"#"!==a.charAt(0)?this.$$html5?i=a:(i="",B(a)&&(e=r,this.replace())):B(i=sr(n,a))&&(i=a),ar(i,this,!1),this.$$path=function(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;or(t,n)&&(t=t.replace(n,""));if(i.exec(t))return e;return(r=i.exec(e))?r[1]:e}(this.$$path,i,e),this.$$compose()},this.$$normalizeUrl=function(t){return e+(t?n+t:"")},this.$$parseLinkUrl=function(t,n){return lr(e)===lr(t)&&(this.$$parse(t),!0)}}function hr(e,t,n){this.$$html5=!0,ur.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(e===lr(r)?a=r:(o=sr(t,r))?a=e+n+o:t===r+"/"&&(a=t),a&&this.$$parse(a),!!a);var a,o},this.$$normalizeUrl=function(t){return e+n+t}}var pr={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=nr(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:fr("$$absUrl"),url:function(e){if(B(e))return this.$$url;var t=Qn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:fr("$$protocol"),host:fr("$$host"),port:fr("$$port"),path:dr("$$path",(function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e})),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(j(e)||z(e))e=e.toString(),this.$$search=ke(e);else{if(!R(e))throw tr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");k(e=oe(e,{}),(function(t,n){null==t&&delete e[n]})),this.$$search=e}break;default:B(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:dr("$$hash",(function(e){return null!==e?e.toString():""})),replace:function(){return this.$$replace=!0,this}};function fr(e){return function(){return this[e]}}function dr(e,t){return function(n){return B(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function vr(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return F(t)?(e=t,this):e},this.html5Mode=function(e){return K(e)?(t.enabled=e,this):R(e)?(K(e.enabled)&&(t.enabled=e.enabled),K(e.requireBase)&&(t.requireBase=e.requireBase),(K(e.rewriteLinks)||j(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,o){var l,c,u,h,p=r.baseHref(),f=r.url();if(t.enabled){if(!p&&t.requireBase)throw tr("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=(h=f).substring(0,h.indexOf("/",h.indexOf("//")+2))+(p||"/"),c=i.history?cr:hr}else u=lr(f),c=ur;var d=function(e){return e.substr(0,lr(e).lastIndexOf("/")+1)}(u);(l=new c(u,d,"#"+e)).$$parseLinkUrl(f,f),l.$$state=r.state();var v=/^\s*(javascript|mailto):/i;function m(e,t,n){var i=l.url(),a=l.$$state;try{r.url(e,t,n),l.$$state=r.state()}catch(e){throw l.url(i),l.$$state=a,e}}a.on("click",(function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var o=s(e.target);"a"!==re(o[0]);)if(o[0]===a[0]||!(o=o.parent())[0])return;if(!j(i)||!B(o.attr(i))){var c=o.prop("href"),u=o.attr("href")||o.attr("xlink:href");R(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=ci(c.animVal).href),v.test(c)||!c||o.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(c,u)&&(e.preventDefault(),l.absUrl()!==r.url()&&n.$apply())}}})),l.absUrl()!==f&&r.url(l.absUrl(),!0);var g=!0;return r.onUrlChange((function(e,t){or(e,d)?(n.$evalAsync((function(){var r,i=l.absUrl(),a=l.$$state;l.$$parse(e),l.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,a).defaultPrevented,l.absUrl()===e&&(r?(l.$$parse(i),l.$$state=a,m(i,!1,a)):(g=!1,S(i,a)))})),n.$$phase||n.$digest()):o.location.href=e})),n.$watch((function(){if(g||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var e=r.url(),t=l.absUrl(),a=r.state(),o=l.$$replace,s=!((c=e)===(u=t)||ci(c).href===ci(u).href)||l.$$html5&&i.history&&a!==l.$$state;(g||s)&&(g=!1,n.$evalAsync((function(){var t=l.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,l.$$state,a).defaultPrevented;l.absUrl()===t&&(r?(l.$$parse(e),l.$$state=a):(s&&m(t,o,a===l.$$state?null:l.$$state),S(e,a)))})))}var c,u;l.$$replace=!1})),l;function S(e,t){n.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}}]}function mr(){var e=!0,t=this;this.debugEnabled=function(t){return F(t)?(e=t,this):e},this.$get=["$window",function(n){var r,i=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:s("log"),info:s("info"),warn:s("warn"),error:s("error"),debug:(r=s("debug"),function(){e&&r.apply(t,arguments)})};function a(e){return G(e)&&(e.stack&&i?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function s(e){var t=n.console||{},r=t[e]||t.log||V;return function(){var e=[];return k(arguments,(function(t){e.push(a(t))})),Function.prototype.apply.call(r,t,e)}}}]}k([hr,ur,cr],(function(e){e.prototype=Object.create(pr),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==cr||!this.$$html5)throw tr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=B(t)?null:t,this.$$urlUpdatedByLocation=!0,this}}));var gr=a("$parse"),Sr={}.constructor.prototype.valueOf;function wr(e){return e+""}var yr=Re();k("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(e){yr[e]=!0}));var br={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},xr=function(e){this.options=e};xr.prototype={constructor:xr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=yr[t],a=yr[n],o=yr[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=F(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw gr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=p(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{n+=br[a]||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var kr=function(e,t){this.lexer=e,this.options=t};function Cr(e,t){return void 0!==e?e:t}function $r(e,t){return void 0===e?t:void 0===t?e:e+t}kr.Program="Program",kr.ExpressionStatement="ExpressionStatement",kr.AssignmentExpression="AssignmentExpression",kr.ConditionalExpression="ConditionalExpression",kr.LogicalExpression="LogicalExpression",kr.BinaryExpression="BinaryExpression",kr.UnaryExpression="UnaryExpression",kr.CallExpression="CallExpression",kr.MemberExpression="MemberExpression",kr.Identifier="Identifier",kr.Literal="Literal",kr.ArrayExpression="ArrayExpression",kr.Property="Property",kr.ObjectExpression="ObjectExpression",kr.ThisExpression="ThisExpression",kr.LocalsExpression="LocalsExpression",kr.NGValueParameter="NGValueParameter",kr.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:kr.Program,body:e}},expressionStatement:function(){return{type:kr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!Tr(e))throw gr("lval","Trying to assign a value to a non l-value");e={type:kr.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:kr.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:kr.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:kr.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:kr.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:kr.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:kr.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:kr.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:kr.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=oe(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:kr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:kr.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:kr.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:kr.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:kr.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:kr.Identifier,name:e.text}},constant:function(){return{type:kr.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:kr.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:kr.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:kr.ObjectExpression,properties:t}},throwError:function(e,t){throw gr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw gr("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw gr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:kr.ThisExpression},$locals:{type:kr.LocalsExpression}}};function Pr(e,t,n){var r,i,a,o=e.isPure=function(e,t){switch(e.type){case kr.MemberExpression:if(e.computed)return!1;break;case kr.UnaryExpression:return 1;case kr.BinaryExpression:return"+"!==e.operator&&1;case kr.CallExpression:return!1}return void 0===t?2:t}(e,n);switch(e.type){case kr.Program:r=!0,k(e.body,(function(e){Pr(e.expression,t,o),r=r&&e.expression.constant})),e.constant=r;break;case kr.Literal:e.constant=!0,e.toWatch=[];break;case kr.UnaryExpression:Pr(e.argument,t,o),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case kr.BinaryExpression:Pr(e.left,t,o),Pr(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case kr.LogicalExpression:Pr(e.left,t,o),Pr(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case kr.ConditionalExpression:Pr(e.test,t,o),Pr(e.alternate,t,o),Pr(e.consequent,t,o),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case kr.Identifier:e.constant=!1,e.toWatch=[e];break;case kr.MemberExpression:Pr(e.object,t,o),e.computed&&Pr(e.property,t,o),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case kr.CallExpression:a=!!e.filter&&function(e,t){return!e(t).$stateful}(t,e.callee.name),r=a,i=[],k(e.arguments,(function(e){Pr(e,t,o),r=r&&e.constant,i.push.apply(i,e.toWatch)})),e.constant=r,e.toWatch=a?i:[e];break;case kr.AssignmentExpression:Pr(e.left,t,o),Pr(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case kr.ArrayExpression:r=!0,i=[],k(e.elements,(function(e){Pr(e,t,o),r=r&&e.constant,i.push.apply(i,e.toWatch)})),e.constant=r,e.toWatch=i;break;case kr.ObjectExpression:r=!0,i=[],k(e.properties,(function(e){Pr(e.value,t,o),r=r&&e.value.constant,i.push.apply(i,e.value.toWatch),e.computed&&(Pr(e.key,t,!1),r=r&&e.key.constant,i.push.apply(i,e.key.toWatch))})),e.constant=r,e.toWatch=i;break;case kr.ThisExpression:case kr.LocalsExpression:e.constant=!1,e.toWatch=[]}}function Er(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length||n[0]!==t?n:void 0}}function Tr(e){return e.type===kr.Identifier||e.type===kr.MemberExpression}function _r(e){if(1===e.body.length&&Tr(e.body[0].expression))return{type:kr.AssignmentExpression,left:e.body[0].expression,right:{type:kr.NGValueParameter},operator:"="}}function Mr(e){this.$filter=e}function Ar(e){this.$filter=e}function Dr(e,t,n){this.ast=new kr(e,n),this.astCompiler=n.csp?new Ar(t):new Mr(t)}function Lr(e){return q(e.valueOf)?e.valueOf():Sr.call(e)}function Vr(){var e,t,n=Re(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(i){var a={csp:ce().noUnsafeEval,literals:oe(r),isIdentifierStart:q(e)&&e,isIdentifierContinue:q(t)&&t};return o.$$getAst=function(e){return new Dr(new xr(a),i,a).getAst(e).ast},o;function o(e,t){var r,o;switch(typeof e){case"string":if(e=e.trim(),!(r=n[o=e]))r=new Dr(new xr(a),i,a).parse(e),n[o]=p(r);return f(r,t);case"function":return f(e,t);default:return f(V,t)}}function s(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=Lr(e))&&!n)&&(e===t||e!=e&&t!=t)}function l(e,t,n,r,i){var a,o=r.inputs;if(1===o.length){var l=s;return o=o[0],e.$watch((function(e){var t=o(e);return s(t,l,o.isPure)||(a=r(e,void 0,void 0,[t]),l=t&&Lr(t)),a}),t,n,i)}for(var c=[],u=[],h=0,p=o.length;h<p;h++)c[h]=s,u[h]=null;return e.$watch((function(e){for(var t=!1,n=0,i=o.length;n<i;n++){var l=o[n](e);(t||(t=!s(l,c[n],o[n].isPure)))&&(u[n]=l,c[n]=l&&Lr(l))}return t&&(a=r(e,void 0,void 0,u)),a}),t,n,i)}function c(e,t,n,r,i){var a,o,s=r.literal?u:F,l=r.$$intercepted||r,c=r.$$interceptor||I,h=r.inputs&&!l.inputs;return d.literal=r.literal,d.constant=r.constant,d.inputs=r.inputs,p(d),a=e.$watch(d,t,n,i);function f(){s(o)&&a()}function d(e,t,n,r){return o=h&&r?r[0]:l(e,t,n,r),s(o)&&e.$$postDigest(f),c(o)}}function u(e){var t=!0;return k(e,(function(e){F(e)||(t=!1)})),t}function h(e,t,n,r){var i=e.$watch((function(e){return i(),r(e)}),t,n);return i}function p(e){return e.constant?e.$$watchDelegate=h:e.oneTime?e.$$watchDelegate=c:e.inputs&&(e.$$watchDelegate=l),e}function f(e,t){if(!t)return e;e.$$interceptor&&(t=function(e,t){function n(n){return t(e(n))}return n.$stateful=e.$stateful||t.$stateful,n.$$pure=e.$$pure&&t.$$pure,n}(e.$$interceptor,t),e=e.$$intercepted);var n=!1,r=function(r,i,a,o){var s=n&&o?o[0]:e(r,i,a,o);return t(s)};return r.$$intercepted=e,r.$$interceptor=t,r.literal=e.literal,r.oneTime=e.oneTime,r.constant=e.constant,t.$stateful||(n=!e.inputs,r.inputs=e.inputs?e.inputs:[e],t.$$pure||(r.inputs=r.inputs.map((function(e){return 2===e.isPure?function(t){return e(t)}:e})))),p(r)}}]}function Ir(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return Nr((function(e){t.$evalAsync(e)}),n,e)}],this.errorOnUnhandledRejections=function(t){return F(t)?(e=t,this):e}}function Or(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return Nr((function(e){t.defer(e)}),n,e)}],this.errorOnUnhandledRejections=function(t){return F(t)?(e=t,this):e}}function Nr(e,t,n){var r=a("$q",TypeError),i=0,o=[];function s(){return new l}function l(){var e=this.promise=new c;this.resolve=function(t){p(e,t)},this.reject=function(t){f(e,t)},this.notify=function(t){v(e,t)}}function c(){this.$$state={status:0}}function u(){for(;!i&&o.length;){var e=o.shift();if(!Br(e)){Fr(e);var n="Possibly unhandled rejection: "+Ue(e.value);G(e.value)?t(e.value,n):t(n)}}}function h(r){!n||r.pending||2!==r.status||Br(r)||(0===i&&0===o.length&&e(u),o.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++i,e((function(){!function(r){var a,o,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var l=0,c=s.length;l<c;++l){Fr(r),o=s[l][0],a=s[l][r.status];try{q(a)?p(o,a(r.value)):1===r.status?p(o,r.value):f(o,r.value)}catch(e){f(o,e),e&&!0===e.$$passToExceptionHandler&&t(e)}}}finally{--i,n&&0===i&&e(u)}}(r)})))}function p(e,t){e.$$state.status||(t===e?d(e,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):function e(t,n){var r,i=!1;try{(R(n)||q(n))&&(r=n.then),q(r)?(t.$$state.status=-1,r.call(n,a,o,(function(e){v(t,e)}))):(t.$$state.value=n,t.$$state.status=1,h(t.$$state))}catch(e){o(e)}function a(n){i||(i=!0,e(t,n))}function o(e){i||(i=!0,d(t,e))}}(e,t))}function f(e,t){e.$$state.status||d(e,t)}function d(e,t){e.$$state.value=t,e.$$state.status=2,h(e.$$state)}function v(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&e((function(){for(var e,n,a=0,o=i.length;a<o;a++){n=i[a][0],e=i[a][3];try{v(n,q(e)?e(r):r)}catch(e){t(e)}}}))}function m(e){var t=new c;return f(t,e),t}function g(e,t,n){var r=null;try{q(n)&&(r=n())}catch(e){return m(e)}return J(r)?r.then((function(){return t(e)}),m):t(e)}function S(e,t,n,r){var i=new c;return p(i,e),i.then(t,n,r)}_(c.prototype,{then:function(e,t,n){if(B(e)&&B(t)&&B(n))return this;var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&h(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then((function(t){return g(t,w,e)}),(function(t){return g(t,m,e)}),t)}});var w=S;function y(e){if(!q(e))throw r("norslvr","Expected resolverFn, got '{0}'",e);var t=new c;return e((function(e){p(t,e)}),(function(e){f(t,e)})),t}return y.prototype=c.prototype,y.defer=s,y.reject=m,y.when=S,y.resolve=w,y.all=function(e){var t=new c,n=0,r=W(e)?[]:{};return k(e,(function(e,i){n++,S(e).then((function(e){r[i]=e,--n||p(t,r)}),(function(e){f(t,e)}))})),0===n&&p(t,r),t},y.race=function(e){var t=s();return k(e,(function(e){S(e).then(t.resolve,t.reject)})),t.promise},y}function Br(e){return!!e.pur}function Fr(e){e.pur=!0}function Rr(e){e.$$state&&Fr(e.$$state)}function Hr(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]}function jr(){var e=10,t=a("$rootScope"),n=null,r=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$exceptionHandler","$parse","$browser",function(i,a,s){function l(e){e.currentScope.$$destroyed=!0}function c(){this.$id=P(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(e,t){var n;return t=t||this,e?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=P(),this.$$ChildScope=null,this.$$suspended=!1}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",l),n},$watch:function(e,t,r,i){var o=a(e),s=q(t)?t:V;if(o.$$watchDelegate)return o.$$watchDelegate(this,s,r,o,e);var l=this,c=l.$$watchers,u={fn:s,last:y,get:o,exp:i||e,eq:!!r};return n=null,c||((c=l.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(u),c.$$digestWatchIndex++,S(this,1),function(){var e=ae(c,u);e>=0&&(S(l,-1),e<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(e,t){var n=new Array(e.length),r=new Array(e.length),i=[],a=this,o=!1,s=!0;if(!e.length){var l=!0;return a.$evalAsync((function(){l&&t(r,r,a)})),function(){l=!1}}if(1===e.length)return this.$watch(e[0],(function(e,i,a){r[0]=e,n[0]=i,t(r,e===i?r:n,a)}));function c(){o=!1;try{s?(s=!1,t(r,r,a)):t(r,n,a)}finally{for(var i=0;i<e.length;i++)n[i]=r[i]}}return k(e,(function(e,t){var n=a.$watch(e,(function(e){r[t]=e,o||(o=!0,a.$evalAsync(c))}));i.push(n)})),function(){for(;i.length;)i.shift()()}},$watchCollection:function(e,t){v.$$pure=a(e).literal,v.$stateful=!v.$$pure;var n,r,i,o=this,s=t.length>1,l=0,c=a(e,v),u=[],p={},f=!0,d=0;function v(e){var t,i,a,o;if(!B(n=e)){if(R(n))if(x(n)){r!==u&&(d=(r=u).length=0,l++),t=n.length,d!==t&&(l++,r.length=d=t);for(var s=0;s<t;s++)o=r[s],a=n[s],o!=o&&a!=a||o===a||(l++,r[s]=a)}else{for(i in r!==p&&(r=p={},d=0,l++),t=0,n)h.call(n,i)&&(t++,a=n[i],o=r[i],i in r?o!=o&&a!=a||o===a||(l++,r[i]=a):(d++,r[i]=a,l++));if(d>t)for(i in l++,r)h.call(n,i)||(d--,delete r[i])}else r!==n&&(r=n,l++);return l}}return this.$watch(c,(function(){if(f?(f=!1,t(n,n,o)):t(n,i,o),s)if(R(n))if(x(n)){i=new Array(n.length);for(var e=0;e<n.length;e++)i[e]=n[e]}else for(var r in i={},n)h.call(n,r)&&(i[r]=n[r]);else i=n}))},$digest:function(){var a,o,l,c,h,d,S,w,x,k=e,C=p.length?u:this,$=[];m("$digest"),s.$$checkUrlChange(),this===u&&null!==r&&(s.defer.cancel(r),b()),n=null;do{h=!1,S=C;for(var P=0;P<p.length;P++){try{(0,(x=p[P]).fn)(x.scope,x.locals)}catch(e){i(e)}n=null}p.length=0;e:do{if(c=!S.$$suspended&&S.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(a=c[c.$$digestWatchIndex])if((o=(0,a.get)(S))===(l=a.last)||(a.eq?le(o,l):D(o)&&D(l))){if(a===n){h=!1;break e}}else h=!0,n=a,a.last=a.eq?oe(o,null):o,(0,a.fn)(o,l===y?o:l,S),k<5&&($[w=4-k]||($[w]=[]),$[w].push({msg:q(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:o,oldVal:l}))}catch(e){i(e)}if(!(d=!S.$$suspended&&S.$$watchersCount&&S.$$childHead||S!==C&&S.$$nextSibling))for(;S!==C&&!(d=S.$$nextSibling);)S=S.$parent}while(S=d);if((h||p.length)&&!k--)throw g(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,$)}while(h||p.length);for(g();v<f.length;)try{f[v++]()}catch(e){i(e)}f.length=v=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===u&&s.$$applicationDestroyed(),S(this,-this.$$watchersCount),this.$$listenerCount)w(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=V,this.$on=this.$watch=this.$watchGroup=function(){return V},this.$$listeners={},this.$$nextSibling=null,function e(t){9===o&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return a(e)(this,t)},$evalAsync:function(e,t){u.$$phase||p.length||s.defer((function(){p.length&&u.$digest()}),null,"$evalAsync"),p.push({scope:this,fn:a(e),locals:t})},$$postDigest:function(e){f.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{g()}}catch(e){i(e)}finally{try{u.$digest()}catch(e){throw i(e),e}}},$applyAsync:function(e){var t=this;e&&d.push((function(){t.$eval(e)})),e=a(e),null===r&&(r=s.defer((function(){u.$apply(b)}),null,"$applyAsync"))},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(delete n[r],w(i,1,e))}},$emit:function(e,t){var n,r,a,o=[],s=this,l=!1,c={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=he([c],arguments,1);do{for(n=s.$$listeners[e]||o,c.currentScope=s,r=0,a=n.length;r<a;r++)if(n[r])try{n[r].apply(null,u)}catch(e){i(e)}else n.splice(r,1),r--,a--;if(l)break;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,r=n,a=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var s,l,c,u=he([o],arguments,1);r=a;){for(o.currentScope=r,l=0,c=(s=r.$$listeners[e]||[]).length;l<c;l++)if(s[l])try{s[l].apply(null,u)}catch(e){i(e)}else s.splice(l,1),l--,c--;if(!(a=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(a=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var u=new c,p=u.$$asyncQueue=[],f=u.$$postDigestQueue=[],d=u.$$applyAsyncQueue=[],v=0;return u;function m(e){if(u.$$phase)throw t("inprog","{0} already in progress",u.$$phase);u.$$phase=e}function g(){u.$$phase=null}function S(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function w(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function y(){}function b(){for(;d.length;)try{d.shift()()}catch(e){i(e)}r=null}}]}function zr(){var e=/^\s*(https?|s?ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return F(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return F(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i=r?t:e,a=ci(n&&n.trim()).href;return""===a||a.match(i)?n:"unsafe:"+a}}}Mr.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Pr(e,t.$filter);var n,r="";if(this.stage="assign",n=_r(e)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var a=Er(e.body);t.stage="inputs",k(a,(function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push({name:r,isPure:e.isPure}),e.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(e);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,wr,Cr,$r);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return k(t,(function(t){e.push("var "+t.name+"="+n.generateFunction(t.name,"s")),t.isPure&&e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")})),t.length&&e.push("fn.inputs=["+t.map((function(e){return e.name})).join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return k(this.state.filters,(function(n,r){e.push(n+"=$filter("+t.escape(r)+")")})),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,r,i,a){var o,s,l,c,u,h=this;if(r=r||V,!a&&F(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,r,i,!0));switch(e.type){case kr.Program:k(e.body,(function(t,n){h.recurse(t.expression,void 0,void 0,(function(e){s=e})),n!==e.body.length-1?h.current().body.push(s,";"):h.return_(s)}));break;case kr.Literal:c=this.escape(e.value),this.assign(t,c),r(t||c);break;case kr.UnaryExpression:this.recurse(e.argument,void 0,void 0,(function(e){s=e})),c=e.operator+"("+this.ifDefined(s,0)+")",this.assign(t,c),r(c);break;case kr.BinaryExpression:this.recurse(e.left,void 0,void 0,(function(e){o=e})),this.recurse(e.right,void 0,void 0,(function(e){s=e})),c="+"===e.operator?this.plus(o,s):"-"===e.operator?this.ifDefined(o,0)+e.operator+this.ifDefined(s,0):"("+o+")"+e.operator+"("+s+")",this.assign(t,c),r(c);break;case kr.LogicalExpression:t=t||this.nextId(),h.recurse(e.left,t),h.if_("&&"===e.operator?t:h.not(t),h.lazyRecurse(e.right,t)),r(t);break;case kr.ConditionalExpression:t=t||this.nextId(),h.recurse(e.test,t),h.if_(t,h.lazyRecurse(e.alternate,t),h.lazyRecurse(e.consequent,t)),r(t);break;case kr.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",e.name)),(function(){h.if_("inputs"===h.stage||"s",(function(){i&&1!==i&&h.if_(h.isNull(h.nonComputedMember("s",e.name)),h.lazyAssign(h.nonComputedMember("s",e.name),"{}")),h.assign(t,h.nonComputedMember("s",e.name))}))}),t&&h.lazyAssign(t,h.nonComputedMember("l",e.name))),r(t);break;case kr.MemberExpression:o=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),h.recurse(e.object,o,void 0,(function(){h.if_(h.notNull(o),(function(){e.computed?(s=h.nextId(),h.recurse(e.property,s),h.getStringValue(s),i&&1!==i&&h.if_(h.not(h.computedMember(o,s)),h.lazyAssign(h.computedMember(o,s),"{}")),c=h.computedMember(o,s),h.assign(t,c),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&h.if_(h.isNull(h.nonComputedMember(o,e.property.name)),h.lazyAssign(h.nonComputedMember(o,e.property.name),"{}")),c=h.nonComputedMember(o,e.property.name),h.assign(t,c),n&&(n.computed=!1,n.name=e.property.name))}),(function(){h.assign(t,"undefined")})),r(t)}),!!i);break;case kr.CallExpression:t=t||this.nextId(),e.filter?(s=h.filter(e.callee.name),l=[],k(e.arguments,(function(e){var t=h.nextId();h.recurse(e,t),l.push(t)})),c=s+"("+l.join(",")+")",h.assign(t,c),r(t)):(s=h.nextId(),o={},l=[],h.recurse(e.callee,s,o,(function(){h.if_(h.notNull(s),(function(){k(e.arguments,(function(t){h.recurse(t,e.constant?void 0:h.nextId(),void 0,(function(e){l.push(e)}))})),c=o.name?h.member(o.context,o.name,o.computed)+"("+l.join(",")+")":s+"("+l.join(",")+")",h.assign(t,c)}),(function(){h.assign(t,"undefined")})),r(t)})));break;case kr.AssignmentExpression:s=this.nextId(),o={},this.recurse(e.left,void 0,o,(function(){h.if_(h.notNull(o.context),(function(){h.recurse(e.right,s),c=h.member(o.context,o.name,o.computed)+e.operator+s,h.assign(t,c),r(t||c)}))}),1);break;case kr.ArrayExpression:l=[],k(e.elements,(function(t){h.recurse(t,e.constant?void 0:h.nextId(),void 0,(function(e){l.push(e)}))})),c="["+l.join(",")+"]",this.assign(t,c),r(t||c);break;case kr.ObjectExpression:l=[],u=!1,k(e.properties,(function(e){e.computed&&(u=!0)})),u?(t=t||this.nextId(),this.assign(t,"{}"),k(e.properties,(function(e){e.computed?(o=h.nextId(),h.recurse(e.key,o)):o=e.key.type===kr.Identifier?e.key.name:""+e.key.value,s=h.nextId(),h.recurse(e.value,s),h.assign(h.member(t,o,e.computed),s)}))):(k(e.properties,(function(t){h.recurse(t.value,e.constant?void 0:h.nextId(),void 0,(function(e){l.push(h.escape(t.key.type===kr.Identifier?t.key.name:""+t.key.value)+":"+e)}))})),c="{"+l.join(",")+"}",this.assign(t,c)),r(t||c);break;case kr.ThisExpression:this.assign(t,"s"),r(t||"s");break;case kr.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case kr.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,a){var o=this;return function(){o.recurse(e,t,n,r,i,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(j(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(z(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw gr("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Ar.prototype={compile:function(e){var t,n,r=this;Pr(e,r.$filter),(t=_r(e))&&(n=this.recurse(t));var i,a=Er(e.body);a&&(i=[],k(a,(function(e,t){var n=r.recurse(e);n.isPure=e.isPure,e.input=n,i.push(n),e.watchId=t})));var o=[];k(e.body,(function(e){o.push(r.recurse(e.expression))}));var s=0===e.body.length?V:1===e.body.length?o[0]:function(e,t){var n;return k(o,(function(r){n=r(e,t)})),n};return n&&(s.assign=function(e,t,r){return n(e,r,t)}),i&&(s.inputs=i),s},recurse:function(e,t,n){var r,i,a,o=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case kr.Literal:return this.value(e.value,t);case kr.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case kr.BinaryExpression:case kr.LogicalExpression:return r=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](r,i,t);case kr.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case kr.Identifier:return o.identifier(e.name,t,n);case kr.MemberExpression:return r=this.recurse(e.object,!1,!!n),e.computed||(i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(r,i,t,n):this.nonComputedMember(r,i,t,n);case kr.CallExpression:return a=[],k(e.arguments,(function(e){a.push(o.recurse(e))})),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(e,n,r,o){for(var s=[],l=0;l<a.length;++l)s.push(a[l](e,n,r,o));var c=i.apply(void 0,s,o);return t?{context:void 0,name:void 0,value:c}:c}:function(e,n,r,o){var s,l=i(e,n,r,o);if(null!=l.value){for(var c=[],u=0;u<a.length;++u)c.push(a[u](e,n,r,o));s=l.value.apply(l.context,c)}return t?{value:s}:s};case kr.AssignmentExpression:return r=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(e,n,a,o){var s=r(e,n,a,o),l=i(e,n,a,o);return s.context[s.name]=l,t?{value:l}:l};case kr.ArrayExpression:return a=[],k(e.elements,(function(e){a.push(o.recurse(e))})),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case kr.ObjectExpression:return a=[],k(e.properties,(function(e){e.computed?a.push({key:o.recurse(e.key),computed:!0,value:o.recurse(e.value)}):a.push({key:e.key.type===kr.Identifier?e.key.name:""+e.key.value,computed:!1,value:o.recurse(e.value)})})),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,n,r,i)]=a[s].value(e,n,r,i):o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case kr.ThisExpression:return function(e){return t?{value:e}:e};case kr.LocalsExpression:return function(e,n){return t?{value:n}:n};case kr.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=F(o)?+o:0,t?{value:o}:o}},"unary-":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=F(o)?-o:-0,t?{value:o}:o}},"unary!":function(e,t){return function(n,r,i,a){var o=!e(n,r,i,a);return t?{value:o}:o}},"binary+":function(e,t,n){return function(r,i,a,o){var s=$r(e(r,i,a,o),t(r,i,a,o));return n?{value:s}:s}},"binary-":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),l=t(r,i,a,o),c=(F(s)?s:0)-(F(l)?l:0);return n?{value:c}:c}},"binary*":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)*t(r,i,a,o);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)/t(r,i,a,o);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)%t(r,i,a,o);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)===t(r,i,a,o);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!==t(r,i,a,o);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)==t(r,i,a,o);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!=t(r,i,a,o);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<t(r,i,a,o);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>t(r,i,a,o);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<=t(r,i,a,o);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>=t(r,i,a,o);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)&&t(r,i,a,o);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)||t(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,a,o,s){var l=e(i,a,o,s)?t(i,a,o,s):n(i,a,o,s);return r?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,i,a,o){var s=i&&e in i?i:r;n&&1!==n&&s&&null==s[e]&&(s[e]={});var l=s?s[e]:void 0;return t?{context:s,name:e,value:l}:l}},computedMember:function(e,t,n,r){return function(i,a,o,s){var l,c,u=e(i,a,o,s);return null!=u&&(l=wr(l=t(i,a,o,s)),r&&1!==r&&u&&!u[l]&&(u[l]={}),c=u[l]),n?{context:u,name:l,value:c}:c}},nonComputedMember:function(e,t,n,r){return function(i,a,o,s){var l=e(i,a,o,s);r&&1!==r&&l&&null==l[t]&&(l[t]={});var c=null!=l?l[t]:void 0;return n?{context:l,name:t,value:c}:c}},inputs:function(e,t){return function(n,r,i,a){return a?a[t]:e(n,r,i)}}},Dr.prototype={constructor:Dr,parse:function(e){var t=this.getAst(e),n=this.astCompiler.compile(t.ast);return n.literal=function(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===kr.Literal||e.body[0].expression.type===kr.ArrayExpression||e.body[0].expression.type===kr.ObjectExpression)}(t.ast),n.constant=function(e){return e.constant}(t.ast),n.oneTime=t.oneTime,n},getAst:function(e){var t=!1;return":"===(e=e.trim()).charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var Ur=a("$sce"),Wr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gr=/_([a-z])/g;function qr(e){return e.replace(Gr,Je)}function Yr(e){var t=[];return F(e)&&k(e,(function(e){t.push(function(e){if("self"===e)return e;if(j(e)){if(e.indexOf("***")>-1)throw Ur("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=te(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(Y(e))return new RegExp("^"+e.source+"$");throw Ur("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))})),t}function Xr(){this.SCE_CONTEXTS=Wr;var e=["self"],n=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Yr(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(n=Yr(e)),n},this.$get=["$injector","$$sanitizeUri",function(r,i){var a=function(e){throw Ur("unsafe","Attempting to use an unsafe value in a safe context.")};function o(e,n){return"self"===e?ui(n,si)||function(e){return ui(e,function(){if(t.document.baseURI)return t.document.baseURI;ai||((ai=t.document.createElement("a")).href=".",ai=ai.cloneNode(!1));return ai.href}())}(n):!!e.exec(n.href)}function s(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}r.has("$sanitize")&&(a=r.get("$sanitize"));var l=s(),c={};return c[Wr.HTML]=s(l),c[Wr.CSS]=s(l),c[Wr.MEDIA_URL]=s(l),c[Wr.URL]=s(c[Wr.MEDIA_URL]),c[Wr.JS]=s(l),c[Wr.RESOURCE_URL]=s(c[Wr.URL]),{trustAs:function(e,t){var n=c.hasOwnProperty(e)?c[e]:null;if(!n)throw Ur("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||B(t)||""===t)return t;if("string"!=typeof t)throw Ur("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(t,r){if(null===r||B(r)||""===r)return r;var s=c.hasOwnProperty(t)?c[t]:null;if(s&&r instanceof s)return r.$$unwrapTrustedValue();if(q(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),t===Wr.MEDIA_URL||t===Wr.URL)return i(r.toString(),t===Wr.MEDIA_URL);if(t===Wr.RESOURCE_URL){if(function(t){var r,i,a=ci(t.toString()),s=!1;for(r=0,i=e.length;r<i;r++)if(o(e[r],a)){s=!0;break}if(s)for(r=0,i=n.length;r<i;r++)if(o(n[r],a)){s=!1;break}return s}(r))return r;throw Ur("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(t===Wr.HTML)return a(r);throw Ur("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof l?e.$$unwrapTrustedValue():e}}}]}function Zr(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&o<8)throw Ur("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=ze(Wr);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=I),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,(function(t){return r.getTrusted(e,t)}))};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return k(Wr,(function(e,t){var n=p(t);r[qr("parse_as_"+n)]=function(t){return i(e,t)},r[qr("get_trusted_"+n)]=function(t){return a(e,t)},r[qr("trust_as_"+n)]=function(t){return s(e,t)}})),r}]}function Kr(){this.$get=["$window","$document",function(e,t){var n={},r=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,i=A((/android (\d+)/.exec(p((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},l=s.body&&s.body.style,c=!1,u=!1;return l&&(c=!(!("transition"in l)&&!("webkitTransition"in l)),u=!(!("animation"in l)&&!("webkitAnimation"in l))),{history:!(!r||i<4||a),hasEvent:function(e){if("input"===e&&o)return!1;if(B(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:ce(),transitions:c,animations:u,android:i}}]}function Jr(){this.$get=O((function(e){return new Qr(e)}))}function Qr(e){var t={},n=[],r=this.ALL_TASKS_TYPE="$$all$$",i=this.DEFAULT_TASK_TYPE="$$default$$";function a(){var e=n.pop();return e&&e.cb}function o(e){for(var t=n.length-1;t>=0;--t){var r=n[t];if(r.type===e)return n.splice(t,1),r.cb}}this.completeTask=function(n,s){s=s||i;try{n()}finally{!function(e){t[e=e||i]&&(t[e]--,t[r]--)}(s);var l=t[s],c=t[r];if(!c||!l)for(var u,h=c?o:a;u=h(s);)try{u()}catch(t){e.error(t)}}},this.incTaskCount=function(e){t[e=e||i]=(t[e]||0)+1,t[r]=(t[r]||0)+1},this.notifyWhenNoPendingTasks=function(e,i){t[i=i||r]?n.push({type:i,cb:e}):e()}}var ei=a("$templateRequest");function ti(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,i,a){function o(s,l){o.totalPendingRequests++,j(s)&&!B(n.get(s))||(s=a.getTrustedResourceUrl(s));var c=r.defaults&&r.defaults.transformResponse;return W(c)?c=c.filter((function(e){return e!==Fn})):c===Fn&&(c=null),r.get(s,_({cache:n,transformResponse:c},e)).finally((function(){o.totalPendingRequests--})).then((function(e){return n.put(s,e.data)}),(function(e){l||(e=ei("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e));return i.reject(e)}))}return o.totalPendingRequests=0,o}]}function ni(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={findBindings:function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return k(r,(function(e){var r=y.element(e).data("$binding");r&&k(r,(function(r){n?new RegExp("(^|\\s)"+te(t)+"(\\s|\\||$)").test(r)&&i.push(e):-1!==r.indexOf(t)&&i.push(e)}))})),i},findModels:function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a="["+r[i]+"model"+(n?"=":"*=")+'"'+t+'"]',o=e.querySelectorAll(a);if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(t){t!==n.url()&&(n.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}};return r}]}var ri=a("$timeout");function ii(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){var a={};function o(o,s,l){q(o)||(l=s,s=o,o=V);var c,u=pe(arguments,3),h=F(l)&&!l,p=(h?r:n).defer(),f=p.promise;return c=t.defer((function(){try{p.resolve(o.apply(null,u))}catch(e){p.reject(e),i(e)}finally{delete a[f.$$timeoutId]}h||e.$apply()}),s,"$timeout"),f.$$timeoutId=c,a[c]=p,f}return o.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$timeoutId"))throw ri("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!a.hasOwnProperty(e.$$timeoutId))return!1;var n=e.$$timeoutId,r=a[n];return Rr(r.promise),r.reject("canceled"),delete a[n],t.defer.cancel(n)},o}]}var ai,oi=t.document.createElement("a"),si=ci(t.location.href);oi.href="http://[::1]";var li="[::1]"===oi.hostname;function ci(e){if(!j(e))return e;var t=e;o&&(oi.setAttribute("href",t),t=oi.href),oi.setAttribute("href",t);var n=oi.hostname;return!li&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:oi.href,protocol:oi.protocol?oi.protocol.replace(/:$/,""):"",host:oi.host,search:oi.search?oi.search.replace(/^\?/,""):"",hash:oi.hash?oi.hash.replace(/^#/,""):"",hostname:n,port:oi.port,pathname:"/"===oi.pathname.charAt(0)?oi.pathname:"/"+oi.pathname}}function ui(e,t){return e=ci(e),t=ci(t),e.protocol===t.protocol&&e.host===t.host}function hi(){this.$get=O(t)}function pi(e){var t=e[0]||{},n={},r="";function i(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var e,a,o,s,l,c=function(e){try{return e.cookie||""}catch(e){return""}}(t);if(c!==r)for(e=(r=c).split("; "),n={},o=0;o<e.length;o++)(s=(a=e[o]).indexOf("="))>0&&(l=i(a.substring(0,s)),B(n[l])&&(n[l]=i(a.substring(s+1))));return n}}function fi(){this.$get=pi}function di(e){function t(n,r){if(R(n)){var i={};return k(n,(function(e,n){i[n]=t(n,e)})),i}return e.factory(n+"Filter",r)}this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+"Filter")}}],t("currency",Si),t("date",Mi),t("filter",vi),t("json",Ai),t("limitTo",Vi),t("lowercase",Di),t("number",wi),t("orderBy",Oi),t("uppercase",Li)}function vi(){return function(e,t,n,r){if(!x(e)){if(null==e)return e;throw a("filter")("notarray","Expected array but received: {0}",e)}var i,o;switch(r=r||"$",gi(t)){case"function":i=t;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":i=function(e,t,n,r){var i=R(e)&&n in e;!0===t?t=le:q(t)||(t=function(e,t){return!B(e)&&(null===e||null===t?e===t:!(R(t)||R(e)&&!N(e))&&(e=p(""+e),t=p(""+t),-1!==e.indexOf(t)))});return function(a){return i&&!R(a)?mi(a,e[n],t,n,!1):mi(a,e,t,n,r)}}(t,n,r,o);break;default:return e}return Array.prototype.filter.call(e,i)}}function mi(e,t,n,r,i,a){var o=gi(e),s=gi(t);if("string"===s&&"!"===t.charAt(0))return!mi(e,t.substring(1),n,r,i);if(W(e))return e.some((function(e){return mi(e,t,n,r,i)}));switch(o){case"object":var l;if(i){for(l in e)if(l.charAt&&"$"!==l.charAt(0)&&mi(e[l],t,n,r,!0))return!0;return!a&&mi(e,t,n,r,!1)}if("object"===s){for(l in t){var c=t[l];if(!q(c)&&!B(c)){var u=l===r;if(!mi(u?e:e[l],c,n,r,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function gi(e){return null===e?"null":typeof e}pi.$inject=["$document"],di.$inject=["$provide"];function Si(e){var t=e.NUMBER_FORMATS;return function(e,n,r){B(n)&&(n=t.CURRENCY_SYM),B(r)&&(r=t.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:yi(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(i,n)}}function wi(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:yi(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function yi(e,t,n,r,i){if(!j(e)&&!z(e)||isNaN(e))return"";var a,o=!isFinite(e),s=!1,l=Math.abs(e)+"",c="";if(o)c="∞";else{(function(e,t,n,r){var i=e.d,a=i.length-e.i,o=(t=B(t)?Math.min(Math.max(n,a),r):+t)+e.i,s=i[o];if(o>0){i.splice(Math.max(e.i,o));for(var l=o;l<i.length;l++)i[l]=0}else{a=Math.max(0,a),e.i=1,i.length=Math.max(1,o=t+1),i[0]=0;for(var c=1;c<o;c++)i[c]=0}if(s>=5)if(o-1<0){for(var u=0;u>o;u--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[o-1]++;for(;a<Math.max(0,t);a++)i.push(0);var h=i.reduceRight((function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)}),0);h&&(i.unshift(h),e.i++)})(a=function(e){var t,n,r,i,a,o=0;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;"0"===e.charAt(r);r++);if(r===(a=e.length))t=[0],n=1;else{for(a--;"0"===e.charAt(a);)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=+e.charAt(r)}return n>22&&(t=t.splice(0,21),o=n-1,n=1),{d:t,e:o,i:n}}(l),i,t.minFrac,t.maxFrac);var u=a.d,h=a.i,p=a.e,f=[];for(s=u.reduce((function(e,t){return e&&!t}),!0);h<0;)u.unshift(0),h++;h>0?f=u.splice(h,u.length):(f=u,u=[0]);var d=[];for(u.length>=t.lgSize&&d.unshift(u.splice(-t.lgSize,u.length).join(""));u.length>t.gSize;)d.unshift(u.splice(-t.gSize,u.length).join(""));u.length&&d.unshift(u.join("")),c=d.join(n),f.length&&(c+=r+f.join("")),p&&(c+="e+"+p)}return e<0&&!s?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf}function bi(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function xi(e,t,n,r,i){return n=n||0,function(a){var o=a["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12===n&&(o=12),bi(o,t,r,i)}}function ki(e,t,n){return function(r,i){var a=r["get"+e]();return i[f((n?"STANDALONE":"")+(t?"SHORT":"")+e)][a]}}function Ci(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function $i(e){return function(t){var n,r=Ci(t.getFullYear()),i=+(n=t,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return bi(1+Math.round(i/6048e5),e)}}function Pi(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}Si.$inject=["$locale"],wi.$inject=["$locale"];var Ei={yyyy:xi("FullYear",4,0,!1,!0),yy:xi("FullYear",2,0,!0,!0),y:xi("FullYear",1,0,!1,!0),MMMM:ki("Month"),MMM:ki("Month",!0),MM:xi("Month",2,1),M:xi("Month",1,1),LLLL:ki("Month",!1,!0),dd:xi("Date",2),d:xi("Date",1),HH:xi("Hours",2),H:xi("Hours",1),hh:xi("Hours",2,-12),h:xi("Hours",1,-12),mm:xi("Minutes",2),m:xi("Minutes",1),ss:xi("Seconds",2),s:xi("Seconds",1),sss:xi("Milliseconds",3),EEEE:ki("Day"),EEE:ki("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=bi(Math[r>0?"floor":"ceil"](r/60),2)+bi(Math.abs(r%60),2)},ww:$i(2),w:$i(1),G:Pi,GG:Pi,GGG:Pi,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},Ti=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,_i=/^-?\d+$/;function Mi(e){var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,o,s="",l=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,j(n)&&(n=_i.test(n)?A(n):function(e){var n;if(n=e.match(t)){var r=new Date(0),i=0,a=0,o=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=A(n[9]+n[10]),a=A(n[9]+n[11])),o.call(r,A(n[1]),A(n[2])-1,A(n[3]));var l=A(n[4]||0)-i,c=A(n[5]||0)-a,u=A(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,l,c,u,h),r}return e}(n)),z(n)&&(n=new Date(n)),!U(n)||!isFinite(n.getTime()))return n;for(;r;)(o=Ti.exec(r))?r=(l=he(l,o,1)).pop():(l.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=Se(i,c),n=ye(n,i,!0)),k(l,(function(t){s+=(a=Ei[t])?a(n,e.DATETIME_FORMATS,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function Ai(){return function(e,t){return B(t)&&(t=2),ve(e,t)}}Mi.$inject=["$locale"];var Di=O(p),Li=O(f);function Vi(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):A(t),D(t)?e:(z(e)&&(e=e.toString()),x(e)?(n=(n=!n||isNaN(n)?0:A(n))<0?Math.max(0,e.length+n):n,t>=0?Ii(e,n,n+t):0===n?Ii(e,t,e.length):Ii(e,Math.max(0,n+t),n)):e)}}function Ii(e,t,n){return j(e)?e.slice(t,n):d.call(e,t,n)}function Oi(e){return function(r,i,o,s){if(null==r)return r;if(!x(r))throw a("orderBy")("notarray","Expected array but received: {0}",r);W(i)||(i=[i]),0===i.length&&(i=["+"]);var l=i.map((function(t){var n=1,r=I;if(q(t))r=t;else if(j(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t)).constant)){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})),c=o?-1:1,u=q(s)?s:n,h=Array.prototype.map.call(r,(function(e,n){return{value:e,tieBreaker:{value:n,type:"number",index:n},predicateValues:l.map((function(r){return function(e,n){var r=typeof e;null===e?r="null":"object"===r&&(e=function(e){if(q(e.valueOf)&&t(e=e.valueOf()))return e;if(N(e)&&t(e=e.toString()))return e;return e}(e));return{value:e,type:r,index:n}}(r.get(e),n)}))}}));return h.sort((function(e,t){for(var r=0,i=l.length;r<i;r++){var a=u(e.predicateValues[r],t.predicateValues[r]);if(a)return a*l[r].descending*c}return(u(e.tieBreaker,t.tieBreaker)||n(e.tieBreaker,t.tieBreaker))*c})),r=h.map((function(e){return e.value}))};function t(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function n(e,t){var n=0,r=e.type,i=t.type;if(r===i){var a=e.value,o=t.value;"string"===r?(a=a.toLowerCase(),o=o.toLowerCase()):"object"===r&&(R(a)&&(a=e.index),R(o)&&(o=t.index)),a!==o&&(n=a<o?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i||r<i?-1:1;return n}}function Ni(e){return q(e)&&(e={link:e}),e.restrict=e.restrict||"AC",O(e)}Oi.$inject=["$parse"];var Bi=O({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(t.prop("href"))?"xlink:href":"href";t.on("click",(function(e){t.attr(n)||e.preventDefault()}))}}}}),Fi={};k(Dt,(function(e,t){if("multiple"!==e){var n=yn("ng-"+t),r=i;"checked"===e&&(r=function(e,t,r){r.ngModel!==r[n]&&i(e,0,r)}),Fi[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(e,r,i){e.$watch(i[n],(function(e){i.$set(t,!!e)}))}})),k(Vt,(function(e,t){Fi[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(u);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],(function(e){r.$set(t,e)}))}}}})),k(["src","srcset","href"],(function(e){var t=yn("ng-"+e);Fi[t]=["$sce",function(n){return{priority:99,link:function(r,i,a){var s=e,l=e;"href"===e&&"[object SVGAnimatedString]"===g.call(i.prop("href"))&&(l="xlinkHref",a.$attr[l]="xlink:href",s=null),a.$set(t,n.getTrustedMediaUrl(a[t])),a.$observe(t,(function(t){t?(a.$set(l,t),o&&s&&i.prop(s,a[l])):"href"===e&&a.$set(l,null)}))}}}]}));var Ri={$addControl:V,$getControls:O([]),$$renameControl:function(e,t){e.$name=t},$removeControl:V,$setValidity:V,$setDirty:V,$setPristine:V,$setSubmitted:V,$$setSubmitted:V};function Hi(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Ri,this.$$element=e,this.$$animate=r,Wi(this)}Hi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Hi.prototype={$rollbackViewValue:function(){k(this.$$controls,(function(e){e.$rollbackViewValue()}))},$commitViewValue:function(){k(this.$$controls,(function(e){e.$commitViewValue()}))},$addControl:function(e){Be(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$getControls:function(){return ze(this.$$controls)},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],k(this.$pending,(function(t,n){this.$setValidity(n,null,e)}),this),k(this.$error,(function(t,n){this.$setValidity(n,null,e)}),this),k(this.$$success,(function(t,n){this.$setValidity(n,null,e)}),this),ae(this.$$controls,e),e.$$parentForm=Ri},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ra),this.$$animate.addClass(this.$$element,Ha),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ra,Ha+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,k(this.$$controls,(function(e){e.$setPristine()}))},$setUntouched:function(){k(this.$$controls,(function(e){e.$setUntouched()}))},$setSubmitted:function(){for(var e=this;e.$$parentForm&&e.$$parentForm!==Ri;)e=e.$$parentForm;e.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,k(this.$$controls,(function(e){e.$$setSubmitted&&e.$$setSubmitted()}))}},Gi({clazz:Hi,set:function(e,t,n){var r=e[t];r?-1===r.indexOf(n)&&r.push(n):e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(ae(r,n),0===r.length&&delete e[t])}});var ji=function(e){return["$timeout","$parse",function(t,n){return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:Hi,compile:function(n,i){n.addClass(Ra).addClass(Ba);var a=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,o){var s=o[0];if(!("action"in i)){var l=function(t){e.$apply((function(){s.$commitViewValue(),s.$setSubmitted()})),t.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",(function(){t((function(){n[0].removeEventListener("submit",l)}),0,!1)}))}(o[1]||s.$$parentForm).$addControl(s);var c=a?r(s.$name):V;a&&(c(e,s),i.$observe(a,(function(t){s.$name!==t&&(c(e,void 0),s.$$parentForm.$$renameControl(s,t),(c=r(s.$name))(e,s))}))),n.on("$destroy",(function(){s.$$parentForm.$removeControl(s),c(e,void 0),_(s,Ri)}))}}}};function r(e){return""===e?n('this[""]').assign:n(e).assign||V}}]},zi=ji(),Ui=ji(!0);function Wi(e){e.$$classCache={},e.$$classCache[Fa]=!(e.$$classCache[Ba]=e.$$element.hasClass(Ba))}function Gi(e){var t=e.clazz,n=e.set,r=e.unset;function i(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function a(e,t,n){t=t?"-"+Le(t,"-"):"",i(e,Ba+t,!0===n),i(e,Fa+t,!1===n)}t.prototype.$setValidity=function(e,t,o){var s;B(t)?function(e,t,r,i){e[t]||(e[t]={});n(e[t],r,i)}(this,"$pending",e,o):function(e,t,n,i){e[t]&&r(e[t],n,i);qi(e[t])&&(e[t]=void 0)}(this,"$pending",e,o),K(t)?t?(r(this.$error,e,o),n(this.$$success,e,o)):(n(this.$error,e,o),r(this.$$success,e,o)):(r(this.$error,e,o),r(this.$$success,e,o)),this.$pending?(i(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,a(this,"",null)):(i(this,"ng-pending",!1),this.$valid=qi(this.$error),this.$invalid=!this.$valid,a(this,"",this.$valid)),a(this,e,s=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,s,this)}}function qi(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Yi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Xi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Zi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ki=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Ji=/^(\d{4,})-(\d{2})-(\d{2})$/,Qi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ea=/^(\d{4,})-W(\d\d)$/,ta=/^(\d{4,})-(\d\d)$/,na=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ra=Re();k("date,datetime-local,month,time,week".split(","),(function(e){ra[e]=!0}));var ia={text:function(e,t,n,r,i,a){oa(e,t,n,r,i,a),aa(r)},date:la("date",Ji,sa(Ji,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":la("datetimelocal",Qi,sa(Qi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:la("time",na,sa(na,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:la("week",ea,(function(e,t){if(U(e))return e;if(j(e)){ea.lastIndex=0;var n=ea.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,l=0,c=Ci(r),u=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(r,0,c.getDate()+u,a,o,s,l)}}return NaN}),"yyyy-Www"),month:la("month",ta,sa(ta,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,r,i,a,o,s){var l;if(ca(e,t,n,r,"number"),ua(r),oa(e,t,n,r,i,a),F(n.min)||n.ngMin){var c=n.min||s(n.ngMin)(e);l=ha(c),r.$validators.min=function(e,t){return r.$isEmpty(t)||B(l)||t>=l},n.$observe("min",(function(e){e!==c&&(l=ha(e),c=e,r.$validate())}))}if(F(n.max)||n.ngMax){var u=n.max||s(n.ngMax)(e),h=ha(u);r.$validators.max=function(e,t){return r.$isEmpty(t)||B(h)||t<=h},n.$observe("max",(function(e){e!==u&&(h=ha(e),u=e,r.$validate())}))}if(F(n.step)||n.ngStep){var p=n.step||s(n.ngStep)(e),f=ha(p);r.$validators.step=function(e,t){return r.$isEmpty(t)||B(f)||da(t,l||0,f)},n.$observe("step",(function(e){e!==p&&(f=ha(e),p=e,r.$validate())}))}},url:function(e,t,n,r,i,a){oa(e,t,n,r,i,a),aa(r),r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||Xi.test(n)}},email:function(e,t,n,r,i,a){oa(e,t,n,r,i,a),aa(r),r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Zi.test(n)}},radio:function(e,t,n,r){var i=!n.ngTrim||"false"!==ee(n.ngTrim);B(n.name)&&t.attr("name",P());t.on("change",(function(e){var a;t[0].checked&&(a=n.value,i&&(a=ee(a)),r.$setViewValue(a,e&&e.type))})),r.$render=function(){var e=n.value;i&&(e=ee(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)},range:function(e,t,n,r,i,a){ca(e,t,n,r,"range"),ua(r),oa(e,t,n,r,i,a);var o=r.$$hasNativeValidators&&"range"===t[0].type,s=o?0:void 0,l=o?100:void 0,c=o?1:void 0,u=t[0].validity,h=F(n.min),p=F(n.max),f=F(n.step),d=r.$render;r.$render=o&&F(u.rangeUnderflow)&&F(u.rangeOverflow)?function(){d(),r.$setViewValue(t.val())}:d,h&&(s=ha(n.min),r.$validators.min=o?function(){return!0}:function(e,t){return r.$isEmpty(t)||B(s)||t>=s},v("min",(function(e){if(s=ha(e),D(r.$modelValue))return;if(o){var n=t.val();s>n&&(n=s,t.val(n)),r.$setViewValue(n)}else r.$validate()})));p&&(l=ha(n.max),r.$validators.max=o?function(){return!0}:function(e,t){return r.$isEmpty(t)||B(l)||t<=l},v("max",(function(e){if(l=ha(e),D(r.$modelValue))return;if(o){var n=t.val();l<n&&(t.val(l),n=l<s?s:l),r.$setViewValue(n)}else r.$validate()})));f&&(c=ha(n.step),r.$validators.step=o?function(){return!u.stepMismatch}:function(e,t){return r.$isEmpty(t)||B(c)||da(t,s||0,c)},v("step",(function(e){if(c=ha(e),D(r.$modelValue))return;o?r.$viewValue!==t.val()&&r.$setViewValue(t.val()):r.$validate()})));function v(e,r){t.attr(e,n[e]);var i=n[e];n.$observe(e,(function(e){e!==i&&(i=e,r(e))}))}},checkbox:function(e,t,n,r,i,a,o,s){var l=va(s,e,"ngTrueValue",n.ngTrueValue,!0),c=va(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("change",(function(e){r.$setViewValue(t[0].checked,e&&e.type)})),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push((function(e){return le(e,l)})),r.$parsers.push((function(e){return e?l:c}))},hidden:V,button:V,submit:V,reset:V,file:V};function aa(e){e.$formatters.push((function(t){return e.$isEmpty(t)?t:t.toString()}))}function oa(e,t,n,r,i,a){var o,s=p(t[0].type);if(!i.android){var l=!1;t.on("compositionstart",(function(){l=!0})),t.on("compositionupdate",(function(e){(B(e.data)||""===e.data)&&(l=!1)})),t.on("compositionend",(function(){l=!1,c()}))}var c=function(e){if(o&&(a.defer.cancel(o),o=null),!l){var i=t.val(),c=e&&e.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=ee(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))t.on("input",c);else{var u=function(e,t,n){o||(o=a.defer((function(){o=null,t&&t.value===n||c(e)})))};t.on("keydown",(function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||u(e,this,this.value)})),i.hasEvent("paste")&&t.on("paste cut drop",u)}t.on("change",c),ra[s]&&r.$$hasNativeValidators&&s===n.type&&t.on("keydown wheel mousedown",(function(e){if(!o){var t=this.validity,n=t.badInput,r=t.typeMismatch;o=a.defer((function(){o=null,t.badInput===n&&t.typeMismatch===r||c(e)}))}})),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function sa(e,t){return function(n,r){var i,a;if(U(n))return n;if(j(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Yi.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n)){i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},k(i,(function(e,n){n<t.length&&(a[t[n]]=+e)}));var o=new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0);return a.yyyy<100&&o.setFullYear(a.yyyy),o}}return NaN}}function la(e,t,n,r){return function(i,a,o,s,l,c,u,h){ca(i,a,o,s,e),oa(0,a,o,s,l,c);var p,f,d="time"===e||"datetimelocal"===e;if(s.$parsers.push((function(n){return s.$isEmpty(n)?null:t.test(n)?b(n,p):void(s.$$parserName=e)})),s.$formatters.push((function(e){if(e&&!U(e))throw ja("datefmt","Expected `{0}` to be a date",e);if(w(e)){p=e;var t=s.$options.getOption("timezone");return t&&(f=t,p=ye(p,t,!0)),function(e,t){var n=r;d&&j(s.$options.getOption("timeSecondsFormat"))&&(n=r.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var i=u("date")(e,n,t);d&&s.$options.getOption("timeStripZeroSeconds")&&(i=i.replace(/(?::00)?(?:\.000)?$/,""));return i}(e,t)}return p=null,f=null,""})),F(o.min)||o.ngMin){var v=o.min||h(o.ngMin)(i),m=y(v);s.$validators.min=function(e){return!w(e)||B(m)||n(e)>=m},o.$observe("min",(function(e){e!==v&&(m=y(e),v=e,s.$validate())}))}if(F(o.max)||o.ngMax){var g=o.max||h(o.ngMax)(i),S=y(g);s.$validators.max=function(e){return!w(e)||B(S)||n(e)<=S},o.$observe("max",(function(e){e!==g&&(S=y(e),g=e,s.$validate())}))}function w(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function y(e){return F(e)&&!U(e)?b(e)||void 0:e}function b(e,t){var r=s.$options.getOption("timezone");f&&f!==r&&(t=we(t,Se(f)));var i=n(e,t);return!isNaN(i)&&r&&(i=ye(i,r)),i}}}function ca(e,t,n,r,i){var a=t[0];(r.$$hasNativeValidators=R(a.validity))&&r.$parsers.push((function(e){var n=t.prop("validity")||{};if(!n.badInput&&!n.typeMismatch)return e;r.$$parserName=i}))}function ua(e){e.$parsers.push((function(t){return e.$isEmpty(t)?null:Ki.test(t)?parseFloat(t):void(e.$$parserName="number")})),e.$formatters.push((function(t){if(!e.$isEmpty(t)){if(!z(t))throw ja("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}))}function ha(e){return F(e)&&!z(e)&&(e=parseFloat(e)),D(e)?void 0:e}function pa(e){return(0|e)===e}function fa(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function da(e,t,n){var r=Number(e),i=!pa(r),a=!pa(t),o=!pa(n);if(i||a||o){var s=i?fa(r):0,l=a?fa(t):0,c=o?fa(n):0,u=Math.max(s,l,c),h=Math.pow(10,u);r*=h,t*=h,n*=h,i&&(r=Math.round(r)),a&&(t=Math.round(t)),o&&(n=Math.round(n))}return(r-t)%n==0}function va(e,t,n,r,i){var a;if(F(r)){if(!(a=e(r)).constant)throw ja("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}var ma=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(ia[p(o.type)]||ia.text)(i,a,o,s[0],t,e,n,r)}}}}],ga=function(){var e={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(e){this.setAttribute("value",e)}};return{restrict:"E",priority:200,compile:function(t,n){if("hidden"===p(n.type))return{pre:function(t,n,r,i){var a=n[0];a.parentNode&&a.parentNode.insertBefore(a,a.nextSibling),Object.defineProperty&&Object.defineProperty(a,"value",e)}}}}},Sa=/^(true|false|\d+)$/,wa=function(){function e(e,t,n){var r=F(n)?n:9===o?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return Sa.test(n.ngValue)?function(t,n,r){e(n,r,t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,(function(t){e(n,r,t)}))}}}},ya=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,(function(e){n.textContent=He(e)}))}}}}],ba=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var a=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",(function(e){r.textContent=B(e)?"":e}))}}}}],xa=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,(function(t){return e.valueOf(t)}));return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,(function(){var n=a(t);r.html(e.getTrustedHtml(n)||"")}))}}}}],ka=O({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push((function(){e.$eval(n.ngChange)}))}});function Ca(e,t){var n;return e="ngClass"+e,["$parse",function(o){return{restrict:"AC",link:function(s,l,c){var u,h=l.data("$classCounts"),p=!0;function f(e,t){var n=[];return k(e,(function(e){(t>0||h[e])&&(h[e]=(h[e]||0)+t,h[e]===+(t>0)&&n.push(e))})),n.join(" ")}h||(h=Re(),l.data("$classCounts",h)),"ngClass"!==e&&(n||(n=o("$index",(function(e){return 1&e}))),s.$watch(n,(function(e){e===t?(n=f(i(n=u),1),c.$addClass(n)):function(e){e=f(i(e),-1),c.$removeClass(e)}(u);var n;p=e}))),s.$watch(o(c[e],a),(function(e){p===t&&function(e,t){var n=i(e),a=i(t),o=r(n,a),s=r(a,n),l=f(o,-1),u=f(s,1);c.$addClass(u),c.$removeClass(l)}(u,e);u=e}))}}}];function r(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i===t[a])continue e;n.push(i)}return n}function i(e){return e&&e.split(" ")}function a(e){if(!e)return e;var t=e;return W(e)?t=e.map(a).join(" "):R(e)?t=Object.keys(e).filter((function(t){return e[t]})).join(" "):j(e)||(t=e+""),t}}var $a=Ca("",!0),Pa=Ca("Odd",0),Ea=Ca("Even",1),Ta=Ni({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),_a=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ma={},Aa={blur:!0,focus:!0};function Da(e,t,n,r,i,a){return{restrict:"A",compile:function(o,s){var l=e(s[r]);return function(e,r){r.on(i,(function(r){var i=function(){l(e,{$event:r})};if(t.$$phase)if(a)e.$evalAsync(i);else try{i()}catch(e){n(e)}else e.$apply(i)}))}}}}k("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(e){var t=yn("ng-"+e);Ma[t]=["$parse","$rootScope","$exceptionHandler",function(n,r,i){return Da(n,r,i,t,e,Aa[e])}]}));var La=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,l,c;n.$watch(i.ngIf,(function(n){n?l||o((function(n,a){l=a,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)})):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=Fe(s.clone),e.leave(c).done((function(e){!1!==e&&(c=null)})),s=null))}))}}}],Va=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:y.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,l,c,u){var h,p,f,d=0,v=function(){p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),f&&(n.leave(f).done((function(e){!1!==e&&(p=null)})),p=f,f=null)};r.$watch(a,(function(a){var l=function(e){!1===e||!F(s)||s&&!r.$eval(s)||t()},p=++d;a?(e(a,!0).then((function(e){if(!r.$$destroyed&&p===d){var t=r.$new();c.template=e;var s=u(t,(function(e){v(),n.enter(e,null,i).done(l)}));f=s,(h=t).$emit("$includeContentLoaded",a),r.$eval(o)}}),(function(){r.$$destroyed||p===d&&(v(),r.$emit("$includeContentError",a))})),r.$emit("$includeContentRequested",a)):(v(),c.template=null)}))}}}}],Ia=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){if(g.call(r[0]).match(/SVG/))return r.empty(),void e(ht(a.template,t.document).childNodes)(n,(function(e){r.append(e)}),{futureParentElement:r});r.html(a.template),e(r.contents())(n)}}}],Oa=Ni({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Na=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,o=a?ee(i):i;r.$parsers.push((function(e){if(!B(e)){var t=[];return e&&k(e.split(o),(function(e){e&&t.push(a?ee(e):e)})),t}})),r.$formatters.push((function(e){if(W(e))return e.join(i)})),r.$isEmpty=function(e){return!e||!e.length}}}},Ba="ng-valid",Fa="ng-invalid",Ra="ng-pristine",Ha="ng-dirty",ja=a("ngModel");function za(e,t,n,r,i,a,o,s,l){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=Ri,this.$options=Ua,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=e,this.$$rootScope=e.$root,this.$$attr=n,this.$$element=r,this.$$animate=a,this.$$timeout=o,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,Wi(this),(c=this).$$scope.$watch((function(e){var t=c.$$ngModelGet(e);return t===c.$modelValue||c.$modelValue!=c.$modelValue&&t!=t||c.$$setModelValue(t),t}))}za.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],za.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return q(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){q(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw ja("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,be(this.$$element))},$render:V,$isEmpty:function(e){return B(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Ha),this.$$animate.addClass(this.$$element,Ra)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ra),this.$$animate.addClass(this.$$element,Ha),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!D(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),a=this;this.$$runValidators(t,e,(function(e){i||n===e||(a.$modelValue=e?t:void 0,a.$modelValue!==r&&a.$$writeModelToScope())}))}},$$runValidators:function(e,t,n){this.$$currentValidationRunId++;var r,i,a=this.$$currentValidationRunId,o=this;(function(){var e=o.$$parserName;if(!B(o.$$parserValid))return o.$$parserValid||(k(o.$validators,(function(e,t){s(t,null)})),k(o.$asyncValidators,(function(e,t){s(t,null)}))),s(e,o.$$parserValid),o.$$parserValid;s(e,null);return!0})()?!function(){var n=!0;if(k(o.$validators,(function(r,i){var a=Boolean(r(e,t));n=n&&a,s(i,a)})),!n)return k(o.$asyncValidators,(function(e,t){s(t,null)})),!1;return!0}()?l(!1):(r=[],i=!0,k(o.$asyncValidators,(function(n,a){var o=n(e,t);if(!J(o))throw ja("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o);s(a,void 0),r.push(o.then((function(){s(a,!0)}),(function(){i=!1,s(a,!1)})))})),r.length?o.$$q.all(r).then((function(){l(i)}),V):l(!0)):l(!1);function s(e,t){a===o.$$currentValidationRunId&&o.$setValidity(e,t)}function l(e){a===o.$$currentValidationRunId&&n(e)}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var e=this.$$lastCommittedViewValue,t=this;if(this.$$parserValid=!B(e)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(B(e=this.$parsers[n](e))){this.$$parserValid=!1;break}D(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function a(){t.$modelValue!==r&&t.$$writeModelToScope()}this.$$rawModelValue=e,i&&(this.$modelValue=e,a()),this.$$runValidators(e,this.$$lastCommittedViewValue,(function(n){i||(t.$modelValue=n?e:void 0,a())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),k(this.$viewChangeListeners,(function(e){try{e()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");z(t[e])?t=t[e]:z(t.default)&&-1===this.$options.getOption("updateOn").indexOf(e)?t=t.default:z(t["*"])&&(t=t["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),t):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,V))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},Gi({clazz:za,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Ua,Wa=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:za,priority:1,compile:function(t){return t.addClass(Ra).addClass("ng-untouched").addClass(Ba),{pre:function(e,t,n,r){var i=r[0],a=r[1]||i.$$parentForm,o=r[2];o&&(i.$options=o.$options),i.$$initGetterSetters(),a.$addControl(i),n.$observe("name",(function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)})),e.$on("$destroy",(function(){i.$$parentForm.$removeControl(i)}))},post:function(t,n,r,i){var a=i[0];function o(){a.$setTouched()}a.$$setUpdateOnEvents(),n.on("blur",(function(){a.$touched||(e.$$phase?t.$evalAsync(o):t.$apply(o))}))}}}}}],Ga=/(\s+|^)default(\s+|$)/;function qa(e){this.$$options=e}qa.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return k(e=_({},e),(function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=ee(n.replace(Ga,(function(){return e.updateOnDefault=!0," "}))))}),this),t&&(delete e["*"],Xa(e,this.$$options)),Xa(e,Ua.$$options),new qa(e)}},Ua=new qa({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Ya=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Ua,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}};function Xa(e,t){k(t,(function(t,n){F(e[n])||(e[n]=t)}))}var Za=Ni({terminal:!0,priority:1e3}),Ka=a("ngOptions"),Ja=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Qa=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),a=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=V},post:function(t,o,l,c){for(var u=c[0],h=c[1],p=l.multiple,f=0,d=o.children(),v=d.length;f<v;f++)if(""===d[f].value){u.hasEmptyOption=!0,u.emptyOption=d.eq(f);break}o.empty();var m,g=!!u.emptyOption;s(i.cloneNode(!1)).val("?");var S=function(e,t,n){var i=e.match(Ja);if(!i)throw Ka("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,be(t));var a=i[5]||i[7],o=i[6],s=/ as /.test(i[0])&&i[1],l=i[9],c=r(i[2]?i[1]:a),u=s&&r(s)||c,h=l&&r(l),p=l?function(e,t){return h(n,t)}:function(e){return Ft(e)},f=function(e,t){return p(e,w(e,t))},d=r(i[2]||i[1]),v=r(i[3]||""),m=r(i[4]||""),g=r(i[8]),S={},w=o?function(e,t){return S[o]=t,S[a]=e,S}:function(e){return S[a]=e,S};function y(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function b(e){var t;if(!o&&x(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:l,getTrackByValue:f,getWatchables:r(g,(function(e){for(var t=[],r=b(e=e||[]),a=r.length,o=0;o<a;o++){var s=e===r?o:r[o],l=e[s],c=w(l,s),u=p(l,c);if(t.push(u),i[2]||i[1]){var h=d(n,c);t.push(h)}if(i[4]){var f=m(n,c);t.push(f)}}return t})),getOptions:function(){for(var e=[],t={},r=g(n)||[],i=b(r),a=i.length,o=0;o<a;o++){var s=r===i?o:i[o],c=r[s],h=w(c,s),S=u(n,h),x=p(S,h),k=new y(x,S,d(n,h),v(n,h),m(n,h));e.push(k),t[x]=k}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[f(e)]},getViewValueFromOption:function(e){return l?oe(e.viewValue):e.viewValue}}}}}(l.ngOptions,o,t),w=n[0].createDocumentFragment();function y(e,t){var n=i.cloneNode(!1);t.appendChild(n),function(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label);t.value=e.selectValue}(e,n)}function b(e){var t=m.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}u.generateUnknownOptionValue=function(e){return"?"},p?(u.writeValue=function(e){if(m){var t=e&&e.map(b)||[];m.items.forEach((function(e){e.element.selected&&!ie(t,e)&&(e.element.selected=!1)}))}},u.readValue=function(){var e=o.val()||[],t=[];return k(e,(function(e){var n=m.selectValueMap[e];n&&!n.disabled&&t.push(m.getViewValueFromOption(n))})),t},S.trackBy&&t.$watchCollection((function(){if(W(h.$viewValue))return h.$viewValue.map((function(e){return S.getTrackByValue(e)}))}),(function(){h.$render()}))):(u.writeValue=function(e){if(m){var t=o[0].options[o[0].selectedIndex],n=m.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(o[0].value!==n.selectValue&&(u.removeUnknownOption(),o[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):u.selectUnknownOrEmptyOption(e)}},u.readValue=function(){var e=m.selectValueMap[o.val()];return e&&!e.disabled?(u.unselectEmptyOption(),u.removeUnknownOption(),m.getViewValueFromOption(e)):null},S.trackBy&&t.$watch((function(){return S.getTrackByValue(h.$viewValue)}),(function(){h.$render()}))),g&&(e(u.emptyOption)(t),o.prepend(u.emptyOption),8===u.emptyOption[0].nodeType?(u.hasEmptyOption=!1,u.registerOption=function(e,t){""===t.val()&&(u.hasEmptyOption=!0,u.emptyOption=t,u.emptyOption.removeClass("ng-scope"),h.$render(),t.on("$destroy",(function(){var e=u.$isEmptyOptionSelected();u.hasEmptyOption=!1,u.emptyOption=void 0,e&&h.$render()})))}):u.emptyOption.removeClass("ng-scope")),t.$watchCollection(S.getWatchables,(function(){var e=m&&u.readValue();if(m)for(var t=m.items.length-1;t>=0;t--){var n=m.items[t];F(n.group)?_t(n.element.parentNode):_t(n.element)}m=S.getOptions();var r={};if(m.items.forEach((function(e){var t;F(e.group)?((t=r[e.group])||(t=a.cloneNode(!1),w.appendChild(t),t.label=null===e.group?"null":e.group,r[e.group]=t),y(e,t)):y(e,w)})),o[0].appendChild(w),h.$render(),!h.$isEmpty(e)){var i=u.readValue();(S.trackBy||p?le(e,i):e===i)||(h.$setViewValue(i),h.$render())}}))}}}}],eo=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,o,s){var l,c=s.count,u=s.$attr.when&&o.attr(s.$attr.when),h=s.offset||0,f=a.$eval(u)||{},d={},v=t.startSymbol(),m=t.endSymbol(),g=v+c+"-"+h+m,S=y.noop;function w(e){o.text(e||"")}k(s,(function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+p(n[2]);f[r]=o.attr(s.$attr[t])}})),k(f,(function(e,n){d[n]=t(e.replace(r,g))})),a.$watch(c,(function(t){var r=parseFloat(t),i=D(r);if(i||r in f||(r=e.pluralCat(r-h)),!(r===l||i&&D(l))){S();var o=d[r];B(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+u),S=V,w()):S=a.$watch(o,w),l=r}}))}}}],to=a("ngRef"),no=["$parse",function(e){return{priority:-1,restrict:"A",compile:function(t,n){var r=yn(re(t)),i=e(n.ngRef),a=i.assign||function(){throw to("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(e,t,o){var s;if(o.hasOwnProperty("ngRefRead")){if("$element"===o.ngRefRead)s=t;else if(!(s=t.data("$"+o.ngRefRead+"Controller")))throw to("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',o.ngRefRead,n.ngRef)}else s=t.data("$"+r+"Controller");a(e,s=s||t),t.on("$destroy",(function(){i(e)===s&&a(e,null)}))}}}}],ro=["$parse","$animate","$compile",function(e,t,n){var r=a("ngRepeat"),i=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},o=function(e){return e.clone[0]},s=function(e){return e.clone[e.clone.length-1]},l=function(e,t,n){return Ft(n)},c=function(e,t){return t};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(a,u){var p=u.ngRepeat,f=n.$$createComment("end ngRepeat",p),d=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var v=d[1],m=d[2],g=d[3],S=d[4];if(!(d=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var w,y=d[3]||d[1],b=d[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);if(S){var C={$id:Ft},$=e(S);w=function(e,t,n,r){return b&&(C[b]=t),C[y]=n,C.$index=r,$(e,C)}}return function(e,n,a,u,d){var v=Re();e.$watchCollection(m,(function(a){var u,m,S,$,P,E,T,_,M,A,D,L,V=n[0],I=Re();if(g&&(e[g]=a),x(a))M=a,_=w||l;else for(var O in _=w||c,M=[],a)h.call(a,O)&&"$"!==O.charAt(0)&&M.push(O);for($=M.length,D=new Array($),u=0;u<$;u++)if(P=a===M?u:M[u],E=a[P],T=_(e,P,E,u),v[T])A=v[T],delete v[T],I[T]=A,D[u]=A;else{if(I[T])throw k(D,(function(e){e&&e.scope&&(v[e.id]=e)})),r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,T,E);D[u]={id:T,scope:void 0,clone:void 0},I[T]=!0}for(var N in C&&(C[y]=void 0),v){if(L=Fe((A=v[N]).clone),t.leave(L),L[0].parentNode)for(u=0,m=L.length;u<m;u++)L[u].$$NG_REMOVED=!0;A.scope.$destroy()}for(u=0;u<$;u++)if(P=a===M?u:M[u],E=a[P],(A=D[u]).scope){S=V;do{S=S.nextSibling}while(S&&S.$$NG_REMOVED);o(A)!==S&&t.move(Fe(A.clone),null,V),V=s(A),i(A.scope,u,y,E,b,P,$)}else d((function(e,n){A.scope=n;var r=f.cloneNode(!1);e[e.length++]=r,t.enter(e,null,V),V=r,A.clone=e,I[A.id]=A,i(A.scope,u,y,E,b,P,$)}));v=I}))}}}}],io=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,(function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],ao=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,(function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],oo=Ni((function(e,t,n){e.$watchCollection(n.ngStyle,(function(e,n){n&&e!==n&&k(n,(function(e,n){t.css(n,"")})),e&&t.css(e)}))})),so=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var o=i.ngSwitch||i.on,s=[],l=[],c=[],u=[],h=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(o,(function(n){for(var r,i;c.length;)e.cancel(c.pop());for(r=0,i=u.length;r<i;++r){var o=Fe(l[r].clone);u[r].$destroy(),(c[r]=e.leave(o)).done(h(c,r))}l.length=0,u.length=0,(s=a.cases["!"+n]||a.cases["?"])&&k(s,(function(n){n.transclude((function(r,i){u.push(i);var a=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var o={clone:r};l.push(o),e.enter(r,a.parent(),a)}))}))}))}}}],lo=Ni({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){k(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(e,t,n){return n[t-1]!==e})),(function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:i,element:t})}))}}),co=Ni({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),uo=a("ngTransclude"),ho=["$compile",function(e){return{restrict:"EAC",compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,a){if(!a)throw uo("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",be(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var o=r.ngTransclude||r.ngTranscludeSlot;function s(){n(e,(function(e){t.append(e)}))}a((function(e,n){e.length&&function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==je||r.nodeValue.trim())return!0}}(e)?t.append(e):(s(),n.$destroy())}),null,o),o&&!a.isSlotFilled(o)&&s()}}}}],po=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],fo={$setViewValue:V,$render:V};function vo(e,t){e.prop("selected",t),e.attr("selected",t)}var mo=["$element","$scope",function(e,n){var r=this,i=new jt;r.selectValueMap={},r.ngModelCtrl=fo,r.multiple=!1,r.unknownOption=s(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),vo(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),vo(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(e){return"? "+Ft(e)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),vo(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&vo(r.emptyOption,!1)},n.$on("$destroy",(function(){r.renderUnknownOption=V})),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&vo(s(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Ft(t);e.val(i in r.selectValueMap?i:t);var a=e[0].options[e[0].selectedIndex];vo(s(a),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(e,t){if(8!==t[0].nodeType){Be(e,'"option value"'),""===e&&(r.hasEmptyOption=!0,r.emptyOption=t);var n=i.get(e)||0;i.set(e,n+1),o()}},r.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.delete(e),""===e&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(e,t-1))},r.hasOption=function(e){return!!i.get(e)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(e){null==e&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(e):r.renderUnknownOption(e)};var a=!1;function o(){a||(a=!0,n.$$postDigest((function(){a=!1,r.ngModelCtrl.$render()})))}var l=!1;function c(e){l||(l=!0,n.$$postDigest((function(){n.$$destroyed||(l=!1,r.ngModelCtrl.$setViewValue(r.readValue()),e&&r.ngModelCtrl.$render())})))}r.registerOption=function(e,t,n,i,a){var s,l;n.$attr.ngValue?n.$observe("value",(function(e){var n,i=t.prop("selected");F(l)&&(r.removeOption(s),delete r.selectValueMap[l],n=!0),l=Ft(e),s=e,r.selectValueMap[l]=e,r.addOption(e,t),t.attr("value",l),n&&i&&c()})):i?n.$observe("value",(function(e){var n;r.readValue();var i=t.prop("selected");F(s)&&(r.removeOption(s),n=!0),s=e,r.addOption(e,t),n&&i&&c()})):a?e.$watch(a,(function(e,i){n.$set("value",e);var a=t.prop("selected");i!==e&&r.removeOption(i),r.addOption(e,t),i&&a&&c()})):r.addOption(n.value,t);n.$observe("disabled",(function(e){("true"===e||e&&t.prop("selected"))&&(r.multiple?c(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))})),t.on("$destroy",(function(){var e=r.readValue(),t=n.value;r.removeOption(t),o(),(r.multiple&&e&&-1!==e.indexOf(t)||e===t)&&c(!0)}))}}],go=function(){return{restrict:"E",require:["select","?ngModel"],controller:mo,priority:1,link:{pre:function(e,t,n,r){var i=r[0],a=r[1];if(!a)return void(i.registerOption=V);if(i.ngModelCtrl=a,t.on("change",(function(){i.removeUnknownOption(),e.$apply((function(){a.$setViewValue(i.readValue())}))})),n.multiple){i.multiple=!0,i.readValue=function(){var e=[];return k(t.find("option"),(function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in i.selectValueMap?i.selectValueMap[n]:n)}})),e},i.writeValue=function(e){k(t.find("option"),(function(t){var n=!!e&&(ie(e,t.value)||ie(e,i.selectValueMap[t.value]));n!==t.selected&&vo(s(t),n)}))};var o,l=NaN;e.$watch((function(){l!==a.$viewValue||le(o,a.$viewValue)||(o=ze(a.$viewValue),a.$render()),l=a.$viewValue})),a.$isEmpty=function(e){return!e||0===e.length}}},post:function(e,t,n,r){var i=r[1];if(!i)return;var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}}},So=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return F(n.ngValue)||(F(n.value)?r=e(n.value,!0):(i=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var a=t.parent(),o=a.data("$selectController")||a.parent().data("$selectController");o&&o.registerOption(e,t,n,r,i)}}}}],wo=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,i){if(i){var a=r.hasOwnProperty("required")||e(r.ngRequired)(t);r.ngRequired||(r.required=!0),i.$validators.required=function(e,t){return!a||!i.$isEmpty(t)},r.$observe("required",(function(e){a!==e&&(a=e,i.$validate())}))}}}}],yo=["$parse",function(e){return{restrict:"A",require:"?ngModel",compile:function(t,n){var r,i;return n.ngPattern&&(r=n.ngPattern,i="/"===n.ngPattern.charAt(0)&&u.test(n.ngPattern)?function(){return n.ngPattern}:e(n.ngPattern)),function(e,t,n,a){if(a){var o=n.pattern;n.ngPattern?o=i(e):r=n.pattern;var s=ko(o,r,t);n.$observe("pattern",(function(e){var n=s;s=ko(e,r,t),(n&&n.toString())!==(s&&s.toString())&&a.$validate()})),a.$validators.pattern=function(e,t){return a.$isEmpty(t)||B(s)||s.test(t)}}}}}}],bo=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,i){if(i){var a=r.maxlength||e(r.ngMaxlength)(t),o=Co(a);r.$observe("maxlength",(function(e){a!==e&&(o=Co(e),a=e,i.$validate())})),i.$validators.maxlength=function(e,t){return o<0||i.$isEmpty(t)||t.length<=o}}}}}],xo=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,i){if(i){var a=r.minlength||e(r.ngMinlength)(t),o=Co(a)||-1;r.$observe("minlength",(function(e){a!==e&&(o=Co(e)||-1,a=e,i.$validate())})),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=o}}}}}];function ko(e,t,n){if(e){if(j(e)&&(e=new RegExp("^"+e+"$")),!e.test)throw a("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",t,e,be(n));return e}}function Co(e){var t=A(e);return D(t)?-1:t}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var n;if(!Ve){var r=ue();(l=B(r)?e:r?t[r]:void 0)&&l.fn.on?(s=l,_(l.fn,{scope:At.scope,isolateScope:At.isolateScope,controller:At.controller,injector:At.injector,inheritedData:At.inheritedData})):s=ft,n=s.cleanData,s.cleanData=function(e){for(var t,r,i=0;null!=(r=e[i]);i++)(t=(s._data(r)||{}).events)&&t.$destroy&&s(r).triggerHandler("$destroy");n(e)},y.element=s,Ve=!0}}(),function(e){_(e,{errorHandlingConfig:r,bootstrap:_e,copy:oe,extend:_,merge:M,equals:le,element:s,forEach:k,injector:Jt,noop:V,bind:fe,toJson:ve,fromJson:me,identity:I,isUndefined:B,isDefined:F,isString:j,isFunction:q,isObject:R,isNumber:z,isElement:ne,isArray:W,version:We,isDate:U,callbacks:{$$counter:0},getTestability:Ae,reloadWithDebugInfo:Me,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Ie,$$minErr:a,$$csp:ce,$$encodeUriSegment:Ce,$$encodeUriQuery:$e,$$lowercase:p,$$stringify:He,$$uppercase:f}),(c=function(e){var t=a("$injector"),n=a("ng");function r(e,t,n){return e[t]||(e[t]=n())}var i=r(e,"angular",Object);return i.$$minErr=i.$$minErr||a,r(i,"module",(function(){var e={};return function(i,a,o){var s={};return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)}(i,"module"),a&&e.hasOwnProperty(i)&&(e[i]=null),r(e,i,(function(){if(!a)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var e=[],r=[],l=[],c=h("$injector","invoke","push",r),u={_invokeQueue:e,_configBlocks:r,_runBlocks:l,info:function(e){if(F(e)){if(!R(e))throw n("aobj","Argument '{0}' must be an object","value");return s=e,this}return s},requires:a,name:i,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:p("$provide","decorator",r),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:c,run:function(e){return l.push(e),this}};return o&&c(o),u;function h(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),u}}function p(t,n,r){return r||(r=e),function(e,a){return a&&q(a)&&(a.$$moduleName=i),r.push([t,n,arguments]),u}}}))}}))}(t))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:zr}),e.provider("$compile",mn).directive({a:Bi,input:ma,textarea:ma,form:zi,script:po,select:go,option:So,ngBind:ya,ngBindHtml:xa,ngBindTemplate:ba,ngClass:$a,ngClassEven:Ea,ngClassOdd:Pa,ngCloak:Ta,ngController:_a,ngForm:Ui,ngHide:ao,ngIf:La,ngInclude:Va,ngInit:Oa,ngNonBindable:Za,ngPluralize:eo,ngRef:no,ngRepeat:ro,ngShow:io,ngStyle:oo,ngSwitch:so,ngSwitchWhen:lo,ngSwitchDefault:co,ngOptions:Qa,ngTransclude:ho,ngModel:Wa,ngList:Na,ngChange:ka,pattern:yo,ngPattern:yo,required:wo,ngRequired:wo,minlength:xo,ngMinlength:xo,maxlength:bo,ngMaxlength:bo,ngValue:wa,ngModelOptions:Ya}).directive({ngInclude:Ia,input:ga}).directive(Fi).directive(Ma),e.provider({$anchorScroll:Qt,$animate:on,$animateCss:cn,$$animateJs:rn,$$animateQueue:an,$$AnimateRunner:ln,$$animateAsyncRun:sn,$browser:hn,$cacheFactory:pn,$controller:Pn,$document:En,$$isDocumentHidden:Tn,$exceptionHandler:_n,$filter:di,$$forceReflow:Mn,$interpolate:Yn,$interval:Zn,$$intervalFactory:Kn,$http:Un,$httpParamSerializer:Nn,$httpParamSerializerJQLike:Bn,$httpBackend:Gn,$xhrFactory:Wn,$jsonpCallbacks:Jn,$location:vr,$log:mr,$parse:Vr,$rootScope:jr,$q:Ir,$$q:Or,$sce:Zr,$sceDelegate:Xr,$sniffer:Kr,$$taskTrackerFactory:Jr,$templateCache:fn,$templateRequest:ti,$$testability:ni,$timeout:ii,$window:hi,$$rAF:Hr,$$jqLite:Bt,$$Map:zt,$$cookieReader:fi})}]).info({angularVersion:"1.8.0"})}(y),y.module("ngLocale",[],["$provide",function(e){var t="one",n="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,r){var i=0|e,a=function(e,t){var n=t;void 0===n&&(n=Math.min(function(e){var t=(e+="").indexOf(".");return-1==t?0:e.length-t-1}(e),3));var r=Math.pow(10,n);return{v:n,f:(e*r|0)%r}}(e,r);return 1==i&&0==a.v?t:n}})}]),s((function(){Te(t.document,_e)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'))}).call(this,n(19))},function(e,t,n){n(194),e.exports="ngAnimate"},function(e,t){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";var n,r,i,a;void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?("-webkit-",n="WebkitTransition",r="webkitTransitionEnd transitionend"):(n="transition",r="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?("-webkit-",i="WebkitAnimation",a="webkitAnimationEnd animationend"):(i="animation",a="animationend");var o=i+"Delay",s=i+"Duration",l=n+"Delay",c=n+"Duration",u=t.$$minErr("ng");function h(e,t,n){if(!e)throw u("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function p(e,t){return e||t?e?t?(B(e)&&(e=e.join(" ")),B(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function f(e,t,n){var r="";return e=B(e)?e:e&&z(e)&&e.length?e.split(/\s+/):[],N(e,(function(e,i){e&&e.length>0&&(r+=i>0?" ":"",r+=n?t+e:e+t)})),r}function d(e){if(e instanceof W)switch(e.length){case 0:return e;case 1:if(1===e[0].nodeType)return e;break;default:return W(v(e))}if(1===e.nodeType)return W(e)}function v(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(1===n.nodeType)return n}}function m(e){return function(t,n){n.addClass&&(!function(e,t,n){N(t,(function(t){e.addClass(t,n)}))}(e,t,n.addClass),n.addClass=null),n.removeClass&&(!function(e,t,n){N(t,(function(t){e.removeClass(t,n)}))}(e,t,n.removeClass),n.removeClass=null)}}function g(e){if(!(e=e||{}).$$prepared){var t=e.domOperation||G;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=G},e.$$prepared=!0}return e}function S(e,t){w(e,t),y(e,t)}function w(e,t){t.from&&(e.css(t.from),t.from=null)}function y(e,t){t.to&&(e.css(t.to),t.to=null)}function b(e,t,n){var r=t.options||{},i=n.options||{},a=(r.addClass||"")+" "+(i.addClass||""),o=(r.removeClass||"")+" "+(i.removeClass||""),s=function(e,t,n){var r={};e=a(e),t=a(t),N(t,(function(e,t){r[t]=1})),n=a(n),N(n,(function(e,t){r[t]=1===r[t]?null:-1}));var i={addClass:"",removeClass:""};function a(e){z(e)&&(e=e.split(" "));var t={};return N(e,(function(e){e.length&&(t[e]=!0)})),t}return N(r,(function(t,n){var r,a;1===t?(r="addClass",a=!e[n]||e[n+"-remove"]):-1===t&&(r="removeClass",a=e[n]||e[n+"-add"]),a&&(i[r].length&&(i[r]+=" "),i[r]+=n)})),i}(e.attr("class"),a,o);i.preparationClasses&&(r.preparationClasses=$(i.preparationClasses,r.preparationClasses),delete i.preparationClasses);var l=r.domOperation!==G?r.domOperation:null;return O(r,i),l&&(r.domOperation=l),s.addClass?r.addClass=s.addClass:r.addClass=null,s.removeClass?r.removeClass=s.removeClass:r.removeClass=null,t.addClass=r.addClass,t.removeClass=r.removeClass,r}function x(e){return e instanceof W?e[0]:e}function k(e,t){var n=t?"paused":"",r=i+"PlayState";return C(e,[r,n]),[r,n]}function C(e,t){var n=t[0],r=t[1];e.style[n]=r}function $(e,t){return e?t?e+" "+t:e:t}var P=function(e,t){var n=t?"-"+t+"s":"";return C(e,[l,n]),[l,n]},E=["$interpolate",function(e){return{link:function(t,n,r){var i=r.ngAnimateChildren;function a(e){e="on"===e||"true"===e,n.data("$$ngAnimateChildren",e)}z(i)&&0===i.length?n.data("$$ngAnimateChildren",!0):(a(e(i)(t)),r.$observe("ngAnimateChildren",a))}}}],T={transitionDuration:c,transitionDelay:l,transitionProperty:n+"Property",animationDuration:s,animationDelay:o,animationIterationCount:i+"IterationCount"},_={transitionDuration:c,transitionDelay:l,animationDuration:s,animationDelay:o};function M(e,t){return[t?o:l,e+"s"]}function A(e,t,n){var r=Object.create(null),i=e.getComputedStyle(t)||{};return N(n,(function(e,t){var n,a,o=i[e];if(o){var s=o.charAt(0);("-"===s||"+"===s||s>=0)&&(n=0,a=o.split(/\s*,\s*/),N(a,(function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,n=n?Math.max(e,n):e})),o=n),0===o&&(o=null),r[t]=o}})),r}function D(e){return 0===e||null!=e}function L(e,t){var r=n,i=e+"s";return t?r+="Duration":i+=" linear all",[r,i]}function V(e,t,n){N(n,(function(n){e[n]=F(e[n])?e[n]:t.style.getPropertyValue(n)}))}var I,O,N,B,F,R,H,j,z,U,W,G,q=["$animateProvider",function(e){this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$animateCache","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,t,o,l,c,u,h,p,d){var v=m(t);var b=[];function $(e){b.push(e),p.waitUntilQuiet((function(){c.flush();for(var e=u(),t=0;t<b.length;t++)b[t](e);b.length=0}))}function E(t,n,r,i){var a=function(t,n,r,i,a){var o=c.get(r);o||"infinite"===(o=A(e,t,a)).animationIterationCount&&(o.animationIterationCount=1);var s=i||o.transitionDuration>0||o.animationDuration>0;return c.put(r,o,s),o}(t,0,r,i,T),o=a.animationDelay,s=a.transitionDelay;return a.maxDelay=o&&s?Math.max(o,s):o||s,a.maxDuration=Math.max(a.animationDuration*a.animationIterationCount,a.transitionDuration),a}return function(u,p){var m=p||{};m.$$prepared||(m=g(I(m)));var b={},T=x(u);if(!T||!T.parentNode||!d.enabled())return xe();var O,F,R,H,j,z,U,W,q,Y,X=[],Z=(u.attr("class"),function(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}(m)),K=[];if(0===m.duration||!h.animations&&!h.transitions)return xe();var J=m.event&&B(m.event)?m.event.join(" "):m.event,Q=J&&m.structural,ee="",te="";Q?ee=f(J,"ng-",!0):J&&(ee=J),m.addClass&&(te+=f(m.addClass,"-add")),m.removeClass&&(te.length&&(te+=" "),te+=f(m.removeClass,"-remove")),m.applyClassesEarly&&te.length&&v(u,m);var ne=[ee,te].join(" ").trim(),re=Z.to&&Object.keys(Z.to).length>0;if(!((m.keyframeStyle||"").length>0)&&!re&&!ne)return xe();var ie,ae,oe=c.cacheKey(T,J,m.addClass,m.removeClass);if(c.containsCachedAnimationWithoutDuration(oe))return ne=null,xe();if(m.stagger>0){var se=parseFloat(m.stagger);ie={transitionDelay:se,animationDelay:se,transitionDuration:0,animationDuration:0}}else ie=function(n,r,i,a){var o,s="stagger-"+i;if(c.count(i)>0&&!(o=c.get(s))){var l=f(r,"-stagger");t.addClass(n,l),(o=A(e,n,a)).animationDuration=Math.max(o.animationDuration,0),o.transitionDuration=Math.max(o.transitionDuration,0),t.removeClass(n,l),c.put(s,o,!0)}return o||{}}(T,ne,oe,_);if(m.$$skipPreparationClasses||t.addClass(u,ne),m.transitionStyle){var le=[n,m.transitionStyle];C(T,le),X.push(le)}if(m.duration>=0){ae=T.style[n].length>0;var ce=L(m.duration,ae);C(T,ce),X.push(ce)}if(m.keyframeStyle){var ue=[i,m.keyframeStyle];C(T,ue),X.push(ue)}var he=ie?m.staggerIndex>=0?m.staggerIndex:c.count(oe):0,pe=0===he;pe&&!m.skipBlocking&&P(T,9999);var fe=E(T,0,oe,!Q),de=fe.maxDelay;z=Math.max(de,0),W=fe.maxDuration;var ve={};if(ve.hasTransitions=fe.transitionDuration>0,ve.hasAnimations=fe.animationDuration>0,ve.hasTransitionAll=ve.hasTransitions&&"all"===fe.transitionProperty,ve.applyTransitionDuration=re&&(ve.hasTransitions&&!ve.hasTransitionAll||ve.hasAnimations&&!ve.hasTransitions),ve.applyAnimationDuration=m.duration&&ve.hasAnimations,ve.applyTransitionDelay=D(m.delay)&&(ve.applyTransitionDuration||ve.hasTransitions),ve.applyAnimationDelay=D(m.delay)&&ve.hasAnimations,ve.recalculateTimingStyles=te.length>0,(ve.applyTransitionDuration||ve.applyAnimationDuration)&&(W=m.duration?parseFloat(m.duration):W,ve.applyTransitionDuration&&(ve.hasTransitions=!0,fe.transitionDuration=W,ae=T.style[n+"Property"].length>0,X.push(L(W,ae))),ve.applyAnimationDuration&&(ve.hasAnimations=!0,fe.animationDuration=W,X.push([s,W+"s"]))),0===W&&!ve.recalculateTimingStyles)return xe();var me,ge=f(ne,"-active");null!=m.delay&&("boolean"!=typeof m.delay&&(me=parseFloat(m.delay),z=Math.max(me,0)),ve.applyTransitionDelay&&X.push(M(me)),ve.applyAnimationDelay&&X.push(M(me,!0)));return null==m.duration&&fe.transitionDuration>0&&(ve.recalculateTimingStyles=ve.recalculateTimingStyles||pe),U=1e3*z,q=1e3*W,m.skipBlocking||(ve.blockTransition=fe.transitionDuration>0,ve.blockKeyframeAnimation=fe.animationDuration>0&&ie.animationDelay>0&&0===ie.animationDuration),m.from&&(m.cleanupStyles&&V(b,T,Object.keys(m.from)),w(u,m)),ve.blockTransition||ve.blockKeyframeAnimation?be(W):m.skipBlocking||P(T,!1),{$$willAnimate:!0,end:Se,start:function(){if(!O)return H=new o(j={end:Se,cancel:we,resume:null,pause:null}),$(Ce),H}};function Se(){ye()}function we(){ye(!0)}function ye(e){if(!(O||R&&F)){O=!0,F=!1,ne&&!m.$$skipPreparationClasses&&t.removeClass(u,ne),ge&&t.removeClass(u,ge),k(T,!1),P(T,!1),N(X,(function(e){T.style[e[0]]=""})),v(u,m),S(u,m),Object.keys(b).length&&N(b,(function(e,t){e?T.style.setProperty(t,e):T.style.removeProperty(t)})),m.onDone&&m.onDone(),K&&K.length&&u.off(K.join(" "),ke);var n=u.data("$$animateCss");n&&(l.cancel(n[0].timer),u.removeData("$$animateCss")),H&&H.complete(!e)}}function be(e){ve.blockTransition&&P(T,e),ve.blockKeyframeAnimation&&k(T,!!e)}function xe(){return H=new o({end:Se,cancel:we}),$(G),ye(),{$$willAnimate:!1,start:function(){return H},end:Se}}function ke(e){e.stopPropagation();var t=e.originalEvent||e;if(t.target===T){var n=t.$manualTimeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(3));Math.max(n-Y,0)>=U&&r>=W&&(R=!0,ye())}}function Ce(){if(!O)if(T.parentNode){var e=function(e){if(R)F&&e&&(F=!1,ye());else if(F=!e,fe.animationDuration){var t=k(T,F);F?X.push(t):(r=t,i=(n=X).indexOf(r),r>=0&&n.splice(i,1))}var n,r,i},o=he>0&&(fe.transitionDuration&&0===ie.transitionDuration||fe.animationDuration&&0===ie.animationDuration)&&Math.max(ie.animationDelay,ie.transitionDelay);o?l(s,Math.floor(o*he*1e3),!1):s(),j.resume=function(){e(!0)},j.pause=function(){e(!1)}}else ye();function s(){if(!O){if(be(!1),N(X,(function(e){var t=e[0],n=e[1];T.style[t]=n})),v(u,m),t.addClass(u,ge),ve.recalculateTimingStyles){if(T.getAttribute("class")+" "+ne,oe=c.cacheKey(T,J,m.addClass,m.removeClass),fe=E(T,0,oe,!1),de=fe.maxDelay,z=Math.max(de,0),0===(W=fe.maxDuration))return void ye();ve.hasTransitions=fe.transitionDuration>0,ve.hasAnimations=fe.animationDuration>0}if(ve.applyAnimationDelay&&(de="boolean"!=typeof m.delay&&D(m.delay)?parseFloat(m.delay):de,z=Math.max(de,0),fe.animationDelay=de,me=M(de,!0),X.push(me),T.style[me[0]]=me[1]),U=1e3*z,q=1e3*W,m.easing){var e,o=m.easing;ve.hasTransitions&&(e=n+"TimingFunction",X.push([e,o]),T.style[e]=o),ve.hasAnimations&&(e=i+"TimingFunction",X.push([e,o]),T.style[e]=o)}fe.transitionDuration&&K.push(r),fe.animationDuration&&K.push(a),Y=Date.now();var s=U+1.5*q,p=Y+s,f=u.data("$$animateCss")||[],d=!0;if(f.length){var g=f[0];(d=p>g.expectedEndTime)?l.cancel(g.timer):f.push(ye)}if(d){var S=l(h,s,!1);f[0]={timer:S,expectedEndTime:p},f.push(ye),u.data("$$animateCss",f)}K.length&&u.on(K.join(" "),ke),m.to&&(m.cleanupStyles&&V(b,T,Object.keys(m.to)),y(u,m))}}function h(){var e=u.data("$$animateCss");if(e){for(var t=1;t<e.length;t++)e[t]();u.removeData("$$animateCss")}}}}}]}],Y=["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,t,n,r,i,a,o){if(!i.animations&&!i.transitions)return G;var s,l=o[0].body,c=x(r),u=W((s=c).parentNode&&11===s.parentNode.nodeType||l.contains(c)?c:l);return function(t){return t.from&&t.to?function(t,r,i,a){var o=f(t),s=f(r),c=[];if(N(a,(function(t){var r=function(t,r,i){var a=W(x(r).cloneNode(!0)),o=h(v(a));r.addClass("ng-animate-shim"),i.addClass("ng-animate-shim"),a.addClass("ng-anchor"),u.append(a);var s,c=function(){var t=e(a,{addClass:"ng-anchor-out",delay:!0,from:d(r)});return t.$$willAnimate?t:null}();if(!c&&!(s=m()))return g();var f=c||s;return{start:function(){var e,t=f.start();return t.done((function(){if(t=null,!s&&(s=m()))return(t=s.start()).done((function(){t=null,g(),e.complete()})),t;g(),e.complete()})),e=new n({end:r,cancel:r});function r(){t&&t.end()}}};function d(e){var t={},n=x(e).getBoundingClientRect();return N(["width","height","top","left"],(function(e){var r=n[e];switch(e){case"top":r+=l.scrollTop;break;case"left":r+=l.scrollLeft}t[e]=Math.floor(r)+"px"})),t}function v(e){return e.attr("class")||""}function m(){var t=h(v(i)),n=p(t,o),r=p(o,t),s=e(a,{to:d(i),addClass:"ng-anchor-in "+n,removeClass:"ng-anchor-out "+r,delay:!0});return s.$$willAnimate?s:null}function g(){a.remove(),r.removeClass("ng-animate-shim"),i.removeClass("ng-animate-shim")}}(0,t.out,t.in);r&&c.push(r)})),!o&&!s&&0===c.length)return;return{start:function(){var e=[];o&&e.push(o.start()),s&&e.push(s.start()),N(c,(function(t){e.push(t.start())}));var t=new n({end:r,cancel:r});return n.all(e,(function(e){t.complete(e)})),t;function r(){N(e,(function(e){e.end()}))}}}}(t.from,t.to,t.classes,t.anchors):f(t)};function h(e){return e.replace(/\bng-\S+\b/g,"")}function p(e,t){return z(e)&&(e=e.split(" ")),z(t)&&(t=t.split(" ")),e.filter((function(e){return-1===t.indexOf(e)})).join(" ")}function f(t){var n=t.element,r=t.options||{};t.structural&&(r.event=t.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===t.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=$(r.event,r.preparationClasses));var i=e(n,r);return i.$$willAnimate?i:null}}]}],X=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,r){var i=m(r);return function(e,t,r,o){var s=!1;3===arguments.length&&j(r)&&(o=r,r=null),o=g(o),r||(r=e.attr("class")||"",o.addClass&&(r+=" "+o.addClass),o.removeClass&&(r+=" "+o.removeClass));var l,c,u,h,p,f=o.addClass,d=o.removeClass,v=a(r);v.length&&("leave"===t?(h="leave",u="afterLeave"):(h="before"+t.charAt(0).toUpperCase()+t.substr(1),u=t),"enter"!==t&&"move"!==t&&(l=x(e,t,o,v,h)),c=x(e,t,o,v,u));if(l||c)return{$$willAnimate:!0,end:function(){return p?p.end():(w(),(p=new n).complete(!0)),p},start:function(){if(p)return p;var e;p=new n;var t=[];return l&&t.push((function(t){e=l(t)})),t.length?t.push((function(e){m(),e(!0)})):m(),c&&t.push((function(t){e=c(t)})),p.setHost({end:function(){i()},cancel:function(){i(!0)}}),n.chain(t,r),p;function r(e){w(),p.complete(e)}function i(t){s||((e||G)(t),r(t))}}};function m(){o.domOperation(),i(e,o)}function w(){s=!0,m(),S(e,o)}function y(e,t,r,i,a){var o;switch(r){case"animate":o=[t,i.from,i.to,a];break;case"setClass":o=[t,f,d,a];break;case"addClass":o=[t,f,a];break;case"removeClass":o=[t,d,a];break;default:o=[t,a]}o.push(i);var s=e.apply(e,o);if(s)if(H(s.start)&&(s=s.start()),s instanceof n)s.done(a);else if(H(s))return s;return G}function b(e,t,r,i,a){var o=[];return N(i,(function(i){var s=i[a];s&&o.push((function(){var i,a,o=!1,l=function(e){o||(o=!0,(a||G)(e),i.complete(!e))};return i=new n({end:function(){l()},cancel:function(){l(!0)}}),a=y(s,e,t,r,(function(e){l(!1===e)})),i}))})),o}function x(e,t,r,i,a){var o,s,l=b(e,t,r,i,a);0===l.length&&("beforeSetClass"===a?(o=b(e,"removeClass",r,i,"beforeRemoveClass"),s=b(e,"addClass",r,i,"beforeAddClass")):"setClass"===a&&(o=b(e,"removeClass",r,i,"removeClass"),s=b(e,"addClass",r,i,"addClass")),o&&(l=l.concat(o)),s&&(l=l.concat(s)));if(0!==l.length)return function(e){var t=[];return l.length&&N(l,(function(e){t.push(e())})),t.length?n.all(t,e):e(),function(e){N(t,(function(t){e?t.cancel():t.end()}))}}}};function a(n){n=B(n)?n:n.split(" ");for(var r=[],i={},a=0;a<n.length;a++){var o=n[a],s=e.$$registeredAnimations[o];s&&!i[o]&&(r.push(t.get(s)),i[o]=!0)}return r}}]}],Z=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){return function(e){if(e.from&&e.to){var r=n(e.from),i=n(e.to);if(!r&&!i)return;return{start:function(){var e=[];r&&e.push(r.start()),i&&e.push(i.start()),t.all(e,(function(e){n.complete(e)}));var n=new t({end:a(),cancel:a()});return n;function a(){return function(){N(e,(function(e){e.end()}))}}}}}return n(e)};function n(t){var n=t.element,r=t.event,i=t.options,a=t.classes;return e(n,r,a,i)}}]}],K=["$animateProvider",function(t){var n=this.rules={skip:[],cancel:[],join:[]};function r(e){return{addClass:e.addClass,removeClass:e.removeClass,from:e.from,to:e.to}}function i(e,t){if(e&&t){var n=function(e){if(!e)return null;var t=e.split(" "),n=Object.create(null);return N(t,(function(e){n[e]=!0})),n}(t);return e.split(" ").some((function(e){return n[e]}))}}function a(e,t,r){return n[e].some((function(e){return e(t,r)}))}function o(e,t){var n=(e.addClass||"").length>0,r=(e.removeClass||"").length>0;return t?n&&r:n||r}n.join.push((function(e,t){return!e.structural&&o(e)})),n.skip.push((function(e,t){return!e.structural&&!o(e)})),n.skip.push((function(e,t){return"leave"===t.event&&e.structural})),n.skip.push((function(e,t){return t.structural&&2===t.state&&!e.structural})),n.cancel.push((function(e,t){return t.structural&&e.structural})),n.cancel.push((function(e,t){return 2===t.state&&e.structural})),n.cancel.push((function(e,t){if(t.structural)return!1;var n=e.addClass,r=e.removeClass,a=t.addClass,o=t.removeClass;return!(U(n)&&U(r)||U(a)&&U(o))&&(i(n,o)||i(r,a))})),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(n,i,s,l,c,u,p,w,y,k,C){var P=new c,E=new c,T=null;function _(e){E.delete(e.target)}var M=i.$watch((function(){return 0===w.totalPendingRequests}),(function(e){e&&(M(),i.$$postDigest((function(){i.$$postDigest((function(){null===T&&(T=!0)}))})))})),A=Object.create(null),D=t.customFilter(),L=t.classNameFilter(),V=function(){return!0},H=D||V,G=L?function(e,t){var n=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return L.test(n)}:V,q=m(y);function Y(e,t){return b(e,t,{})}var X=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))};function Z(e,t,n){var r=v(t);return e.filter((function(e){return!(e.node===r&&(!n||e.callback===n))}))}function K(e,t){"close"!==e||t.parentNode||J.off(t)}var J={on:function(e,t,n){var r=v(t);A[e]=A[e]||[],A[e].push({node:r,callback:n}),W(t).on("$destroy",(function(){P.get(r)||J.off(e,t,n)}))},off:function(e,t,n){if(1!==arguments.length||z(arguments[0])){var r=A[e];r&&(A[e]=1===arguments.length?null:Z(r,t,n))}else for(var i in t=arguments[0],A)A[i]=Z(A[i],t)},pin:function(e,t){h(R(e),"element","not an element"),h(R(t),"parentElement","not an element"),e.data("$ngAnimatePin",t)},push:function(e,t,c,h){return(c=c||{}).domOperation=h,function(e,t,c){var h=I(c),v=d(e),m=x(v),w=m&&m.parentNode;h=g(h);var y=new p,k=(_=!1,function(e){_?e():i.$$postDigest((function(){_=!0,e()}))});var _;B(h.addClass)&&(h.addClass=h.addClass.join(" "));h.addClass&&!z(h.addClass)&&(h.addClass=null);B(h.removeClass)&&(h.removeClass=h.removeClass.join(" "));h.removeClass&&!z(h.removeClass)&&(h.removeClass=null);h.from&&!j(h.from)&&(h.from=null);h.to&&!j(h.to)&&(h.to=null);if(!(T&&m&&H(m,t,c)&&G(m,h)))return ne(),y;var M=["enter","move","leave"].indexOf(t)>=0,D=C(),L=D||E.get(m),V=!L&&P.get(m)||{},O=!!V.state;L||O&&1===V.state||(L=!function(e,t,n){var r,i=l[0].body,a=x(s),o=e===i||"HTML"===e.nodeName,c=e===a,u=!1,h=E.get(e),p=W.data(e,"$ngAnimatePin");p&&(t=x(p));for(;t&&(c||(c=t===a),1===t.nodeType);){var f=P.get(t)||{};if(!u){var d=E.get(t);if(!0===d&&!1!==h){h=!0;break}!1===d&&(h=!1),u=f.structural}if(U(r)||!0===r){var v=W.data(t,"$$ngAnimateChildren");F(v)&&(r=v)}if(u&&!1===r)break;if(o||(o=t===i),o&&c)break;t=c||!(p=W.data(t,"$ngAnimatePin"))?t.parentNode:x(p)}return(!u||r)&&!0!==h&&c&&o}(m,w));if(L)return D&&te(y,t,"start",r(h)),ne(),D&&te(y,t,"close",r(h)),y;M&&function(e){var t=e.querySelectorAll("[data-ng-animate]");N(t,(function(e){var t=parseInt(e.getAttribute("data-ng-animate"),10),n=P.get(e);if(n)switch(t){case 2:n.runner.end();case 1:P.delete(e)}}))}(m);var R={structural:M,element:v,event:t,addClass:h.addClass,removeClass:h.removeClass,close:ne,options:h,runner:y};if(O){if(a("skip",R,V))return 2===V.state?(ne(),y):(b(v,V,R),V.runner);if(a("cancel",R,V))if(2===V.state)V.runner.end();else{if(!V.structural)return b(v,V,R),V.runner;V.close()}else if(a("join",R,V)){if(2!==V.state)return function(e,t,n,r){var i="";n&&(i=f(n,"ng-",!0)),r.addClass&&(i=$(i,f(r.addClass,"-add"))),r.removeClass&&(i=$(i,f(r.removeClass,"-remove"))),i.length&&(r.preparationClasses=i,t.addClass(i))}(0,v,M?t:null,h),t=R.event=V.event,h=b(v,V,R),V.runner;Y(v,R)}}else Y(v,R);var Z=R.structural;Z||(Z="animate"===R.event&&Object.keys(R.options.to||{}).length>0||o(R));if(!Z)return ne(),Q(m),y;var J=(V.counter||0)+1;return R.counter=J,ee(m,1,R),i.$$postDigest((function(){v=d(e);var n=P.get(m),i=!n;n=n||{};var a=(v.parent()||[]).length>0&&("animate"===n.event||n.structural||o(n));if(i||n.counter!==J||!a)return i&&(q(v,h),S(v,h)),(i||M&&n.event!==t)&&(h.domOperation(),y.end()),void(a||Q(m));t=!n.structural&&o(n,!0)?"setClass":n.event,ee(m,2);var s=u(v,t,n.options);y.setHost(s),te(y,t,"start",r(h)),s.done((function(e){ne(!e);var n=P.get(m);n&&n.counter===J&&Q(m),te(y,t,"close",r(h))}))})),y;function te(e,t,r,i){k((function(){var e=function(e,t,n){var r=[],i=A[n];return i&&N(i,(function(i){(X.call(i.node,t)||"leave"===n&&X.call(i.node,e))&&r.push(i.callback)})),r}(w,m,t);e.length?n((function(){N(e,(function(e){e(v,r,i)})),K(r,m)})):K(r,m)})),e.progress(t,r,i)}function ne(e){!function(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}(v,h),q(v,h),S(v,h),h.domOperation(),y.complete(!e)}}(e,t,c)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!T;else{var r=R(e);if(r){var i=x(e);1===n?t=!E.get(i):(E.has(i)||W(e).on("$destroy",_),E.set(i,!t))}else t=T=!!e}return t}};return J;function Q(e){e.removeAttribute("data-ng-animate"),P.delete(e)}function ee(e,t,n){(n=n||{}).state=t,e.setAttribute("data-ng-animate",t);var r=P.get(e),i=r?O(r,n):n;P.set(e,i)}}]}],J=["$animateProvider",function(e){var t=this.drivers=[];function n(e){return e.data("$$animationRunner")}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler","$$animateCache",function(e,r,i,a,o,s,l){var c=[],u=m(e);return function(h,f,d){d=g(d);var v=["enter","move","leave"].indexOf(f)>=0,m=new a({end:function(){C()},cancel:function(){C(!0)}});if(!t.length)return C(),m;var w=p(h.attr("class"),p(d.addClass,d.removeClass)),y=d.tempClasses;return y&&(w+=" "+y,d.tempClasses=null),v&&h.data("$$animatePrepareClasses","ng-"+f+"-prepare"),function(e,t){e.data("$$animationRunner",t)}(h,m),c.push({element:h,classes:w,event:f,structural:v,options:d,beforeStart:function(){y=(y?y+" ":"")+"ng-animate",e.addClass(h,y);var t=h.data("$$animatePrepareClasses");t&&(e.removeClass(h,t),t=null)},close:C}),h.on("$destroy",k),c.length>1||r.$$postDigest((function(){var r=[];N(c,(function(e){n(e.element)?r.push(e):e.close()})),c.length=0;var a=function(e){var t=[],n={};N(e,(function(e,r){var i=x(e.element),a=e.event,o=["enter","move"].indexOf(a)>=0,s=e.structural?function(e){var t=e.hasAttribute("ng-animate-ref")?[e]:e.querySelectorAll("[ng-animate-ref]"),n=[];return N(t,(function(e){var t=e.getAttribute("ng-animate-ref");t&&t.length&&n.push(e)})),n}(i):[];if(s.length){var l=o?"to":"from";N(s,(function(e){var t=e.getAttribute("ng-animate-ref");n[t]=n[t]||{},n[t][l]={animationID:r,element:W(e)}}))}else t.push(e)}));var r={},i={};return N(n,(function(n,a){var o=n.from,s=n.to;if(o&&s){var l=e[o.animationID],c=e[s.animationID],u=o.animationID.toString();if(!i[u]){var h=i[u]={structural:!0,beforeStart:function(){l.beforeStart(),c.beforeStart()},close:function(){l.close(),c.close()},classes:b(l.classes,c.classes),from:l,to:c,anchors:[]};h.classes.length?t.push(h):(t.push(l),t.push(c))}i[u].anchors.push({out:o.element,in:s.element})}else{var p=o?o.animationID:s.animationID,f=p.toString();r[f]||(r[f]=!0,t.push(e[p]))}})),t}(r),u=[];N(a,(function(e){var r=e.from?e.from.element:e.element,a=d.addClass;a=(a?a+" ":"")+"ng-animate";var o=l.cacheKey(r[0],e.event,a,d.removeClass);u.push({element:r,domNode:x(r),fn:function(){var r,a=e.close;if(l.containsCachedAnimationWithoutDuration(o))a();else{if(e.beforeStart(),n(e.anchors?e.from.element||e.to.element:e.element)){var s=function(e){for(var n=t.length-1;n>=0;n--){var r=t[n],a=i.get(r)(e);if(a)return a}}(e);s&&(r=s.start)}if(r){var c=r();c.done((function(e){a(!e)})),function(e,t){e.from&&e.to?(r(e.from.element),r(e.to.element)):r(e.element);function r(e){var r=n(e);r&&r.setHost(t)}}(e,c)}else a()}}})}));for(var h=function(e){var t,n={children:[]},r=new o;for(t=0;t<e.length;t++){var i=e[t];r.set(i.domNode,e[t]={domNode:i.domNode,element:i.element,fn:i.fn,children:[]})}for(t=0;t<e.length;t++)a(e[t]);return function(e){var t,n=[],r=[];for(t=0;t<e.children.length;t++)r.push(e.children[t]);var i=r.length,a=0,o=[];for(t=0;t<r.length;t++){var s=r[t];i<=0&&(i=a,a=0,n.push(o),o=[]),o.push(s),s.children.forEach((function(e){a++,r.push(e)})),i--}o.length&&n.push(o);return n}(n);function a(e){if(e.processed)return e;e.processed=!0;var t,i=e.domNode,o=i.parentNode;for(r.set(i,e);o;){if(t=r.get(o)){t.processed||(t=a(t));break}o=o.parentNode}return(t||n).children.push(e),e}}(u),p=0;p<h.length;p++)for(var f=h[p],v=0;v<f.length;v++){var m=f[v],g=m.element;if(h[p][v]=m.fn,0!==p){var S=g.data("$$animatePrepareClasses");S&&e.addClass(g,S)}else g.removeData("$$animatePrepareClasses")}s(h)})),m;function b(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],r=0;r<e.length;r++){var i=e[r];if("ng-"!==i.substring(0,3))for(var a=0;a<t.length;a++)if(i===t[a]){n.push(i);break}}return n.join(" ")}function k(){var e=n(h);!e||"leave"===f&&d.$$domOperationFired||e.end()}function C(t){h.off("$destroy",k),function(e){e.removeData("$$animationRunner")}(h),u(h,d),S(h,d),d.domOperation(),y&&e.removeClass(h,y),m.complete(!t)}}}]}];t.module("ngAnimate",[],(function(){G=t.noop,I=t.copy,O=t.extend,W=t.element,N=t.forEach,B=t.isArray,z=t.isString,j=t.isObject,U=t.isUndefined,F=t.isDefined,H=t.isFunction,R=t.isElement})).info({angularVersion:"1.8.0"}).directive("ngAnimateSwap",["$animate",function(e){return{restrict:"A",transclude:"element",terminal:!0,priority:550,link:function(t,n,r,i,a){var o,s;t.$watchCollection(r.ngAnimateSwap||r.for,(function(t){o&&e.leave(o),s&&(s.$destroy(),s=null),(t||0===t)&&a((function(t,r){o=t,s=r,e.enter(t,null,n)}))}))}}}]).directive("ngAnimateChildren",E).factory("$$rAFScheduler",["$$rAF",function(e){var t,n;function r(e){t=t.concat(e),i()}return t=r.queue=[],r.waitUntilQuiet=function(t){n&&n(),n=e((function(){n=null,t(),i()}))},r;function i(){if(t.length){for(var r=t.shift(),a=0;a<r.length;a++)r[a]();n||e((function(){n||i()}))}}}]).provider("$$animateQueue",K).provider("$$animateCache",(function(){var e="$$ngAnimateParentKey",t=0,n=Object.create(null);this.$get=[function(){return{cacheKey:function(n,r,i,a){var o=n.parentNode,s=[o[e]||(o[e]=++t),r,n.getAttribute("class")];return i&&s.push(i),a&&s.push(a),s.join(" ")},containsCachedAnimationWithoutDuration:function(e){var t=n[e];return t&&!t.isValid||!1},flush:function(){n=Object.create(null)},count:function(e){var t=n[e];return t?t.total:0},get:function(e){var t=n[e];return t&&t.value},put:function(e,t,r){n[e]?(n[e].total++,n[e].value=t):n[e]={total:1,value:t,isValid:r}}}}]})).provider("$$animation",J).provider("$animateCss",q).provider("$$animateCssDriver",Y).provider("$$animateJs",X).provider("$$animateJsDriver",Z)}(window,window.angular)},function(e,t,n){n(196),e.exports="ngCookies"},function(e,t){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(e,n,r){var i=r.baseHref(),a=e[0];return function(e,r,o){a.cookie=function(e,r,a){var o,s;s=(a=a||{}).expires,o=t.isDefined(a.path)?a.path:i,t.isUndefined(r)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",r=""),t.isString(s)&&(s=new Date(s));var l=encodeURIComponent(e)+"="+encodeURIComponent(r);l+=o?";path="+o:"",l+=a.domain?";domain="+a.domain:"",l+=s?";expires="+s.toUTCString():"",l+=a.secure?";secure":"";var c=(l+=a.samesite?";samesite="+a.samesite:"").length+1;return c>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+c+" > 4096 bytes)!"),l}(e,r,o)}}t.module("ngCookies",["ng"]).info({angularVersion:"1.8.0"}).provider("$cookies",[function(){var e=this.defaults={};function n(n){return n?t.extend({},e,n):e}this.$get=["$$cookieReader","$$cookieWriter",function(e,r){return{get:function(t){return e()[t]},getObject:function(e){var n=this.get(e);return n?t.fromJson(n):n},getAll:function(){return e()},put:function(e,t,i){r(e,t,n(i))},putObject:function(e,n,r){this.put(e,t.toJson(n),r)},remove:function(e,t){r(e,void 0,n(t))}}}]}]),n.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",(function(){this.$get=n}))}(window,window.angular)},function(e,t,n){n(198),e.exports="ngResource"},function(e,t){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";var n=t.$$minErr("$resource"),r=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;function i(e,i){if(!function(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&r.test("."+e)}(i))throw n("badmember",'Dotted member path "@{0}" is invalid.',i);for(var a=i.split("."),o=0,s=a.length;o<s&&t.isDefined(e);o++){var l=a[o];e=null!==e?e[l]:void 0}return e}function a(e,n){for(var r in n=n||{},t.forEach(n,(function(e,t){delete n[t]})),e)!e.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(n[r]=e[r]);return n}t.module("ngResource",["ng"]).info({angularVersion:"1.8.0"}).provider("$resource",(function(){var e=/^https?:\/\/\[[^\]]*][^/]*/,r=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(o,s,l,c){var u=t.noop,h=t.forEach,p=t.extend,f=t.copy,d=t.isArray,v=t.isDefined,m=t.isFunction,g=t.isNumber,S=t.$$encodeUriQuery,w=t.$$encodeUriSegment;function y(e,t){this.template=e,this.defaults=p({},r.defaults,t),this.urlParams={}}return y.prototype={setUrlParams:function(t,r,i){var a,o,s=this,l=i||s.template,c="",u=s.urlParams=Object.create(null);h(l.split(/\W/),(function(e){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(u[e]={isQueryParamValue:new RegExp("\\?.*=:"+e+"(?:\\W|$)").test(l)})})),l=(l=l.replace(/\\:/g,":")).replace(e,(function(e){return c=e,""})),r=r||{},h(s.urlParams,(function(e,t){a=r.hasOwnProperty(t)?r[t]:s.defaults[t],v(a)&&null!==a?(o=e.isQueryParamValue?S(a,!0):w(a),l=l.replace(new RegExp(":"+t+"(\\W|$)","g"),(function(e,t){return o+t}))):l=l.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),(function(e,t,n){return"/"===n.charAt(0)?n:t+n}))})),s.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),t.url=c+l.replace(/\/(\\|%5C)\./,"/."),h(r,(function(e,n){s.urlParams[n]||(t.params=t.params||{},t.params[n]=e)}))}},function(e,t,S,w){var b=new y(e,w);function x(e,n){var r={};return n=p({},t,n),h(n,(function(t,n){m(t)&&(t=t(e)),r[n]=t&&t.charAt&&"@"===t.charAt(0)?i(e,t.substr(1)):t})),r}function k(e){return e.resource}function C(e){a(e||{},this)}return S=p({},r.defaults.actions,S),C.prototype.toJSON=function(){var e=p({},this);return delete e.$promise,delete e.$resolved,delete e.$cancelRequest,e},h(S,(function(e,t){var r=!0===e.hasBody||!1!==e.hasBody&&/^(POST|PUT|PATCH)$/i.test(e.method),i=e.timeout,S=v(e.cancellable)?e.cancellable:b.defaults.cancellable;i&&!g(i)&&(s.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete e.timeout,i=null),C[t]=function(s,v,g,w){var y,$,P,E={};switch(arguments.length){case 4:P=w,$=g;case 3:case 2:if(!m(v)){E=s,y=v,$=g;break}if(m(s)){$=s,P=v;break}$=v,P=g;case 1:m(s)?$=s:r?y=s:E=s;break;case 0:break;default:throw n("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var T,_,M,A=this instanceof C,D=A?y:e.isArray?[]:new C(y),L={},V=e.interceptor&&e.interceptor.request||void 0,I=e.interceptor&&e.interceptor.requestError||void 0,O=e.interceptor&&e.interceptor.response||k,N=e.interceptor&&e.interceptor.responseError||l.reject,B=$?function(e){$(e,M.headers,M.status,M.statusText)}:void 0,F=P||void 0;h(e,(function(e,t){switch(t){default:L[t]=f(e);break;case"params":case"isArray":case"interceptor":case"cancellable":}})),!A&&S&&(T=l.defer(),L.timeout=T.promise,i&&(_=c(T.resolve,i))),r&&(L.data=y),b.setUrlParams(L,p({},x(y,e.params||{}),E),e.url);var R=l.resolve(L).then(V).catch(I).then(o);return(R=(R=R.then((function(r){var i=r.data;if(i){if(d(i)!==!!e.isArray)throw n("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",t,e.isArray?"array":"object",d(i)?"array":"object",L.method,L.url);if(e.isArray)D.length=0,h(i,(function(e){"object"==typeof e?D.push(new C(e)):D.push(e)}));else{var o=D.$promise;a(i,D),D.$promise=o}}return r.resource=D,M=r,O(r)}),(function(e){return e.resource=D,M=e,N(e)}))).finally((function(){D.$resolved=!0,!A&&S&&(D.$cancelRequest=u,c.cancel(_),T=_=L.timeout=null)}))).then(B,F),A?R:(D.$promise=R,D.$resolved=!1,S&&(D.$cancelRequest=H),D);function H(e){R.catch(u),null!==T&&T.resolve(e)}},C.prototype["$"+t]=function(e,n,r){m(e)&&(r=n,n=e,e={});var i=C[t].call(this,e,this,n,r);return i.$promise||i}})),C}}]}))}(window,window.angular)},function(e,t,n){n(200),e.exports="ngRoute"},function(e,t){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function n(e,t){var n=[],r=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,(function(e,t,r,i){var a="?"===i||"*?"===i,o="*"===i||"*?"===i;return n.push({name:r,optional:a}),t=t||"",(a?"(?:"+t:t+"(?:")+(o?"(.+?)":"([^/]+)")+(a?"?)?":")")})).replace(/([/$*])/g,"\\$1");return t.ignoreTrailingSlashes&&(r=r.replace(/\/+$/,"")+"/*"),{keys:n,regexp:new RegExp("^"+r+"(?:[?#]|$)",t.caseInsensitiveMatch?"i":"")}}var r,i,a,o,s,l=t.module("ngRoute",[]).info({angularVersion:"1.8.0"}).provider("$route",(function(){function e(e,n){return t.extend(Object.create(e),n)}r=t.isArray,i=t.isObject,a=t.isDefined,o=t.noop;var l={};this.when=function(e,a){var o=function(e,t){if(r(e)){t=t||[];for(var n=0,a=e.length;n<a;n++)t[n]=e[n]}else if(i(e))for(var o in t=t||{},e)"$"===o.charAt(0)&&"$"===o.charAt(1)||(t[o]=e[o]);return t||e}(a);if(t.isUndefined(o.reloadOnUrl)&&(o.reloadOnUrl=!0),t.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),t.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),l[e]=t.extend(o,{originalPath:e},e&&n(e,o)),e){var s="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/";l[s]=t.extend({originalPath:e,redirectTo:e},n(s,o))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},s=!0,this.eagerInstantiationEnabled=function(e){return a(e)?(s=e,this):s},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(n,r,i,a,s,u,h,p){var f,d,v=!1,m={routes:l,reload:function(){v=!0;var e={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,v=!1}};n.$evalAsync((function(){g(e),e.defaultPrevented||S()}))},updateParams:function(e){if(!this.current||!this.current.$$route)throw c("norout","Tried updating route with no current route");e=t.extend({},this.current.params,e),r.path(x(this.current.$$route.originalPath,e)),r.search(e)}};return n.$on("$locationChangeStart",g),n.$on("$locationChangeSuccess",S),m;function g(i){var a,o,s,c,u=m.current;t.forEach(l,(function(n,i){!o&&(a=function(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var a=1,o=i.length;a<o;++a){var s=n[a-1],l=i[a];s&&l&&(r[s.name]=l)}return r}(r.path(),n))&&((o=e(n,{params:t.extend({},r.search(),a),pathParams:a})).$$route=n)})),f=o||l.null&&e(l.null,{params:{},pathParams:{}}),s=f,c=u,(d=!v&&s&&c&&s.$$route===c.$$route&&(!s.reloadOnUrl||!s.reloadOnSearch&&t.equals(s.pathParams,c.pathParams)))||!u&&!f||n.$broadcast("$routeChangeStart",f,u).defaultPrevented&&i&&i.preventDefault()}function S(){var e=m.current,r=f;if(d)e.params=r.params,t.copy(e.params,i),n.$broadcast("$routeUpdate",e);else if(r||e){v=!1,m.current=r;var s=a.resolve(r);p.$$incOutstandingRequestCount("$route"),s.then(w).then(y).then((function(a){return a&&s.then(b).then((function(a){r===m.current&&(r&&(r.locals=a,t.copy(r.params,i)),n.$broadcast("$routeChangeSuccess",r,e))}))})).catch((function(t){r===m.current&&n.$broadcast("$routeChangeError",r,e,t)})).finally((function(){p.$$completeOutstandingRequest(o,"$route")}))}}function w(e){var n={route:e,hasRedirection:!1};if(e)if(e.redirectTo)if(t.isString(e.redirectTo))n.path=x(e.redirectTo,e.params),n.search=e.params,n.hasRedirection=!0;else{var i=r.path(),o=r.search(),l=e.redirectTo(e.pathParams,i,o);t.isDefined(l)&&(n.url=l,n.hasRedirection=!0)}else if(e.resolveRedirectTo)return a.resolve(s.invoke(e.resolveRedirectTo)).then((function(e){return t.isDefined(e)&&(n.url=e,n.hasRedirection=!0),n}));return n}function y(e){var t=!0;if(e.route!==m.current)t=!1;else if(e.hasRedirection){var n=r.url(),i=e.url;i?r.url(i).replace():i=r.path(e.path).search(e.search).replace().url(),i!==n&&(t=!1)}return t}function b(e){if(e){var n=t.extend({},e.resolve);t.forEach(n,(function(e,r){n[r]=t.isString(e)?s.get(e):s.invoke(e,null,null,r)}));var r=function(e){var n,r;t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(r=e.templateUrl)&&(t.isFunction(r)&&(r=r(e.params)),t.isDefined(r)&&(e.loadedTemplateUrl=h.valueOf(r),n=u(r)));return n}(e);return t.isDefined(r)&&(n.$template=r),a.all(n)}}function x(e,n){var r=[];return t.forEach((e||"").split(":"),(function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),a=i[1];r.push(n[a]),r.push(i[2]||""),delete n[a]}})),r.join("")}}]})).run(u),c=t.$$minErr("ngRoute");function u(e){s&&e.get("$route")}function h(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,a,o,s,l){var c,u,h,p=o.autoscroll,f=o.onload||"";function d(){h&&(r.cancel(h),h=null),c&&(c.$destroy(),c=null),u&&((h=r.leave(u)).done((function(e){!1!==e&&(h=null)})),u=null)}function v(){var o=e.current&&e.current.locals,s=o&&o.$template;if(t.isDefined(s)){var h=i.$new(),v=e.current,m=l(h,(function(e){r.enter(e,null,u||a).done((function(e){!1===e||!t.isDefined(p)||p&&!i.$eval(p)||n()})),d()}));u=m,(c=v.scope=h).$emit("$viewContentLoaded"),c.$eval(f)}else d()}i.$on("$routeChangeSuccess",v),v()}}}function p(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var a=n.current,o=a.locals;i.html(o.$template);var s=e(i.contents());if(a.controller){o.$scope=r;var l=t(a.controller,o);a.controllerAs&&(r[a.controllerAs]=l),i.data("$ngControllerController",l),i.children().data("$ngControllerController",l)}r[a.resolveAs||"$resolve"]=o,s(r)}}}u.$inject=["$injector"],l.provider("$routeParams",(function(){this.$get=function(){return{}}})),l.directive("ngView",h),l.directive("ngView",p),h.$inject=["$route","$anchorScroll","$animate"],p.$inject=["$compile","$controller","$route"]}(window,window.angular)},function(e,t,n){n(202),e.exports="ngSanitize"},function(e,t){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";var n,r,i,a,o,s,l,c,u,h,p=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",(function(){var f=!1,d=!1;this.$get=["$$sanitizeUri",function(e){return f=!0,d&&r($,k),function(t){var n=[];return u(t,h(n,(function(t,n){return!/^unsafe:/.test(e(t,n))}))),n.join("")}}],this.enableSvg=function(e){return o(e)?(d=e,this):d},this.addValidElements=function(e){return f||(a(e)&&(e={htmlElements:e}),D(k,e.svgElements),D(g,e.htmlVoidElements),D($,e.htmlVoidElements),D($,e.htmlElements)),this},this.addValidAttrs=function(e){return f||r(_,A(e,!0)),this},n=t.bind,r=t.extend,i=t.forEach,a=t.isArray,o=t.isDefined,s=t.$$lowercase,l=t.noop,u=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);var n=L(e);if(!n)return"";var r=5;do{if(0===r)throw p("uinput","Failed to sanitize html because the input is unstable");r--,e=n.innerHTML,n=L(e)}while(e!==n.innerHTML);var i=n.firstChild;for(;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),V(i.attributes));break;case 3:t.chars(i.textContent)}var a;if(!((a=i.firstChild)||(1===i.nodeType&&t.end(i.nodeName.toLowerCase()),a=N("nextSibling",i))))for(;null==a&&(i=N("parentNode",i))!==n;)a=N("nextSibling",i),1===i.nodeType&&t.end(i.nodeName.toLowerCase());i=a}for(;i=n.firstChild;)n.removeChild(i)},h=function(e,t){var r=!1,a=n(e,e.push);return{start:function(e,n){e=s(e),!r&&C[e]&&(r=e),r||!0!==$[e]||(a("<"),a(e),i(n,(function(n,r){var i=s(r),o="img"===e&&"src"===i||"background"===i;!0!==_[i]||!0===P[i]&&!t(n,o)||(a(" "),a(r),a('="'),a(I(n)),a('"'))})),a(">"))},end:function(e){e=s(e),r||!0!==$[e]||!0===g[e]||(a("</"),a(e),a(">")),e==r&&(r=!1)},chars:function(e){r||a(I(e))}}},c=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=/([^#-~ |!])/g,g=M("area,br,col,hr,img,wbr"),S=M("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),w=M("rp,rt"),y=r({},w,S),b=r({},S,M("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),x=r({},w,M("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),k=M("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),C=M("script,style"),$=r({},g,b,x,y),P=M("background,cite,href,longdesc,src,xlink:href,xml:base"),E=M("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),T=M("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),_=r({},P,T,E);function M(e,t){return A(e.split(","),t)}function A(e,t){var n,r={};for(n=0;n<e.length;n++)r[t?s(e[n]):e[n]]=!0;return r}function D(e,t){t&&t.length&&r(e,A(t))}var L=function(e,t){var n;if(!t||!t.implementation)throw p("noinert","Can't create an inert html document");var r=((n=t.implementation.createHTMLDocument("inert")).documentElement||n.getDocumentElement()).querySelector("body");return r.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',r.querySelector("svg")?(r.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',r.querySelector("svg img")?function(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}:function(e){r.innerHTML=e,t.documentMode&&O(r);return r}):function(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null);var r=n.response.body;return r.firstChild.remove(),r}}(e,e.document);function V(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function I(e){return e.replace(/&/g,"&amp;").replace(v,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(m,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function O(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var a=n[r],o=a.name.toLowerCase();"xmlns:ns1"!==o&&0!==o.lastIndexOf("ns1:",0)||(t.removeAttributeNode(a),r--,i--)}var s=t.firstChild;s&&O(s),t=N("nextSibling",t)}}function N(e,t){var n=t[e];if(n&&c.call(t,n))throw p("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}})).info({angularVersion:"1.8.0"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,i=t.$$minErr("linky"),a=t.isDefined,o=t.isFunction,s=t.isObject,c=t.isString;return function(t,u,p){if(null==t||""===t)return t;if(!c(t))throw i("notstring","Expected string but received: {0}",t);for(var f,d,v,m=o(p)?p:s(p)?function(){return p}:function(){return{}},g=t,S=[];f=g.match(n);)d=f[0],f[2]||f[4]||(d=(f[3]?"http://":"mailto:")+d),v=f.index,w(g.substr(0,v)),y(d,f[0].replace(r,"")),g=g.substring(v+f[0].length);return w(g),e(S.join(""));function w(e){var t,n;e&&S.push((t=e,h(n=[],l).chars(t),n.join("")))}function y(e,t){var n,r=m(e);for(n in S.push("<a "),r)S.push(n+'="'+r[n]+'" ');a(u)&&!("target"in r)&&S.push('target="',u,'" '),S.push('href="',e.replace(/"/g,"&quot;"),'">'),w(t),S.push("</a>")}}}])}(window,window.angular)},function(e,t,n){n(204),e.exports="ngTouch"},function(e,t){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";var n=t.module("ngTouch",[]);function r(e,r,i){n.directive(e,["$parse","$swipe",function(n,a){return function(o,s,l){var c,u,h=n(l[e]);var p=["touch"];t.isDefined(l.ngSwipeDisableMouse)||p.push("mouse"),a.bind(s,{start:function(e,t){c=e,u=!0},cancel:function(e){u=!1},end:function(e,t){(function(e){if(!c)return!1;var t=Math.abs(e.y-c.y),n=(e.x-c.x)*r;return u&&t<75&&n>0&&n>30&&t/n<.3})(e)&&o.$apply((function(){s.triggerHandler(i),h(o,{$event:t})}))}},p)}}])}n.info({angularVersion:"1.8.0"}),n.factory("$swipe",[function(){var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function n(e){var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],r=t.changedTouches&&t.changedTouches[0]||n[0];return{x:r.clientX,y:r.clientY}}function r(n,r){var i=[];return t.forEach(n,(function(t){var n=e[t][r];n&&i.push(n)})),i.join(" ")}return{bind:function(e,t,i){var a,o,s,l,c=!1;i=i||["mouse","touch","pointer"],e.on(r(i,"start"),(function(e){s=n(e),c=!0,a=0,o=0,l=s,t.start&&t.start(s,e)}));var u=r(i,"cancel");u&&e.on(u,(function(e){c=!1,t.cancel&&t.cancel(e)})),e.on(r(i,"move"),(function(e){if(c&&s){var r=n(e);if(a+=Math.abs(r.x-l.x),o+=Math.abs(r.y-l.y),l=r,!(a<10&&o<10))return o>a?(c=!1,void(t.cancel&&t.cancel(e))):(e.preventDefault(),void(t.move&&t.move(r,e)))}})),e.on(r(i,"end"),(function(e){c&&(c=!1,t.end&&t.end(n(e),e))}))}}}]),r("ngSwipeLeft",-1,"swipeleft"),r("ngSwipeRight",1,"swiperight")}(window,window.angular)},function(e,t,n){n(206),e.exports="angular.filter"},function(e,t){
/**
 * Bunch of useful filters for angularJS(with no external dependencies!)
 * @version v0.5.17 - 2017-09-22 * @link https://github.com/a8m/angular-filter
 * @author Ariel Mashraki <ariel@mashraki.co.il>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t,n){"use strict";var r=t.isDefined,i=t.isUndefined,a=t.isFunction,o=t.isString,s=t.isNumber,l=t.isObject,c=t.isArray,u=t.forEach,h=t.extend,p=t.copy,f=t.equals;function d(e){return c(e)?e:Object.keys(e).map((function(t){return e[t]}))}function v(e){return null===e}function m(e,t){return-1==Object.keys(e).map((function(n){return void 0!==t[n]&&t[n]==e[n]})).indexOf(!1)}function g(e,t){function n(e,t,n){for(var r=0;t+r<=e.length;){if(e.charAt(t+r)==n)return r;r++}return-1}for(var r=0,i=0;i<=t.length;i++){var a=n(e,r,t.charAt(i));if(-1==a)return!1;r+=a+1}return!0}function S(e,t,n){var i=0;return e.filter((function(e){var a=r(n)?i<t&&n(e):i<t;return i=a?i+1:i,a}))}function w(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function y(e){return e&&e.$evalAsync&&e.$watch}function b(){return function(e,t){return e>t}}function x(){return function(e,t){return e>=t}}function k(){return function(e,t){return e<t}}function C(){return function(e,t){return e<=t}}function $(){return function(e,t){return e==t}}function P(){return function(e,t){return e!=t}}function E(){return function(e,t){return e===t}}function T(){return function(e,t){return e!==t}}function _(e){return function(t,n){return t=l(t)?d(t):t,!(!c(t)||i(n))&&t.some((function(t){return o(n)&&l(t)||a(n)?e(n)(t):t===n}))}}function M(e){return function(t,n){if(t=l(t)?d(t):t,!c(t))return t;var r=[],a=e(n);return i(n)?t.filter((function(e,t,n){return n.indexOf(e)===t})):t.filter((function(e){var t=a(e);return!function(e,t){if(i(t))return!1;return e.some((function(e){return f(e,t)}))}(r,t)&&(r.push(t),!0)}))}}function A(){return function(e){return o(e)?e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" "):e}}String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),t.module("a8m.angular",[]).filter("isUndefined",(function(){return function(e){return t.isUndefined(e)}})).filter("isDefined",(function(){return function(e){return t.isDefined(e)}})).filter("isFunction",(function(){return function(e){return t.isFunction(e)}})).filter("isString",(function(){return function(e){return t.isString(e)}})).filter("isNumber",(function(){return function(e){return t.isNumber(e)}})).filter("isArray",(function(){return function(e){return t.isArray(e)}})).filter("isObject",(function(){return function(e){return t.isObject(e)}})).filter("isEqual",(function(){return function(e,n){return t.equals(e,n)}})),t.module("a8m.conditions",[]).filter({isGreaterThan:b,">":b,isGreaterThanOrEqualTo:x,">=":x,isLessThan:k,"<":k,isLessThanOrEqualTo:C,"<=":C,isEqualTo:$,"==":$,isNotEqualTo:P,"!=":P,isIdenticalTo:E,"===":E,isNotIdenticalTo:T,"!==":T}),t.module("a8m.is-null",[]).filter("isNull",(function(){return function(e){return v(e)}})),t.module("a8m.after-where",[]).filter("afterWhere",(function(){return function(e,t){if(e=l(e)?d(e):e,!c(e)||i(t))return e;var n=e.map((function(e){return m(t,e)})).indexOf(!0);return e.slice(-1===n?0:n)}})),t.module("a8m.after",[]).filter("after",(function(){return function(e,t){return e=l(e)?d(e):e,c(e)?e.slice(t):e}})),t.module("a8m.before-where",[]).filter("beforeWhere",(function(){return function(e,t){if(e=l(e)?d(e):e,!c(e)||i(t))return e;var n=e.map((function(e){return m(t,e)})).indexOf(!0);return e.slice(0,-1===n?e.length:++n)}})),t.module("a8m.before",[]).filter("before",(function(){return function(e,t){return e=l(e)?d(e):e,c(e)?e.slice(0,t?--t:t):e}})),t.module("a8m.chunk-by",["a8m.filter-watcher"]).filter("chunkBy",["filterWatcher",function(e){return function(t,n,r){return e.isMemoized("chunkBy",arguments)||e.memoize("chunkBy",arguments,this,o(t,n,r));function a(e,t){for(var n=[];e--;)n[e]=t;return n}function o(e,t,n){return c(e)?e.map((function(e,r,o){return r*=t,e=o.slice(r,r+t),!i(n)&&e.length<t?e.concat(a(t-e.length,n)):e})).slice(0,Math.ceil(e.length/t)):e}}}]),t.module("a8m.concat",[]).filter("concat",[function(){return function(e,t){if(i(t))return e;if(c(e))return l(t)?e.concat(d(t)):e.concat(t);if(l(e)){var n=d(e);return l(t)?n.concat(d(t)):n.concat(t)}return e}}]),t.module("a8m.contains",[]).filter({contains:["$parse",_],some:["$parse",_]}),t.module("a8m.count-by",[]).filter("countBy",["$parse",function(e){return function(t,n){var r,a={},o=e(n);return t=l(t)?d(t):t,!c(t)||i(n)?t:(t.forEach((function(e){r=o(e),a[r]||(a[r]=0),a[r]++})),a)}}]),t.module("a8m.defaults",[]).filter("defaults",["$parse",function(e){return function(t,n){if(t=l(t)?d(t):t,!c(t)||!l(n))return t;var r=function e(t,n,r){return n=n||[],Object.keys(t).forEach((function(i){if(l(t[i])&&!c(t[i])){var a=r?r+"."+i:r;e(t[i],n,a||i)}else{var o=r?r+"."+i:i;n.push(o)}})),n}(n);return t.forEach((function(t){r.forEach((function(r){var a=e(r),o=a.assign;i(a(t))&&o(t,a(n))}))})),t}}]),t.module("a8m.every",[]).filter("every",["$parse",function(e){return function(t,n){return t=l(t)?d(t):t,!(c(t)&&!i(n))||t.every((function(t){return l(t)||a(n)?e(n)(t):t===n}))}}]),t.module("a8m.filter-by",[]).filter("filterBy",["$parse",function(e){return function(t,n,r,a){var u;return r=o(r)||s(r)?String(r).toLowerCase():void 0,t=l(t)?d(t):t,!c(t)||i(r)?t:t.filter((function(t){return n.some((function(n){if(~n.indexOf("+")){var i=n.replace(/\s+/g,"").split("+");u=i.map((function(n){return e(n)(t)})).join(" ")}else u=e(n)(t);return!(!o(u)&&!s(u))&&(u=String(u).toLowerCase(),a?u===r:u.contains(r))}))}))}}]),t.module("a8m.first",[]).filter("first",["$parse",function(e){return function(t){var n,r,i;return t=l(t)?d(t):t,c(t)?(i=Array.prototype.slice.call(arguments,1),n=s(i[0])?i[0]:1,r=s(i[0])?s(i[1])?void 0:i[1]:i[0],i.length?S(t,n,r?e(r):r):t[0]):t}}]),t.module("a8m.flatten",[]).filter("flatten",(function(){return function(e,t){return t=t||!1,e=l(e)?d(e):e,c(e)?t?[].concat.apply([],e):function e(t,n){if((n=n||0)>=t.length)return t;if(c(t[n]))return e(t.slice(0,n).concat(t[n],t.slice(n+1)),n);return e(t,n+1)}(e,0):e}})),t.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function(e){return function(t,n,r,a){var s,u,h=a||!1;return t=l(t)?d(t):t,!c(t)||i(n)||i(r)?t:(u=e(n),t.filter((function(e){return s=u(e),!!o(s)&&(s=h?s:s.toLowerCase(),r=h?r:r.toLowerCase(),!1!==g(s,r))})))}}]),t.module("a8m.fuzzy",[]).filter("fuzzy",(function(){return function(e,t,n){var r=n||!1;return e=l(e)?d(e):e,!c(e)||i(t)?e:(t=r?t:t.toLowerCase(),e.filter((function(e){return o(e)?!1!==g(e=r?e:e.toLowerCase(),t):!!l(e)&&function(e,t){var n,i;return 0<Object.keys(e).filter((function(a){return n=e[a],!!i||!!o(n)&&(n=r?n:n.toLowerCase(),i=!1!==g(n,t))})).length}(e,t)})))}})),t.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function(e,t){return function(n,r){return!l(n)||i(r)?n:t.isMemoized("groupBy",arguments)||t.memoize("groupBy",arguments,this,a(n,e(r)));function a(e,t){var n,r={};return u(e,(function(e){n=t(e),r[n]||(r[n]=[]),r[n].push(e)})),r}}}]),t.module("a8m.is-empty",[]).filter("isEmpty",(function(){return function(e){return l(e)?!d(e).length:!e.length}})),t.module("a8m.join",[]).filter("join",(function(){return function(e,t){return i(e)||!c(e)?e:(i(t)&&(t=" "),e.join(t))}})),t.module("a8m.last",[]).filter("last",["$parse",function(e){return function(t){var n,r,i,a=p(t);return a=l(a)?d(a):a,c(a)?(i=Array.prototype.slice.call(arguments,1),n=s(i[0])?i[0]:1,r=s(i[0])?s(i[1])?void 0:i[1]:i[0],i.length?S(a.reverse(),n,r?e(r):r).reverse():a[a.length-1]):a}}]),t.module("a8m.map",[]).filter("map",["$parse",function(e){return function(t,n){return t=l(t)?d(t):t,!c(t)||i(n)?t:t.map((function(t){return e(n)(t)}))}}]),t.module("a8m.omit",[]).filter("omit",["$parse",function(e){return function(t,n){return t=l(t)?d(t):t,!c(t)||i(n)?t:t.filter((function(t){return!e(n)(t)}))}}]),t.module("a8m.pick",[]).filter("pick",["$parse",function(e){return function(t,n){return t=l(t)?d(t):t,!c(t)||i(n)?t:t.filter((function(t){return e(n)(t)}))}}]),t.module("a8m.range",[]).filter("range",(function(){return function(e,t,n,r,i){n=n||0,r=r||1;for(var o=0;o<parseInt(t);o++){var s=n+o*r;e.push(a(i)?i(s):s)}return e}})),t.module("a8m.remove-with",[]).filter("removeWith",(function(){return function(e,t){return i(t)?e:(e=l(e)?d(e):e).filter((function(e){return!m(t,e)}))}})),t.module("a8m.remove",[]).filter("remove",(function(){return function(e){e=l(e)?d(e):e;var t=Array.prototype.slice.call(arguments,1);return c(e)?e.filter((function(e){return!t.some((function(t){return f(t,e)}))})):e}})),t.module("a8m.reverse",[]).filter("reverse",[function(){return function(e){return e=l(e)?d(e):e,o(e)?e.split("").reverse().join(""):c(e)?e.slice().reverse():e}}]),t.module("a8m.search-field",[]).filter("searchField",["$parse",function(e){return function(t){var n;t=l(t)?d(t):t;var r=Array.prototype.slice.call(arguments,1);return c(t)&&r.length?t.map((function(t){return n=r.map((function(n){return e(n)(t)})).join(" "),h(t,{searchField:n})})):t}}]),t.module("a8m.to-array",[]).filter("toArray",(function(){return function(e,t){return l(e)?t?Object.keys(e).map((function(t){return h(e[t],{$key:t})})):d(e):e}})),t.module("a8m.unique",[]).filter({unique:["$parse",M],uniq:["$parse",M]}),t.module("a8m.where",[]).filter("where",(function(){return function(e,t){return i(t)?e:(e=l(e)?d(e):e).filter((function(e){return m(t,e)}))}})),t.module("a8m.xor",[]).filter("xor",["$parse",function(e){return function(t,n,r){return r=r||!1,t=l(t)?d(t):t,n=l(n)?d(n):n,c(t)&&c(n)?t.concat(n).filter((function(e){return!(i(e,t)&&i(e,n))})):t;function i(t,n){var i=e(r);return n.some((function(e){return r?f(i(e),i(t)):f(e,t)}))}}}]),t.module("a8m.math.abs",[]).filter("abs",(function(){return function(e){return Math.abs(e)}})),t.module("a8m.math.byteFmt",[]).filter("byteFmt",(function(){var e=[{str:"B",val:1024}];return["KB","MB","GB","TB","PB","EB","ZB","YB"].forEach((function(t,n){e.push({str:t,val:1024*e[n].val})})),function(t,n){if(s(n)&&isFinite(n)&&n%1==0&&n>=0&&s(t)&&isFinite(t)){for(var r=0;r<e.length-1&&t>=e[r].val;)r++;return w(t/=r>0?e[r-1].val:1,n)+" "+e[r].str}return"NaN"}})),t.module("a8m.math.degrees",[]).filter("degrees",(function(){return function(e,t){if(s(t)&&isFinite(t)&&t%1==0&&t>=0&&s(e)&&isFinite(e)){var n=180*e/Math.PI;return Math.round(n*Math.pow(10,t))/Math.pow(10,t)}return"NaN"}})),t.module("a8m.math.kbFmt",[]).filter("kbFmt",(function(){var e=[{str:"KB",val:1024}];return["MB","GB","TB","PB","EB","ZB","YB"].forEach((function(t,n){e.push({str:t,val:1024*e[n].val})})),function(t,n){if(s(n)&&isFinite(n)&&n%1==0&&n>=0&&s(t)&&isFinite(t)){for(var r=0;r<e.length-1&&t>=e[r].val;)r++;return w(t/=r>0?e[r-1].val:1,n)+" "+e[r].str}return"NaN"}})),t.module("a8m.math.max",[]).filter("max",["$parse",function(e){return function(t,n){return c(t)?i(n)?Math.max.apply(Math,t):t[(r=t,a=n,o=r.map((function(t){return e(a)(t)})),o.indexOf(Math.max.apply(Math,o)))]:t;var r,a,o}}]),t.module("a8m.math.min",[]).filter("min",["$parse",function(e){return function(t,n){return c(t)?i(n)?Math.min.apply(Math,t):t[(r=t,a=n,o=r.map((function(t){return e(a)(t)})),o.indexOf(Math.min.apply(Math,o)))]:t;var r,a,o}}]),t.module("a8m.math.percent",[]).filter("percent",(function(){return function(e,t,n){var r=o(e)?Number(e):e;return t=t||100,n=n||!1,!s(r)||isNaN(r)?e:n?Math.round(r/t*100):r/t*100}})),t.module("a8m.math.radians",[]).filter("radians",(function(){return function(e,t){if(s(t)&&isFinite(t)&&t%1==0&&t>=0&&s(e)&&isFinite(e)){var n=3.14159265359*e/180;return Math.round(n*Math.pow(10,t))/Math.pow(10,t)}return"NaN"}})),t.module("a8m.math.radix",[]).filter("radix",(function(){return function(e,t){return s(e)&&/^[2-9]$|^[1-2]\d$|^3[0-6]$/.test(t)?e.toString(t).toUpperCase():e}})),t.module("a8m.math.shortFmt",[]).filter("shortFmt",(function(){return function(e,t){return s(t)&&isFinite(t)&&t%1==0&&t>=0&&s(e)&&isFinite(e)?e<1e3?""+e:e<1e6?w(e/1e3,t)+" K":e<1e9?w(e/1e6,t)+" M":w(e/1e9,t)+" B":"NaN"}})),t.module("a8m.math.sum",[]).filter("sum",(function(){return function(e,t){return c(e)?e.reduce((function(e,t){return e+t}),t||0):e}})),t.module("a8m.ends-with",[]).filter("endsWith",(function(){return function(e,t,n){var r,a=n||!1;return!o(e)||i(t)?e:(r=(e=a?e:e.toLowerCase()).length-t.length,-1!==e.indexOf(a?t:t.toLowerCase(),r))}})),t.module("a8m.latinize",[]).filter("latinize",[function(){for(var e=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],t={},n=0;n<e.length;n++)for(var r=e[n].letters.split(""),i=0;i<r.length;i++)t[r[i]]=e[n].base;return function(e){return o(e)?e.replace(/[^\u0000-\u007E]/g,(function(e){return t[e]||e})):e}}]),t.module("a8m.ltrim",[]).filter("ltrim",(function(){return function(e,t){var n=t||"\\s";return o(e)?e.replace(new RegExp("^"+n+"+"),""):e}})),t.module("a8m.match",[]).filter("match",(function(){return function(e,t,n){var r=new RegExp(t,n);return o(e)?e.match(r):null}})),t.module("a8m.phoneUS",[]).filter("phoneUS",(function(){return function(e){return"("+(e+="").slice(0,3)+") "+e.slice(3,6)+"-"+e.slice(6)}})),t.module("a8m.repeat",[]).filter("repeat",[function(){return function(e,t,n){var r=~~t;return o(e)&&r?function e(t,n,r){if(!n)return t;return t+r+e(t,--n,r)}(e,--t,n||""):e}}]),t.module("a8m.rtrim",[]).filter("rtrim",(function(){return function(e,t){var n=t||"\\s";return o(e)?e.replace(new RegExp(n+"+$"),""):e}})),t.module("a8m.slugify",[]).filter("slugify",[function(){return function(e,t){var n=i(t)?"-":t;return o(e)?e.toLowerCase().replace(/\s+/g,n):e}}]),t.module("a8m.split",[]).filter("split",(function(){return function(e,t,n){var r,a,s,l;return i(e)||!o(e)?null:(i(t)&&(t=""),isNaN(n)&&(n=0),r=new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"g"),v(a=e.match(r))||n>=a.length?[e]:0===n?e.split(t):(l=(s=e.split(t)).splice(0,n+1),s.unshift(l.join(t)),s))}})),t.module("a8m.starts-with",[]).filter("startsWith",(function(){return function(e,t,n){var r=n||!1;return!o(e)||i(t)?e:!(e=r?e:e.toLowerCase()).indexOf(r?t:t.toLowerCase())}})),t.module("a8m.stringular",[]).filter("stringular",(function(){return function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,(function(e,n){return i(t[n])?e:t[n]}))}})),t.module("a8m.strip-tags",[]).filter("stripTags",(function(){return function(e){return o(e)?e.replace(/<\S[^><]*>/g,""):e}})),t.module("a8m.test",[]).filter("test",(function(){return function(e,t,n){var r=new RegExp(t,n);return o(e)?r.test(e):e}})),t.module("a8m.trim",[]).filter("trim",(function(){return function(e,t){var n=t||"\\s";return o(e)?e.replace(new RegExp("^"+n+"+|"+n+"+$","g"),""):e}})),t.module("a8m.truncate",[]).filter("truncate",(function(){return function(e,t,n,r){return t=i(t)?e.length:t,r=r||!1,n=n||"",!o(e)||e.length<=t?e:e.substring(0,r?-1===e.indexOf(" ",t)?e.length:e.indexOf(" ",t):t)+n}})),t.module("a8m.ucfirst",[]).filter({ucfirst:A,titleize:A}),t.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function(e){return function(t){return o(t)?e.encodeURIComponent(t):t}}]),t.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function(e){return function(t){return o(t)?e.encodeURI(t):t}}]),t.module("a8m.wrap",[]).filter("wrap",(function(){return function(e,t,n){return o(e)&&r(t)?[t,e,n||t].join(""):e}})),t.module("a8m.filter-watcher",[]).provider("filterWatcher",(function(){this.$get=["$window","$rootScope",function(e,t){var n={},r={},a=e.setTimeout;function o(t,n){return[t,JSON.stringify(n,(r=[],function(t,n){if(l(n)&&!v(n)){if(~r.indexOf(n))return"[Circular]";r.push(n)}return e==n?"$WINDOW":e.document==n?"$DOCUMENT":y(n)?"$SCOPE":n}))].join("#").replace(/"/g,"");var r}function s(e){var t=e.targetScope.$id;u(r[t],(function(e){delete n[e]})),delete r[t]}return{isMemoized:function(e,t){var r=o(e,t);return n[r]},memoize:function(e,l,c,u){var h=o(e,l);return n[h]=u,y(c)?function(e,t){var n=e.$id;i(r[n])&&(e.$on("$destroy",s),r[n]=[]),r[n].push(t)}(c,h):a((function(){t.$$phase||(n={})}),2e3),u}}}]})),t.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.split","a8m.phoneUS","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math.max","a8m.math.min","a8m.math.abs","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular)},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(145),i=n(146),a=n(69),o=n(1),s=n.n(o),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u={selector:"hierarchyPathCanvas",template:'\n    \x3c!-- non editable hierarchy path which includes times --\x3e\n    <div \n    class="emuwebapp-level" \n    style="height: 256px"\n    ng-show="$ctrl.selectedCanvasIdx == 0">\n    <div class="emuwebapp-level-container">\n    <canvas \n    class="emuwebapp-level-canvas" \n    id="levelCanvas" \n    width="4096" \n    height="1024" \n    ng-style="$ctrl.backgroundCanvas"\n    ></canvas>\n    \n    <canvas \n    class="emuwebapp-level-markup"\n    style="background-color: rgba(200, 200, 200, 0.3); filter: blur(1px);"\n    id="levelMarkupCanvas" \n    width="4096" \n    height="1024" \n    level-name="$ctrl.level.name"\n    level-type="$ctrl.level.type"></canvas>\n    </div>\n    </div>\n    \x3c!-- hierachy tree editable --\x3e\n    \x3c!--\n    <div style="background-color: pink;">\n    <emuhierarchy \n    ng-show="$ctrl.selectedCanvasIdx == 1;"\n    playing="getPlaying();" \n    vertical="true"\n    cur-level-attr-defs="vs.curLevelAttrDefs"\n    hierarchy-path="vs.hierarchyState.path"\n    moves-away-from-last-save="HistoryService.movesAwayFromLastSave"\n    new-link-from-id="vs.hierarchyState.newLinkFromID"\n    is-shown="vs.hierarchyState.isShown()"\n    context-menu-id="vs.hierarchyState.contextMenuID"\n    hierarchy-resize="vs.hierarchyState.resize"\n    attribute-definition-click-counter="attributeDefinitionClickCounter"\n    ></emuhierarchy>\n    </div>\n    --\x3e\n    \x3c!-- selectors --\x3e\n    \x3c!-- <div \n    ng-if="true" \n    class="emuwebapp-canvasSelectors"\n    >\n    <div>\n        <ul>\n        <li>\n            <button \n            ng-click="$ctrl.changeSelectedCanvas(0);" \n            ng-style="$ctrl.getSelectedCanvasColor(0);"\n            ></button>\n            <button \n            ng-click="$ctrl.changeSelectedCanvas(1);" \n            ng-style="$ctrl.getSelectedCanvasColor(1);"\n            ></button>\n        </li>\n        </ul>\n    </div>\n    </div> --\x3e\n    ',bindings:{annotation:"<",path:"<",idx:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",viewPortSelectStart:"<",viewPortSelectEnd:"<",curMouseX:"<",curClickLevelName:"<",movingBoundarySample:"<",movingBoundary:"<",movesAwayFromLastSave:"<",curPerspectiveIdx:"<",curBndl:"<"},controller:["$scope","$element","$animate","ViewStateService","ConfigProviderService","DrawHelperService","HistoryService","FontScaleService","ModalService","LevelService","LoadedMetaDataService","HierarchyLayoutService","DataService",function(){function t(t,n,a,o,u,h,p,f,d,v,m,g,S){this.$postLink=function(){var e=this;this.canvas=this.$element.find("canvas"),this.levelCanvasContainer=this.$element.find("div"),this.$element.bind("mouseleave",(function(){e.ViewStateService.setcurMouseItem(void 0,void 0,void 0),e.drawLevelMarkup()})),this.redrawAll()},this.$onChanges=function(e){this._inited&&(e.viewPortSampleStart&&e.viewPortSampleStart.currentValue!==e.viewPortSampleStart.previousValue&&this.redrawAll(),e.viewPortSampleEnd&&e.viewPortSampleEnd.currentValue!==e.viewPortSampleEnd.previousValue&&this.redrawAll(),e.viewPortSelectStart&&e.viewPortSelectStart.currentValue!==e.viewPortSelectStart.previousValue&&this.drawLevelMarkup(),e.viewPortSelectEnd&&e.viewPortSelectEnd.currentValue!==e.viewPortSelectEnd.previousValue&&this.drawLevelMarkup(),e.curMouseX&&e.curMouseX.currentValue!==e.curMouseX.previousValue&&this.drawLevelMarkup(),e.curClickLevelName&&e.curClickLevelName.currentValue!==e.curClickLevelName.previousValue&&this.drawLevelMarkup(),e.movingBoundarySample&&e.movingBoundarySample.currentValue!==e.movingBoundarySample.previousValue&&this.drawLevelMarkup(),e.movingBoundary&&e.movingBoundary.currentValue!==e.movingBoundary.previousValue&&this.drawLevelMarkup(),e.movesAwayFromLastSave&&e.movesAwayFromLastSave.currentValue!==e.movesAwayFromLastSave.previousValue&&this.redrawAll(),e.curPerspectiveIdx&&e.curPerspectiveIdx.currentValue!==e.curPerspectiveIdx.previousValue&&this.redrawAll(),e.curBndl&&e.curBndl.currentValue!==e.curBndl.previousValue&&this.redrawAll())},this.$onInit=function(){var e=this;this._inited=!0,this.resizeObservable$=Object(r.a)(window,"resize"),this.resizeObservable$.pipe(Object(i.a)(1e3)).subscribe((function(t){e.redrawAll()}))},this.changeSelectedCanvas=function(e){this.selectedCanvasIdx=e},this.getSelectedCanvasColor=function(e){return e===this.selectedCanvasIdx?{background:"-webkit-radial-gradient(50% 50%, closest-corner, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0) 60%)","border-color":s.a.colorYellow}:{"background-color":s.a.colorWhite}},this.drawLevelDetails=function(t,n,r,i){return void 0===r&&(r=0),void 0===i&&(i=1024),l(this,void 0,void 0,(function(){var a,o,l,u,h,p,f,d,v,m,g,S,w,y=this;return c(this,(function(c){return o=s.a.fontSmallFamily,a=void 0===this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontFamily?s.a.fontSmallFamily:this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontFamily,0===(l=Number(localStorage.getItem("levelCanvasesFontScalingFactor")))&&(l=100),l/=100,h=parseInt(s.a.fontSmallSize.slice(0,-2)),u=void 0===this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.fontPxSize?parseInt(s.a.fontSmallSize.slice(0,-2))*l:this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontPxSize*l,p=this.ViewStateService.getCurAttrDef(n.name),f="25px"!==this.$element.parent().css("height"),e.isEmptyObject(n)||e.isEmptyObject(this.ViewStateService)||e.isEmptyObject(this.ConfigProviderService)||((d=t[0].getContext("2d")).clearRect(0,r,d.canvas.width,i),v=this.ViewStateService.getSampleDist(d.canvas.width),d.canvas.height/d.canvas.offsetHeight,n.name===p?(h-=2,this.FontScaleService.drawUndistortedText(d,n.name,h,o,4,r+(i-r)/2,s.a.colorBlue,!0)):this.FontScaleService.drawUndistortedTextTwoLines(d,n.name+":"+p,"("+n.type+")",h,o,4,r+(i-r)/2,s.a.colorYellow,!0),-1,S=d.measureText("m").width*this.FontScaleService.scaleX,d.measureText("0").width*this.FontScaleService.scaleX,"SEGMENT"===n.type||"ITEM"===n.type?(d.fillStyle=s.a.colorWhite,n.items.forEach((function(e){var t;if((e.sampleStart>=y.viewPortSampleStart&&e.sampleStart<=y.viewPortSampleEnd||e.sampleStart+e.sampleDur>y.viewPortSampleStart&&e.sampleStart+e.sampleDur<y.viewPortSampleEnd||e.sampleStart<y.viewPortSampleStart&&e.sampleStart+e.sampleDur>y.viewPortSampleEnd)&&(e.labels.forEach((function(e){e.name===p&&(t=e.value)})),m=y.ViewStateService.getPos(d.canvas.width,e.sampleStart),g=y.ViewStateService.getPos(d.canvas.width,e.sampleStart+e.sampleDur+1),d.fillStyle=s.a.colorWhite,d.fillRect(m,r,2,(i-r)/2),d.fillStyle=s.a.colorGrey,d.fillRect(g,r+(i-r)/2,2,(i-r)/2),d.font=h-2+"px "+a,void 0!==t&&g-m>S*t.length&&y.FontScaleService.drawUndistortedText(d,t,u-2,a,m+(g-m)/2,r+(i-r)/2-(h-2)+2,s.a.colorWhite,!1),void 0!==t&&0!==t.length)){var n=m+(g-m)/2,o=r+(i-r)/4;d.strokeStyle=s.a.colorWhite,d.beginPath(),d.moveTo(m,o),d.lineTo(n,o),d.lineTo(n,o+5),d.stroke(),o=r+(i-r)/4*3,d.strokeStyle=s.a.colorGrey,d.beginPath(),d.moveTo(g,o),d.lineTo(n,o),d.lineTo(n,o-5),d.stroke()}}))):"EVENT"===n.type?(d.fillStyle=s.a.colorWhite,n.items.forEach((function(e){var t;e.samplePoint>y.viewPortSampleStart&&e.samplePoint<y.viewPortSampleEnd&&(w=Math.round(y.ViewStateService.getPos(d.canvas.width,e.samplePoint)+v/2),e.labels.forEach((function(e){e.name===p&&(t=e.value)})),d.fillStyle=s.a.colorWhite,d.fillRect(w,0,1,(i-r)/2-(i-r)/5),d.fillRect(w,(i-r)/2+(i-r)/5,1,(i-r)/2-(i-r)/5),y.FontScaleService.drawUndistortedText(d,t,u-2,a,w,(i-r)/2-(h-2)+2,s.a.colorWhite,!1),f&&y.FontScaleService.drawUndistortedText(d,e.samplePoint,h-2,a,w+5,0,s.a.colorBlue,!0))}))):console.error("bad level type")),[2]}))}))},this.drawLevelMarkup=function(){var e=this.canvas[1].getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),this.DrawHelperService.drawMovingBoundaryLine(e),this.DrawHelperService.drawCurViewPortSelected(e),this.ViewStateService.getPos(e.canvas.width,this.ViewStateService.curViewPort.selectS),this.ViewStateService.getPos(e.canvas.width,this.ViewStateService.curViewPort.selectE),this.ViewStateService.getSampleDist(e.canvas.width);this.ViewStateService.getcurMouseItem(),this.ViewStateService.getcurMouseisFirst(),this.ViewStateService.getcurMouseisLast(),this.ViewStateService.getcurClickItems(),this.ViewStateService.getcurClickLevelName();this.ViewStateService.getcurMouseItem(),this.DrawHelperService.drawCrossHairX(e,this.ViewStateService.curMouseX)},this.$scope=t,this.$element=n,this.$animate=a,this.ViewStateService=o,this.ConfigProviderService=u,this.DrawHelperService=h,this.HistoryService=p,this.FontScaleService=f,this.ModalService=d,this.LevelService=v,this.LoadedMetaDataService=m,this.HierarchyLayoutService=g,this.DataService=S,this.open=!0,this._inited=!1,this.backgroundCanvas={background:s.a.colorBlack},this.hierPaths=this.HierarchyLayoutService.findAllNonPartialPaths(),this.selectedCanvasIdx=0}return t.prototype.redrawAll=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u=this;return c(this,(function(h){switch(h.label){case 0:return this.annotation.levels.length>0?((e=this.canvas[0].getContext("2d")).clearRect(0,0,e.canvas.width,e.canvas.height),0==this.path.length&&(t=this.HierarchyLayoutService.findAllNonPartialPaths(),this.ViewStateService.hierarchyState.path=t.possible[0],this.ViewStateService.hierarchyState.curPathIdx=0),[4,new a.HierarchyWorker]):[3,4];case 1:return[4,(n=h.sent()).reduceAnnotationToViewableTimeAndPath(this.annotation,this.path,this.viewPortSampleStart,this.viewPortSampleEnd)];case 2:return r=h.sent(),i=1024/this.path.length,o=0,s=i,[4,JSON.parse(JSON.stringify(this.path)).reverse().forEach((function(e){return l(u,void 0,void 0,(function(){var t;return c(this,(function(a){switch(a.label){case 0:return[4,n.getLevelDetails(e,r)];case 1:return t=a.sent(),this.drawLevelDetails(this.canvas,t,o,s),this.drawLevelMarkup(),o+=i,s+=i,[2]}}))}))}))];case 3:h.sent(),h.label=4;case 4:return[2]}}))}))},t}()]};t.module("emuwebApp").component(u.selector,u)}).call(this,n(19))},function(e,t,n){"use strict";n.r(t),n.d(t,"createEndpoint",(function(){return i})),n.d(t,"expose",(function(){return l})),n.d(t,"proxy",(function(){return v})),n.d(t,"proxyMarker",(function(){return r})),n.d(t,"releaseProxy",(function(){return a})),n.d(t,"transfer",(function(){return d})),n.d(t,"transferHandlers",(function(){return s})),n.d(t,"windowEndpoint",(function(){return m})),n.d(t,"wrap",(function(){return u}));const r=Symbol("Comlink.proxy"),i=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),o=new WeakSet,s=new Map([["proxy",{canHandle:e=>e&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return l(e,t),[n,[n]]},deserialize:e=>(e.start(),u(e))}],["throw",{canHandle:e=>o.has(e),serialize(e){const t=e instanceof Error;let n=e;return t&&(n={isError:t,message:e.message,stack:e.stack}),[n,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error,e);throw e}}]]);function l(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:i,type:a,path:s}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(S);let h;try{const t=s.slice(0,-1).reduce((e,t)=>e[t],e),n=s.reduce((e,t)=>e[t],e);switch(a){case 0:h=n;break;case 1:t[s.slice(-1)[0]]=S(r.data.value),h=!0;break;case 2:h=n.apply(t,u);break;case 3:h=v(new n(...u));break;case 4:{const{port1:t,port2:n}=new MessageChannel;l(e,n),h=d(t,[t])}break;case 5:h=void 0}}catch(e){h=e,o.add(e)}Promise.resolve(h).catch(e=>(o.add(e),e)).then(e=>{const[r,o]=g(e);t.postMessage(Object.assign(Object.assign({},r),{id:i}),o),5===a&&(t.removeEventListener("message",n),c(t))})})),t.start&&t.start()}function c(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function u(e,t){return function e(t,n=[],r=function(){}){let o=!1;const s=new Proxy(r,{get(r,i){if(h(o),i===a)return()=>w(t,{type:5,path:n.map(e=>e.toString())}).then(()=>{c(t),o=!0});if("then"===i){if(0===n.length)return{then:()=>s};const e=w(t,{type:0,path:n.map(e=>e.toString())}).then(S);return e.then.bind(e)}return e(t,[...n,i])},set(e,r,i){h(o);const[a,s]=g(i);return w(t,{type:1,path:[...n,r].map(e=>e.toString()),value:a},s).then(S)},apply(r,a,s){h(o);const l=n[n.length-1];if(l===i)return w(t,{type:4}).then(S);if("bind"===l)return e(t,n.slice(0,-1));const[c,u]=p(s);return w(t,{type:2,path:n.map(e=>e.toString()),argumentList:c},u).then(S)},construct(e,r){h(o);const[i,a]=p(r);return w(t,{type:3,path:n.map(e=>e.toString()),argumentList:i},a).then(S)}});return s}(e,[],t)}function h(e){if(e)throw new Error("Proxy has been released and is not useable")}function p(e){const t=e.map(g);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const f=new WeakMap;function d(e,t){return f.set(e,t),e}function v(e){return Object.assign(e,{[r]:!0})}function m(e,t=self,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function g(e){for(const[t,n]of s)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:3,name:t,value:r},i]}return[{type:0,value:e},f.get(e)||[]]}function S(e){switch(e.type){case 3:return s.get(e.name).deserialize(e.value);case 0:return e.value}}function w(e,t,n){return new Promise(r=>{const i=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}},function(e,t,n){e.exports=function(){return new Worker(n.p+"eb6a1f0114aeae69dac2.worker.js")}},function(e,t,n){(t=n(6)(!1)).push([e.i,"",""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(145),i=n(146),a=n(1),o=n.n(a),s={selector:"level",template:'\n<div class="emuwebapp-level">\n<div class="emuwebapp-level-container">\n    <canvas \n    class="emuwebapp-level-canvas" \n    id="levelCanvas" \n    width="4096" \n    height="256" \n    ng-style="$ctrl.backgroundCanvas"\n    ></canvas>\n\n    <level-canvas-markup-canvas\n    level="$ctrl.level"\n    idx="$ctrl.idx"\n    play-head-current-sample="$ctrl.playHeadCurrentSample"\n    moving-boundary-sample="$ctrl.movingBoundarySample"\n    cur-mouse-x="$ctrl.curMouseX" \n    moving-boundary="$ctrl.movingBoundary"\n    view-port-sample-start="$ctrl.viewPortSampleStart"\n    view-port-sample-end="$ctrl.viewPortSampleEnd"\n    view-port-select-start="$ctrl.viewPortSelectStart"\n    view-port-select-end="$ctrl.viewPortSelectEnd"\n    ></level-canvas-markup-canvas>\n    \x3c!-- track-mouse-in-level="{{idx}}"\n    level-name="$ctrl.level.name"\n    level-type="$ctrl.level.type" --\x3e\n</div>\n</div>\n\n<div \nng-if="$ctrl.levelDef.attributeDefinitions.length > 1" \nclass="emuwebapp-canvasSelectors"\n>\n<div>\n    <ul>\n    <li ng-repeat="attrDef in $ctrl.levelDef.attributeDefinitions">\n        <button \n        ng-click="$ctrl.changeCurAttrDef(attrDef.name, $index);" \n        ng-style="$ctrl.getAttrDefBtnColor(attrDef.name)"\n        ></button>\n    </li>\n    </ul>\n</div>\n</div>  \n    ',bindings:{level:"<",idx:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",viewPortSelectStart:"<",viewPortSelectEnd:"<",curMouseX:"<",curClickLevelName:"<",movingBoundarySample:"<",movingBoundary:"<",movesAwayFromLastSave:"<",curPerspectiveIdx:"<",curBndl:"<"},controller:["$scope","$element","$animate","ViewStateService","SoundHandlerService","ConfigProviderService","DrawHelperService","HistoryService","FontScaleService","ModalService","LevelService","LoadedMetaDataService","HierarchyLayoutService","DataService",function(){function t(e,t,n,r,i,a,s,l,c,u,h,p,f,d){this.$scope=e,this.$element=t,this.$animate=n,this.ViewStateService=r,this.SoundHandlerService=i,this.ConfigProviderService=a,this.DrawHelperService=s,this.HistoryService=l,this.FontScaleService=c,this.ModalService=u,this.LevelService=h,this.LoadedMetaDataService=p,this.HierarchyLayoutService=f,this.DataService=d,this.open=!0,this._inited=!1,this.backgroundCanvas={background:o.a.colorBlack}}return t.prototype.$postLink=function(){var e=this;this.levelDef=this.ConfigProviderService.getLevelDefinition(this.level.name),this.canvases=this.$element.find("canvas"),this.levelCanvasContainer=this.$element.find("div"),this._inited&&(this.drawLevelDetails(),this.drawLevelMarkup()),this.$element.bind("mouseleave",(function(){e.ViewStateService.setcurMouseItem(void 0,void 0,void 0),e.drawLevelMarkup()}))},t.prototype.$onChanges=function(e){e.viewPortSampleStart&&e.viewPortSampleStart.currentValue!==e.viewPortSampleStart.previousValue&&this._inited&&(this.drawLevelDetails(),this.drawLevelMarkup()),e.viewPortSampleEnd&&e.viewPortSampleEnd.currentValue!==e.viewPortSampleEnd.previousValue&&this._inited&&(this.drawLevelDetails(),this.drawLevelMarkup()),e.viewPortSelectStart&&e.viewPortSelectStart.currentValue!==e.viewPortSelectStart.previousValue&&this._inited&&this.drawLevelMarkup(),e.viewPortSelectEnd&&e.viewPortSelectEnd.currentValue!==e.viewPortSelectEnd.previousValue&&this._inited&&this.drawLevelMarkup(),e.curMouseX&&e.curMouseX.currentValue!==e.curMouseX.previousValue&&this._inited&&this.drawLevelMarkup(),e.curClickLevelName&&e.curClickLevelName.currentValue!==e.curClickLevelName.previousValue&&this._inited&&this.drawLevelMarkup(),e.movingBoundarySample&&e.movingBoundarySample.currentValue!==e.movingBoundarySample.previousValue&&this._inited&&(this.drawLevelMarkup(),this.level.name===this.ViewStateService.curMouseLevelName&&this.drawLevelDetails()),e.movingBoundary&&e.movingBoundary.currentValue!==e.movingBoundary.previousValue&&this._inited&&this.drawLevelMarkup(),e.movesAwayFromLastSave&&e.movesAwayFromLastSave.currentValue!==e.movesAwayFromLastSave.previousValue&&this._inited&&(this.drawLevelDetails(),this.drawLevelMarkup()),e.curPerspectiveIdx&&e.curPerspectiveIdx.currentValue!==e.curPerspectiveIdx.previousValue&&this._inited&&(this.drawLevelDetails(),this.drawLevelMarkup()),e.curBndl&&e.curBndl.currentValue!==e.curBndl.previousValue&&this._inited&&(this.drawLevelDetails(),this.drawLevelMarkup())},t.prototype.$onInit=function(){var e=this;this._inited=!0,this.resizeObservable$=Object(r.a)(window,"resize"),this.resizeObservable$.pipe(Object(i.a)(500)).subscribe((function(t){e.drawLevelDetails(),e.drawLevelMarkup()}))},t.prototype.changeCurAttrDef=function(e,t){var n=this;this.ViewStateService.getCurAttrDef(this.level.name)!==e&&(this.ViewStateService.setCurAttrDef(this.level.name,e,t),this.$element.hasClass("emuwebapp-level-animation")||(this.ViewStateService.setEditing(!1),this.LevelService.deleteEditArea(),this.$animate.addClass(this.levelCanvasContainer,"emuwebapp-level-animation").then((function(){n.$animate.removeClass(n.levelCanvasContainer,"emuwebapp-level-animation"),n.drawLevelDetails(),n.drawLevelMarkup()}))))},t.prototype.getAttrDefBtnColor=function(e){return e===this.ViewStateService.getCurAttrDef(this.level.name)?{background:"-webkit-radial-gradient(50% 50%, closest-corner, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0) 60%)","border-color":o.a.colorYellow}:{"background-color":o.a.colorWhite}},t.prototype.drawLevelDetails=function(){var t,n=this,r=o.a.fontSmallFamily;t=void 0===this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontFamily?o.a.fontSmallFamily:this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontFamily;var i,a=Number(localStorage.getItem("levelCanvasesFontScalingFactor"));0===a&&(a=100),a/=100;var s=parseInt(o.a.fontSmallSize.slice(0,-2));i=void 0===this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.fontPxSize?parseInt(o.a.fontSmallSize.slice(0,-2))*a:this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontPxSize*a;var l=this.ViewStateService.getCurAttrDef(this.level.name),c="25px"!==this.$element.parent().css("height");if(!e.isEmptyObject(this.level)&&!e.isEmptyObject(this.ViewStateService)&&!e.isEmptyObject(this.ConfigProviderService)){var u,h,p,f=this.canvases[0].getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height),u=this.ViewStateService.getSampleDist(f.canvas.width);var d=f.canvas.height/f.canvas.offsetHeight;this.level.name===l?this.FontScaleService.drawUndistortedText(f,this.level.name,s,r,4,f.canvas.height/2,o.a.colorBlue,!0):this.FontScaleService.drawUndistortedTextTwoLines(f,this.level.name+":"+l,"("+this.level.type+")",s,r,4,f.canvas.height/2-s*d,o.a.colorWhite,!0);var v=f.measureText("m").width*this.FontScaleService.scaleX,m=f.measureText("0").width*this.FontScaleService.scaleX;if("SEGMENT"===this.level.type)f.fillStyle=o.a.colorWhite,this.level.items.forEach((function(e){if(e.sampleStart>=n.ViewStateService.curViewPort.sS&&e.sampleStart<=n.ViewStateService.curViewPort.eS||e.sampleStart+e.sampleDur>n.ViewStateService.curViewPort.sS&&e.sampleStart+e.sampleDur<n.ViewStateService.curViewPort.eS||e.sampleStart<n.ViewStateService.curViewPort.sS&&e.sampleStart+e.sampleDur>n.ViewStateService.curViewPort.eS){var a;if(e.labels.forEach((function(e){e.name===l&&(a=e.value)})),h=n.ViewStateService.getPos(f.canvas.width,e.sampleStart),p=n.ViewStateService.getPos(f.canvas.width,e.sampleStart+e.sampleDur+1),f.fillStyle=o.a.colorWhite,f.fillRect(h,0,2,f.canvas.height/2),f.fillStyle=o.a.colorGrey,f.fillRect(p,f.canvas.height/2,2,f.canvas.height),f.font=s-2+"px "+t,void 0!==a&&p-h>v*a.length&&(c?n.FontScaleService.drawUndistortedText(f,a,i-2,t,h+(p-h)/2,f.canvas.height/2-(s-2)+2,o.a.colorWhite,!1):n.FontScaleService.drawUndistortedText(f,a,i-2,t,h+(p-h)/2,f.canvas.height/2-s+2,o.a.colorWhite,!1)),n.open&&void 0!==a&&0!==a.length){var u=h+(p-h)/2,g=f.canvas.height/4;f.strokeStyle=o.a.colorWhite,f.lineWidth=4,f.beginPath(),f.moveTo(h,g),f.lineTo(u,g),f.lineTo(u,g+5),f.stroke(),g=f.canvas.height/4*3,f.strokeStyle=o.a.colorGrey,f.beginPath(),f.moveTo(p,g),f.lineTo(u,g),f.lineTo(u,g-5),f.stroke(),f.lineWidth=1}if(n.open){p-h>m*e.sampleStart.toString().length&&c&&n.FontScaleService.drawUndistortedText(f,e.sampleStart,s-2,r,h+3,s*d/2,o.a.colorBlue,!0);var S="dur: "+e.sampleDur+" ";p-h>m*S.length&&c&&n.FontScaleService.drawUndistortedText(f,S,s-2,r,p-f.measureText(S).width*n.FontScaleService.scaleX,f.canvas.height/4*3+s*d/2,o.a.colorBlue,!0)}}}));else if("EVENT"===this.level.type){var g;f.fillStyle=o.a.colorWhite,this.level.items.forEach((function(e){var r;e.samplePoint>n.ViewStateService.curViewPort.sS&&e.samplePoint<n.ViewStateService.curViewPort.eS&&(g=Math.round(n.ViewStateService.getPos(f.canvas.width,e.samplePoint)+u/2),e.labels.forEach((function(e){e.name===l&&(r=e.value)})),f.fillStyle=o.a.colorWhite,f.fillRect(g,0,3,f.canvas.height/2-f.canvas.height/5),f.fillRect(g,f.canvas.height/2+f.canvas.height/5,3,f.canvas.height/2-f.canvas.height/5),n.FontScaleService.drawUndistortedText(f,r,i-2,t,g,f.canvas.height/2-(s-2)+2,o.a.colorWhite,!1),c&&n.FontScaleService.drawUndistortedText(f,e.samplePoint,s-2,t,g+5,s*d/2,o.a.colorBlue,!0))}))}}},t.prototype.drawLevelMarkup=function(){var e,t,n,r,i,a=this,s=this.canvases[1].getContext("2d");s.clearRect(0,0,s.canvas.width,s.canvas.height),this.level.name===this.ViewStateService.getcurClickLevelName()&&(s.fillStyle=o.a.colorTransparentGrey,s.fillRect(0,0,s.canvas.width,s.canvas.height)),this.DrawHelperService.drawMovingBoundaryLine(s),this.DrawHelperService.drawCurViewPortSelected(s),e=this.ViewStateService.getPos(s.canvas.width,this.ViewStateService.curViewPort.selectS),t=this.ViewStateService.getPos(s.canvas.width,this.ViewStateService.curViewPort.selectE),n=this.ViewStateService.getSampleDist(s.canvas.width);var l=this.ViewStateService.getcurMouseItem(),c=this.ViewStateService.getcurMouseisFirst(),u=this.ViewStateService.getcurMouseisLast(),h=this.ViewStateService.getcurClickItems(),p=this.ViewStateService.getcurClickLevelName();void 0!==h&&this.level.name===p&&h.length>0&&h.forEach((function(r){void 0!==r&&(void 0!==r.sampleStart?(e=Math.round(a.ViewStateService.getPos(s.canvas.width,r.sampleStart)),t=Math.round(a.ViewStateService.getPos(s.canvas.width,r.sampleStart+r.sampleDur+1))):(e=Math.round(a.ViewStateService.getPos(s.canvas.width,r.samplePoint)+n/2),t=(e-=5)+10),s.fillStyle=o.a.colorTransparentYellow,s.fillRect(e,0,t-e,s.canvas.height),s.fillStyle=o.a.colorWhite)})),i=this.ViewStateService.getcurMouseItem(),this.level.items.length>0&&void 0!==i&&void 0!==l&&this.level.name===this.ViewStateService.getcurMouseLevelName()&&(s.fillStyle=o.a.colorBlue,!0===c?"SEGMENT"===this.ViewStateService.getcurMouseLevelType()&&(i=this.level.items[0],e=Math.round(this.ViewStateService.getPos(s.canvas.width,i.sampleStart)),s.fillRect(e,0,3,s.canvas.height)):!0===u?"SEGMENT"===this.ViewStateService.getcurMouseLevelType()&&(i=this.level.items[this.level.items.length-1],e=Math.round(this.ViewStateService.getPos(s.canvas.width,i.sampleStart+i.sampleDur+1)),s.fillRect(e,0,3,s.canvas.height)):"SEGMENT"===this.ViewStateService.getcurMouseLevelType()?(e=Math.round(this.ViewStateService.getPos(s.canvas.width,i.sampleStart)),s.fillRect(e,0,3,s.canvas.height)):(e=Math.round(this.ViewStateService.getPos(s.canvas.width,i.samplePoint)),r=n/2,s.fillRect(e+r,0,3,s.canvas.height)),s.fillStyle=o.a.colorWhite),this.DrawHelperService.drawCrossHairX(s,this.ViewStateService.curMouseX)},t}()]};t.module("emuwebApp").component(s.selector,s)}).call(this,n(19))},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(100),i=n(1),a=n.n(i),o={selector:"spectro",template:'\n    <div class="emuwebapp-timeline">\n    \x3c!-- width is now up to 4k --\x3e\n    <div class="emuwebapp-timelineCanvasContainer">\n        <canvas \n        class="emuwebapp-timelineCanvasMain" \n        width="4096"></canvas>\n        \n       \x3c!-- \n       <canvas \n        class="emuwebapp-timelineCanvasSSFF" \n        width="4096" \n        drawssff \n        ssff-trackname="{{$ctrl.trackName}}"></canvas>\n        --\x3e\n        \n        <ssff-canvas\n        track-name="$ctrl.trackName"\n        all-ssff-data="$ctrl.SsffDataService.data"\n        view-port-sample-start="$ctrl.viewPortSampleStart"\n        view-port-sample-end="$ctrl.viewPortSampleEnd"\n        cur-bndl="$ctrl.curBundl"\n        cur-mouse-x="$ctrl.curMouseX"\n        cur-mouse-y="$ctrl.curMouseY"\n        moves-away-from-last-save="$ctrl.HistoryService.movesAwayFromLastSave"\n        ></ssff-canvas>\n\n        <signal-canvas-markup-canvas\n        track-name="$ctrl.trackName"\n        play-head-current-sample="$ctrl.playHeadCurrentSample"\n        moving-boundary-sample="$ctrl.movingBoundarySample"\n        cur-mouse-x="$ctrl.curMouseX"\n        cur-mouse-y="$ctrl.curMouseY"\n        moving-boundary="$ctrl.movingBoundary"\n        view-port-sample-start="$ctrl.viewPortSampleStart"\n        view-port-sample-end="$ctrl.viewPortSampleEnd"\n        view-port-select-start="$ctrl.viewPortSelectStart"\n        view-port-select-end="$ctrl.viewPortSelectEnd"\n        cur-bndl="$ctrl.curBundl"\n        ></signal-canvas-markup-canvas>\n    </div>\n    </div>',bindings:{trackName:"<",windowSizeInSecs:"<",rangeFrom:"<",rangeTo:"<",dynamicRange:"<",window:"<",drawHeatMapColors:"<",preEmphasisFilterFactor:"<",heatMapColorAnchors:"<",invert:"<",osciSettings:"<",lastUpdate:"<",movingBoundarySample:"<",curMouseX:"<",curMouseY:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",viewPortSelectStart:"<",viewPortSelectEnd:"<",curBndl:"<"},controller:["$element","$timeout","ViewStateService","ConfigProviderService","SsffDataService","DrawHelperService","FontScaleService","SoundHandlerService","MathHelperService","HistoryService",function(){function t(e,t,n,i,a,o,s,l,c,u){this.$element=e,this.$timeout=t,this.ViewStateService=n,this.ConfigProviderService=i,this.SsffDataService=a,this.DrawHelperService=o,this.FontScaleService=s,this.SoundHandlerService=l,this.MathHelperService=c,this.HistoryService=u,this._inited=!1,this.primeWorker=new r.a,this.alpha=.16,this.devicePixelRatio=window.devicePixelRatio||1}return t.prototype.$postLink=function(){this.canvas0=this.$element.find("canvas")[0],this.context=this.canvas0.getContext("2d")},t.prototype.$onChanges=function(t){this._inited&&(t.viewPortSampleStart||t.viewPortSampleEnd||t.curBndl||t.osciSettings||t.windowSizeInSecs||t.rangeFrom||t.rangeTo||t.dynamicRange||t.window||t.drawHeatMapColors||t.preEmphasisFilterFactor||t.heatMapColorAnchors||t.invert)&&(e.isEmptyObject(this.SoundHandlerService)||e.isEmptyObject(this.SoundHandlerService.audioBuffer)||(t.spectroSettings&&this.setupEvent(),this.redraw()))},t.prototype.$onInit=function(){this._inited=!0},t.prototype.redraw=function(){this.drawSpectro(this.SoundHandlerService.audioBuffer.getChannelData(this.ViewStateService.osciSettings.curChannel))},t.prototype.drawSpectro=function(e){this.killSpectroRenderingThread(),this.startSpectroRenderingThread(e)},t.prototype.calcSamplesPerPxl=function(){return(this.ViewStateService.curViewPort.eS+1-this.ViewStateService.curViewPort.sS)/this.canvas0.width},t.prototype.killSpectroRenderingThread=function(){this.context.fillStyle=a.a.colorBlack,this.context.fillRect(0,0,this.canvas0.width,this.canvas0.height),this.FontScaleService.drawUndistortedText(this.context,"rendering...",.75*parseInt(a.a.fontSmallSize.slice(0,-2)),a.a.fontSmallFamily,10,50,a.a.colorBlack,!0),null!==this.primeWorker&&(this.primeWorker.kill(),this.primeWorker=null)},t.prototype.setupEvent=function(){var e=this,t=this.context.createImageData(this.canvas0.width,this.canvas0.height);this.primeWorker.says((function(n){if(void 0===n.status){if(e.calcSamplesPerPxl()===n.samplesPerPxl){var r=new Uint8ClampedArray(n.img);t.data.set(r),e.context.putImageData(t,0,0)}}else console.error("Error rendering spectrogram:",n.status.message)}))},t.prototype.startSpectroRenderingThread=function(e){if(e.length>0){this.primeWorker=new r.a;var t=[],n=this.MathHelperService.calcClosestPowerOf2Gt(this.SoundHandlerService.audioBuffer.sampleRate*this.ViewStateService.spectroSettings.windowSizeInSecs);n<512&&(n=512),t=e.subarray(this.ViewStateService.curViewPort.sS,this.ViewStateService.curViewPort.eS);var i=[],a=[],o=this.SoundHandlerService.audioBuffer.sampleRate*this.ViewStateService.spectroSettings.windowSizeInSecs;this.ViewStateService.curViewPort.sS<o/2||(i=e.subarray(this.ViewStateService.curViewPort.sS-o/2,this.ViewStateService.curViewPort.sS)),this.ViewStateService.curViewPort.eS+n/2-1>=this.SoundHandlerService.audioBuffer.length||(a=e.subarray(this.ViewStateService.curViewPort.eS,this.ViewStateService.curViewPort.eS+n/2-1));var s=new Float32Array(i.length+t.length+a.length);s.set(i),s.set(t,i.length),s.set(a,i.length+t.length),t=this.ViewStateService.curViewPort.sS>=n/2?e.subarray(this.ViewStateService.curViewPort.sS-n/2,this.ViewStateService.curViewPort.eS+n):e.subarray(this.ViewStateService.curViewPort.sS,this.ViewStateService.curViewPort.eS+n),this.setupEvent(),this.primeWorker.tell({windowSizeInSecs:this.ViewStateService.spectroSettings.windowSizeInSecs,fftN:n,alpha:this.alpha,upperFreq:this.ViewStateService.spectroSettings.rangeTo,lowerFreq:this.ViewStateService.spectroSettings.rangeFrom,samplesPerPxl:this.calcSamplesPerPxl(),window:this.ViewStateService.spectroSettings.window,imgWidth:this.canvas0.width,imgHeight:this.canvas0.height,dynRangeInDB:this.ViewStateService.spectroSettings.dynamicRange,pixelRatio:this.devicePixelRatio,sampleRate:this.SoundHandlerService.audioBuffer.sampleRate,transparency:this.ConfigProviderService.vals.spectrogramSettings.transparency,audioBuffer:s,audioBufferChannels:this.SoundHandlerService.audioBuffer.numberOfChannels,drawHeatMapColors:this.ViewStateService.spectroSettings.drawHeatMapColors,preEmphasisFilterFactor:this.ViewStateService.spectroSettings.preEmphasisFilterFactor,heatMapColorAnchors:this.ViewStateService.spectroSettings.heatMapColorAnchors,invert:this.ViewStateService.spectroSettings.invert},[s.buffer])}},t}()]};t.module("emuwebApp").component(o.selector,o)}).call(this,n(19))},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(1),i=n.n(r),a={selector:"ssffCanvas",template:'\n    <canvas \n    class="emuwebapp-timelineCanvasSSFF" \n    width="4096"\n    ></canvas>\n    ',bindings:{trackName:"<",allSsffData:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",curBndl:"<",curMouseX:"<",curMouseY:"<",movesAwayFromLastSave:"<"},controller:["$scope","$element","ViewStateService","ConfigProviderService","SsffDataService","FontScaleService","LoadedMetaDataService",function(){function n(e,t,n,r,i,a,o){this.assignmentTrackName="",this._inited=!1,this.$scope=e,this.$element=t,this.ViewStateService=n,this.ConfigProviderService=r,this.SsffDataService=i,this.FontScaleService=a,this.LoadedMetaDataService=o}return n.prototype.$postLink=function(){this.canvas=this.$element.find("canvas")[0],this.ctx=this.canvas.getContext("2d")},n.prototype.$onChanges=function(e){this._inited&&((e.viewPortSampleStart||e.viewPortSampleEnd||e.curBndl||e.allSsffData||e.movesAwayFromLastSave)&&this.handleUpdate(),(e.curMouseX||e.curMouseY)&&this.handleUpdate())},n.prototype.$onInit=function(){this._inited=!0},n.prototype.handleUpdate=function(){var t=this;if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),e.isEmptyObject(this.allSsffData))this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);else if(0!==this.allSsffData.length&&(this.assignmentTrackName="",this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.assign.forEach((function(e){if(e.signalCanvasName===t.trackName){t.assignmentTrackName=e.ssffTrackName;var n=t.ConfigProviderService.getSsffTrackConfig(e.ssffTrackName),r=t.SsffDataService.getColumnOfTrack(n.name,n.columnName),i=t.SsffDataService.getSampleRateAndStartTimeOfTrack(n.name),a=t.ConfigProviderService.getContourLimsOfTrack(n.name),o=t.ConfigProviderService.getValueLimsOfTrack(n.name);t.drawValues(t.ViewStateService,t.ConfigProviderService,r,i.sampleRate,i.startTime,a,o)}})),this.assignmentTrackName="","OSCI"!==this.trackName&&"SPEC"!==this.trackName)){var n=this.ConfigProviderService.getSsffTrackConfig(this.trackName),r=this.SsffDataService.getColumnOfTrack(n.name,n.columnName),i=this.SsffDataService.getSampleRateAndStartTimeOfTrack(n.name),a=this.ConfigProviderService.getContourLimsOfTrack(n.name),o=this.ConfigProviderService.getValueLimsOfTrack(n.name);this.drawValues(this.ViewStateService,this.ConfigProviderService,r,i.sampleRate,i.startTime,a,o)}},n.prototype.drawValues=function(n,r,a,o,s,l,c){var u,h,p=this;"SPEC"===this.trackName&&"FORMANTS"===this.assignmentTrackName?(u=n.spectroSettings.rangeFrom,h=n.spectroSettings.rangeTo):(u=a._minVal,h=a._maxVal),t.equals(c,{})||(u=c.minVal,h=c.maxVal);var f,d,v=n.getViewPortStartTime(),m=n.getViewPortEndTime(),g=Math.max(0,Math.ceil((v-s)*o)),S=Math.min(Math.floor((m-s)*o),a.values.length-1),w=S-g+1,y=a.values.slice(g,g+w),b=this.ConfigProviderService.getHorizontalLinesOfTrack(this.trackName);(b&&b.yValues.forEach((function(e){p.ctx.beginPath(),p.ctx.lineWidth="2",p.ctx.strokeStyle="blue",p.ctx.globalAlpha=.75;var t=p.canvas.height-(e-u)/(h-u)*p.canvas.height;p.ctx.moveTo(0,t),p.ctx.lineTo(p.canvas.width,t),p.ctx.stroke(),p.ctx.lineWidth="1",p.ctx.globalAlpha=1})),w<this.canvas.width&&w>=2)?y[0].forEach((function(t,r){if(e.isEmptyObject(l)||r>=l.minContourIdx&&r<=l.maxContourIdx){if(e.isEmptyObject(l))p.ctx.strokeStyle="hsl("+r*(360/y[0].length)+",80%, 50%)",p.ctx.fillStyle="hsl("+r*(360/y[0].length)+",80%, 50%)";else{var c=l.maxContourIdx-l.minContourIdx+1;p.ctx.strokeStyle="hsl("+r*(360/c)+",80%, 50%)",p.ctx.fillStyle="hsl("+r*(360/c)+",80%, 50%)"}if(""!==p.assignmentTrackName)var w=p.ConfigProviderService.getContourColorsOfTrack(p.assignmentTrackName);else w=p.ConfigProviderService.getContourColorsOfTrack(p.trackName);if(void 0!==w&&void 0!==w.colors[r]&&(p.ctx.strokeStyle=w.colors[r],p.ctx.fillStyle=w.colors[r]),n.curCorrectionToolNr-1===r&&"SPEC"===p.trackName&&"FORMANTS"===p.assignmentTrackName&&(p.ctx.strokeStyle=i.a.colorGreen,p.ctx.fillStyle=i.a.colorGreen),p.ctx.beginPath(),g>=1){var b=a.values[g-1][r];f=(1/o*(g-1)+s-v)/(m-v)*p.canvas.width,d=p.canvas.height-(b-u)/(h-u)*p.canvas.height,p.ctx.moveTo(f,d)}if(y.forEach((function(e,t){f=(1/o*(g+t)+s-v)/(m-v)*p.canvas.width,d=p.canvas.height-(e[r]-u)/(h-u)*p.canvas.height,p.ctx.arc(f,d-1,2,0,2*Math.PI,!1),p.ctx.lineTo(f,d)})),S<a.values.length-1){var x=a.values[S+1][r];f=(1/o*(S+1)+s-v)/(m-v)*p.canvas.width,d=p.canvas.height-(x-u)/(h-u)*p.canvas.height,p.ctx.lineTo(f,d)}p.ctx.stroke()}})):(this.ctx.strokeStyle="red",w<=2?this.FontScaleService.drawUndistortedTextTwoLines(this.ctx,"Zoom out to","see contour(s)",parseInt(i.a.fontSmallSize.slice(0,-2))/1.05,i.a.fontSmallFamily,this.canvas.width/2-this.ctx.measureText("see contour(s)").width*this.ctx.canvas.width/this.ctx.canvas.offsetWidth/2,25,i.a.colorTransparentRed):this.FontScaleService.drawUndistortedTextTwoLines(this.ctx,"Zoom in to","see contour(s)",parseInt(i.a.fontSmallSize.slice(0,-2))/1.05,i.a.fontSmallFamily,this.canvas.width/2-this.ctx.measureText("see contour(s)").width*this.ctx.canvas.width/this.ctx.canvas.offsetWidth/2,25,i.a.colorTransparentRed))},n}()]};t.module("emuwebApp").component(a.selector,a)}).call(this,n(19))},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(1),i=n.n(r),a={selector:"osciOverview",template:'\n    <div class="emuwebapp-preview">\n    <canvas \n    width="4096" \n    height="128" \n    class="emuwebapp-preview-canvas" \n    ng-style="$ctrl.backgroundCanvas" \n    id="PreviewCanvas"></canvas>\n    <canvas \n    width="4096" \n    height="128" \n    class="emuwebapp-preview-canvas-markup" \n    id="PreviewCanvas" \n    previewtrack></canvas>\n    </div>\n    ',bindings:{curChannel:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",curBndl:"<"},controller:["$scope","$element","ViewStateService","SoundHandlerService","DrawHelperService","ConfigProviderService",function(){function t(e,t,n,r,i,a){this.$scope=e,this.$element=t,this.ViewStateService=n,this.SoundHandlerService=r,this.DrawHelperService=i,this.ConfigProviderService=a,this.backgroundCanvas={background:"#000",border:"1px solid gray",width:"100%",height:"100%"},this.startSample=-1,this.envelopeHasBeenDrawn=!1,this._inited=!1}return t.prototype.$postLink=function(){var t=this;this.canvas=this.$element.find("canvas")[0],this.markupCanvas=this.$element.find("canvas")[1],this.$element.bind("click",(function(n){if(!e.isEmptyObject(t.SoundHandlerService.audioBuffer)){var r=t.ViewStateService.curViewPort.eS-t.ViewStateService.curViewPort.sS;t.startSample=t.ViewStateService.getX(n)*(t.SoundHandlerService.audioBuffer.length/n.originalEvent.target.width),t.startSample-r/2<0?t.startSample=Math.ceil(r/2):t.startSample+r/2>t.SoundHandlerService.audioBuffer.length&&(t.startSample=Math.floor(t.SoundHandlerService.audioBuffer.length-r/2)),t.ViewStateService.isEditing()||t.$scope.$apply((function(){t.ViewStateService.setViewPort(t.startSample-r/2,t.startSample+r/2)}))}})),this.$element.bind("mousedown",(function(n){e.isEmptyObject(t.SoundHandlerService.audioBuffer)||(t.startSample=t.ViewStateService.getX(n)*(t.SoundHandlerService.audioBuffer.length/n.originalEvent.target.width))})),this.$element.bind("mousemove",(function(e){switch(void 0===e.buttons?e.which:e.buttons){case 1:if(-1!==t.startSample){var n=t.ViewStateService.curViewPort.eS-t.ViewStateService.curViewPort.sS;t.startSample=t.ViewStateService.getX(e)*(t.SoundHandlerService.audioBuffer.length/e.originalEvent.target.width),t.ViewStateService.isEditing()||t.$scope.$apply((function(){t.ViewStateService.setViewPort(t.startSample-n/2,t.startSample+n/2)}))}}})),this.$element.bind("mouseup",(function(){t.startSample=-1})),this.$element.bind("mouseout",(function(){t.startSample=-1}))},t.prototype.$onChanges=function(e){if(this._inited&&((e.curChannel||e.viewPortSampleStart||e.viewPortSampleEnd)&&this.drawPreview(),e.curBndl&&(this.envelopeHasBeenDrawn=!1,this.backgroundCanvas={background:i.a.colorBlack,border:"1px solid gray",width:"100%",height:"100%"},this.drawPreview(),0===Object.keys(this.curBndl).length&&this.curBndl.constructor===Object))){var t=this.canvas.getContext("2d"),n=this.markupCanvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),n.clearRect(0,0,this.canvas.width,this.canvas.height)}},t.prototype.$onInit=function(){this._inited=!0},t.prototype.drawPreview=function(){e.isEmptyObject(this.SoundHandlerService.audioBuffer)||(this.envelopeHasBeenDrawn||(this.envelopeHasBeenDrawn=!0,this.DrawHelperService.freshRedrawDrawOsciOnCanvas(this.canvas,0,this.SoundHandlerService.audioBuffer.length,!0)),this.drawVpOsciMarkup())},t.prototype.drawVpOsciMarkup=function(){var e=this.markupCanvas.getContext("2d"),t=this.markupCanvas.width/this.SoundHandlerService.audioBuffer.length*this.ViewStateService.curViewPort.sS,n=this.markupCanvas.width/this.SoundHandlerService.audioBuffer.length*this.ViewStateService.curViewPort.eS;e.clearRect(0,0,this.markupCanvas.width,this.markupCanvas.height),e.fillStyle=i.a.colorTransparentLightGrey,e.fillRect(t,0,n-t,this.markupCanvas.height),e.strokeStyle=i.a.colorWhite,e.beginPath(),e.moveTo(t,0),e.lineTo(t,this.markupCanvas.height),e.moveTo(n,0),e.lineTo(n,this.markupCanvas.height),e.closePath(),e.stroke()},t}()]};t.module("emuwebApp").component(a.selector,a)}).call(this,n(19))},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(1),i=n.n(r),a={selector:"signalCanvasMarkupCanvas",template:'\n    <canvas class="emuwebapp-timelineCanvasMarkup" \n    width="4096" \n    ></canvas>\n    ',bindings:{trackName:"<",playHeadCurrentSample:"<",movingBoundarySample:"<",curMouseX:"<",curMouseY:"<",movingBoundary:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",viewPortSelectStart:"<",viewPortSelectEnd:"<",curBndl:"<"},controller:["$scope","$element","ViewStateService","ConfigProviderService","SsffDataService","DrawHelperService","HistoryService","SoundHandlerService",function(){function n(e,t,n,r,i,a,o,s){this._inited=!1,this.$element=t,this.$scope=e,this.ViewStateService=n,this.ConfigProviderService=r,this.SsffDataService=i,this.DrawHelperService=a,this.HistoryService=o,this.SoundHandlerService=s,this.drawCrossHairs=!1}return n.prototype.$postLink=function(){var n=this;this.canvas=this.$element.find("canvas")[0],this.ctx=this.canvas.getContext("2d"),this.$element.bind("mousedown",(function(e){e.shiftKey||(n.ViewStateService.curViewPort.movingS=Math.round(n.ViewStateService.getX(e)*n.ViewStateService.getSamplesPerPixelVal(e)+n.ViewStateService.curViewPort.sS),n.ViewStateService.curViewPort.movingE=n.ViewStateService.curViewPort.movingS,n.ViewStateService.select(n.ViewStateService.curViewPort.movingS,n.ViewStateService.curViewPort.movingE),n.drawMarkup(),n.$scope.$apply())})),this.$element.bind("mouseup",(function(e){if(e.shiftKey){var t=Math.round(n.ViewStateService.getX(e)*n.ViewStateService.getSamplesPerPixelVal(e)+n.ViewStateService.curViewPort.sS),r=n.ViewStateService.curViewPort.selectE-n.ViewStateService.curViewPort.selectS;t<=n.ViewStateService.curViewPort.selectS+r/2&&(n.ViewStateService.curViewPort.selectS=t),t>=n.ViewStateService.curViewPort.selectE-r/2&&(n.ViewStateService.curViewPort.selectE=t),n.drawMarkup(),n.$scope.$apply()}})),this.$element.bind("mousemove",(function(r){var i=0;n.drawCrossHairs=!0,i=void 0===r.buttons?r.which:r.buttons;var a=n.ViewStateService.getX(r);switch(n.ViewStateService.curMouseX=a,n.curMouseY=n.ViewStateService.getY(r),n.ViewStateService.curMouseY=n.curMouseY,n.ViewStateService.curMouseTrackName=n.trackName,n.ViewStateService.curMousePosSample=Math.round(n.ViewStateService.curViewPort.sS+a/n.canvas.width*(n.ViewStateService.curViewPort.eS-n.ViewStateService.curViewPort.sS)),i){case 0:if(n.ViewStateService.getPermission("labelAction")&&!(e.isEmptyObject(n.SsffDataService.data)||0===n.SsffDataService.data.length||n.ViewStateService.getdragBarActive()||void 0===n.ViewStateService.curCorrectionToolNr||n.ViewStateService.getdragBarActive()||e.isEmptyObject(n.ConfigProviderService.getAssignment(n.trackName)))){void 0===n.formantCorrectionTrack&&(n.formantCorrectionTrack=n.ConfigProviderService.getSsffTrackConfig("FORMANTS"));var o=n.SsffDataService.getColumnOfTrack(n.formantCorrectionTrack.name,n.formantCorrectionTrack.columnName),s=n.SsffDataService.getSampleRateAndStartTimeOfTrack(n.formantCorrectionTrack.name),l=n.ViewStateService.getViewPortStartTime(),c=n.ViewStateService.getViewPortEndTime(),u=Math.max(0,Math.ceil((l-s.startTime)*s.sampleRate)),h=Math.min(Math.floor((c-s.startTime)*s.sampleRate),o.values.length-1)-u+1,p=o.values.slice(u,u+h),f=l+n.ViewStateService.getX(r)/r.originalEvent.target.width*(c-l),d=Math.round((f-s.startTime)*s.sampleRate);s.sampleRate,s.startTime;if(d-u<0||d-u>=p.length)return;if(n.ViewStateService.curPreselColumnSample=d-u,r.shiftKey){var v=t.copy(p[n.ViewStateService.curPreselColumnSample][n.ViewStateService.curCorrectionToolNr-1]),m=n.ViewStateService.spectroSettings.rangeTo-n.ViewStateService.getY(r)/r.originalEvent.target.height*n.ViewStateService.spectroSettings.rangeTo;p[n.ViewStateService.curPreselColumnSample][n.ViewStateService.curCorrectionToolNr-1]=n.ViewStateService.spectroSettings.rangeTo-n.ViewStateService.getY(r)/r.originalEvent.target.height*n.ViewStateService.spectroSettings.rangeTo,n.HistoryService.updateCurChangeObj({type:"SSFF",trackName:n.formantCorrectionTrack.name,sampleBlockIdx:u+n.ViewStateService.curPreselColumnSample,sampleIdx:n.ViewStateService.curCorrectionToolNr-1,oldValue:v,newValue:m})}}break;case 1:n.ViewStateService.getdragBarActive()||n.setSelectDrag(r)}n.$scope.$apply()})),this.$element.bind("mouseleave",(function(t){n.drawCrossHairs=!1,e.isEmptyObject(n.SoundHandlerService)||e.isEmptyObject(n.SoundHandlerService.audioBuffer)||n.ViewStateService.getdragBarActive()||n.ViewStateService.getPermission("labelAction")&&(n.drawMarkup(),n.ViewStateService.curMouseTrackName=void 0)}))},n.prototype.$onChanges=function(t){this._inited&&(t.curBndl&&(e.isEmptyObject(this.SsffDataService.data)||0!==this.SsffDataService.data.length&&(this.formantCorrectionTrack=this.ConfigProviderService.getSsffTrackConfig("FORMANTS"))),t.playHeadCurrentSample&&(e.isEmptyObject(this.SoundHandlerService.audioBuffer)||this.drawPlayHead()),(t.movingBoundarySample||t.curMouseX||t.curMouseY||t.viewPortSampleStart||t.viewPortSampleEnd||t.viewPortSelectStart||t.viewPortSelectEnd)&&(e.isEmptyObject(this.SoundHandlerService.audioBuffer)||this.drawMarkup()))},n.prototype.$onInit=function(){this._inited=!0},n.prototype.drawMarkup=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var e=0,n=0,r="";if("OSCI"===this.trackName)this.DrawHelperService.drawViewPortTimes(this.ctx,!0),this.DrawHelperService.drawCurViewPortSelected(this.ctx,!0);else if("SPEC"===this.trackName)e=this.ViewStateService.spectroSettings.rangeFrom,n=this.ViewStateService.spectroSettings.rangeTo,r="Hz",this.DrawHelperService.drawCurViewPortSelected(this.ctx,!1),this.DrawHelperService.drawMinMaxAndName(this.ctx,"",e,n,2);else{var i=this.ConfigProviderService.getSsffTrackConfig(this.trackName),a=this.ConfigProviderService.getValueLimsOfTrack(this.trackName);if(t.equals(a,{})){var o=this.SsffDataService.getColumnOfTrack(i.name,i.columnName);void 0!==o&&(e=o._minVal,n=o._maxVal)}else e=a.minVal,n=a.maxVal,void 0!==a.unit&&(r=a.unit);this.DrawHelperService.drawCurViewPortSelected(this.ctx,!1),n>0&&this.DrawHelperService.drawMinMaxAndName(this.ctx,this.trackName,e,n,2)}if(this.drawCrossHairs?this.DrawHelperService.drawCrossHairs(this.ctx,this.curMouseX,this.curMouseY,e,n,r,this.trackName):this.DrawHelperService.drawCrossHairX(this.ctx,this.curMouseX),this.formantCorrectionTrack){var s=this.HistoryService.curChangeObj,l=this.SsffDataService.getSampleRateAndStartTimeOfTrack(this.formantCorrectionTrack.name);for(var c in s){var u=(1/l.sampleRate*s[c].sampleBlockIdx+l.startTime-this.ViewStateService.getViewPortStartTime())/(this.ViewStateService.getViewPortEndTime()-this.ViewStateService.getViewPortStartTime())*this.canvas.width,h=this.canvas.height-s[c].newValue/(this.ViewStateService.spectroSettings.rangeTo-this.ViewStateService.spectroSettings.rangeFrom)*this.canvas.height,p=this.canvas.height-s[c].oldValue/(this.ViewStateService.spectroSettings.rangeTo-this.ViewStateService.spectroSettings.rangeFrom)*this.canvas.height;this.ctx.strokeStyle="black",this.ctx.fillStyle="black",this.ctx.beginPath(),this.ctx.arc(u,h-1,2,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill(),this.ctx.strokeStyle="red",this.ctx.fillStyle="red",this.ctx.beginPath(),this.ctx.arc(u,p-1,2,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill()}}this.DrawHelperService.drawMovingBoundaryLine(this.ctx)},n.prototype.setSelectDrag=function(e){var t=Math.round(this.ViewStateService.getX(e)*this.ViewStateService.getSamplesPerPixelVal(e)+this.ViewStateService.curViewPort.sS);t>this.ViewStateService.curViewPort.movingS?this.ViewStateService.curViewPort.movingE=t:this.ViewStateService.curViewPort.movingS=t,this.ViewStateService.select(this.ViewStateService.curViewPort.movingS,this.ViewStateService.curViewPort.movingE),this.$scope.$apply()},n.prototype.drawPlayHead=function(){this.drawMarkup();var e=this.ViewStateService.getPos(this.canvas.width,this.ViewStateService.playHeadAnimationInfos.sS),t=this.ViewStateService.getPos(this.canvas.width,this.ViewStateService.playHeadAnimationInfos.curS);this.ctx.fillStyle=i.a.colorTransparentLightGrey,this.ctx.fillRect(e,0,t-e,this.canvas.height)},n}()]};t.module("emuwebApp").component(a.selector,a)}).call(this,n(19))},function(e,t,n){n(107),n(62),e.exports=n(10).Symbol},function(e,t,n){e.exports=n(47)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(9),i=n(10),a=n(58),o=n(110),s=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(41),i=n(60),a=n(61);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),l=a.f,c=0;s.length>c;)l.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,n){n(107),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(62),e.exports=n(10).Object},function(e,t,n){var r=n(2);r(r.S,"Object",{create:n(42)})},function(e,t,n){var r=n(2);r(r.S+r.F*!n(12),"Object",{defineProperty:n(11).f})},function(e,t,n){var r=n(2);r(r.S+r.F*!n(12),"Object",{defineProperties:n(113)})},function(e,t,n){var r=n(22),i=n(32).f;n(23)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(16),i=n(26);n(23)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(16),i=n(41);n(23)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(23)("getOwnPropertyNames",(function(){return n(115).f}))},function(e,t,n){var r=n(7),i=n(30).onFreeze;n(23)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(7),i=n(30).onFreeze;n(23)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(7),i=n(30).onFreeze;n(23)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(7);n(23)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(7);n(23)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(7);n(23)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(2);r(r.S+r.F,"Object",{assign:n(116)})},function(e,t,n){var r=n(2);r(r.S,"Object",{is:n(117)})},function(e,t,n){var r=n(2);r(r.S,"Object",{setPrototypeOf:n(83).set})},function(e,t,n){n(238),n(240),n(241),e.exports=n(10).Function},function(e,t,n){var r=n(2);r(r.P,"Function",{bind:n(118)})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(11).f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||n(12)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(7),i=n(26),a=n(8)("hasInstance"),o=Function.prototype;a in o||n(11).f(o,a,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){n(243),e.exports=n(10).parseInt},function(e,t,n){var r=n(2),i=n(119);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){n(245),e.exports=n(10).parseFloat},function(e,t,n){var r=n(2),i=n(120);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),e.exports=n(10).Number},function(e,t,n){"use strict";var r=n(9),i=n(20),a=n(35),o=n(85),s=n(34),l=n(4),c=n(50).f,u=n(32).f,h=n(11).f,p=n(63).trim,f=r.Number,d=f,v=f.prototype,m="Number"==a(n(42)(v)),g="trim"in String.prototype,S=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,a=(t=g?t.trim():p(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var o,l=t.slice(2),c=0,u=l.length;c<u;c++)if((o=l.charCodeAt(c))<48||o>i)return NaN;return parseInt(l,r)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof f&&(m?l((function(){v.valueOf.call(n)})):"Number"!=a(n))?o(new d(S(t)),n,f):S(t)};for(var w,y=n(12)?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;y.length>b;b++)i(d,w=y[b])&&!i(f,w)&&h(f,w,u(d,w));f.prototype=v,v.constructor=f,n(15)(r,"Number",f)}},function(e,t,n){"use strict";var r=n(2),i=n(36),a=n(121),o=n(122),s=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=l(r/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=l(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+o.call("0",7-n.length)+n}return t},d=function(e,t,n){return 0===t?n:t%2==1?d(e,t-1,n*e):d(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,l=a(this,u),c=i(e),v="",m="0";if(c<0||c>20)throw RangeError(u);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(v="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*d(2,69,1))-69)<0?l*d(2,-t,1):l/d(2,t,1),n*=4503599627370496,(t=52-t)>0){for(h(0,n),r=c;r>=7;)h(1e7,0),r-=7;for(h(d(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),h(1,1),p(2),m=f()}else h(0,n),h(1<<-t,0),m=f()+o.call("0",c);return m=c>0?v+((s=m.length)<=c?"0."+o.call("0",c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c)):v+m}})},function(e,t,n){"use strict";var r=n(2),i=n(4),a=n(121),o=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==o.call(1,void 0)}))||!i((function(){o.call({})}))),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},function(e,t,n){var r=n(2);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(2),i=n(9).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(2);r(r.S,"Number",{isInteger:n(123)})},function(e,t,n){var r=n(2);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(2),i=n(123),a=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},function(e,t,n){var r=n(2);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(2);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(2),i=n(120);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(2),i=n(119);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),e.exports=n(10).Math},function(e,t,n){var r=n(2),i=n(124),a=Math.sqrt,o=Math.acosh;r(r.S+r.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},function(e,t,n){var r=n(2),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(2),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(2),i=n(86);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(2);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(2),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(2),i=n(87);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(2);r(r.S,"Math",{fround:n(268)})},function(e,t,n){var r=n(86),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),l=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=r(e);return i<l?c*(i/l/o+1/a-1/a)*l*o:(n=(t=(1+o/a)*i)-(t-i))>s||n!=n?c*(1/0):c*n}},function(e,t,n){var r=n(2),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,a=0,o=0,s=arguments.length,l=0;o<s;)l<(n=i(arguments[o++]))?(a=a*(r=l/n)*r+1,l=n):a+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*Math.sqrt(a)}})},function(e,t,n){var r=n(2),i=Math.imul;r(r.S+r.F*n(4)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,a=65535&r;return 0|i*a+((65535&n>>>16)*a+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(2);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(2);r(r.S,"Math",{log1p:n(124)})},function(e,t,n){var r=n(2);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(2);r(r.S,"Math",{sign:n(86)})},function(e,t,n){var r=n(2),i=n(87),a=Math.exp;r(r.S+r.F*n(4)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(2),i=n(87),a=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},function(e,t,n){var r=n(2);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){n(279),n(280),n(281),n(64),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(126),n(128),n(129),n(130),e.exports=n(10).String},function(e,t,n){var r=n(2),i=n(49),a=String.fromCharCode,o=String.fromCodePoint;r(r.S+r.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(2),i=n(22),a=n(13);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=a(t.length),r=arguments.length,o=[],s=0;n>s;)o.push(String(t[s++])),s<r&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,n){"use strict";n(63)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(2),i=n(88)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(2),i=n(13),a=n(90),o="".endsWith;r(r.P+r.F*n(92)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),l=String(e);return o?o.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){"use strict";var r=n(2),i=n(90);r(r.P+r.F*n(92)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(2);r(r.P,"String",{repeat:n(122)})},function(e,t,n){"use strict";var r=n(2),i=n(13),a=n(90),o="".startsWith;r(r.P+r.F*n(92)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return o?o.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(17)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(17)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(17)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(17)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(17)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(17)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(17)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(17)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(17)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(17)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(17)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(17)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(17)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(3),i=n(29),a=n(8)("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||null==(n=r(o)[a])?t:i(n)}},function(e,t,n){n(302),n(303),n(304),n(306),n(307),e.exports=Date},function(e,t,n){var r=n(2);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(2),i=n(16),a=n(34);r(r.P+r.F*n(4)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(2),i=n(305);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(4),i=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-50000000000001))}))||!r((function(){a.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}:a},function(e,t,n){var r=Date.prototype,i=r.toString,a=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(15)(r,"toString",(function(){var e=a.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,n){var r=n(8)("toPrimitive"),i=Date.prototype;r in i||n(25)(i,r,n(308))},function(e,t,n){"use strict";var r=n(3),i=n(34);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){n(64),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(329),n(331),n(332),n(333),n(137),e.exports=n(10).Array},function(e,t,n){var r=n(2);r(r.S,"Array",{isArray:n(81)})},function(e,t,n){"use strict";var r=n(40),i=n(2),a=n(16),o=n(131),s=n(132),l=n(13),c=n(133),u=n(134);i(i.S+i.F*!n(135)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,h,p=a(e),f="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,g=0,S=u(p);if(m&&(v=r(v,d>2?arguments[2]:void 0,2)),null==S||f==Array&&s(S))for(n=new f(t=l(p.length));t>g;g++)c(n,g,m?v(p[g],g):p[g]);else for(h=S.call(p),n=new f;!(i=h.next()).done;g++)c(n,g,m?o(h,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(2),i=n(133);r(r.S+r.F*n(4)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(2),i=n(22),a=[].join;r(r.P+r.F*(n(48)!=Object||!n(21)(a)),"Array",{join:function(e){return a.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(2),i=n(114),a=n(35),o=n(49),s=n(13),l=[].slice;r(r.P+r.F*n(4)((function(){i&&l.call(i)})),"Array",{slice:function(e,t){var n=s(this.length),r=a(this);if(t=void 0===t?n:t,"Array"==r)return l.call(this,e,t);for(var i=o(e,n),c=o(t,n),u=s(c-i),h=new Array(u),p=0;p<u;p++)h[p]="String"==r?this.charAt(i+p):this[i+p];return h}})},function(e,t,n){"use strict";var r=n(2),i=n(29),a=n(16),o=n(4),s=[].sort,l=[1,2,3];r(r.P+r.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!n(21)(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),i(e))}})},function(e,t,n){"use strict";var r=n(2),i=n(27)(0),a=n(21)([].forEach,!0);r(r.P+r.F*!a,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(318);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(7),i=n(81),a=n(8)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(2),i=n(27)(1);r(r.P+r.F*!n(21)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(2),i=n(27)(2);r(r.P+r.F*!n(21)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(2),i=n(27)(3);r(r.P+r.F*!n(21)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(2),i=n(27)(4);r(r.P+r.F*!n(21)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(2),i=n(136);r(r.P+r.F*!n(21)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(2),i=n(136);r(r.P+r.F*!n(21)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(2),i=n(112)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!n(21)(a)),"Array",{indexOf:function(e){return o?a.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(2),i=n(22),a=n(36),o=n(13),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!n(21)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),n=o(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(2);r(r.P,"Array",{copyWithin:n(328)}),n(52)("copyWithin")},function(e,t,n){"use strict";var r=n(16),i=n(49),a=n(13);e.exports=[].copyWithin||function(e,t){var n=r(this),o=a(n.length),s=i(e,o),l=i(t,o),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?o:i(c,o))-l,o-s),h=1;for(l<s&&s<l+u&&(h=-1,l+=u-1,s+=u-1);u-- >0;)l in n?n[s]=n[l]:delete n[s],s+=h,l+=h;return n}},function(e,t,n){var r=n(2);r(r.P,"Array",{fill:n(330)}),n(52)("fill")},function(e,t,n){"use strict";var r=n(16),i=n(49),a=n(13);e.exports=function(e){for(var t=r(this),n=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),l=o>2?arguments[2]:void 0,c=void 0===l?n:i(l,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(2),i=n(27)(5),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(52)("find")},function(e,t,n){"use strict";var r=n(2),i=n(27)(6),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),r(r.P+r.F*o,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(52)(a)},function(e,t,n){n(95)("Array")},function(e,t,n){n(335),n(127),n(336),n(139),n(126),n(128),n(129),n(130),e.exports=n(10).RegExp},function(e,t,n){var r=n(9),i=n(85),a=n(11).f,o=n(50).f,s=n(91),l=n(67),c=r.RegExp,u=c,h=c.prototype,p=/a/g,f=/a/g,d=new c(p)!==p;if(n(12)&&(!d||n(4)((function(){return f[n(8)("match")]=!1,c(p)!=p||c(f)==f||"/a/i"!=c(p,"i")})))){c=function(e,t){var n=this instanceof c,r=s(e),a=void 0===t;return!n&&r&&e.constructor===c&&a?e:i(d?new u(r&&!a?e.source:e,t):u((r=e instanceof c)?e.source:e,r&&a?l.call(e):t),n?this:h,c)};for(var v=function(e){e in c||a(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},m=o(u),g=0;m.length>g;)v(m[g++]);h.constructor=c,c.prototype=h,n(15)(r,"RegExp",c)}n(95)("RegExp")},function(e,t,n){"use strict";n(139);var r=n(3),i=n(67),a=n(12),o=/./.toString,s=function(e){n(15)(RegExp.prototype,"toString",e,!0)};n(4)((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=o.name&&s((function(){return o.call(this)}))},function(e,t,n){n(62),n(64),n(140),n(141),e.exports=n(10).Map},function(e,t,n){n(62),n(64),n(140),n(143),e.exports=n(10).Set},function(e,t,n){n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(352),n(353),n(354),e.exports=n(10).Reflect},function(e,t,n){var r=n(2),i=n(29),a=n(3),o=(n(9).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(4)((function(){o((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),l=a(n);return o?o(r,t,l):s.call(r,t,l)}})},function(e,t,n){var r=n(2),i=n(42),a=n(29),o=n(3),s=n(7),l=n(4),c=n(118),u=(n(9).Reflect||{}).construct,h=l((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),p=!l((function(){u((function(){}))}));r(r.S+r.F*(h||p),"Reflect",{construct:function(e,t){a(e),o(t);var n=arguments.length<3?e:a(arguments[2]);if(p&&!h)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var l=n.prototype,f=i(s(l)?l:Object.prototype),d=Function.apply.call(e,f,t);return s(d)?d:f}})},function(e,t,n){var r=n(11),i=n(2),a=n(3),o=n(34);i(i.S+i.F*n(4)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){a(e),t=o(t,!0),a(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(2),i=n(32).f,a=n(3);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(a(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(125)(a,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,n){var r=n(32),i=n(26),a=n(20),o=n(2),s=n(7),l=n(3);o(o.S,"Reflect",{get:function e(t,n){var o,c,u=arguments.length<3?t:arguments[2];return l(t)===u?t[n]:(o=r.f(t,n))?a(o,"value")?o.value:void 0!==o.get?o.get.call(u):void 0:s(c=i(t))?e(c,n,u):void 0}})},function(e,t,n){var r=n(32),i=n(2),a=n(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(a(e),t)}})},function(e,t,n){var r=n(2),i=n(26),a=n(3);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},function(e,t,n){var r=n(2);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(2),i=n(3),a=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,n){var r=n(2);r(r.S,"Reflect",{ownKeys:n(351)})},function(e,t,n){var r=n(50),i=n(60),a=n(3),o=n(9).Reflect;e.exports=o&&o.ownKeys||function(e){var t=r.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(2),i=n(3),a=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(11),i=n(32),a=n(26),o=n(20),s=n(2),l=n(39),c=n(3),u=n(7);s(s.S,"Reflect",{set:function e(t,n,s){var h,p,f=arguments.length<4?t:arguments[3],d=i.f(c(t),n);if(!d){if(u(p=a(t)))return e(p,n,s,f);d=l(0)}if(o(d,"value")){if(!1===d.writable||!u(f))return!1;if(h=i.f(f,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=s,r.f(f,n,h)}else r.f(f,n,l(0,s));return!0}return void 0!==d.set&&(d.set.call(f,s),!0)}})},function(e,t,n){var r=n(2),i=n(83);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(356),n(359),n(360),n(361),n(363),n(364),n(365),n(366),n(367),e.exports=n(10).Reflect},function(e,t,n){var r=n(28),i=n(3),a=r.key,o=r.set;r.exp({defineMetadata:function(e,t,n,r){o(e,t,i(n),a(r))}})},function(e,t,n){"use strict";var r,i=n(9),a=n(27)(0),o=n(15),s=n(30),l=n(116),c=n(358),u=n(7),h=n(43),p=n(43),f=!i.ActiveXObject&&"ActiveXObject"in i,d=s.getWeak,v=Object.isExtensible,m=c.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},S={get:function(e){if(u(e)){var t=d(e);return!0===t?m(h(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(h(this,"WeakMap"),e,t)}},w=e.exports=n(98)("WeakMap",g,S,c,!0,!0);p&&f&&(l((r=c.getConstructor(g,"WeakMap")).prototype,S),s.NEED=!0,a(["delete","has","get","set"],(function(e){var t=w.prototype,n=t[e];o(t,e,(function(t,i){if(u(t)&&!v(t)){this._f||(this._f=new r);var a=this._f[e](t,i);return"set"==e?this:a}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var r=n(96),i=n(30).getWeak,a=n(3),o=n(7),s=n(97),l=n(68),c=n(27),u=n(20),h=n(43),p=c(5),f=c(6),d=0,v=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},g=function(e,t){return p(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,a){var c=e((function(e,r){s(e,c,t,"_i"),e._t=t,e._i=d++,e._l=void 0,null!=r&&l(r,n,e[a],e)}));return r(c.prototype,{delete:function(e){if(!o(e))return!1;var n=i(e);return!0===n?v(h(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!o(e))return!1;var n=i(e);return!0===n?v(h(this,t)).has(e):n&&u(n,this._i)}}),c},def:function(e,t,n){var r=i(a(t),!0);return!0===r?v(e).set(t,n):r[e._i]=n,e},ufstore:v}},function(e,t,n){var r=n(28),i=n(3),a=r.key,o=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:a(arguments[2]),r=o(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var l=s.get(t);return l.delete(n),!!l.size||s.delete(t)}})},function(e,t,n){var r=n(28),i=n(3),a=n(26),o=r.has,s=r.get,l=r.key,c=function(e,t,n){if(o(e,t,n))return s(e,t,n);var r=a(t);return null!==r?c(e,r,n):void 0};r.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var r=n(143),i=n(362),a=n(28),o=n(3),s=n(26),l=a.keys,c=a.key,u=function(e,t){var n=l(e,t),a=s(e);if(null===a)return n;var o=u(a,t);return o.length?n.length?i(new r(n.concat(o))):o:n};a.exp({getMetadataKeys:function(e){return u(o(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var r=n(68);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(28),i=n(3),a=r.get,o=r.key;r.exp({getOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,n){var r=n(28),i=n(3),a=r.keys,o=r.key;r.exp({getOwnMetadataKeys:function(e){return a(i(e),arguments.length<2?void 0:o(arguments[1]))}})},function(e,t,n){var r=n(28),i=n(3),a=n(26),o=r.has,s=r.key,l=function(e,t,n){if(o(e,t,n))return!0;var r=a(t);return null!==r&&l(e,r,n)};r.exp({hasMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(28),i=n(3),a=r.has,o=r.key;r.exp({hasOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,n){var r=n(28),i=n(3),a=n(29),o=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:a)(n),o(r))}}})},function(e,t,n){(function(e){(function(){"use strict";
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!function(e){var t=e.performance;function n(e){t&&t.mark&&t.mark(e)}function r(e,n){t&&t.measure&&t.measure(e,n)}n("Zone");var i=!0===e.__zone_symbol__forceDuplicateZoneCheck;if(e.Zone){if(i||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}var a,o=function(){function t(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,t)}return t.assertZonePatched=function(){if(e.Promise!==E.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(t,"root",{get:function(){for(var e=t.current;e.parent;)e=e.parent;return e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"current",{get:function(){return _.zone},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return M},enumerable:!0,configurable:!0}),t.__load_patch=function(a,o){if(E.hasOwnProperty(a)){if(i)throw Error("Already loaded patch: "+a)}else if(!e["__Zone_disable_"+a]){var s="Zone:"+a;n(s),E[a]=o(e,t,T),r(s,s)}},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},t.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},t.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},t.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},t.prototype.run=function(e,t,n,r){_={parent:_,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{_=_.parent}},t.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),_={parent:_,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{_=_.parent}},t.prototype.runTask=function(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||g).name+"; Execution: "+this.name+")");if(e.state!==S||e.type!==P&&e.type!==$){var r=e.state!=b;r&&e._transitionTo(b,y),e.runCount++;var i=M;M=e,_={parent:_,zone:this};try{e.type==$&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{e.state!==S&&e.state!==k&&(e.type==P||e.data&&e.data.isPeriodic?r&&e._transitionTo(y,b):(e.runCount=0,this._updateTaskCount(e,-1),r&&e._transitionTo(S,b,S))),_=_.parent,M=i}}},t.prototype.scheduleTask=function(e){if(e.zone&&e.zone!==this)for(var t=this;t;){if(t===e.zone)throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+e.zone.name);t=t.parent}e._transitionTo(w,S);var n=[];e._zoneDelegates=n,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(k,w,S),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===n&&this._updateTaskCount(e,1),e.state==w&&e._transitionTo(y,w),e},t.prototype.scheduleMicroTask=function(e,t,n,r){return this.scheduleTask(new c(C,e,t,n,r,void 0))},t.prototype.scheduleMacroTask=function(e,t,n,r,i){return this.scheduleTask(new c($,e,t,n,r,i))},t.prototype.scheduleEventTask=function(e,t,n,r,i){return this.scheduleTask(new c(P,e,t,n,r,i))},t.prototype.cancelTask=function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||g).name+"; Execution: "+this.name+")");e._transitionTo(x,y,b);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(k,x),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(S,x),e.runCount=0,e},t.prototype._updateTaskCount=function(e,t){var n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)},t.__symbol__=L,t}(),s={name:"",onHasTask:function(e,t,n,r){return e.hasTask(n,r)},onScheduleTask:function(e,t,n,r){return e.scheduleTask(n,r)},onInvokeTask:function(e,t,n,r,i,a){return e.invokeTask(n,r,i,a)},onCancelTask:function(e,t,n,r){return e.cancelTask(n,r)}},l=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t.zone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t.zone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t.zone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t.zone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var r=n&&n.onHasTask,i=t&&t._hasTaskZS;(r||i)&&(this._hasTaskZS=r?n:s,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,n.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new o(e,t)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,i):t.apply(n,r)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){var n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t))||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=C)throw new Error("Task is missing scheduleFn.");v(t)}return n},e.prototype.invokeTask=function(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n},e.prototype.hasTask=function(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],i=n[e]=r+t;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==i){var a={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};this.hasTask(this.zone,a)}},e}(),c=function(){function t(n,r,i,a,o,s){this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=n,this.source=r,this.data=a,this.scheduleFn=o,this.cancelFn=s,this.callback=i;var l=this;n===P&&a&&a.useG?this.invoke=t.invokeTask:this.invoke=function(){return t.invokeTask.call(e,l,this,arguments)}}return t.invokeTask=function(e,t,n){e||(e=this),A++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==A&&m(),A--}},Object.defineProperty(t.prototype,"zone",{get:function(){return this._zone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),t.prototype.cancelScheduleRequest=function(){this._transitionTo(S,w)},t.prototype._transitionTo=function(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(this.type+" '"+this.source+"': can not transition to '"+e+"', expecting state '"+t+"'"+(n?" or '"+n+"'":"")+", was '"+this._state+"'.");this._state=e,e==S&&(this._zoneDelegates=null)},t.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)},t.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}},t}(),u=L("setTimeout"),h=L("Promise"),p=L("then"),f=[],d=!1;function v(t){if(0===A&&0===f.length)if(a||e[h]&&(a=e[h].resolve(0)),a){var n=a[p];n||(n=a.then),n.call(a,m)}else e[u](m,0);t&&f.push(t)}function m(){if(!d){for(d=!0;f.length;){var e=f;f=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(e){T.onUnhandledError(e)}}}T.microtaskDrainDone(),d=!1}}var g={name:"NO ZONE"},S="notScheduled",w="scheduling",y="scheduled",b="running",x="canceling",k="unknown",C="microTask",$="macroTask",P="eventTask",E={},T={symbol:L,currentZoneFrame:function(){return _},onUnhandledError:D,microtaskDrainDone:D,scheduleMicroTask:v,showUncaughtError:function(){return!o[L("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:D,patchMethod:function(){return D},bindArguments:function(){return[]},patchThen:function(){return D},setNativePromise:function(e){e&&"function"==typeof e.resolve&&(a=e.resolve(0))}},_={parent:null,zone:new o(null,null)},M=null,A=0;function D(){}function L(e){return"__zone_symbol__"+e}r("Zone","Zone"),e.Zone=o}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||e);var t=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Zone.__load_patch("ZoneAwarePromise",(function(e,n,r){var i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=r.symbol,s=[],l=o("Promise"),c=o("then");r.onUnhandledError=function(e){if(r.showUncaughtError()){var t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},r.microtaskDrainDone=function(){for(;s.length;)for(var e=function(){var e=s.shift();try{e.zone.runGuarded((function(){throw e}))}catch(e){h(e)}};s.length;)e()};var u=o("unhandledPromiseRejectionHandler");function h(e){r.onUnhandledError(e);try{var t=n[u];t&&"function"==typeof t&&t.call(this,e)}catch(e){}}function p(e){return e&&e.then}function f(e){return e}function d(e){return P.reject(e)}var v=o("state"),m=o("value"),g=o("finally"),S=o("parentPromiseValue"),w=o("parentPromiseState");function y(e,t){return function(n){try{x(e,t,n)}catch(t){x(e,!1,t)}}}var b=o("currentTaskTrace");function x(e,t,i){var o,l=(o=!1,function(e){return function(){o||(o=!0,e.apply(null,arguments))}});if(e===i)throw new TypeError("Promise resolved with itself");if(null===e[v]){var c=null;try{"object"!=typeof i&&"function"!=typeof i||(c=i&&i.then)}catch(t){return l((function(){x(e,!1,t)}))(),e}if(!1!==t&&i instanceof P&&i.hasOwnProperty(v)&&i.hasOwnProperty(m)&&null!==i[v])C(i),x(e,i[v],i[m]);else if(!1!==t&&"function"==typeof c)try{c.call(i,l(y(e,t)),l(y(e,!1)))}catch(t){l((function(){x(e,!1,t)}))()}else{e[v]=t;var u=e[m];if(e[m]=i,e[g]===g&&!0===t&&(e[v]=e[w],e[m]=e[S]),!1===t&&i instanceof Error){var h=n.currentTask&&n.currentTask.data&&n.currentTask.data.__creationTrace__;h&&a(i,b,{configurable:!0,enumerable:!1,writable:!0,value:h})}for(var p=0;p<u.length;)$(e,u[p++],u[p++],u[p++],u[p++]);if(0==u.length&&0==t){e[v]=0;try{throw new Error("Uncaught (in promise): "+function(e){if(e&&e.toString===Object.prototype.toString){var t=e.constructor&&e.constructor.name;return(t||"")+": "+JSON.stringify(e)}return e?e.toString():Object.prototype.toString.call(e)}(i)+(i&&i.stack?"\n"+i.stack:""))}catch(t){var f=t;f.rejection=i,f.promise=e,f.zone=n.current,f.task=n.currentTask,s.push(f),r.scheduleMicroTask()}}}}return e}var k=o("rejectionHandledHandler");function C(e){if(0===e[v]){try{var t=n[k];t&&"function"==typeof t&&t.call(this,{rejection:e[m],promise:e})}catch(e){}e[v]=!1;for(var r=0;r<s.length;r++)e===s[r].promise&&s.splice(r,1)}}function $(e,t,n,r,i){C(e);var a=e[v],o=a?"function"==typeof r?r:f:"function"==typeof i?i:d;t.scheduleMicroTask("Promise.then",(function(){try{var r=e[m],i=n&&g===n[g];i&&(n[S]=r,n[w]=a);var s=t.run(o,void 0,i&&o!==d&&o!==f?[]:[r]);x(n,!0,s)}catch(e){x(n,!1,e)}}),n)}var P=function(){function e(t){if(!(this instanceof e))throw new Error("Must be an instanceof Promise.");this[v]=null,this[m]=[];try{t&&t(y(this,!0),y(this,!1))}catch(e){x(this,!1,e)}}return e.toString=function(){return"function ZoneAwarePromise() { [native code] }"},e.resolve=function(e){return x(new this(null),!0,e)},e.reject=function(e){return x(new this(null),!1,e)},e.race=function(e){var n,r,i,a,o=new this((function(e,t){i=e,a=t}));function s(e){o&&(o=i(e))}function l(e){o&&(o=a(e))}try{for(var c=t(e),u=c.next();!u.done;u=c.next()){var h=u.value;p(h)||(h=this.resolve(h)),h.then(s,l)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return o},e.all=function(e){var n,r,i,a,o=new this((function(e,t){i=e,a=t})),s=2,l=0,c=[],u=function(e){p(e)||(e=h.resolve(e));var t=l;e.then((function(e){c[t]=e,0==--s&&i(c)}),a),s++,l++},h=this;try{for(var f=t(e),d=f.next();!d.done;d=f.next())u(d.value)}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return 0==(s-=2)&&i(c),o},e.prototype.then=function(e,t){var r=new this.constructor(null),i=n.current;return null==this[v]?this[m].push(i,r,e,t):$(this,i,r,e,t),r},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=new this.constructor(null);t[g]=g;var r=n.current;return null==this[v]?this[m].push(r,t,e,e):$(this,r,t,e,e),t},e}();P.resolve=P.resolve,P.reject=P.reject,P.race=P.race,P.all=P.all;var E=e[l]=e.Promise,T=n.__symbol__("ZoneAwarePromise"),_=i(e,"Promise");_&&!_.configurable||(_&&delete _.writable,_&&delete _.value,_||(_={configurable:!0,enumerable:!0}),_.get=function(){return e[T]?e[T]:e[l]},_.set=function(t){t===P?e[T]=t:(e[l]=t,t.prototype[c]||A(t),r.setNativePromise(t))},a(e,"Promise",_)),e.Promise=P;var M=o("thenPatched");function A(e){var t=e.prototype,n=i(t,"then");if(!n||!1!==n.writable&&n.configurable){var r=t.then;t[c]=r,e.prototype.then=function(e,t){var n=this;return new P((function(e,t){r.call(n,e,t)})).then(e,t)},e[M]=!0}}return r.patchThen=A,E&&A(E),Promise[n.__symbol__("uncaughtPromiseErrors")]=s,P})),
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Zone.__load_patch("fetch",(function(e,t,n){var r=e.fetch,i=e.Promise,a=n.symbol("thenPatched"),o=n.symbol("fetchTaskScheduling"),s=n.symbol("fetchTaskAborting");if("function"==typeof r){var l=e.AbortController,c="function"==typeof l,u=null;c&&(e.AbortController=function(){var e=new l;return e.signal.abortController=e,e},u=n.patchMethod(l.prototype,"abort",(function(e){return function(t,n){return t.task?t.task.zone.cancelTask(t.task):e.apply(t,n)}})));var h=function(){};e.fetch=function(){var e=this,l=Array.prototype.slice.call(arguments),p=l.length>1?l[1]:null,f=p&&p.signal;return new Promise((function(p,d){var v=t.current.scheduleMacroTask("fetch",h,l,(function(){var s,c=t.current;try{c[o]=!0,s=r.apply(e,l)}catch(e){return void d(e)}finally{c[o]=!1}if(!(s instanceof i)){var u=s.constructor;u[a]||n.patchThen(u)}s.then((function(e){"notScheduled"!==v.state&&v.invoke(),p(e)}),(function(e){"notScheduled"!==v.state&&v.invoke(),d(e)}))}),(function(){if(c)if(f&&f.abortController&&!f.aborted&&"function"==typeof f.abortController.abort&&u)try{t.current[s]=!0,u.call(f.abortController)}finally{t.current[s]=!1}else d("cancel fetch need a AbortController.signal");else d("No AbortController supported, can not cancel fetch")}));f&&f.abortController&&(f.abortController.task=v)}))}}}));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var n=Object.getOwnPropertyDescriptor,r=Object.defineProperty,i=Object.getPrototypeOf,a=Object.create,o=Array.prototype.slice,s="addEventListener",l="removeEventListener",c=Zone.__symbol__(s),u=Zone.__symbol__(l);function h(e,t){return Zone.current.wrap(e,t)}function p(e,t,n,r,i){return Zone.current.scheduleMacroTask(e,t,n,r,i)}var f=Zone.__symbol__,d="undefined"!=typeof window,v=d?window:void 0,m=d&&v||"object"==typeof self&&self||e,g=[null];function S(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=h(e[n],t+"_"+n));return e}function w(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}var y="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,b=!("nw"in m)&&void 0!==m.process&&"[object process]"==={}.toString.call(m.process),x=!b&&!y&&!(!d||!v.HTMLElement),k=void 0!==m.process&&"[object process]"==={}.toString.call(m.process)&&!y&&!(!d||!v.HTMLElement),C={},$=function(e){if(e=e||m.event){var t=C[e.type];t||(t=C[e.type]=f("ON_PROPERTY"+e.type));var n,r=this||e.target||m,i=r[t];if(x&&r===v&&"error"===e.type){var a=e;!0===(n=i&&i.call(this,a.message,a.filename,a.lineno,a.colno,a.error))&&e.preventDefault()}else null==(n=i&&i.apply(this,arguments))||n||e.preventDefault();return n}};function P(e,t,i){var a=n(e,t);if(!a&&i&&n(i,t)&&(a={enumerable:!0,configurable:!0}),a&&a.configurable){var o=f("on"+t+"patched");if(!e.hasOwnProperty(o)||!e[o]){delete a.writable,delete a.value;var s=a.get,l=a.set,c=t.substr(2),u=C[c];u||(u=C[c]=f("ON_PROPERTY"+c)),a.set=function(t){var n=this;n||e!==m||(n=m),n&&(n[u]&&n.removeEventListener(c,$),l&&l.apply(n,g),"function"==typeof t?(n[u]=t,n.addEventListener(c,$,!1)):n[u]=null)},a.get=function(){var n=this;if(n||e!==m||(n=m),!n)return null;var r=n[u];if(r)return r;if(s){var i=s&&s.call(this);if(i)return a.set.call(this,i),"function"==typeof n.removeAttribute&&n.removeAttribute(t),i}return null},r(e,t,a),e[o]=!0}}}function E(e,t,n){if(t)for(var r=0;r<t.length;r++)P(e,"on"+t[r],n);else{var i=[];for(var a in e)"on"==a.substr(0,2)&&i.push(a);for(var o=0;o<i.length;o++)P(e,i[o],n)}}var T=f("originalInstance");function _(e){var t=m[e];if(t){m[f(e)]=t,m[e]=function(){var n=S(arguments,e);switch(n.length){case 0:this[T]=new t;break;case 1:this[T]=new t(n[0]);break;case 2:this[T]=new t(n[0],n[1]);break;case 3:this[T]=new t(n[0],n[1],n[2]);break;case 4:this[T]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},A(m[e],t);var n,i=new t((function(){}));for(n in i)"XMLHttpRequest"===e&&"responseBlob"===n||function(t){"function"==typeof i[t]?m[e].prototype[t]=function(){return this[T][t].apply(this[T],arguments)}:r(m[e].prototype,t,{set:function(n){"function"==typeof n?(this[T][t]=h(n,e+"."+t),A(this[T][t],n)):this[T][t]=n},get:function(){return this[T][t]}})}(n);for(n in t)"prototype"!==n&&t.hasOwnProperty(n)&&(m[e][n]=t[n])}}function M(e,t,r){for(var a=e;a&&!a.hasOwnProperty(t);)a=i(a);!a&&e[t]&&(a=e);var o=f(t),s=null;if(a&&!(s=a[o])&&(s=a[o]=a[t],w(a&&n(a,t)))){var l=r(s,o,t);a[t]=function(){return l(this,arguments)},A(a[t],s)}return s}function A(e,t){e[f("OriginalDelegate")]=t}var D=!1,L=!1;function V(){try{var e=v.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}function I(){if(D)return L;D=!0;try{var e=v.navigator.userAgent;return-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(L=!0),L}catch(e){}}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */Zone.__load_patch("toString",(function(e){var t=Function.prototype.toString,n=f("OriginalDelegate"),r=f("Promise"),i=f("Error"),a=function(){if("function"==typeof this){var a=this[n];if(a)return"function"==typeof a?t.apply(this[n],arguments):Object.prototype.toString.call(a);if(this===Promise){var o=e[r];if(o)return t.apply(o,arguments)}if(this===Error){var s=e[i];if(s)return t.apply(s,arguments)}}return t.apply(this,arguments)};a[n]=t,Function.prototype.toString=a;var o=Object.prototype.toString;Object.prototype.toString=function(){return this instanceof Promise?"[object Promise]":o.apply(this,arguments)}}));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var O=!1;if("undefined"!=typeof window)try{var N=Object.defineProperty({},"passive",{get:function(){O=!0}});window.addEventListener("test",N,N),window.removeEventListener("test",N,N)}catch(e){O=!1}var B={useG:!0},F={},R={},H=/^__zone_symbol__(\w+)(true|false)$/;function j(e,t,n){var r=n&&n.add||s,a=n&&n.rm||l,o=n&&n.listeners||"eventListeners",c=n&&n.rmAll||"removeAllListeners",u=f(r),h="."+r+":",p=function(e,t,n){if(!e.isRemoved){var r=e.callback;"object"==typeof r&&r.handleEvent&&(e.callback=function(e){return r.handleEvent(e)},e.originalDelegate=r),e.invoke(e,t,[n]);var i=e.options;if(i&&"object"==typeof i&&i.once){var o=e.originalDelegate?e.originalDelegate:e.callback;t[a].call(t,n.type,o,i)}}},d=function(t){if(t=t||e.event){var n=this||t.target||e,r=n[F[t.type].false];if(r)if(1===r.length)p(r[0],n,t);else for(var i=r.slice(),a=0;a<i.length&&(!t||!0!==t.__zone_symbol__propagationStopped);a++)p(i[a],n,t)}},v=function(t){if(t=t||e.event){var n=this||t.target||e,r=n[F[t.type].true];if(r)if(1===r.length)p(r[0],n,t);else for(var i=r.slice(),a=0;a<i.length&&(!t||!0!==t.__zone_symbol__propagationStopped);a++)p(i[a],n,t)}};function m(t,n){if(!t)return!1;var s=!0;n&&void 0!==n.useG&&(s=n.useG);var l=n&&n.vh,p=!0;n&&void 0!==n.chkDup&&(p=n.chkDup);var m=!1;n&&void 0!==n.rt&&(m=n.rt);for(var g=t;g&&!g.hasOwnProperty(r);)g=i(g);if(!g&&t[r]&&(g=t),!g)return!1;if(g[u])return!1;var S,w=n&&n.eventNameToString,y={},x=g[u]=g[r],k=g[f(a)]=g[a],C=g[f(o)]=g[o],$=g[f(c)]=g[c];function P(e){O||"boolean"==typeof y.options||void 0===y.options||null===y.options||(e.options=!!y.options.capture,y.options=e.options)}n&&n.prepend&&(S=g[f(n.prepend)]=g[n.prepend]);var E=s?function(e){if(!y.isExisting)return P(e),x.call(y.target,y.eventName,y.capture?v:d,y.options)}:function(e){return P(e),x.call(y.target,y.eventName,e.invoke,y.options)},T=s?function(e){if(!e.isRemoved){var t=F[e.eventName],n=void 0;t&&(n=t[e.capture?"true":"false"]);var r=n&&e.target[n];if(r)for(var i=0;i<r.length;i++)if(r[i]===e){r.splice(i,1),e.isRemoved=!0,0===r.length&&(e.allRemoved=!0,e.target[n]=null);break}}if(e.allRemoved)return k.call(e.target,e.eventName,e.capture?v:d,e.options)}:function(e){return k.call(e.target,e.eventName,e.invoke,e.options)},_=n&&n.diff?n.diff:function(e,t){var n=typeof t;return"function"===n&&e.callback===t||"object"===n&&e.originalDelegate===t},M=Zone[Zone.__symbol__("BLACK_LISTED_EVENTS")],D=function(t,n,r,i,a,o){return void 0===a&&(a=!1),void 0===o&&(o=!1),function(){var c=this||e,u=arguments[0],h=arguments[1];if(!h)return t.apply(this,arguments);if(b&&"uncaughtException"===u)return t.apply(this,arguments);var f=!1;if("function"!=typeof h){if(!h.handleEvent)return t.apply(this,arguments);f=!0}if(!l||l(t,h,c,arguments)){var d,v=arguments[2];if(M)for(var m=0;m<M.length;m++)if(u===M[m])return t.apply(this,arguments);var g=!1;void 0===v?d=!1:!0===v?d=!0:!1===v?d=!1:(d=!!v&&!!v.capture,g=!!v&&!!v.once);var S,x=Zone.current,k=F[u];if(k)S=k[d?"true":"false"];else{var C=(w?w(u):u)+"false",$=(w?w(u):u)+"true",P="__zone_symbol__"+C,E="__zone_symbol__"+$;F[u]={},F[u].false=P,F[u].true=E,S=d?E:P}var T,A=c[S],D=!1;if(A){if(D=!0,p)for(m=0;m<A.length;m++)if(_(A[m],h))return}else A=c[S]=[];var L=c.constructor.name,V=R[L];V&&(T=V[u]),T||(T=L+n+(w?w(u):u)),y.options=v,g&&(y.options.once=!1),y.target=c,y.capture=d,y.eventName=u,y.isExisting=D;var I=s?B:void 0;I&&(I.taskData=y);var N=x.scheduleEventTask(T,h,I,r,i);return y.target=null,I&&(I.taskData=null),g&&(v.once=!0),(O||"boolean"!=typeof N.options)&&(N.options=v),N.target=c,N.capture=d,N.eventName=u,f&&(N.originalDelegate=h),o?A.unshift(N):A.push(N),a?c:void 0}}};return g[r]=D(x,h,E,T,m),S&&(g.prependListener=D(S,".prependListener:",(function(e){return S.call(y.target,y.eventName,e.invoke,y.options)}),T,m,!0)),g[a]=function(){var t,n=this||e,r=arguments[0],i=arguments[2];t=void 0!==i&&(!0===i||!1!==i&&!!i&&!!i.capture);var a=arguments[1];if(!a)return k.apply(this,arguments);if(!l||l(k,a,n,arguments)){var o,s=F[r];s&&(o=s[t?"true":"false"]);var c=o&&n[o];if(c)for(var u=0;u<c.length;u++){var h=c[u];if(_(h,a))return c.splice(u,1),h.isRemoved=!0,0===c.length&&(h.allRemoved=!0,n[o]=null),h.zone.cancelTask(h),m?n:void 0}return k.apply(this,arguments)}},g[o]=function(){for(var t=this||e,n=arguments[0],r=[],i=z(t,w?w(n):n),a=0;a<i.length;a++){var o=i[a],s=o.originalDelegate?o.originalDelegate:o.callback;r.push(s)}return r},g[c]=function(){var t=this||e,n=arguments[0];if(n){var r=F[n];if(r){var i=r.false,o=r.true,s=t[i],l=t[o];if(s){var u=s.slice();for(d=0;d<u.length;d++){var h=(p=u[d]).originalDelegate?p.originalDelegate:p.callback;this[a].call(this,n,h,p.options)}}if(l)for(u=l.slice(),d=0;d<u.length;d++){var p;h=(p=u[d]).originalDelegate?p.originalDelegate:p.callback,this[a].call(this,n,h,p.options)}}}else{for(var f=Object.keys(t),d=0;d<f.length;d++){var v=f[d],g=H.exec(v),S=g&&g[1];S&&"removeListener"!==S&&this[c].call(this,S)}this[c].call(this,"removeListener")}if(m)return this},A(g[r],x),A(g[a],k),$&&A(g[c],$),C&&A(g[o],C),!0}for(var g=[],S=0;S<t.length;S++)g[S]=m(t[S],n);return g}function z(e,t){var n=[];for(var r in e){var i=H.exec(r),a=i&&i[1];if(a&&(!t||a===t)){var o=e[r];if(o)for(var s=0;s<o.length;s++)n.push(o[s])}}return n}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var U=f("zoneTask");function W(e,t,n,r){var i=null,a=null;n+=r;var o={};function s(t){var n=t.data;return n.args[0]=function(){try{t.invoke.apply(this,arguments)}finally{t.data&&t.data.isPeriodic||("number"==typeof n.handleId?delete o[n.handleId]:n.handleId&&(n.handleId[U]=null))}},n.handleId=i.apply(e,n.args),t}function l(e){return a(e.data.handleId)}i=M(e,t+=r,(function(n){return function(i,a){if("function"==typeof a[0]){var c={isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?a[1]||0:void 0,args:a},u=p(t,a[0],c,s,l);if(!u)return u;var h=u.data.handleId;return"number"==typeof h?o[h]=u:h&&(h[U]=u),h&&h.ref&&h.unref&&"function"==typeof h.ref&&"function"==typeof h.unref&&(u.ref=h.ref.bind(h),u.unref=h.unref.bind(h)),"number"==typeof h||h?h:u}return n.apply(e,a)}})),a=M(e,n,(function(t){return function(n,r){var i,a=r[0];"number"==typeof a?i=o[a]:(i=a&&a[U])||(i=a),i&&"string"==typeof i.type?"notScheduled"!==i.state&&(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&("number"==typeof a?delete o[a]:a&&(a[U]=null),i.zone.cancelTask(i)):t.apply(e,r)}}))}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */var G=Object[f("defineProperty")]=Object.defineProperty,q=Object[f("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,Y=Object.create,X=f("unconfigurables");function Z(e,t){return e&&e[X]&&e[X][t]}function K(e,t,n){return Object.isFrozen(n)||(n.configurable=!0),n.configurable||(e[X]||Object.isFrozen(e)||G(e,X,{writable:!0,value:{}}),e[X]&&(e[X][t]=!0)),n}function J(e,t,n,r){try{return G(e,t,n)}catch(a){if(!n.configurable)throw a;void 0===r?delete n.configurable:n.configurable=r;try{return G(e,t,n)}catch(r){var i=null;try{i=JSON.stringify(n)}catch(e){i=n.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+i+"' on object '"+e+"' and got error, giving up: "+r)}}}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Q=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplyconnected","vrdisplaydisconnected","vrdisplaypresentchange"],ee=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],te=["load"],ne=["blur","error","focus","load","resize","scroll","messageerror"],re=["bounce","finish","start"],ie=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],ae=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],oe=["close","error","open","message"],se=["error","message"],le=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Q,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function ce(e,t,n,r){e&&E(e,function(e,t,n){if(!n||0===n.length)return t;var r=n.filter((function(t){return t.target===e}));if(!r||0===r.length)return t;var i=r[0].ignoreProperties;return t.filter((function(e){return-1===i.indexOf(e)}))}(e,t,n),r)}function ue(e,t){if(!b||k){var c="undefined"!=typeof WebSocket;if(function(){if((x||k)&&!n(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=n(Element.prototype,"onclick");if(e&&!e.configurable)return!1}var t=XMLHttpRequest.prototype,i=n(t,"onreadystatechange");if(i){r(t,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return!0}});var a=!!(s=new XMLHttpRequest).onreadystatechange;return r(t,"onreadystatechange",i||{}),a}var o=f("fake");r(t,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return this[o]},set:function(e){this[o]=e}});var s=new XMLHttpRequest,l=function(){};return s.onreadystatechange=l,a=s[o]===l,s.onreadystatechange=null,a}()){var u=t.__Zone_ignore_on_properties;if(x){var p=window,d=V?[{target:p,ignoreProperties:["error"]}]:[];ce(p,le.concat(["messageerror"]),u?u.concat(d):u,i(p)),ce(Document.prototype,le,u),void 0!==p.SVGElement&&ce(p.SVGElement.prototype,le,u),ce(Element.prototype,le,u),ce(HTMLElement.prototype,le,u),ce(HTMLMediaElement.prototype,ee,u),ce(HTMLFrameSetElement.prototype,Q.concat(ne),u),ce(HTMLBodyElement.prototype,Q.concat(ne),u),ce(HTMLFrameElement.prototype,te,u),ce(HTMLIFrameElement.prototype,te,u);var v=p.HTMLMarqueeElement;v&&ce(v.prototype,re,u);var m=p.Worker;m&&ce(m.prototype,se,u)}ce(XMLHttpRequest.prototype,ie,u);var g=t.XMLHttpRequestEventTarget;g&&ce(g&&g.prototype,ie,u),"undefined"!=typeof IDBIndex&&(ce(IDBIndex.prototype,ae,u),ce(IDBRequest.prototype,ae,u),ce(IDBOpenDBRequest.prototype,ae,u),ce(IDBDatabase.prototype,ae,u),ce(IDBTransaction.prototype,ae,u),ce(IDBCursor.prototype,ae,u)),c&&ce(WebSocket.prototype,oe,u)}else!function(){for(var e=function(e){var t=le[e],n="on"+t;self.addEventListener(t,(function(e){var t,r,i=e.target;for(r=i?i.constructor.name+"."+n:"unknown."+n;i;)i[n]&&!i[n][he]&&((t=h(i[n],r))[he]=i[n],i[n]=t),i=i.parentElement}),!0)},t=0;t<le.length;t++)e(t)}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */(),_("XMLHttpRequest"),c&&function(e,t){var r=t.WebSocket;t.EventTarget||j(t,[r.prototype]),t.WebSocket=function(e,t){var i,c,u=arguments.length>1?new r(e,t):new r(e),h=n(u,"onmessage");return h&&!1===h.configurable?(i=a(u),c=u,[s,l,"send","close"].forEach((function(e){i[e]=function(){var t=o.call(arguments);if(e===s||e===l){var n=t.length>0?t[0]:void 0;if(n){var r=Zone.__symbol__("ON_PROPERTY"+n);u[r]=i[r]}}return u[e].apply(u,t)}}))):i=u,E(i,["close","error","message","open"],c),i};var i=t.WebSocket;for(var c in r)i[c]=r[c]}(0,t)}}var he=f("unbound");
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function pe(e,t,r,i){var a=Zone.__symbol__(r);if(!e[a]){var o=e[a]=e[r];e[r]=function(a,s,l){return s&&s.prototype&&i.forEach((function(e){var i,a,o,l,c=t+"."+r+"::"+e,u=s.prototype;if(u.hasOwnProperty(e)){var p=n(u,e);p&&p.value?(p.value=h(p.value,c),i=s.prototype,a=e,l=(o=p).configurable,J(i,a,o=K(i,a,o),l)):u[e]&&(u[e]=h(u[e],c))}else u[e]&&(u[e]=h(u[e],c))})),o.call(e,a,s,l)},A(e[r],o)}}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Zone.__load_patch("util",(function(e,t,n){n.patchOnProperties=E,n.patchMethod=M,n.bindArguments=S})),Zone.__load_patch("timers",(function(e){W(e,"set","clear","Timeout"),W(e,"set","clear","Interval"),W(e,"set","clear","Immediate")})),Zone.__load_patch("requestAnimationFrame",(function(e){W(e,"request","cancel","AnimationFrame"),W(e,"mozRequest","mozCancel","AnimationFrame"),W(e,"webkitRequest","webkitCancel","AnimationFrame")})),Zone.__load_patch("blocking",(function(e,t){for(var n=["alert","prompt","confirm"],r=0;r<n.length;r++)M(e,n[r],(function(n,r,i){return function(r,a){return t.current.run(n,e,a,i)}}))})),Zone.__load_patch("EventTarget",(function(e,t,n){var r=t.__symbol__("BLACK_LISTED_EVENTS");e[r]&&(t[r]=e[r]),function(e,t){!function(e,t){var n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",(function(e){return function(t,n){t.__zone_symbol__propagationStopped=!0,e&&e.apply(t,n)}}))}(e,t)}(e,n),function(e,t){var n="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",r="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),i=[],a=e.wtf,o=n.split(",");a?i=o.map((function(e){return"HTML"+e+"Element"})).concat(r):e.EventTarget?i.push("EventTarget"):i=r;for(var s=e.__Zone_disable_IE_check||!1,l=e.__Zone_enable_cross_context_check||!1,c=I(),u="function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }",h=0;h<le.length;h++){var p="__zone_symbol__"+(g=le[h])+"false",f="__zone_symbol__"+g+"true";F[g]={},F[g].false=p,F[g].true=f}for(h=0;h<n.length;h++)for(var d=o[h],v=R[d]={},m=0;m<le.length;m++){var g;v[g=le[m]]=d+".addEventListener:"+g}var S=[];for(h=0;h<i.length;h++){var w=e[i[h]];S.push(w&&w.prototype)}j(e,S,{vh:function(e,t,n,r){if(!s&&c){if(l)try{var i;if("[object FunctionWrapper]"===(i=t.toString())||i==u)return e.apply(n,r),!1}catch(t){return e.apply(n,r),!1}else if("[object FunctionWrapper]"===(i=t.toString())||i==u)return e.apply(n,r),!1}else if(l)try{t.toString()}catch(t){return e.apply(n,r),!1}return!0}}),t.patchEventTarget=j}(e,n);var i=e.XMLHttpRequestEventTarget;i&&i.prototype&&n.patchEventTarget(e,[i.prototype]),_("MutationObserver"),_("WebKitMutationObserver"),_("IntersectionObserver"),_("FileReader")})),Zone.__load_patch("on_property",(function(e,t,n){ue(0,e),Object.defineProperty=function(e,t,n){if(Z(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var r=n.configurable;return"prototype"!==t&&(n=K(e,t,n)),J(e,t,n,r)},Object.defineProperties=function(e,t){return Object.keys(t).forEach((function(n){Object.defineProperty(e,n,t[n])})),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach((function(n){t[n]=K(e,n,t[n])})),Y(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=q(e,t);return n&&Z(e,t)&&(n.configurable=!1),n}})),Zone.__load_patch("customElements",(function(e,t,n){!function(e){(x||k)&&"registerElement"in e.document&&pe(document,"Document","registerElement",["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"])}(e),function(e){(x||k)&&"customElements"in e&&pe(e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e)})),Zone.__load_patch("canvas",(function(e){var t=e.HTMLCanvasElement;void 0!==t&&t.prototype&&t.prototype.toBlob&&function(e,t,n){var r=null;function i(e){var t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},r.apply(t.target,t.args),e}r=M(e,t,(function(e){return function(t,r){var a=n(t,r);return a.cbIdx>=0&&"function"==typeof r[a.cbIdx]?p(a.name,r[a.cbIdx],a,i):e.apply(t,r)}}))}(t.prototype,"toBlob",(function(e,t){return{name:"HTMLCanvasElement.toBlob",target:e,cbIdx:0,args:t}}))})),Zone.__load_patch("XHR",(function(e,t){!function(e){var l=XMLHttpRequest.prototype,h=l[c],d=l[u];if(!h){var v=e.XMLHttpRequestEventTarget;if(v){var m=v.prototype;h=m[c],d=m[u]}}function g(e){var t=e.data,r=t.target;r[a]=!1,r[s]=!1;var o=r[i];h||(h=r[c],d=r[u]),o&&d.call(r,"readystatechange",o);var l=r[i]=function(){if(r.readyState===r.DONE)if(!t.aborted&&r[a]&&"scheduled"===e.state){var n=r.__zone_symbol__loadfalse;if(n&&n.length>0){var i=e.invoke;e.invoke=function(){for(var n=r.__zone_symbol__loadfalse,a=0;a<n.length;a++)n[a]===e&&n.splice(a,1);t.aborted||"scheduled"!==e.state||i.call(e)},n.push(e)}else e.invoke()}else t.aborted||!1!==r[a]||(r[s]=!0)};return h.call(r,"readystatechange",l),r[n]||(r[n]=e),k.apply(r,t.args),r[a]=!0,e}function S(){}function w(e){var t=e.data;return t.aborted=!0,C.apply(t.target,t.args)}var y=M(l,"open",(function(){return function(e,t){return e[r]=0==t[2],e[o]=t[1],y.apply(e,t)}})),b=f("fetchTaskAborting"),x=f("fetchTaskScheduling"),k=M(l,"send",(function(){return function(e,n){if(!0===t.current[x])return k.apply(e,n);if(e[r])return k.apply(e,n);var i={target:e,url:e[o],isPeriodic:!1,args:n,aborted:!1},a=p("XMLHttpRequest.send",S,i,g,w);e&&!0===e[s]&&!i.aborted&&"scheduled"===a.state&&a.invoke()}})),C=M(l,"abort",(function(){return function(e,r){var i=e[n];if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}else if(!0===t.current[b])return C.apply(e,r)}}))}(e);var n=f("xhrTask"),r=f("xhrSync"),i=f("xhrListener"),a=f("xhrScheduled"),o=f("xhrURL"),s=f("xhrErrorBeforeScheduled")})),Zone.__load_patch("geolocation",(function(e){e.navigator&&e.navigator.geolocation&&function(e,t){for(var r=e.constructor.name,i=function(i){var a=t[i],o=e[a];if(o){if(!w(n(e,a)))return"continue";e[a]=function(e){var t=function(){return e.apply(this,S(arguments,r+"."+a))};return A(t,e),t}(o)}},a=0;a<t.length;a++)i(a)}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])})),Zone.__load_patch("PromiseRejectionEvent",(function(e,t){function n(t){return function(n){z(e,t).forEach((function(r){var i=e.PromiseRejectionEvent;if(i){var a=new i(t,{promise:n.promise,reason:n.rejection});r.invoke(a)}}))}}e.PromiseRejectionEvent&&(t[f("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[f("rejectionHandledHandler")]=n("rejectionhandled"))}))})()}).call(this,n(369))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){ArrayBuffer.prototype.subarray=function(e,t){for(var n=new ArrayBuffer(t),r=new Int8Array(n),i=new Int8Array(this),a=0;a<t;a++)r[a]=i[e+a];return n}},function(e,t,n){"use strict";(function(e){var t=n(0),r=function(){function n(e,t){this.$q=e,this.ViewStateService=t,this.vals={},this.curDbConfig={},this.initDbConfig={},this.embeddedVals={audioGetUrl:"",labelGetUrl:"",labelType:"",fromUrlParams:!1}}return n.prototype.onlyUnique=function(e,t,n){return n.indexOf(e)===t},n.prototype.setVals=function(n){var r=this;e.isEmptyObject(this.vals)?this.vals=n:Object.keys(n).forEach((function(e){t.isArray(r.vals[e])?(r.vals[e]=[],n[e].forEach((function(t){r.vals[e].push(t)}))):Object.keys(n[e]).forEach((function(t){void 0!==r.vals[e][t]?r.vals[e][t]=n[e][t]:console.error("BAD ENTRY IN CONFIG! Key1: "+e+" key2: "+t)}))}))},n.prototype.getDelta=function(e){var t=this.$q.defer(),n=this.getDeltas(e,this.initDbConfig);return t.resolve(n),t.promise},n.prototype.getDeltas=function(e,n){var r=this,i={};return e.forEach((function(e,a){t.equals(e,n[a])||(Array.isArray(e)?(i[a]=[],t.copy(e,i[a])):"object"==typeof e?(i[a]={},i[a]=r.getDeltas(e,n[a])):"clear"!==a&&"openDemoDB"!==a&&"specSettings"!==a&&(i[a]=e))})),i},n.prototype.getSsffTrackConfig=function(e){var t;return void 0!==this.curDbConfig.ssffTrackDefinitions&&this.curDbConfig.ssffTrackDefinitions.forEach((function(n){n.name===e&&(t=n)})),t},n.prototype.getValueLimsOfTrack=function(e){var t={};return void 0!==this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.minMaxValLims&&this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.minMaxValLims.forEach((function(n){n.ssffTrackName===e&&(t=n)})),t},n.prototype.getHorizontalLinesOfTrack=function(e){var t;return void 0!==this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.horizontalLines&&this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.horizontalLines.forEach((function(n){n.ssffTrackName===e&&(t=n)})),t},n.prototype.getContourLimsOfTrack=function(e){var t={};return this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.contourLims.forEach((function(n){n.ssffTrackName===e&&(t=n)})),t},n.prototype.getContourColorsOfTrack=function(e){var t;return void 0!==this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.contourColors&&this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.contourColors.forEach((function(n){n.ssffTrackName===e&&(t=n)})),t},n.prototype.getAssignment=function(e){var t={};return this.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.assign.forEach((function(n){n.signalCanvasName===e&&(t=n)})),t},n.prototype.getLevelDefinition=function(e){var t={};return this.curDbConfig.levelDefinitions.forEach((function(n){n.name===e&&(t=n)})),t},n.prototype.getAttrDefsNames=function(e){var t=[];return this.getLevelDefinition(e).attributeDefinitions.forEach((function(e){t.push(e.name)})),t},n.prototype.setPerspectivesOrder=function(e,t){void 0!==this.vals&&void 0!==this.vals.perspectives&&void 0!==this.vals.perspectives[e]&&void 0!==this.vals.perspectives[e].levelCanvases&&(this.vals.perspectives[e].levelCanvases.order=t)},n.prototype.getStrRep=function(e){var t;switch(e){case 8:t="BACKSPACE";break;case 9:t="TAB";break;case 13:t="ENTER";break;case 16:t="SHIFT";break;case 18:t="ALT";break;case 32:t="SPACE";break;case 37:t="←";break;case 39:t="→";break;case 38:t="↑";break;case 40:t="↓";break;case 42:case 43:t="+";break;case 45:case 95:t="-";break;default:t=String.fromCharCode(e)}return t},n.prototype.findAllTracksInDBconfigNeededByEMUwebApp=function(){var e=this.curDbConfig,t=[];e.levelDefinitions.forEach((function(e){void 0!==e.anagestConfig&&(t.push(e.anagestConfig.verticalPosSsffTrackName),t.push(e.anagestConfig.velocitySsffTrackName))})),e.EMUwebAppConfig.perspectives.forEach((function(e){e.signalCanvases.order.forEach((function(e){t.push(e)})),void 0!==e.signalCanvases.assign&&e.signalCanvases.assign.forEach((function(e){t.push(e.ssffTrackName)})),void 0!==e.twoDimCanvases&&("EPG"===e.twoDimCanvases.order[0]&&t.push("EPG"),void 0!==e.twoDimCanvases.twoDimDrawingDefinitions&&e.twoDimCanvases.twoDimDrawingDefinitions.forEach((function(e){e.dots.forEach((function(e){t.push(e.xSsffTrack),t.push(e.ySsffTrack)}))})))}));var n=(t=t.filter(this.onlyUnique)).indexOf("OSCI");n>-1&&t.splice(n,1);var r=t.indexOf("SPEC");r>-1&&t.splice(r,1);var i=[];return e.ssffTrackDefinitions.forEach((function(e){t.indexOf(e.name)>-1&&i.push(e)})),i},n}();t.module("emuwebApp").service("ConfigProviderService",["$q","ViewStateService",r])}).call(this,n(19))},function(e,t,n){"use strict";(function(e){var t=n(0),r=n(1),i=n.n(r),a=function(){function t(e,t,n,r,i,a,o,s,l,c,u,h,p,f){this.$rootScope=e,this.$timeout=t,this.ViewStateService=n,this.ModalService=r,this.HierarchyManipulationService=i,this.SoundHandlerService=a,this.ConfigProviderService=o,this.HistoryService=s,this.LevelService=l,this.DataService=c,this.LinkService=u,this.AnagestService=h,this.DbObjLoadSaveService=p,this.BrowserDetectorService=f}return t.prototype.bindGlobalKeys=function(){var t=this;e(document).on("keyup",(function(e){var n=e.keyCode?e.keyCode:e.which;t.ViewStateService.isEditing()&&!t.ViewStateService.getcursorInTextField()&&t.applyKeyCodeUp(n)})),e(document).on("keydown",(function(e){var n=e.keyCode?e.keyCode:e.which;8!==n&&9!==n&&27!==n&&37!==n&&38!==n&&39!==n&&40!==n&&32!==n||t.applyKeyCode(n,e)})),e(document).on("keypress",(function(e){var n=e.keyCode?e.keyCode:e.which;t.applyKeyCode(n,e)}))},t.prototype.applyKeyCodeUp=function(t){var n=this;this.$rootScope.$apply((function(){if(t!==n.ConfigProviderService.vals.keyMappings.esc&&t!==n.ConfigProviderService.vals.keyMappings.createNewItemAtSelection){var r=e("."+n.LevelService.getlasteditArea()),i=r.val();n.ViewStateService.setSavingAllowed(!0);var a=n.ViewStateService.getCurAttrIndex(n.ViewStateService.getcurClickLevelName()),o=n.ConfigProviderService.getLevelDefinition(n.ViewStateService.getcurClickLevelName()),s={};void 0!==o.attributeDefinitions&&o.attributeDefinitions.length>0&&(s=n.ConfigProviderService.getLevelDefinition(n.ViewStateService.getcurClickLevelName()).attributeDefinitions[a]),void 0!==s.legalLabels&&i.length>0&&s.legalLabels.indexOf(i)<0&&n.ViewStateService.setSavingAllowed(!1),n.ViewStateService.isSavingAllowed()?r.css({"background-color":"rgba(255,255,0,1)"}):r.css({"background-color":"rgba(255,0,0,1)"})}}))},t.prototype.applyKeyCode=function(t,n){var r=this;this.$rootScope.$apply((function(){var a,o,s,l,c,u,h,p,f,d,v,m,g,S,w;if(!r.ConfigProviderService.vals.main.catchMouseForKeyBinding||r.ViewStateService.mouseInEmuWebApp)if(r.ViewStateService.setlastKeyCode(t),r.ViewStateService.hierarchyState.isShown()&&void 0!==r.ViewStateService.hierarchyState)if(r.ViewStateService.hierarchyState.getInputFocus()){if(t===r.ConfigProviderService.vals.keyMappings.hierarchyCommitEdit){var y=r.ViewStateService.hierarchyState.getContextMenuID(),b=r.LevelService.getItemByID(y);l=r.LevelService.getLevelName(y),a=r.ViewStateService.getCurAttrIndex(l);var x=r.ConfigProviderService.getLevelDefinition(l).attributeDefinitions[a].legalLabels;o=r.ViewStateService.hierarchyState.getEditValue(),s=void 0!==b.labels[a]?b.labels[a].value:"",void 0!==o&&o!==s?(void 0===x||o.length>0&&x.indexOf(o)>=0)&&(r.LevelService.renameLabel(l,y,a,o),r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"RENAMELABEL",name:l,id:y,attrIndex:a,oldValue:s,newValue:o}),r.ViewStateService.hierarchyState.closeContextMenu()):r.ViewStateService.hierarchyState.closeContextMenu()}t===r.ConfigProviderService.vals.keyMappings.hierarchyCancelEdit&&r.ViewStateService.hierarchyState.closeContextMenu()}else{if(t===r.ConfigProviderService.vals.keyMappings.hierarchyDeleteLink&&n.preventDefault(),t===r.ConfigProviderService.vals.keyMappings.hierarchyPlayback&&(n.preventDefault(),r.ViewStateService.hierarchyState.playing+=1),t===r.ConfigProviderService.vals.keyMappings.hierarchyRotate&&r.ViewStateService.hierarchyState.toggleRotation(),t===r.ConfigProviderService.vals.keyMappings.hierarchyDeleteLink){var k=r.LinkService.deleteLink(r.ViewStateService.hierarchyState.selectedLinkFromID,r.ViewStateService.hierarchyState.selectedLinkToID);-1!==k&&r.HistoryService.addObjToUndoStack({type:"HIERARCHY",action:"DELETELINK",fromID:r.ViewStateService.hierarchyState.selectedLinkFromID,toID:r.ViewStateService.hierarchyState.selectedLinkToID,position:k})}if(t===r.ConfigProviderService.vals.keyMappings.hierarchyDeleteItem){var C=r.LevelService.deleteItemWithLinks(r.ViewStateService.hierarchyState.selectedItemID);void 0!==C.item&&r.HistoryService.addObjToUndoStack({type:"HIERARCHY",action:"DELETEITEM",item:C.item,levelName:C.levelName,position:C.position,deletedLinks:C.deletedLinks})}var $;t===r.ConfigProviderService.vals.keyMappings.hierarchyAddItemBefore&&-1!==($=r.LevelService.addItem(r.ViewStateService.hierarchyState.selectedItemID,!0))&&r.HistoryService.addObjToUndoStack({type:"HIERARCHY",action:"ADDITEM",newID:$,neighborID:r.ViewStateService.hierarchyState.selectedItemID,before:!0}),t===r.ConfigProviderService.vals.keyMappings.hierarchyAddItemAfter&&-1!==($=r.LevelService.addItem(r.ViewStateService.hierarchyState.selectedItemID,!1))&&r.HistoryService.addObjToUndoStack({type:"HIERARCHY",action:"ADDITEM",newID:$,neighborID:r.ViewStateService.hierarchyState.selectedItemID,before:!1}),t===r.ConfigProviderService.vals.keyMappings.levelUp&&r.ViewStateService.hierarchyState.curPathIdx>=1&&(r.ViewStateService.hierarchyState.curPathIdx=r.ViewStateService.hierarchyState.curPathIdx-1),t===r.ConfigProviderService.vals.keyMappings.levelDown&&r.ViewStateService.hierarchyState.curPathIdx<r.ViewStateService.hierarchyState.curNrOfPaths-1&&(r.ViewStateService.hierarchyState.curPathIdx=r.ViewStateService.hierarchyState.curPathIdx+1),t===r.ConfigProviderService.vals.keyMappings.undo&&r.HistoryService.undo(),t===r.ConfigProviderService.vals.keyMappings.redo&&r.HistoryService.redo(),n.shiftKey||t!==r.ConfigProviderService.vals.keyMappings.esc&&t!==r.ConfigProviderService.vals.keyMappings.showHierarchy||r.ModalService.close()}else if(r.ViewStateService.isEditing()){var P=e("."+r.LevelService.getlasteditArea());if(!r.ViewStateService.isSavingAllowed()&&t===r.ConfigProviderService.vals.keyMappings.createNewItemAtSelection){var E=r.ConfigProviderService.getLevelDefinition(r.ViewStateService.getcurClickLevelName()).attributeDefinitions[r.ViewStateService.getCurAttrIndex(r.ViewStateService.getcurClickLevelName())].legalLabels;n.preventDefault(),n.stopPropagation(),r.LevelService.deleteEditArea(),r.ViewStateService.setEditing(!1),r.ModalService.open("views/error.html",'Editing Error: Sorry, characters allowed on this Level are "'+JSON.stringify(E)+'"')}if(r.ViewStateService.isSavingAllowed()&&t===r.ConfigProviderService.vals.keyMappings.createNewItemAtSelection){var T=r.LevelService.getItemFromLevelById(r.ViewStateService.getcurClickLevelName(),r.LevelService.getlastID());a=r.ViewStateService.getCurAttrIndex(r.ViewStateService.getcurClickLevelName()),s="",o="",void 0!==T.labels[a]&&(s=T.labels[a].value),o=r.ConfigProviderService.vals.restrictions.useLargeTextInputField?r.ViewStateService.largeTextFieldInputFieldCurLabel:P.val(),r.LevelService.renameLabel(r.ViewStateService.getcurClickLevelName(),r.LevelService.getlastID(),r.ViewStateService.getCurAttrIndex(r.ViewStateService.getcurClickLevelName()),o),r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"RENAMELABEL",name:r.ViewStateService.getcurClickLevelName(),id:r.LevelService.getlastID(),attrIndex:a,oldValue:s,newValue:o}),r.LevelService.deleteEditArea(),r.ViewStateService.setEditing(!1),r.ViewStateService.setcurClickItem(r.LevelService.getItemFromLevelById(r.ViewStateService.getcurClickLevelName(),r.LevelService.getlastID()))}t===r.ConfigProviderService.vals.keyMappings.esc&&(r.LevelService.deleteEditArea(),r.ViewStateService.setEditing(!1)),t===r.ConfigProviderService.vals.keyMappings.playAllInView&&n.altKey&&r.ViewStateService.getPermission("playaudio")&&r.ConfigProviderService.vals.restrictions.playback&&(r.SoundHandlerService.playFromTo(r.ViewStateService.curViewPort.sS,r.ViewStateService.curViewPort.eS),r.ViewStateService.animatePlayHead(r.ViewStateService.curViewPort.sS,r.ViewStateService.curViewPort.eS)),3===t&&n.altKey&&r.ViewStateService.getPermission("playaudio")&&r.ConfigProviderService.vals.restrictions.playback&&(r.SoundHandlerService.playFromTo(r.ViewStateService.curViewPort.selectS,r.ViewStateService.curViewPort.selectE),r.ViewStateService.animatePlayHead(r.ViewStateService.curViewPort.selectS,r.ViewStateService.curViewPort.selectE)),t===r.ConfigProviderService.vals.keyMappings.playEntireFile&&n.altKey&&r.ViewStateService.getPermission("playaudio")&&r.ConfigProviderService.vals.restrictions.playback&&(r.SoundHandlerService.playFromTo(0,r.SoundHandlerService.audioBuffer.length),r.ViewStateService.animatePlayHead(0,r.SoundHandlerService.audioBuffer.length))}else if(!1===r.ViewStateService.getcursorInTextField()){var _,M,A;if(r.LevelService.deleteEditArea(),0===r.ViewStateService.curState.permittedActions.length&&t===r.ConfigProviderService.vals.keyMappings.esc&&!1===r.ModalService.force&&r.ModalService.close(),t===r.ConfigProviderService.vals.keyMappings.showHierarchy&&r.ConfigProviderService.vals.activeButtons.showHierarchy&&r.ViewStateService.curState!==r.ViewStateService.states.noDBorFilesloaded&&(r.ViewStateService.hierarchyState.isShown()?r.ModalService.close():(r.ViewStateService.hierarchyState.toggleHierarchy(),r.ModalService.open("views/showHierarchyModal.html"))),t===r.ConfigProviderService.vals.keyMappings.zoomAll&&r.ViewStateService.getPermission("zoom")&&r.ViewStateService.setViewPort(0,r.SoundHandlerService.audioBuffer.length),t===r.ConfigProviderService.vals.keyMappings.zoomIn&&r.ViewStateService.getPermission("zoom")&&r.ViewStateService.zoomViewPort(!0,r.LevelService),t===r.ConfigProviderService.vals.keyMappings.zoomOut&&r.ViewStateService.getPermission("zoom")&&r.ViewStateService.zoomViewPort(!1,r.LevelService),t===r.ConfigProviderService.vals.keyMappings.zoomSel&&r.ViewStateService.getPermission("zoom")&&r.ViewStateService.setViewPort(r.ViewStateService.curViewPort.selectS,r.ViewStateService.curViewPort.selectE),t===r.ConfigProviderService.vals.keyMappings.shiftViewPortLeft&&r.ViewStateService.getPermission("zoom")&&r.ViewStateService.shiftViewPort(!1),t===r.ConfigProviderService.vals.keyMappings.shiftViewPortRight&&r.ViewStateService.getPermission("zoom")&&r.ViewStateService.shiftViewPort(!0),t===r.ConfigProviderService.vals.keyMappings.playEntireFile&&r.ViewStateService.getPermission("playaudio")&&r.ConfigProviderService.vals.restrictions.playback&&(r.SoundHandlerService.playFromTo(0,r.SoundHandlerService.audioBuffer.length),r.ViewStateService.animatePlayHead(0,r.SoundHandlerService.audioBuffer.length)),t===r.ConfigProviderService.vals.keyMappings.playAllInView&&r.ViewStateService.getPermission("playaudio")&&r.ConfigProviderService.vals.restrictions.playback&&(n.shiftKey?(r.SoundHandlerService.playFromTo(r.ViewStateService.curViewPort.sS,r.SoundHandlerService.audioBuffer.length),r.ViewStateService.animatePlayHead(r.ViewStateService.curViewPort.sS,r.SoundHandlerService.audioBuffer.length,!0)):(r.SoundHandlerService.playFromTo(r.ViewStateService.curViewPort.sS,r.ViewStateService.curViewPort.eS),r.ViewStateService.animatePlayHead(r.ViewStateService.curViewPort.sS,r.ViewStateService.curViewPort.eS))),t===r.ConfigProviderService.vals.keyMappings.playSelected&&r.ViewStateService.getPermission("playaudio")&&r.ConfigProviderService.vals.restrictions.playback&&(r.SoundHandlerService.playFromTo(r.ViewStateService.curViewPort.selectS,r.ViewStateService.curViewPort.selectE),r.ViewStateService.animatePlayHead(r.ViewStateService.curViewPort.selectS,r.ViewStateService.curViewPort.selectE)),t===r.ConfigProviderService.vals.keyMappings.saveBndl&&r.ViewStateService.getPermission("saveBndlBtnClick")&&r.DbObjLoadSaveService.saveBundle(),t===r.ConfigProviderService.vals.keyMappings.selectFirstContourCorrectionTool&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.correctionTool&&(r.ViewStateService.curCorrectionToolNr=1),t===r.ConfigProviderService.vals.keyMappings.selectSecondContourCorrectionTool&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.correctionTool&&(r.ViewStateService.curCorrectionToolNr=2),t===r.ConfigProviderService.vals.keyMappings.selectThirdContourCorrectionTool&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.correctionTool&&(r.ViewStateService.curCorrectionToolNr=3),t===r.ConfigProviderService.vals.keyMappings.selectFourthContourCorrectionTool&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.correctionTool&&(r.ViewStateService.curCorrectionToolNr=4),t===r.ConfigProviderService.vals.keyMappings.selectFifthContourCorrectionTool&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.correctionTool&&(r.ViewStateService.curCorrectionToolNr=5),t===r.ConfigProviderService.vals.keyMappings.selectNoContourCorrectionTool&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.correctionTool&&(r.ViewStateService.curCorrectionToolNr=void 0),t===r.ConfigProviderService.vals.keyMappings.levelUp&&r.ViewStateService.getPermission("labelAction")&&r.ViewStateService.selectLevel(!1,r.ConfigProviderService.vals.perspectives[r.ViewStateService.curPerspectiveIdx].levelCanvases.order,r.LevelService),t===r.ConfigProviderService.vals.keyMappings.levelDown&&r.ViewStateService.getPermission("labelAction")&&r.ViewStateService.selectLevel(!0,r.ConfigProviderService.vals.perspectives[r.ViewStateService.curPerspectiveIdx].levelCanvases.order,r.LevelService),t===r.ConfigProviderService.vals.keyMappings.snapBoundaryToNearestTopBoundary&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.editItemSize&&(p=r.ViewStateService.getcurMouseItem(),l=r.ViewStateService.getcurMouseLevelName(),c=r.ViewStateService.getcurMouseLevelType(),u=r.ViewStateService.getcurMouseNeighbours(),!1===(h=r.LevelService.snapBoundary(!0,l,p,u,c))||("EVENT"===c?r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVEEVENT",name:l,id:p.id,movedBy:h}):"SEGMENT"===c&&r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVEBOUNDARY",name:l,id:p.id,movedBy:h,position:0}),r.HistoryService.addCurChangeObjToUndoStack())),t===r.ConfigProviderService.vals.keyMappings.snapBoundaryToNearestBottomBoundary&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.editItemSize&&(p=r.ViewStateService.getcurMouseItem(),l=r.ViewStateService.getcurMouseLevelName(),c=r.ViewStateService.getcurMouseLevelType(),u=r.ViewStateService.getcurMouseNeighbours(),!1===(h=r.LevelService.snapBoundary(!1,l,p,u,c))||("EVENT"===c?r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVEEVENT",name:l,id:p.id,movedBy:h}):"SEGMENT"===c&&r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVEBOUNDARY",name:l,id:p.id,movedBy:h,position:0}),r.HistoryService.addCurChangeObjToUndoStack())),t===r.ConfigProviderService.vals.keyMappings.snapBoundaryToNearestZeroCrossing)if(r.ViewStateService.getPermission("labelAction"))if(r.ConfigProviderService.vals.restrictions.editItemSize)0!==(_="SEGMENT"===r.ViewStateService.getcurMouseLevelType()?r.ViewStateService.getcurMouseisLast()?r.LevelService.calcDistanceToNearestZeroCrossing(r.ViewStateService.getcurMouseItem().sampleStart+r.ViewStateService.getcurMouseItem().sampleDur+1):r.LevelService.calcDistanceToNearestZeroCrossing(r.ViewStateService.getcurMouseItem().sampleStart):r.LevelService.calcDistanceToNearestZeroCrossing(r.ViewStateService.getcurMouseItem().samplePoint))&&(v=r.ViewStateService.getcurMouseItem(),l=r.ViewStateService.getcurMouseLevelName(),"SEGMENT"==(c=r.ViewStateService.getcurMouseLevelType())?(r.LevelService.moveBoundary(l,v.id,_,r.ViewStateService.getcurMouseisFirst(),r.ViewStateService.getcurMouseisLast()),M="MOVEBOUNDARY"):(r.LevelService.moveEvent(l,v.id,_),M="MOVEEVENT"),r.HistoryService.updateCurChangeObj({type:"ANNOT",action:M,name:l,id:v.id,movedBy:_,isFirst:r.ViewStateService.getcurMouseisFirst(),isLast:r.ViewStateService.getcurMouseisLast()}),r.HistoryService.addCurChangeObjToUndoStack());if(t===r.ConfigProviderService.vals.keyMappings.expandSelSegmentsRight&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.editItemSize&&(void 0===r.ViewStateService.getcurClickLevelName()?r.ModalService.open("views/error.html","Expand Segments Error: Please select a Level first"):0===r.ViewStateService.getselected().length?r.ModalService.open("views/error.html","Expand Segments Error: Please select one or more Segments first"):(A=parseInt(r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue,10),"relative"===r.ConfigProviderService.vals.labelCanvasConfig.addTimeMode&&(A=r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue*(r.SoundHandlerService.audioBuffer.length/100)),r.LevelService.expandSegment(!0,r.ViewStateService.getcurClickItems(),r.ViewStateService.getcurClickLevelName(),A),r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"EXPANDSEGMENTS",name:r.ViewStateService.getcurClickLevelName(),item:r.ViewStateService.getcurClickItems(),rightSide:!0,changeTime:A}),r.ViewStateService.selectBoundary())),t===r.ConfigProviderService.vals.keyMappings.expandSelSegmentsLeft&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.editItemSize&&(void 0===r.ViewStateService.getcurClickLevelName()?r.ModalService.open("views/error.html","Expand Segments Error: Please select a Level first"):0===r.ViewStateService.getselected().length?r.ModalService.open("views/error.html","Expand Segments Error: Please select one or more Segments first"):("absolute"===r.ConfigProviderService.vals.labelCanvasConfig.addTimeMode?A=parseInt(r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue,10):"relative"===r.ConfigProviderService.vals.labelCanvasConfig.addTimeMode?A=r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue*(r.SoundHandlerService.audioBuffer.length/100):r.ModalService.open("views/error.html","Expand Segements Error: Error in Configuration (Value labelCanvasConfig.addTimeMode)"),r.LevelService.expandSegment(!1,r.ViewStateService.getcurClickItems(),r.ViewStateService.getcurClickLevelName(),A),r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"EXPANDSEGMENTS",name:r.ViewStateService.getcurClickLevelName(),item:r.ViewStateService.getcurClickItems(),rightSide:!1,changeTime:A}),r.ViewStateService.selectBoundary())),t===r.ConfigProviderService.vals.keyMappings.shrinkSelSegmentsLeft&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.editItemSize&&(void 0===r.ViewStateService.getcurClickLevelName()?r.ModalService.open("views/error.html","Expand Segments Error: Please select a Level first"):0===r.ViewStateService.getselected().length?r.ModalService.open("views/error.html","Expand Segments Error: Please select one or more Segments first"):("absolute"===r.ConfigProviderService.vals.labelCanvasConfig.addTimeMode?A=parseInt(r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue,10):"relative"===r.ConfigProviderService.vals.labelCanvasConfig.addTimeMode?A=r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue*(r.SoundHandlerService.audioBuffer.length/100):r.ModalService.open("views/error.html","Expand Segements Error: Error in Configuration (Value labelCanvasConfig.addTimeMode)"),r.LevelService.expandSegment(!0,r.ViewStateService.getcurClickItems(),r.ViewStateService.getcurClickLevelName(),-A),r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"EXPANDSEGMENTS",name:r.ViewStateService.getcurClickLevelName(),item:r.ViewStateService.getcurClickItems(),rightSide:!0,changeTime:-A}),r.ViewStateService.selectBoundary())),t===r.ConfigProviderService.vals.keyMappings.shrinkSelSegmentsRight&&r.ViewStateService.getPermission("labelAction")&&r.ConfigProviderService.vals.restrictions.editItemSize&&(void 0===r.ViewStateService.getcurClickLevelName()?r.ModalService.open("views/error.html","Expand Segments Error: Please select a Level first"):0===r.ViewStateService.getselected().length?r.ModalService.open("views/error.html","Expand Segments Error: Please select one or more Segments first"):("absolute"===r.ConfigProviderService.vals.labelCanvasConfig.addTimeMode?A=parseInt(r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue,10):"relative"===r.ConfigProviderService.vals.labelCanvasConfig.addTimeMode?A=r.ConfigProviderService.vals.labelCanvasConfig.addTimeValue*(r.SoundHandlerService.audioBuffer.length/100):r.ModalService.open("views/error.html","Expand Segements Error: Error in Configuration (Value labelCanvasConfig.addTimeMode)"),r.LevelService.expandSegment(!1,r.ViewStateService.getcurClickItems(),r.ViewStateService.getcurClickLevelName(),-A),r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"EXPANDSEGMENTS",name:r.ViewStateService.getcurClickLevelName(),item:r.ViewStateService.getcurClickItems(),rightSide:!1,changeTime:-A}),r.ViewStateService.selectBoundary())),t===r.ConfigProviderService.vals.keyMappings.toggleSideBarLeft&&r.ViewStateService.getPermission("toggleSideBars")&&r.ConfigProviderService.vals.activeButtons.openMenu&&r.ViewStateService.toggleBundleListSideBar(i.a.animationPeriod),t===r.ConfigProviderService.vals.keyMappings.toggleSideBarRight&&r.ViewStateService.getPermission("toggleSideBars")&&r.ConfigProviderService.vals.activeButtons.openMenu&&r.ViewStateService.setPerspectivesSideBarOpen(!r.ViewStateService.getPerspectivesSideBarOpen()),t===r.ConfigProviderService.vals.keyMappings.selectItemsInSelection&&r.ViewStateService.getPermission("labelAction"))if(void 0===r.ViewStateService.getcurClickLevelName())r.ModalService.open("views/error.html","Selection Error : Please select a Level first");else{r.ViewStateService.curClickItems=[];var D=null;r.ViewStateService.getItemsInSelection(r.DataService.data.levels).forEach((function(e){null===D?r.ViewStateService.setcurClickItem(e):r.ViewStateService.setcurClickItemMultiple(e,D),D=e})),r.ViewStateService.selectBoundary()}if(t===r.ConfigProviderService.vals.keyMappings.selPrevItem&&r.ViewStateService.getPermission("labelAction")&&r.ViewStateService.getcurClickItems().length>0&&(f=r.LevelService.getItemNeighboursFromLevel(r.ViewStateService.getcurClickLevelName(),r.ViewStateService.getcurClickItems()[0].id,r.ViewStateService.getcurClickItems()[r.ViewStateService.getcurClickItems().length-1].id),d=r.LevelService.getItemNeighboursFromLevel(r.ViewStateService.getcurClickLevelName(),f.left.id,f.left.id),void 0!==f.left&&(void 0!==f.left.sampleStart?f.left.sampleStart>r.ViewStateService.curViewPort.sS&&(n.shiftKey?(r.ViewStateService.setcurClickItemMultiple(f.left,d.right),r.LevelService.setlasteditArea("_"+f.left.id)):(r.ViewStateService.setcurClickItem(f.left),r.LevelService.setlasteditArea("_"+f.left.id)),r.ViewStateService.selectBoundary()):f.left.samplePoint>r.ViewStateService.curViewPort.sS&&(n.shiftKey?(r.ViewStateService.setcurClickItemMultiple(f.left,d.right),r.LevelService.setlasteditArea("_"+f.left.id)):(r.ViewStateService.setcurClickItem(f.left),r.LevelService.setlasteditArea("_"+f.left.id)),r.ViewStateService.selectBoundary()))),t===r.ConfigProviderService.vals.keyMappings.selNextItem&&r.ViewStateService.getPermission("labelAction")&&r.ViewStateService.getcurClickItems().length>0&&(f=r.LevelService.getItemNeighboursFromLevel(r.ViewStateService.getcurClickLevelName(),r.ViewStateService.getcurClickItems()[0].id,r.ViewStateService.getcurClickItems()[r.ViewStateService.getcurClickItems().length-1].id),d=r.LevelService.getItemNeighboursFromLevel(r.ViewStateService.getcurClickLevelName(),f.right.id,f.right.id),void 0!==f.right&&(void 0!==f.right.sampleStart?f.right.sampleStart+f.right.sampleDur<r.ViewStateService.curViewPort.eS&&(n.shiftKey?(r.ViewStateService.setcurClickItemMultiple(f.right,d.left),r.LevelService.setlasteditArea("_"+f.right.id)):(r.ViewStateService.setcurClickItem(f.right),r.LevelService.setlasteditArea("_"+f.right.id)),r.ViewStateService.selectBoundary()):f.right.samplePoint<r.ViewStateService.curViewPort.eS&&(n.shiftKey?(r.ViewStateService.setcurClickItemMultiple(f.right,d.left),r.LevelService.setlasteditArea("_"+f.right.id)):(r.ViewStateService.setcurClickItem(f.right),r.LevelService.setlasteditArea("_"+f.right.id)),r.ViewStateService.selectBoundary()))),t===r.ConfigProviderService.vals.keyMappings.selNextPrevItem&&r.ViewStateService.getPermission("labelAction")&&r.ViewStateService.getcurClickItems().length>0){var L=r.ViewStateService.getcurClickItems()[0].id,V=r.ViewStateService.getcurClickItems()[r.ViewStateService.getcurClickItems().length-1].id;f=r.LevelService.getItemNeighboursFromLevel(r.ViewStateService.getcurClickLevelName(),L,V),n.shiftKey?void 0!==f.left&&(void 0!==f.left.sampleStart?f.left.sampleStart>=r.ViewStateService.curViewPort.sS&&(r.ViewStateService.setcurClickItem(f.left),r.LevelService.setlasteditArea("_"+f.left.id)):f.left.samplePoint>=r.ViewStateService.curViewPort.sS&&(r.ViewStateService.setcurClickItem(f.left,f.left.id),r.LevelService.setlasteditArea("_"+f.left.id))):void 0!==f.right&&(void 0!==f.right.sampleStart?f.right.sampleStart+f.right.sampleDur<=r.ViewStateService.curViewPort.eS&&(r.ViewStateService.setcurClickItem(f.right),r.LevelService.setlasteditArea("_"+f.right.id)):f.right.samplePoint<r.ViewStateService.curViewPort.eS&&(r.ViewStateService.setcurClickItem(f.right),r.LevelService.setlasteditArea("_"+f.right.id)))}if(t===r.ConfigProviderService.vals.keyMappings.createNewItemAtSelection)if(r.ModalService.isOpen)!1===r.ModalService.force&&r.ModalService.confirmContent();else if(void 0===r.ViewStateService.curClickLevelIndex)r.ModalService.open("views/error.html","Modify Error: Please select a Segment or Event Level first.");else if(r.ViewStateService.getPermission("labelAction"))if(r.ConfigProviderService.vals.restrictions.addItem)if(r.ViewStateService.getselectedRange().start===r.ViewStateService.curViewPort.selectS&&r.ViewStateService.getselectedRange().end===r.ViewStateService.curViewPort.selectE)1===r.ViewStateService.getcurClickItems().length?r.ViewStateService.getselectedRange().start>=r.ViewStateService.curViewPort.sS&&r.ViewStateService.getselectedRange().end<=r.ViewStateService.curViewPort.eS&&(r.ViewStateService.setEditing(!0),r.LevelService.openEditArea(r.ViewStateService.getcurClickItems()[0],r.LevelService.getlasteditAreaElem(),r.ViewStateService.getcurClickLevelType()),r.ViewStateService.setcursorInTextField(!0)):r.ModalService.open("views/error.html","Modify Error: Please select a single Segment.");else if(-1===r.ViewStateService.curViewPort.selectE&&-1===r.ViewStateService.curViewPort.selectS)r.ModalService.open("views/error.html","Error : Please select a Segment or Point to modify it's name. Or select a level plus a range in the viewport in order to insert a new Segment.");else if(v=r.LevelService.getClosestItem(r.ViewStateService.curViewPort.selectS,r.ViewStateService.getcurClickLevelName(),r.SoundHandlerService.audioBuffer.length).current,"SEGMENT"===r.ViewStateService.getcurClickLevelType())void 0===v?(m=r.LevelService.insertSegment(r.ViewStateService.getcurClickLevelName(),r.ViewStateService.curViewPort.selectS,r.ViewStateService.curViewPort.selectE,r.ConfigProviderService.vals.labelCanvasConfig.newSegmentName)).ret?r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"INSERTSEGMENTS",name:r.ViewStateService.getcurClickLevelName(),start:r.ViewStateService.curViewPort.selectS,end:r.ViewStateService.curViewPort.selectE,ids:m.ids,segName:r.ConfigProviderService.vals.labelCanvasConfig.newSegmentName}):r.ModalService.open("views/error.html","Error : You are not allowed to insert a Segment here."):v.sampleStart===r.ViewStateService.curViewPort.selectS&&v.sampleStart+v.sampleDur+1===r.ViewStateService.curViewPort.selectE?(r.LevelService.setlasteditArea("_"+v.id),r.LevelService.openEditArea(v,r.LevelService.getlasteditAreaElem(),r.ViewStateService.getcurClickLevelType()),r.ViewStateService.setEditing(!0)):(m=r.LevelService.insertSegment(r.ViewStateService.getcurClickLevelName(),r.ViewStateService.curViewPort.selectS,r.ViewStateService.curViewPort.selectE,r.ConfigProviderService.vals.labelCanvasConfig.newSegmentName)).ret?r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"INSERTSEGMENTS",name:r.ViewStateService.getcurClickLevelName(),start:r.ViewStateService.curViewPort.selectS,end:r.ViewStateService.curViewPort.selectE,ids:m.ids,segName:r.ConfigProviderService.vals.labelCanvasConfig.newSegmentName}):r.ModalService.open("views/error.html","Error : You are not allowed to insert a Segment here.");else if(void 0===r.ConfigProviderService.getLevelDefinition(r.ViewStateService.getcurClickLevelName()).anagestConfig){var I=r.LevelService.insertEvent(r.ViewStateService.getcurClickLevelName(),r.ViewStateService.curViewPort.selectS,r.ConfigProviderService.vals.labelCanvasConfig.newEventName);I.alreadyExists?(r.LevelService.setlasteditArea("_"+v.id),r.LevelService.openEditArea(v,r.LevelService.getlasteditAreaElem(),r.ViewStateService.getcurClickLevelType()),r.ViewStateService.setEditing(!0)):r.HistoryService.addObjToUndoStack({type:"ANNOT",action:"INSERTEVENT",name:r.ViewStateService.getcurClickLevelName(),start:r.ViewStateService.curViewPort.selectS,id:I.id,pointName:r.ConfigProviderService.vals.labelCanvasConfig.newEventName})}else r.AnagestService.insertAnagestEvents();if(t===r.ConfigProviderService.vals.keyMappings.undo&&r.ViewStateService.getPermission("labelAction")&&r.HistoryService.undo(),t===r.ConfigProviderService.vals.keyMappings.redo&&r.ViewStateService.getPermission("labelAction")&&r.HistoryService.redo(),"Digit1"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(0,r.ConfigProviderService.vals.perspectives),"Digit2"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(1,r.ConfigProviderService.vals.perspectives),"Digit3"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(2,r.ConfigProviderService.vals.perspectives),"Digit4"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(3,r.ConfigProviderService.vals.perspectives),"Digit5"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(4,r.ConfigProviderService.vals.perspectives),"Digit6"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(5,r.ConfigProviderService.vals.perspectives),"Digit7"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(6,r.ConfigProviderService.vals.perspectives),"Digit8"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(7,r.ConfigProviderService.vals.perspectives),"Digit9"===n.originalEvent.code&&n.shiftKey&&r.ViewStateService.switchPerspective(8,r.ConfigProviderService.vals.perspectives),t===r.ConfigProviderService.vals.keyMappings.deletePreselBoundary&&r.ViewStateService.getPermission("labelAction")){n.preventDefault(),v=r.ViewStateService.getcurMouseItem();var O=r.ViewStateService.getcurClickItems(),N=r.ViewStateService.getcurMouseisFirst(),B=r.ViewStateService.getcurMouseisLast();l=r.ViewStateService.getcurMouseLevelName();var F=r.ViewStateService.getcurMouseLevelType();if(n.shiftKey)r.ConfigProviderService.vals.restrictions.deleteItem&&void 0!==O&&O.length>0&&("SEGMENT"===r.ViewStateService.getcurClickLevelType()?(S=r.LevelService.deleteSegments(l,O[0].id,O.length),r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"DELETESEGMENTS",name:l,id:O[0].id,length:O.length,deletedSegment:S}),w=r.LinkService.deleteLinkSegment(O),r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"DELETELINKSEGMENT",name:l,segments:O,deletedLinks:w}),r.HistoryService.addCurChangeObjToUndoStack(),void 0!==(g=r.LevelService.getClosestItem(r.ViewStateService.getLasPcm()+r.ViewStateService.curViewPort.sS,l,r.SoundHandlerService.audioBuffer.length)).current&&void 0!==g.nearest&&(f=r.LevelService.getItemNeighboursFromLevel(l,g.nearest.id,g.nearest.id),r.ViewStateService.setcurMouseItem(g.nearest,f,r.ViewStateService.getLasPcm(),g.isFirst,g.isLast)),r.ViewStateService.setcurClickItem(S.clickSeg)):r.ModalService.open("views/error.html","Delete Error: You can not delete Segments on Point Levels."));else if(r.ConfigProviderService.vals.restrictions.deleteItemBoundary&&void 0!==v){var R=r.LevelService.getItemNeighboursFromLevel(l,v.id,v.id);if("SEGMENT"===F)S=r.LevelService.deleteBoundary(l,v.id,N,B),r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"DELETEBOUNDARY",name:l,id:v.id,isFirst:N,isLast:B,deletedSegment:S}),void 0!==R.left?(w=r.LinkService.deleteLinkBoundary(v.id,R.left.id,r.LevelService),r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"DELETELINKBOUNDARY",name:l,id:v.id,neighbourId:R.left.id,deletedLinks:w})):(w=r.LinkService.deleteLinkBoundary(v.id,-1,r.LevelService),r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"DELETELINKBOUNDARY",name:l,id:v.id,neighbourId:-1,deletedLinks:w})),r.HistoryService.addCurChangeObjToUndoStack(),void 0!==(g=r.LevelService.getClosestItem(r.ViewStateService.getLasPcm()+r.ViewStateService.curViewPort.sS,l,r.SoundHandlerService.audioBuffer.length)).current&&void 0!==g.nearest&&(f=r.LevelService.getItemNeighboursFromLevel(l,g.nearest.id,g.nearest.id),r.ViewStateService.setcurMouseItem(g.nearest,f,r.ViewStateService.getLasPcm(),g.isFirst,g.isLast)),r.ViewStateService.setcurClickItem(S.clickSeg);else{var H=r.LevelService.deleteEvent(l,v.id);!1!==H?(r.HistoryService.updateCurChangeObj({type:"ANNOT",action:"DELETEEVENT",name:l,start:H.samplePoint,id:H.id,pointName:H.labels[0].value}),r.HistoryService.addCurChangeObjToUndoStack(),void 0!==(g=r.LevelService.getClosestItem(r.ViewStateService.getLasPcm()+r.ViewStateService.curViewPort.sS,l,r.SoundHandlerService.audioBuffer.length)).current&&void 0!==g.nearest&&(f=r.LevelService.getItemNeighboursFromLevel(l,g.nearest.id,g.nearest.id),r.ViewStateService.setcurMouseItem(g.nearest,f,r.ViewStateService.getLasPcm(),g.isFirst,g.isLast))):r.ViewStateService.setcurMouseItem(void 0,void 0,void 0,void 0,void 0)}}}n.metaKey||n.ctrlKey||(n.preventDefault(),n.stopPropagation())}}))},t}();t.module("emuwebApp").service("HandleGlobalKeyStrokes",["$rootScope","$timeout","ViewStateService","ModalService","HierarchyManipulationService","SoundHandlerService","ConfigProviderService","HistoryService","LevelService","DataService","LinkService","AnagestService","DbObjLoadSaveService","BrowserDetectorService",a])}).call(this,n(19))},function(e,t,n){"use strict";(function(e){var t=n(0),r=function(){function n(e,t,n,r,i,a,o,s,l,c,u){this.undoStack=[],this.redoStack=[],this.curChangeObj={},this.movesAwayFromLastSave=0,this.$log=e,this.$compile=t,this.$sce=n,this.SsffDataService=r,this.LevelService=i,this.LinkService=a,this.ConfigProviderService=o,this.ViewStateService=s,this.SoundHandlerService=l,this.LoadedMetaDataService=c,this.PublisherService=u}return n.prototype.applyChange=function(e,t){var n=this;Object.keys(e).forEach((function(r){var i,a,o=e[r];if("SSFF"===o.type)t?(n.setHistoryActionText(!0,"SSFF manipulation"),i=n.ConfigProviderService.getSsffTrackConfig(o.trackName),n.SsffDataService.getColumnOfTrack(i.name,i.columnName).values[o.sampleBlockIdx][o.sampleIdx]=o.oldValue):(n.setHistoryActionText(!1,"SSFF manipulation"),i=n.ConfigProviderService.getSsffTrackConfig(o.trackName),n.SsffDataService.getColumnOfTrack(i.name,i.columnName).values[o.sampleBlockIdx][o.sampleIdx]=o.newValue);else if("WEBAPP"===o.type){switch(a=!1,o.action){case"COMMENT":t?(a=!0,n.LoadedMetaDataService.setBndlComment(o.initial,o.key,o.index)):n.LoadedMetaDataService.setBndlComment(o.comment,o.key,o.index);break;case"FINISHED":t?(a=!0,n.LoadedMetaDataService.setBndlFinished(!o.finished,o.key,o.index)):n.LoadedMetaDataService.setBndlFinished(o.finished,o.key,o.index)}n.setHistoryActionText(a,o.action)}else if("ANNOT"===o.type){switch(a=!1,o.action){case"MOVEBOUNDARY":t?(a=!0,n.LevelService.moveBoundary(o.name,o.id,-o.movedBy,o.isFirst,o.isLast)):n.LevelService.moveBoundary(o.name,o.id,o.movedBy,o.isFirst,o.isLast);break;case"MOVESEGMENT":t?(a=!0,n.LevelService.moveSegment(o.name,o.id,o.length,-o.movedBy)):n.LevelService.moveSegment(o.name,o.id,o.length,o.movedBy);break;case"MOVEEVENT":t?(a=!0,n.LevelService.moveEvent(o.name,o.id,-o.movedBy)):n.LevelService.moveEvent(o.name,o.id,o.movedBy);break;case"RENAMELABEL":t?(a=!0,n.LevelService.renameLabel(o.name,o.id,o.attrIndex,o.oldValue)):n.LevelService.renameLabel(o.name,o.id,o.attrIndex,o.newValue);break;case"RENAMELEVEL":t?(a=!0,n.LevelService.renameLevel(o.newname,o.name,o.curPerspectiveIdx)):n.LevelService.renameLevel(o.name,o.newname,o.curPerspectiveIdx);break;case"DELETELEVEL":t?(a=!0,n.LevelService.insertLevel(o.level,o.id,o.curPerspectiveIdx)):n.LevelService.deleteLevel(o.id,o.curPerspectiveIdx);break;case"DELETEBOUNDARY":t?(a=!0,n.LevelService.deleteBoundaryInvers(o.name,o.id,o.isFirst,o.isLast,o.deletedSegment)):n.LevelService.deleteBoundary(o.name,o.id,o.isFirst,o.isLast);break;case"DELETESEGMENTS":t?(a=!0,n.LevelService.deleteSegmentsInvers(o.name,o.id,o.length,o.deletedSegment)):n.LevelService.deleteSegments(o.name,o.id,o.length);break;case"DELETEEVENT":t?(a=!0,n.LevelService.insertEvent(o.name,o.start,o.pointName,o.id)):n.LevelService.deleteEvent(o.name,o.id);break;case"DELETELINKSTO":t?(a=!0,n.LinkService.insertLinksTo(o.deletedLinks)):n.LinkService.deleteLinksTo(o.id);break;case"DELETELINKBOUNDARY":t?(a=!0,n.LinkService.deleteLinkBoundaryInvers(o.deletedLinks)):n.LinkService.deleteLinkBoundary(o.id,o.neighbourId,n.LevelService);break;case"DELETELINKSEGMENT":t?(a=!0,n.LinkService.deleteLinkSegmentInvers(o.deletedLinks)):n.LinkService.deleteLinkSegment(o.segments);break;case"INSERTLEVEL":t?(a=!0,n.LevelService.deleteLevel(o.id,o.curPerspectiveIdx)):n.LevelService.insertLevel(o.level,o.id,o.curPerspectiveIdx);break;case"INSERTSEGMENTS":t?(a=!0,n.LevelService.insertSegmentInvers(o.name,o.start,o.end,o.segName)):n.LevelService.insertSegment(o.name,o.start,o.end,o.segName,o.ids);break;case"INSERTEVENT":t?(a=!0,n.LevelService.deleteEvent(o.name,o.id)):n.LevelService.insertEvent(o.name,o.start,o.pointName,o.id);break;case"INSERTLINKSTO":t?(a=!0,n.LinkService.deleteLinksTo(o.parentID,o.childIDs)):n.LinkService.insertLinksTo(o.parentID,o.childIDs);break;case"EXPANDSEGMENTS":t?(a=!0,n.LevelService.expandSegment(o.rightSide,o.item,o.name,-o.changeTime)):n.LevelService.expandSegment(o.rightSide,o.item,o.name,o.changeTime)}n.setHistoryActionText(a,o.action)}else if("HIERARCHY"===o.type){switch(a=!1,o.action){case"DELETELINK":t?(a=!0,n.LinkService.insertLinkAt(o.fromID,o.toID,o.position)):n.LinkService.deleteLink(o.fromID,o.toID);break;case"DELETEITEM":t?(a=!0,n.LevelService.deleteItemWithLinksInvers(o.item,o.levelName,o.position,o.deletedLinks)):n.LevelService.deleteItemWithLinks(o.item.id);break;case"ADDITEM":t?(a=!0,n.LevelService.addItemInvers(o.newID)):n.LevelService.addItem(o.neighborID,o.before,o.newID);break;case"ADDLINK":t?(a=!0,n.LinkService.deleteLink(o.link.fromID,o.link.toID)):n.LinkService.insertLink(o.link.fromID,o.link.toID);break;case"PUSHITEM":t?(a=!0,n.LevelService.addItemInvers(o.newID)):n.LevelService.pushNewItem(o.level,o.newID)}n.setHistoryActionText(a,o.action)}}))},n.prototype.updateCurChangeObj=function(e){var t;if("SSFF"===e.type)t=String(e.type+"#"+e.trackName)+"#"+String(e.sampleBlockIdx)+"#"+String(e.sampleIdx),this.curChangeObj[t]?(e.oldValue=this.curChangeObj[t].oldValue,this.curChangeObj[t]=e):this.curChangeObj[t]=e;else if("WEBAPP"===e.type)t=String(e.type+"#"+e.action+"#"+e.key+"#"+e.index),this.curChangeObj[t]?(e.comment=this.curChangeObj[t].comment,this.curChangeObj[t]=e):this.curChangeObj[t]=e;else if("ANNOT"===e.type)switch(e.action){case"MOVEBOUNDARY":case"MOVEEVENT":case"MOVESEGMENT":case"INSERTEVENT":case"DELETEEVENT":t=String(e.type+"#"+e.action+"#"+e.name+"#"+e.id),this.curChangeObj[t]?(e.movedBy+=this.curChangeObj[t].movedBy,this.curChangeObj[t]=e):this.curChangeObj[t]=e;break;case"INSERTLINKSTO":case"DELETELINKSTO":case"DELETELINKBOUNDARY":case"DELETELINKSEGMENT":case"DELETEBOUNDARY":case"DELETESEGMENTS":t=String(e.type+"#"+e.action+"#"+e.name),this.curChangeObj[t]?(e.oldValue=this.curChangeObj[t].oldValue,this.curChangeObj[t]=e):this.curChangeObj[t]=e}return this.curChangeObj},n.prototype.addCurChangeObjToUndoStack=function(){this.redoStack=[],e.isEmptyObject(this.curChangeObj)||(this.undoStack.push(this.curChangeObj),this.movesAwayFromLastSave+=1,this.PublisherService.publishUnsavedBundleToParentWindow()),this.$log.info(this.curChangeObj),this.curChangeObj={}},n.prototype.addObjToUndoStack=function(n){this.redoStack=[];var r={};r[String(n.type+"#"+n.action+"#"+n.name+"#"+n.id)]=t.copy(n),e.isEmptyObject(r)||(this.undoStack.push(r),this.movesAwayFromLastSave+=1,this.PublisherService.publishUnsavedBundleToParentWindow()),this.curChangeObj={}},n.prototype.undo=function(){if(this.undoStack.length>0){var e=t.copy(this.undoStack[this.undoStack.length-1]);this.redoStack.push(e),this.applyChange(e,!0),this.undoStack.pop(),this.movesAwayFromLastSave-=1,this.PublisherService.publishUnsavedBundleToParentWindow()}},n.prototype.redo=function(){if(this.redoStack.length>0){var e=t.copy(this.redoStack[this.redoStack.length-1]);this.undoStack.push(e),this.applyChange(e,!1),this.redoStack.pop(),this.movesAwayFromLastSave+=1,this.PublisherService.publishUnsavedBundleToParentWindow()}},n.prototype.getNrOfPossibleUndos=function(){return this.undoStack.length},n.prototype.getCurrentStack=function(){return{undo:this.undoStack,redo:this.redoStack}},n.prototype.setHistoryActionText=function(e,t){var n="<i>UNDO</i> &#8594; ";e||(n="<i>REDO</i> &#8592; "),this.ViewStateService.historyActionTxt=this.$sce.trustAsHtml(n+t)},n.prototype.resetToInitState=function(){this.undoStack=[],this.redoStack=[],this.curChangeObj={},this.movesAwayFromLastSave=0},n}();t.module("emuwebApp").service("HistoryService",["$log","$compile","$sce","SsffDataService","LevelService","LinkService","ConfigProviderService","ViewStateService","SoundHandlerService","LoadedMetaDataService","PublisherService",r])}).call(this,n(19))},function(e,t,n){"use strict";(function(e){var t=n(0),r=function(){function n(e,t,n,r,i,a){this.$q=e,this.DataService=t,this.LinkService=n,this.ConfigProviderService=r,this.SoundHandlerService=i,this.ViewStateService=a,this.lasteditArea=null,this.lasteditAreaElem=null}return n.prototype.getLabelIdx=function(e,t){var n;return t.forEach((function(t,r){t.name===e&&(n=r)})),n},n.prototype.getLevelDetails=function(e){var t=null,n=this.DataService.getLevelData();return void 0!==n&&n.forEach((function(n){n.name===e&&(t=n)})),t},n.prototype.getLevelDetailsByIdx=function(e){var t=null;return void 0===(t=this.DataService.getLevelData()[e])&&(t=null),t},n.prototype.getLevelsByType=function(e){var t=[];return this.DataService.getLevelData().forEach((function(n){e.indexOf(n.type)>=0&&t.push(n)})),t},n.prototype.getOrderById=function(e,t){var n=null;return this.DataService.getLevelData().forEach((function(r){r.name===e&&r.items.forEach((function(e,r){e.id===t&&(n=r)}))})),n},n.prototype.getIdByOrder=function(e,t){var n=null;return this.DataService.getLevelData().forEach((function(r){r.name===e&&r.items.forEach((function(e,r){r===t&&(n=e.id)}))})),n},n.prototype.getItemDetails=function(e,t){var n=null;return this.DataService.getLevelData().forEach((function(r){r.name===e&&(n=r.items[t])})),n},n.prototype.getLastItem=function(e){var t=null;return this.DataService.getLevelData().forEach((function(n){n.name===e&&(t=n.items[n.items.length-1])})),t},n.prototype.getNextItem=function(e,t){var n=null;return this.DataService.getLevelData().forEach((function(r){r.name===e&&r.items.forEach((function(e,i){e.id===t&&(n=r.items[i+1])}))})),n},n.prototype.getItemInTime=function(e,t,n){var r=null,i=1/0,a=this.getItemFromLevelById(e,t);if(null!==a){var o=a.sampleStart||a.samplePoint;this.DataService.getLevelData().forEach((function(t){t.name===e&&t.items.forEach((function(e){var t=e.sampleStart||e.samplePoint;n?t>o&&t-o<=i&&(i=t-o,r=e):t<o&&o-t<=i&&(i=o-t,r=e)}))}))}return r},n.prototype.getItemFromLevelById=function(e,t){var n=null;return this.DataService.getLevelData().forEach((function(r){r.name===e&&r.items.forEach((function(e){e.id===t&&(n=e)}))})),n},n.prototype.getAllLabelsOfLevel=function(e){var t=this.ViewStateService.getCurAttrDef(e.name),n=[];return e.items.forEach((function(e){var r=e.labels.map((function(e){return e.name})).indexOf(t);r>=0&&n.push(e.labels[r].value)})),n},n.prototype.getLevelName=function(e){var t=null;return this.DataService.getLevelData().forEach((function(n){n.items.map((function(e){return e.id})).indexOf(e)>=0&&(t=n.name)})),t},n.prototype.getLevelAndItem=function(e){var t=this.getLevelName(e);return null!==t?{level:this.getLevelDetails(t),item:this.getItemByID(e)}:null},n.prototype.getItemByID=function(e){var t;return this.DataService.getLevelData().forEach((function(n){var r=n.items.map((function(e){return e.id})).indexOf(e);r>=0&&(t=n.items[r])})),t},n.prototype.getItemsFromLevelByIdAndLength=function(e,t,n){for(var r=[],i=t,a=0;a<n;a++){var o=this.getItemFromLevelById(e,i);i=this.getNextItem(e,o.id),r.push(o)}return r},n.prototype.getlasteditAreaElem=function(){return this.lasteditAreaElem},n.prototype.setlasteditAreaElem=function(e){this.lasteditAreaElem=e},n.prototype.setlasteditArea=function(e){this.lasteditArea=e},n.prototype.getlasteditArea=function(){return this.lasteditArea},n.prototype.getlastID=function(){return parseInt(this.lasteditArea.substr(1))},n.prototype.deleteEditArea=function(){null!==this.getlasteditArea()&&e("."+this.getlasteditArea()).remove(),this.ViewStateService.editing=!1,this.ViewStateService.largeTextFieldInputFieldCurLabel="",this.ViewStateService.largeTextFieldInputFieldVisable=!1},n.prototype.openEditArea=function(e,t,n){var r,i,a,o=this.ViewStateService.getcurClickLevelName(),s=this.ViewStateService.getCurAttrDef(o),l=this.getLabelIdx(s,e.labels),c=t.find("canvas")[0],u=c.clientWidth,h=c.offsetLeft,p=c.offsetTop,f=c.clientHeight-1,d=10;void 0!==l&&e.labels[l].value.length>0&&(d=7*e.labels[l].value.length);var v="";e.labels.length>0&&(v=void 0!==e.labels[l]?e.labels[l].value:""),this.ConfigProviderService.vals.restrictions.useLargeTextInputField?(this.ViewStateService.largeTextFieldInputFieldVisable=!0,this.ViewStateService.largeTextFieldInputFieldCurLabel=v):("SEGMENT"===n?(r=Math.floor(this.ViewStateService.getPos(u,e.sampleStart)+h),i=Math.ceil(this.ViewStateService.getPos(u,e.sampleStart+e.sampleDur+1)+h),this.createEditAreaElement(t,r,p,i-r,f,e.labels[l].value,e.id)):(r=this.ViewStateService.getPos(u,e.samplePoint)+h-d/2,(a=(i=this.ViewStateService.getPos(u,e.samplePoint)+h+d/2)-r)<2*d&&(a=2*d),this.createEditAreaElement(t,r,p,a,f,v,e.id)),this.createSelection(t.find("textarea")[0],0,v.length))},n.prototype.createSelection=function(e,t,n){if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n),r.select()}else e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n);e.focus()},n.prototype.createEditAreaElement=function(t,n,r,i,a,o,s){var l="_"+s,c={left:Math.round(n+2)+"px",top:Math.round(r+1)+"px",width:Math.round(i)-2+"px",height:Math.round(a)-20+"px","padding-top":Math.round(a/3+1)+"px"};void 0!==this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontFamily&&(c["font-family"]=this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.labelFontFamily),t.prepend(e("<textarea>").attr({id:l,class:l+" emuwebapp-label-edit","ng-model":"message",autofocus:"true"}).css(c).text(o))},n.prototype.insertItemDetails=function(e,t,n,r,i,a){var o,s=this.ConfigProviderService.getLevelDefinition(t).attributeDefinitions;this.ViewStateService.getCurAttrDef(t);void 0===s&&(s=[]),this.DataService.getLevelData().forEach((function(l){var c;if(l.name===t){if("SEGMENT"===l.type)if(o={id:e,sampleStart:i,sampleDur:a,labels:[]},s.length>0)for(c=0;c<s.length;c++)s[c].name,o.labels.push({name:s[c].name,value:r});else o.labels.push({name:t,value:r});else if("EVENT"===l.type)if(o=void 0!==i?{id:e,samplePoint:i,labels:[]}:{id:e,labels:[]},s.length>0)for(c=0;c<s.length;c++)s[c].name,o.labels.push({name:s[c].name,value:r});else o.labels.push({name:t,value:r});l.items.splice(n,0,o)}}))},n.prototype.updateSegment=function(e,t,n,r,i,a){this.DataService.getLevelData().forEach((function(o){o.name===e&&o.items.forEach((function(e){e.id===t&&(void 0!==i&&(e.sampleStart=i),void 0!==a&&(e.sampleDur=a),void 0!==n&&(e.labels[r].value=n))}))}))},n.prototype.updatePoint=function(e,t,n,r,i){this.DataService.getLevelData().forEach((function(a){a.name===e&&a.items.forEach((function(e){e.id===t&&(e.samplePoint=i,void 0===r?e.labels[0].value=n:e.labels[r].value=n)}))}))},n.prototype.getItemNeighboursFromLevel=function(e,t,n){var r,i;return this.DataService.getLevelData().forEach((function(a){a.name===e&&a.items.forEach((function(e,o){e.id===t&&(r=a.items[o-1]),e.id===n&&(i=a.items[o+1])}))})),{left:r,right:i}},n.prototype.getClosestItem=function(e,t,n){var r,i,a,o,s=this.getLevelDetails(t);if(null!=s&&s.items.length>0)if(r=i=s.items[0],a=!0,o=!1,"SEGMENT"===s.type){var l;s.items.forEach((function(t,n){e>=t.sampleStart-.5&&(e<=t.sampleStart+t.sampleDur+.5&&(e-t.sampleStart>=t.sampleDur/2?(l=!1,void 0!==s.items[n+1]?(r=s.items[n],i=s.items[n+1],o=!1):(o=!0,r=i=s.items[s.items.length-1])):(l=!0,o=!1,r=i=s.items[n])),l||0!==n||(a=!1)),e>=t.sampleStart-.5&&(e<=t.sampleStart+t.sampleDur+.5?r=t:(o=!0,r=i=s.items[s.items.length-1]))}))}else{var c=0,u=0;a=!1,o=!1,s.items.forEach((function(t,a){u=a<s.items.length-1?t.samplePoint+(s.items[a+1].samplePoint-s.items[a].samplePoint)/2:n,c=a>0?t.samplePoint-(s.items[a].samplePoint-s.items[a-1].samplePoint)/2:0,e<=u&&e>=c&&(r=i=t)}))}return{current:r,nearest:i,isFirst:a,isLast:o}},n.prototype.deleteLevel=function(e,t){var n=this.DataService.getLevelDataAt(e);return this.DataService.deleteLevelDataAt(e),this.ConfigProviderService.vals.perspectives[t].levelCanvases.order.splice(e,1),n},n.prototype.insertLevel=function(e,n,r){console.log("[EMU] LevelService.insertLevel called",t.copy(e),n,r),void 0===this.DataService.getLevelData()&&this.DataService.setLevelData([]),console.log("[EMU] LevelService inserting at index",n,"current levels",t.copy(this.DataService.getLevelData())),this.DataService.insertLevelDataAt(n,e),this.ConfigProviderService.vals.perspectives[r].levelCanvases.order.splice(n,0,e.name),console.log("[EMU] LevelService post-insert levels",t.copy(this.DataService.getLevelData())),console.log("[EMU] LevelService updated order",t.copy(this.ConfigProviderService.vals.perspectives[r].levelCanvases.order))},n.prototype.renameLabel=function(e,t,n,r){this.updateSegment(e,t,r,n,void 0,void 0)},n.prototype.renameLevel=function(e,t,n){var r=this;this.DataService.getLevelData().forEach((function(n){n.name===e&&(n.name=t,r.ViewStateService.curLevelAttrDefs.forEach((function(t,n){t.curAttrDefName===e&&t.levelName===e&&r.ViewStateService.curLevelAttrDefs.slice(n,1)})),r.ViewStateService.curLevelAttrDefs.push({curAttrDefName:t,levelName:t}),n.items.forEach((function(e){e.labels[0].name=t})))})),this.ConfigProviderService.vals.perspectives[n].levelCanvases.order[this.ConfigProviderService.vals.perspectives[n].levelCanvases.order.indexOf(e)]=t},n.prototype.deleteSegmentsInvers=function(e,t,n,r){var i,a,o,s=this.ViewStateService.getCurAttrDef(e);o=0,this.DataService.getLevelData().forEach((function(t){if(t.name===e)for(a in o=r.order,r.segments)t.items.splice(o++,0,r.segments[a])}));var l=this.getItemNeighboursFromLevel(e,r.segments[0].id,r.segments[r.segments.length-1].id);void 0!==l.left&&void 0===l.right?(i=this.getLabelIdx(s,l.left.labels),this.updateSegment(e,l.left.id,l.left.labels[i].value,i,l.left.sampleStart,l.left.sampleDur-r.timeRight)):void 0===l.left&&void 0!==l.right?(i=this.getLabelIdx(s,l.right.labels),this.updateSegment(e,l.right.id,l.right.labels[i].value,i,l.right.sampleStart+r.timeLeft,l.right.sampleDur-r.timeLeft)):void 0===l.left&&void 0===l.right||(i=this.getLabelIdx(s,l.left.labels),this.updateSegment(e,l.left.id,l.left.labels[i].value,i,l.left.sampleStart,l.left.sampleDur-r.timeLeft),this.updateSegment(e,l.right.id,l.right.labels[i].value,i,l.right.sampleStart+r.timeRight,l.right.sampleDur-r.timeRight))},n.prototype.deleteSegments=function(e,t,n){for(var r=this.getItemFromLevelById(e,t),i=this.getOrderById(e,t),a=this.getItemDetails(e,i+n-1),o=this.getItemNeighboursFromLevel(e,r.id,a.id),s=0,l=0,c=null,u=null,h=null,p=this.ViewStateService.getCurAttrDef(e),f=this.getLabelIdx(p,r.labels),d=i;d<i+n;d++)s+=this.getItemDetails(e,d).sampleDur+1;return l=s%2==0?s/=2:(s=Math.ceil(s/2))-1,this.DataService.getLevelData().forEach((function(r){r.name===e&&r.items.forEach((function(e,i){e.id===t&&(c=i,u=r.items.splice(c,n))}))})),void 0!==o.left&&void 0===o.right?(this.updateSegment(e,o.left.id,void 0,f,o.left.sampleStart,o.left.sampleDur+l),h=o.left):void 0===o.left&&void 0!==o.right?(this.updateSegment(e,o.right.id,void 0,f,o.right.sampleStart-s,o.right.sampleDur+s),h=o.right):void 0===o.left&&void 0===o.right?this.ViewStateService.setcurMouseItem(void 0,void 0,void 0):(this.updateSegment(e,o.left.id,void 0,f,o.left.sampleStart,o.left.sampleDur+s),this.updateSegment(e,o.right.id,void 0,f,o.right.sampleStart-l,o.right.sampleDur+l),h=o.left),{order:c,segments:u,timeLeft:s,timeRight:l,clickSeg:h}},n.prototype.insertSegmentInvers=function(e,t,n){var r=!0;return this.DataService.getLevelData().forEach((function(i){var a,o,s;i.name===e&&(t===n?(s=-1,i.items.forEach((function(e,n){t===e.sampleStart&&(s=n,r=!0)})),r&&(a=0,void 0!==i.items[s]&&(a=i.items[s].sampleDur+1),void 0!==i.items[s-1]&&(i.items[s-1].sampleDur+=a),i.items.splice(s,1))):(s=-1,i.items.forEach((function(e,n){t===e.sampleStart&&(s=n,r=!0)})),r&&(void 0===i.items[s+1]?i.items.splice(s-1,2):(void 0===i.items[s-1]||(a=i.items[s].sampleDur+1,o=i.items[s+1].sampleDur+1,i.items[s-1].sampleDur+=a+o),i.items.splice(s,2)))))})),r},n.prototype.insertSegment=function(e,t,n,r,i){var a=this,o=!0;return this.DataService.getLevelData().forEach((function(s){var l,c,u,h;if(s.name===e)if(t===n){if(0===s.items.length)return{ret:!1,ids:i};if(void 0===i&&((i=[])[0]=a.DataService.getNewId()),u=-1,t<s.items[0].sampleStart)l=s.items[0].sampleStart-t,a.insertItemDetails(i[0],e,0,r,t,l-1);else if(t>s.items[s.items.length-1].sampleStart+s.items[s.items.length-1].sampleDur){var p=s.items[s.items.length-1].sampleStart+s.items[s.items.length-1].sampleDur+1;a.insertItemDetails(i[0],e,s.items.length,r,p,t-p)}else s.items.forEach((function(e,n){t>=e.sampleStart&&t<=e.sampleStart+e.sampleDur&&(u=n),e.sampleStart===t&&(o=!1),e.sampleStart+e.sampleDur+1===t&&(o=!1)})),o&&(l=t-s.items[u].sampleStart-1,a.insertItemDetails(i[0],e,u+1,r,t,s.items[u].sampleDur-l-1),s.items[u].sampleDur=l)}else if(void 0===i&&((i=[])[0]=a.DataService.getNewId(),i[1]=a.DataService.getNewId()),0===s.items.length)a.insertItemDetails(i[0],e,0,r,t,n-t-1);else if(n<s.items[0].sampleStart)l=s.items[0].sampleStart-n-1,c=n-t-1,a.insertItemDetails(i[0],e,0,r,n,l),a.insertItemDetails(i[1],e,0,r,t,c);else if(t>s.items[s.items.length-1].sampleStart+s.items[s.items.length-1].sampleDur){l=t-(s.items[s.items.length-1].sampleStart+s.items[s.items.length-1].sampleDur)-1,c=n-t-1;var f=s.items.length;a.insertItemDetails(i[0],e,f,r,s.items[s.items.length-1].sampleStart+s.items[s.items.length-1].sampleDur,l),a.insertItemDetails(i[1],e,f+1,r,t,c)}else u=-1,h=-1,s.items.forEach((function(e,r){t>=e.sampleStart&&t<=e.sampleStart+e.sampleDur&&(u=r),n>=e.sampleStart&&n<=e.sampleStart+e.sampleDur&&(h=r)})),(o=u===h)&&-1!==u&&(l=t-s.items[u].sampleStart-1,c=n-t-1,a.insertItemDetails(i[0],e,u+1,r,t,c),a.insertItemDetails(i[1],e,u+2,r,n,s.items[u].sampleDur-l-1-c-1),s.items[u].sampleDur=l)})),{ret:o,ids:i}},n.prototype.insertEvent=function(e,t,n,r){var i,a=!1;return this.DataService.getLevelData().forEach((function(n){n.name===e&&"EVENT"===n.type&&(n.items.length>0?n.items[0].samplePoint:0,n.items.forEach((function(e,n){Math.floor(t)===Math.floor(e.samplePoint)&&(a=!0),t>e.samplePoint&&(i=n+1)})))})),a||(void 0===r&&(r=this.DataService.getNewId()),this.insertItemDetails(r,e,i,n,t,-1)),{alreadyExists:a,id:r}},n.prototype.deleteEvent=function(e,t){var n=!1;return this.DataService.getLevelData().forEach((function(r){r.name===e&&"EVENT"===r.type&&r.items.forEach((function(e,i){n||t===e.id&&(n=e,r.items.splice(i,1))}))})),n},n.prototype.deleteBoundary=function(e,t,n,r){var i=this.getItemFromLevelById(e,t),a=null,o=null,s=null,l=null;return this.DataService.getLevelData().forEach((function(t){t.name===e&&(a=t.items[0],t.items.forEach((function(e,c){if("SEGMENT"===t.type&&i.sampleStart===e.sampleStart&&i.sampleDur===e.sampleDur)if(0===c&&n)t.items.splice(c,1),o=c,s=e,l=t.items[0];else if(c===t.items.length-1&&r)t.items.splice(c,1),o=c,s=e,l=t.items[t.items.length-1];else{for(var u=0;u<a.labels.length;u++)a.labels[u].value+=e.labels[u].value;a.sampleDur+=e.sampleDur+1,t.items.splice(c,1),o=c,s=e,l=a}a=e})),null===l&&(l=t.items[0]))})),{order:o,event:s,clickSeg:l}},n.prototype.deleteBoundaryInvers=function(e,t,n,r,i){this.DataService.getLevelData().forEach((function(t){if(t.name===e){t.items.splice(i.order,0,i.event);var a=i.event.labels[0].value;n||r||(a=t.items[i.order-1].labels[0].value.slice(0,t.items[i.order-1].labels[0].value.length-i.event.labels[0].value.length),t.items[i.order-1].labels[0].value=a,t.items[i.order-1].sampleDur-=i.event.sampleDur+1)}}))},n.prototype.snapBoundary=function(e,t,n,r,i){var a,o,s,l,c,u=this,h=1/0;return"SEGMENT"===i?l=n.sampleStart:"EVENT"===i&&(l=n.samplePoint),this.DataService.getLevelData().forEach((function(n,r){if(n.name===t){var i,p=u.ConfigProviderService.vals.perspectives[u.ViewStateService.curPerspectiveIdx].levelCanvases.order,f=p.indexOf(t);if(e){if(!(f>=1))return!1;i=p[f-1]}else{if(!(f<p.length-1))return!1;i=p[f+1]}u.DataService.getLevelData().forEach((function(e){e.name===i&&(a=e).items.forEach((function(e){"SEGMENT"===a.type?c=e.sampleStart:"EVENT"===a.type&&(c=e.samplePoint),(o=Math.abs(l-c))<h&&(h=o,s=c-l)}))}))}})),void 0!==s&&("SEGMENT"===i?this.moveBoundary(t,n.id,s,!1,!1):"EVENT"===i&&this.moveEvent(t,n.id,s),s)},n.prototype.moveBoundary=function(e,t,n,r,i){var a,o=this.getItemFromLevelById(e,t),s=this.ViewStateService.getCurAttrDef(e),l=this.getLabelIdx(s,o.labels),c=this.getItemNeighboursFromLevel(e,t,t);if(r)void 0!==(a=c.right)?o.sampleStart+n>=0&&o.sampleStart+n<a.sampleStart&&this.updateSegment(e,o.id,void 0,l,o.sampleStart+n,o.sampleDur-n):o.sampleStart+n>=0&&o.sampleDur-n>=0&&o.sampleStart+o.sampleDur+n<=this.SoundHandlerService.audioBuffer.length&&this.updateSegment(e,o.id,void 0,l,o.sampleStart+n,o.sampleDur-n);else if(i)o.sampleDur+n>=0&&o.sampleDur+o.sampleStart+n<=this.SoundHandlerService.audioBuffer.length&&this.updateSegment(e,o.id,void 0,l,o.sampleStart,o.sampleDur+n);else if(void 0===c.left)void 0!==(a=c.right)?o.sampleStart+n>=0&&o.sampleStart+n<a.sampleStart&&this.updateSegment(e,o.id,void 0,l,o.sampleStart+n,o.sampleDur-n):o.sampleStart+n>=0&&o.sampleStart+o.sampleDur+n<=this.SoundHandlerService.audioBuffer.length&&this.updateSegment(e,o.id,void 0,l,o.sampleStart+n,o.sampleDur-n);else{var u=c.left;u.sampleDur+n>=0&&o.sampleStart+n>=0&&o.sampleDur-n>=0&&(this.updateSegment(e,c.left.id,void 0,l,u.sampleStart,u.sampleDur+n),this.updateSegment(e,o.id,void 0,l,o.sampleStart+n,o.sampleDur-n))}},n.prototype.moveEvent=function(e,t,n){var r=this,i=this.getItemFromLevelById(e,t),a=this.ViewStateService.getCurAttrDef(e),o=this.getLabelIdx(a,i.labels);if(this.LinkService.isLinked(t)){var s=this.getItemNeighboursFromLevel(e,t,t);i.samplePoint+n>0&&i.samplePoint+n<=this.SoundHandlerService.audioBuffer.length&&(void 0!==s.left&&void 0!==s.right?i.samplePoint+n>s.left.samplePoint&&i.samplePoint+n<s.right.samplePoint&&this.updatePoint(e,i.id,i.labels[0].value,o,i.samplePoint+n):void 0===s.left&&void 0===s.right?this.updatePoint(e,i.id,i.labels[0].value,o,i.samplePoint+n):void 0===s.left&&void 0!==s.right?i.samplePoint+n>0&&i.samplePoint+n<s.right.samplePoint&&this.updatePoint(e,i.id,i.labels[0].value,o,i.samplePoint+n):void 0!==s.left&&void 0===s.right&&i.samplePoint+n>s.left.samplePoint&&i.samplePoint+n<=this.SoundHandlerService.audioBuffer.length&&this.updatePoint(e,i.id,i.labels[0].value,o,i.samplePoint+n))}else i.samplePoint+n>0&&i.samplePoint+n<=this.SoundHandlerService.audioBuffer.length&&this.updatePoint(e,i.id,i.labels[0].value,o,i.samplePoint+n),this.DataService.getLevelData().forEach((function(t){t.name===e&&t.items.sort(r.ViewStateService.sortbystart)}))},n.prototype.orderPoints=function(e,t){return e.samplePoint>t.samplePoint?1:e.samplePoint<t.samplePoint?-1:0},n.prototype.moveSegment=function(e,t,n,r){var i,a,o=this.getOrderById(e,t),s=this.getItemDetails(e,o),l=this.getItemDetails(e,o+n-1);if(null!==s&&null!==l){var c=this.getItemNeighboursFromLevel(e,s.id,l.id),u=this.ViewStateService.getCurAttrDef(e),h=this.getLabelIdx(u,s.labels);if(void 0===c.left&&void 0!==c.right){var p=this.getItemFromLevelById(e,c.right.id);if(s.sampleStart+r>0&&c.right.sampleDur-r>=0)for(this.updateSegment(e,p.id,void 0,h,p.sampleStart+r,p.sampleDur-r),a=o;a<o+n;a++)i=this.getItemDetails(e,a),this.updateSegment(e,i.id,void 0,h,i.sampleStart+r,i.sampleDur)}else if(void 0===c.right&&void 0!==c.left){var f=this.getItemFromLevelById(e,c.left.id);if(c.left.sampleDur+r>=0&&l.sampleStart+l.sampleDur+r<this.SoundHandlerService.audioBuffer.length)for(this.updateSegment(e,f.id,void 0,h,f.sampleStart,f.sampleDur+r),a=o;a<o+n;a++)i=this.getItemDetails(e,a),this.updateSegment(e,i.id,void 0,h,i.sampleStart+r,i.sampleDur)}else if(void 0!==c.right&&void 0!==c.left){var d=this.getItemFromLevelById(e,c.left.id),v=this.getItemFromLevelById(e,c.right.id);if(d.sampleDur+r>=0&&v.sampleDur-r>=0)for(this.updateSegment(e,d.id,void 0,h,d.sampleStart,d.sampleDur+r),this.updateSegment(e,v.id,void 0,h,v.sampleStart+r,v.sampleDur-r),a=o;a<o+n;a++)i=this.getItemDetails(e,a),this.updateSegment(e,i.id,void 0,h,i.sampleStart+r,i.sampleDur)}else if(void 0===c.right&&void 0===c.left){var m=this.getItemDetails(e,o),g=this.getItemDetails(e,o+n-1);if(m.sampleStart+r>0&&g.sampleDur+g.sampleStart+r<this.SoundHandlerService.audioBuffer.length)for(a=o;a<o+n;a++)i=this.getItemDetails(e,a),this.updateSegment(e,i.id,void 0,h,i.sampleStart+r,i.sampleDur)}}},n.prototype.expandSegment=function(e,t,n,r){var i,a=this,o=0,s=this.getItemNeighboursFromLevel(n,t[0].id,t[t.length-1].id),l=this.ViewStateService.getCurAttrDef(n),c=this.getLabelIdx(l,t[0].labels),u=!0;e?void 0===s.right?t[t.length-1].sampleStart+t[t.length-1].sampleDur+r*t.length<=this.SoundHandlerService.audioBuffer.length&&t.forEach((function(e){i=a.getItemFromLevelById(n,e.id),a.updateSegment(n,i.id,void 0,c,i.sampleStart+o,i.sampleDur+r),o+=r})):(t.forEach((function(e){e.sampleDur+1+r<0&&(u=!1)})),u&&s.right.sampleDur-r*t.length>0&&(t.forEach((function(e){i=a.getItemFromLevelById(n,e.id),a.updateSegment(n,i.id,void 0,c,i.sampleStart+o,i.sampleDur+r),o+=r})),this.updateSegment(n,s.right.id,void 0,c,s.right.sampleStart+o,s.right.sampleDur-o))):void 0===s.left?this.getItemDetails(n,0).sampleStart+r*(t.length+1)>0&&t.forEach((function(e){i=a.getItemFromLevelById(n,e.id),a.updateSegment(n,i.id,void 0,i.sampleStart-r,c,i.sampleDur+r)})):(t.forEach((function(e){e.sampleDur+1+r<0&&(u=!1)})),u&&s.left.sampleDur-r*t.length>0&&(o=0,t.forEach((function(e,s){i=a.getItemFromLevelById(n,e.id),o=-(t.length-s)*r,a.updateSegment(n,i.id,void 0,c,i.sampleStart+o,i.sampleDur+r)})),this.updateSegment(n,s.left.id,void 0,c,s.left.sampleStart,s.left.sampleDur-t.length*r)))},n.prototype.calcDistanceToNearestZeroCrossing=function(e){var t,n=1/0,r=1/0,i=this.SoundHandlerService.audioBuffer.getChannelData(this.ViewStateService.osciSettings.curChannel);for(t=e;t<this.SoundHandlerService.audioBuffer.length-1;t++)if(i[t]>=0&&i[t+1]<0||i[t]<0&&i[t+1]>=0){n=t-e;break}for(t=e;t>1;t--)if(i[t]>=0&&i[t-1]<0||i[t]<0&&i[t-1]>=0){r=t-e;break}return Math.abs(r)<Math.abs(n)?r:n+1},n.prototype.pushNewItem=function(e,t){var n=this.getLevelDetails(e);if(console.debug(e,n,t),"ITEM"===n.type){var r;r="number"==typeof t?{id:t,labels:[]}:{id:this.DataService.getNewId(),labels:[]};for(var i=this.ConfigProviderService.getLevelDefinition(n.name).attributeDefinitions,a=0;a<i.length;++a)"STRING"===i[a].type?r.labels.push({name:i[a].name,value:""}):r.labels.push({name:i[a].name,value:null});return n.items.push(r),r.id}return-1},n.prototype.addItem=function(e,t,n){if(void 0===e)return-1;if("boolean"!=typeof t)return-1;var r=this.getLevelAndItem(e);if(null===r)return console.debug("Could not find item with id:",e),-1;var i=r.level,a=r.item;if("ITEM"===i.type){var o,s,l=i.items.indexOf(a);o=!0===t?l:l+1,s=void 0===n?{id:this.DataService.getNewId(),labels:[]}:{id:n,labels:[]};for(var c=this.ConfigProviderService.getLevelDefinition(i.name).attributeDefinitions,u=0;u<c.length;++u)"STRING"===c[u].type?s.labels.push({name:c[u].name,value:""}):s.labels.push({name:c[u].name,value:null});return i.items.splice(o,0,s),s.id}return-1},n.prototype.addItemInvers=function(e){for(var t=this.DataService.getLevelData(),n=0;n<t.length;++n)for(var r=0;r<t[n].items.length;++r)if(t[n].items[r].id===e)return void t[n].items.splice(r,1)},n.prototype.deleteItemWithLinks=function(e){var t={item:void 0,levelName:void 0,position:void 0,deletedLinks:[]},n=this.getLevelAndItem(e);if(null===n)return t;var r=n.level,i=n.item;if("ITEM"!==r.type)return t;t.item=i,t.levelName=r.name,t.position=r.items.indexOf(i),r.items.splice(r.items.indexOf(i),1);for(var a=this.DataService.getLinkData(),o=a.length-1;o>=0;--o)a[o].fromID!==e&&a[o].toID!==e||(t.deletedLinks.push(a[o]),a.splice(o,1));return t},n.prototype.deleteItemWithLinksInvers=function(e,t,n,r){this.getLevelDetails(t).items.splice(n,0,e);for(var i=0;i<r.length;++i)this.DataService.insertLinkData(r[i])},n}();t.module("emuwebApp").service("LevelService",["$q","DataService","LinkService","ConfigProviderService","SoundHandlerService","ViewStateService",r])}).call(this,n(19))},function(e,t,n){var r=n(5),i=n(376);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(378);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuwebapp-text small,.emuwebapp-text div span,.emuwebapp-text{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large,.emuwebapp-text table td,.emuwebapp-text table th,.emuwebapp-text h4,.emuwebapp-text h1,.emuwebapp-text h2,.emuwebapp-text h3{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code,.emuwebapp-text pre{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input,.emuwebapp-text input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-text{margin-left:50px;margin-right:50px;margin-top:50px;padding-left:18px;padding-right:18px;word-wrap:break-word;padding-bottom:120px;-webkit-user-select:text !important;-ms-user-select:text !important;-moz-user-select:text !important;-o-user-select:text !important;user-select:text !important}.emuwebapp-text input.ng-invalid.ng-touched{background-color:red}.emuwebapp-text .red{color:red}.emuwebapp-text .emuwebapp-sort-line{border:0;border-bottom:1px dashed #ccc;background:#999}.emuwebapp-text .emuwebapp-sortOuter{list-style-type:none;text-align:left}.emuwebapp-text .emuwebapp-sort{list-style-type:none;width:60%;margin-top:15px;margin-bottom:15px;margin-left:20%}.emuwebapp-text .emuwebapp-sort li{border:1px dashed #fff}.emuwebapp-text .emuwebapp-sort li:hover{background:#0dc5ff;cursor:n-resize}.emuwebapp-text input{-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;-webkit-box-sizing:content-box;-ms-box-sizing:content-box;-moz-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box;outline:none}.emuwebapp-text strong{font-weight:bold !important}.emuwebapp-text div{margin-left:25px;margin-right:25px;margin-top:0}.emuwebapp-text div p{text-align:left}.emuwebapp-text div span{text-align:center}.emuwebapp-text img[alt=icon]{width:100px}.emuwebapp-text h1,.emuwebapp-text h2,.emuwebapp-text h3{position:relative;margin-top:1em;margin-bottom:16px;padding-bottom:.3em;line-height:1.255;display:block}.emuwebapp-text h1{font-size:27.2px;font-weight:bold;border:1px solid #fff}.emuwebapp-text h2{font-size:20.8px;font-weight:bold;border-bottom:1px solid #555}.emuwebapp-text h3{position:relative;margin-top:1em;margin-bottom:5px;padding-bottom:.3em;line-height:1.255;border-bottom:1px solid #eee;display:block;text-align:left;font-weight:bold !important}.emuwebapp-text h4{position:relative;margin-top:1em;margin-bottom:5px;padding-bottom:.3em;line-height:1.255;border-bottom:1px solid #eee;display:block;text-align:left}.emuwebapp-text pre{padding:16px;overflow:auto;line-height:1.45;background-color:#f7f7f7;border-radius:3px;word-wrap:normal;font-size:.9em}.emuwebapp-text img{display:block;margin-left:auto;margin-right:auto}.emuwebapp-text p{line-height:150%}.emuwebapp-text p img{text-align:center}.emuwebapp-text pre{text-align:left;color:#000}.emuwebapp-text ul{margin-left:100px;padding:50px;list-style-position:inside;padding-left:35px}.emuwebapp-text ul li{list-style-type:disc}.emuwebapp-text ul li,.emuwebapp-text p,.emuwebapp-text div,.emuwebapp-text strong,.emuwebapp-text em,.emuwebapp-text a,.emuwebapp-text code,.emuwebapp-text h3,.emuwebapp-text th,.emuwebapp-text td,.emuwebapp-text b{text-align:left;font-size:16px !important;-webkit-user-select:text !important;-ms-user-select:text !important;-moz-user-select:text !important;-o-user-select:text !important;user-select:text !important}.emuwebapp-text div{text-align:center}.emuwebapp-text span{display:block;font-size:1.2em;text-align:center;line-height:.85}.emuwebapp-text small{text-align:center;font-size:.7em}.emuwebapp-text alert{display:block;text-align:center;color:#a94442;background-color:#f2dede;border:3px dashed #ebccd1;border-radius:3px;margin:5px;margin-top:25px;margin-bottom:25px}.emuwebapp-text table{margin:auto;text-align:left;max-width:500px;width:500px !important}.emuwebapp-text table th{background-color:#fff;font-weight:bold;text-align:center;text-decoration:underline;padding:10px}.emuwebapp-text table tr{width:500px !important;padding-top:5px;padding-bottom:5px;padding-left:2px;padding-right:2px}.emuwebapp-text table tr:nth-child(even){background:#e7e7e7;color:#000}.emuwebapp-text table tr:nth-child(odd){background:#424242}.emuwebapp-text table td{padding:10px}.emuwebapp-text table td:nth-child(even){text-align:right}.emuwebapp-link{cursor:pointer}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(380);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuwebapp-mini-btn,.emuwebapp-mini-btn-save{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-nav-wrap{z-index:99999}.emuwebapp-nav-wrap .emuwebapp-dropdown-container:hover .emuwebapp-mini-btn,.emuwebapp-nav-wrap .emuwebapp-dropdown-container:hover .emuwebapp-mini-btn-save{background:#000;color:#fff}.emuwebapp-nav-wrap ul{list-style:none;position:relative}.emuwebapp-nav-wrap ul ul{position:absolute;top:100%;left:0;background:#fff;margin:0;margin-left:2px}.emuwebapp-nav-wrap ul ul ul{top:0;left:100%;z-index:99999}.emuwebapp-nav-wrap ul ul li{float:none;width:150px}.emuwebapp-nav-wrap ul ul a{z-index:99999}.emuwebapp-nav-wrap ul li{position:relative;float:left;margin:0;padding:0;width:100%}.emuwebapp-label-edit{z-index:9999;position:absolute;font-size:.8em;text-align:center;overflow:scroll;padding:0;margin:0;border:1px #303030;outline:none;resize:none;white-space:nowrap;background-color:#ff0;box-shadow:0 0 15px #303030;vertical-align:middle !important;overflow-x:hidden;overflow-y:hidden}.emuwebapp-mini-btn,.emuwebapp-mini-btn-save{display:inline-block;background:transparent;border-radius:0;border:1px solid #000;color:#000;text-decoration:none;text-align:center;margin:0;padding:0;width:120px;height:30px;outline:none}.emuwebapp-mini-btn:hover:enabled,.emuwebapp-mini-btn-save:hover:enabled{background-color:#000;color:#fff}.emuwebapp-mini-btn:disabled,.emuwebapp-mini-btn-save:disabled{pointer-events:none;color:#21d9ff;border:1px solid #21d9ff}.emuwebapp-mini-btn:active,.emuwebapp-mini-btn-save:active{top:1px;background-color:#fff;color:#000}.emuwebapp-mini-btn-save{width:40px;height:22px;position:relative;top:-2px;background:#0dc5ff;border:1px solid #0dc5ff;color:#000}.emuwebapp-mini-btn-save:hover{background:#0dc5ff;border:1px solid #0dc5ff;color:#fff}.emuwebapp-button-icon{display:inline-block;position:relative;background:transparent;color:#000;border:0;width:40px;height:40px;text-align:center;top:0}.emuwebapp-button-icon>._20px{width:20px;height:20px}.emuwebapp-button-icon>._35px{width:35px;height:35px}.emuwebapp-button-icon:active{background:#000}.emuwebapp-button-icon:focus{outline:none}.emuwebapp-button-icon:hover{color:#fff;background-color:#000}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(382);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,"@media(min-width: 950px){.emuwebapp-mini-btn,.emuwebapp-nav-wrap ul li{width:9%}.emuwebapp-mini-btn-group{width:9%}}@media(min-width: 450px)and (max-width: 950px){.emuwebapp-mini-btn,.emuwebapp-nav-wrap ul li{width:7.5%}.emuwebapp-mini-btn-group{width:7.5%}}@media(max-width: 450px){.emuwebapp-mini-btn,.emuwebapp-nav-wrap ul li{width:6%}.emuwebapp-mini-btn-group{width:6%}}",""]),e.exports=t},function(e,t,n){var r=n(5),i=n(384);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){var r=n(6),i=n(385),a=n(386),o=n(387),s=n(388),l=n(389);t=r(!1);var c=i(a),u=i(o),h=i(s),p=i(l);t.push([e.i,'.emuwebapp-font-small,.emuwebapp .emuwebapp-dropdown-menu li,.emuwebapp button,.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-shortcuts,.emuwebapp,.emuwebapp *{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp *{text-rendering:optimizeLegibility;-webkit-touch-callout:none;-ms-touch-callout:none;-moz-touch-callout:none;-o-touch-callout:none;touch-callout:none}.emuwebapp * *:not(input.field){-webkit-user-select:text;-ms-user-select:text;-moz-user-select:text;-o-user-select:text;user-select:text}.emuwebapp{left:0px;top:0px;width:100%;min-width:100%;height:100%;min-height:100%;position:absolute;background-color:#303030;text-align:center;overflow:hidden;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;-webkit-touch-callout:none;-ms-touch-callout:none;-moz-touch-callout:none;-o-touch-callout:none;touch-callout:none}.emuwebapp>.emuwebapp-main{flex:1;display:flex;position:absolute;width:100%;height:100%}.emuwebapp>.emuwebapp-main>.emuwebapp-window{flex:1;display:flex;flex-direction:column}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-top-menu{height:40px;background:#0dc5ff;-webkit-touch-callout:none;-ms-touch-callout:none;-moz-touch-callout:none;-o-touch-callout:none;touch-callout:none;text-align:left;z-index:5}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-media-toolbar{width:100%;height:87px;background:#0dc5ff;-webkit-touch-callout:none;-ms-touch-callout:none;-moz-touch-callout:none;-o-touch-callout:none;touch-callout:none;text-align:left;padding-left:5px;padding-bottom:5px;z-index:5}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-canvas{flex:1;position:relative;z-index:1;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-shortcuts{background:#00a5d9;color:#fff;border-top:1px solid rgba(0,0,0,.2);padding:10px 20px;font-size:.85em}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-shortcuts .emuwebapp-shortcuts__content{max-width:960px;margin:0 auto;display:flex;flex-direction:column;gap:6px}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-shortcuts h4{margin:0;font-size:1em;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-shortcuts ul{margin:0;padding:0;list-style:none;display:flex;flex-wrap:wrap;gap:12px 24px}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-shortcuts li{display:flex;align-items:center;gap:6px;white-space:nowrap}.emuwebapp>.emuwebapp-main>.emuwebapp-window>.emuwebapp-shortcuts kbd{display:inline-block;padding:2px 6px;border-radius:4px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.2);font-size:.85em;font-family:"Courier New",Courier,monospace}.emuwebapp .left{float:left;margin-right:6px;margin-top:4px}.emuwebapp .full{width:100%}.emuwebapp table{border-collapse:collapse}.emuwebapp ul{margin:0;padding:0;width:100%;list-style-type:none}.emuwebapp li{margin:0;padding:0;width:100%}.emuwebapp button{border-spacing:0;line-height:1.1em;list-style:none outside none;margin:0;padding:0;text-align:center;text-decoration:none;text-indent:0;cursor:pointer;overflow:hidden;white-space:normal}.emuwebapp .emuwebapp-dropdown-container{z-index:99999 !important}.emuwebapp .emuwebapp-dropdown-container:hover #demoDB{background-color:#fff;color:#000}.emuwebapp #emuwebapp-dropdown-arrow:after{content:"▸"}.emuwebapp .emuwebapp-dropdown-container:hover #emuwebapp-dropdown-arrow:after{content:"▾"}.emuwebapp .emuwebapp-dropdown-menu{background:#fff;list-style:none outside none;margin:0;margin-left:-1px;padding:0;border-spacing:0;border-left:1px solid #0dc5ff;border-right:1px solid #0dc5ff;border-bottom:1px solid #0dc5ff;overflow:hidden}.emuwebapp .emuwebapp-dropdown-menu li{padding:5px;margin:0px;max-width:90px;overflow:hidden}.emuwebapp .emuwebapp-dropdown-menu li:hover{color:#0dc5ff;cursor:pointer}.emuwebapp a:link{color:#0dc5ff}.emuwebapp a:hover{color:#fff}.emuwebapp a:visited{color:#d3d3d3}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:url('+c+');src:local("Material Icons"),local("MaterialIcons-Regular"),url('+u+') format("woff2"),url('+h+') format("woff"),url('+p+') format("truetype")}.material-icons{font-family:"Material Icons";font-weight:normal;font-style:normal;font-size:24px;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fonts/MaterialIcons-Regular.eot"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fonts/MaterialIcons-Regular.woff2"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fonts/MaterialIcons-Regular.woff"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fonts/MaterialIcons-Regular.ttf"},function(e,t,n){var r=n(5),i=n(391);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,".emuwebapp-preview{position:relative;width:calc(100% - 30px);height:38px !important;min-height:38px !important;margin-top:5px;cursor:pointer}.emuwebapp-preview>.emuwebapp-preview-canvas{position:absolute}.emuwebapp-preview>.emuwebapp-preview-canvas-markup{position:absolute;background-color:transparent;width:100%;height:100%}",""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(393);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuwebapp-modal-wrap,.emuwebapp-modal .emuwebapp-delete{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large,.emuwebapp-modal-wrap>.emuwebapp-modal-header h3,.emuwebapp-modal-wrap>.emuwebapp-modal-header h2{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-modal{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:99998;opacity:0;pointer-events:none;-webkit-transition:opacity 200ms ease-in;-ms-transition:opacity 200ms ease-in;-moz-transition:opacity 200ms ease-in;-o-transition:opacity 200ms ease-in;transition:opacity 200ms ease-in}.emuwebapp-modal>div{width:84%;height:90%;position:relative;margin-left:8%;margin-right:8%;margin-top:3%;background:#fff}.emuwebapp-modal .emuwebapp-close-button{background:transparent;border:none;color:#000;position:absolute;right:0px;text-align:center;top:3px;width:30px;height:30px;z-index:99999}.emuwebapp-modal .emuwebapp-close-button:hover{filter:invert(100%)}.emuwebapp-modal .emuwebapp-add-signal,.emuwebapp-modal .emuwebapp-delete-signal{clear:both;display:inline-block;background:#fff;text-decoration:none;font-weight:bold;-webkit-box-shadow:1px 1px 3px rgba(22, 22, 22, 0.1);-ms-box-shadow:1px 1px 3px rgba(22, 22, 22, 0.1);-moz-box-shadow:1px 1px 3px rgba(22, 22, 22, 0.1);-o-box-shadow:1px 1px 3px rgba(22, 22, 22, 0.1);box-shadow:1px 1px 3px rgba(22, 22, 22, 0.1);-webkit-border-radius:15px;-ms-border-radius:15px;-moz-border-radius:15px;-o-border-radius:15px;border-radius:15px;z-index:99999}.emuwebapp-modal .emuwebapp-add-signal:hover,.emuwebapp-modal .emuwebapp-delete-signal:hover{background:#0dc5ff;text-decoration:none}.emuwebapp-modal .emuwebapp-add-signal img,.emuwebapp-modal .emuwebapp-delete-signal img{text-align:right}.emuwebapp-modal .emuwebapp-delete-signal{float:right}.emuwebapp-modal .emuwebapp-delete{float:right;position:relative;top:-10px;right:-10px;width:30px;height:30px}.emuwebapp-modal .emuwebapp-modal-inner{position:absolute;top:0;bottom:0;left:0;right:0;margin-top:0;margin-bottom:0}.emuwebapp-modal .emuwebapp-signalcanvas{list-style-type:none;width:50%;margin-left:25%}.emuwebapp-modal .emuwebapp-signalcanvas li{list-style-type:none;background-color:#0dc5ff;margin:10px;padding:3px}.emuwebapp-modal-list{width:300px}.emuwebapp-modal-wrap{width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.emuwebapp-modal-wrap>.emuwebapp-modal-header{position:absolute;background-color:#0dc5ff;height:60px;left:0;top:0;width:100%}.emuwebapp-modal-wrap>.emuwebapp-modal-header h2{padding-top:17px;color:#000}.emuwebapp-modal-wrap>.emuwebapp-modal-header h3{padding-top:17px;color:#000}.emuwebapp-modal-open{opacity:1;pointer-events:auto}.emuwebapp-modal-URL-input{min-width:60%;overflow:auto}.emuwebapp-modal-body{height:calc(100% - 120px);width:100%;top:60px;padding:0;bottom:60px;position:relative;clear:both;overflow-y:auto;overflow-x:hidden;background-color:#303030;color:#fff}.emuwebapp-modal-body select{margin:3px}.emuwebapp-modal-body select[name=url]{min-width:80%;overflow:auto}.emuwebapp-modal-body hr{margin-top:10px;margin-bottom:10px}.emuwebapp-modal-hierarchy{background:#e7e7e7}.emuwebapp-modal-footer{height:60px;width:100%;position:absolute;background-color:#0dc5ff;left:0;bottom:0}.emuwebapp-modal-footer button{margin-top:15px;vertical-align:top}.emuwebapp-inline-modal-footer{position:sticky;bottom:0px;padding-bottom:10px}.emuwebapp-inline-modal-footer button{color:#fff;background-color:#000}.emuwebapp-inline-modal-footer button:hover{filter:invert(100%)}.emuwebapp-exportdata{margin-left:50px;margin-right:50px;text-align:left;color:#444;background:#eee;border:1px solid #ccc;border-radius:5px;white-space:pre-wrap;-webkit-tab-size:5;-ms-tab-size:5;-moz-tab-size:5;-o-tab-size:5;tab-size:5}.emuwebapp-modalUl{padding:10px}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(395);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuwebapp-bundle-outer .emuwebapp-filter,.emuwebapp-bundle-outer>div{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input,.emuwebapp-bundle-outer .emuwebapp-bundle-container,.emuwebapp-bundle-outer{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-bundle-outer{height:100%;width:var(--bundle-width, 240px);min-width:var(--bundle-width, 240px);background:#424242;color:#fff;margin-left:0;padding-bottom:500px;overflow:hidden;line-height:.85;-webkit-transition:margin-left ease-in-out 400ms;-ms-transition:margin-left ease-in-out 400ms;-moz-transition:margin-left ease-in-out 400ms;-o-transition:margin-left ease-in-out 400ms;transition:margin-left ease-in-out 400ms}.emuwebapp-bundle-outer.ng-hide{margin-left:-240px}.emuwebapp-bundle-outer h3{font-size:1.4em;padding-top:6px;padding-bottom:6px;margin:0;border-bottom:thin solid #000}.emuwebapp-bundle-outer>div{height:100%;border-right:thin solid #000}.emuwebapp-bundle-outer .emuwebapp-filter{outline:none;border:0 none;color:#fff;background-color:#000;width:75%;padding:6px 15px 7px 35px;-webkit-box-shadow:0 1px 0 rgba(22, 22, 22, 0.1), 0 1px 3px rgba(0, 0, 0, 0.7) inset;-ms-box-shadow:0 1px 0 rgba(22, 22, 22, 0.1), 0 1px 3px rgba(0, 0, 0, 0.7) inset;-moz-box-shadow:0 1px 0 rgba(22, 22, 22, 0.1), 0 1px 3px rgba(0, 0, 0, 0.7) inset;-o-box-shadow:0 1px 0 rgba(22, 22, 22, 0.1), 0 1px 3px rgba(0, 0, 0, 0.7) inset;box-shadow:0 1px 0 rgba(22, 22, 22, 0.1), 0 1px 3px rgba(0, 0, 0, 0.7) inset;-webkit-transition:all 400ms ease 0s;-ms-transition:all 400ms ease 0s;-moz-transition:all 400ms ease 0s;-o-transition:all 400ms ease 0s;transition:all 400ms ease 0s;-webkit-border-radius:20px;-ms-border-radius:20px;-moz-border-radius:20px;-o-border-radius:20px;border-radius:20px}.emuwebapp-bundle-outer .emuwebapp-bundle-container{width:calc(100% - 20px);height:calc(100% - 60px) !important;overflow-y:auto;text-align:left;padding:10px;font-size:.8em}.emuwebapp-bundle-outer .emuwebapp-bundle-container::-webkit-scrollbar{width:12px;height:0}.emuwebapp-bundle-outer .emuwebapp-bundle-container::-webkit-scrollbar-track{background:#e7e7e7}.emuwebapp-bundle-outer .emuwebapp-bundle-container::-webkit-scrollbar-thumb{border-radius:8px;border:2px solid #e7e7e7;background-color:rgba(0,0,0,.5)}.emuwebapp-bundle-outer .emuwebapp-bundle-container .emuwebapp-bundle-session{margin:0;padding:5px 0 5px 0;border-style:none;position:relative;cursor:pointer}.emuwebapp-bundle-outer .emuwebapp-bundle-container .emuwebapp-bundle-session:hover{background-color:rgba(152,152,152,.18)}.emuwebapp-bundle-outer .emuwebapp-bundle-container .emuwebapp-bundle-session div{overflow-x:auto;overflow-y:hidden}.emuwebapp-bundleListSessionPager{margin:0;padding:5px 0 5px 0;border-style:none;position:relative;text-align:center;cursor:default}.emuwebapp-bundleListSessionPager button{background:transparent;color:#fff;border-radius:25%;border:2px solid #fff;font-size:15px}.emuwebapp-bundleListSessionPager button:hover{background-color:rgba(22,22,22,.1)}.emuwebapp-bundleListSessionPager button:focus{outline:0}.emuwebapp-bundleListSessionPager button:disabled{color:rgba(22,22,22,.1);border:2px solid rgba(22,22,22,.1)}.emuwebapp-bundle-item{margin:0;padding:10px;border-style:none;border-bottom:thin solid rgba(152,152,152,.25);position:relative;cursor:pointer;width:100%;box-sizing:border-box}.emuwebapp-bundle-item:hover{background-color:rgba(152,152,152,.28)}.emuwebapp-bundle-item input[type=text]{width:100%;max-width:100%;height:25px;font-size:1.4em}.emuwebapp-bundle-item b{display:block;font-size:1.4em;font-weight:500;cursor:pointer;width:100%;height:auto;overflow:visible;white-space:normal;word-break:break-word}.emuwebapp-bundle-last{margin-bottom:200px}.emuwebapp-saveBundleButton{position:absolute;background-color:transparent;border-style:none;color:#fff;top:2px;right:2px}.emuwebapp-saveBundleButton:hover{color:#000;background-color:#fff}.emuwebapp-shrinkBundleListSidebarWidthTo0px{width:0 !important;min-width:0 !important;-webkit-transition:width 400ms;-ms-transition:width 400ms;-moz-transition:width 400ms;-o-transition:width 400ms;transition:width 400ms}.emuwebapp-expandBundleListSidebarWidthTo200px{width:var(--bundle-width, 240px) !important;min-width:var(--bundle-width, 240px) !important;-webkit-transition:width 400ms;-ms-transition:width 400ms;-moz-transition:width 400ms;-o-transition:width 400ms;transition:width 400ms}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(397);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuwebapp-right-menu{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-right-menu{position:absolute;top:40px;right:-200px;height:-moz-calc(100% - 133px);height:-webkit-calc(100% - 133px);height:calc(100% - 133px);width:200px;background-color:#424242;color:#fff;border-left:thin solid #000;z-index:1000}.emuwebapp-right-menu h3{font-size:1.5em;padding-top:15px;padding-bottom:15px;border-bottom:thin solid #000;overflow:hidden}.emuwebapp-right-menu ul{margin:10px;text-align:left;overflow:hidden}.emuwebapp-right-menu>button{position:absolute;top:125px;left:-24px;height:24px;width:24px;color:#fff;background:transparent;-webkit-box-shadow:-2px 1px 5px rgba(0, 0, 0, 0.7);-ms-box-shadow:-2px 1px 5px rgba(0, 0, 0, 0.7);-moz-box-shadow:-2px 1px 5px rgba(0, 0, 0, 0.7);-o-box-shadow:-2px 1px 5px rgba(0, 0, 0, 0.7);box-shadow:-2px 1px 5px rgba(0, 0, 0, 0.7);border-style:solid;border-width:1px 0 1px 1px;border-color:#fff;z-index:2001}.emuwebapp-right-menu>button img{width:10px;height:20px;padding-bottom:0;border-style:none;border:0;border-radius:0;filter:invert(100%)}.emuwebapp-right-menu>button:active{background:#fff}.emuwebapp-right-menu>button:focus{outline:none}.emuwebapp-right-menu>button:hover{background-color:#000;filter:invert(100%)}.emuwebapp-right-menu .emuwebapp-curSelPerspLi{border-bottom:thin solid rgba(22,22,22,.1);padding:10px !important;margin:4px !important;font-size:1.2em;background-color:#999;color:#000}.emuwebapp-right-menu .emuwebapp-perspLi{border-bottom:thin solid rgba(22,22,22,.1);padding:10px !important;margin:4px !important;font-size:1.2em;overflow:hidden}.emuwebapp-right-menu .emuwebapp-perspLi:hover{background-color:rgba(152,152,152,.18)}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(399);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-twoDimCanvasContainer{position:absolute;top:12px;left:12px;height:calc(100% - 12px);width:calc(100% - 12px);padding:0px;background-color:#fff}.emuwebapp-twoDimCanvasContainer canvas{float:left;margin:0px;z-index:1;width:100%;height:100%}.emuwebapp-twoDimCanvasContainer .emuwebapp-twoDimCanvasStatic{z-index:1;width:100%;height:100%;background-color:#000}.emuwebapp-twoDimCanvasContainer .emuwebapp-twoDimCanvasDots{position:absolute;top:0;left:0;width:100% !important;z-index:2;background-color:transparent}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(401);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}div.printTitle{display:none}@media print{div.printTitle{display:block;position:running(printTitle)}@page{size:auto;margin:.5cm;margin-left:1cm;text-align:center}html,body{width:100%;height:100%;text-align:center}html,body,ul,ol,li,form,fieldset,legend{margin:0;padding:0}.emuwebapp-bundleListSideBarOuter,.emuwebapp-progressBar,.emuwebapp-menuBarTop,.emuwebapp-menuBarBottom,.emuwebapp-split-handler,.emuwebapp-filter,.emuwebapp-bundle-outer,.emuwebapp-top-menu,.emuwebapp-right-menu,.emuwebapp-media-toolbar,.emuwebapp-timelineCanvasButtons,.emuwebapp-rightSideMenuOpenBtn,.emuwebapp-levelButtonsContainer,.emuwebapp-canvasSelectors,.emuwebapp-levelResizeBtn,.emuwebapp-levelButtonsContainer{display:none !important;height:0 !important;width:0 !important}.emuwebapp-timeline-flexitem{margin-bottom:3px}.emuwebapp-bottomPane{margin-top:0;background-color:pink}}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(403);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input,.emuwebapp-progressBar{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-progressBar{background-color:#424242;color:#fff;width:100%;height:20px;font-weight:900;background-image:-webkit-linear-gradient(-45deg, #000 25%, transparent 25%, transparent 50%, #000 50%, #000 75%, transparent 75%, transparent);background-image:-moz-linear-gradient(-45deg, #000 25%, transparent 25%, transparent 50%, #000 50%, #000 75%, transparent 75%, transparent);background-image:-ms-linear-gradient(-45deg, #000 25%, transparent 25%, transparent 50%, #000 50%, #000 75%, transparent 75%, transparent);background-image:linear-gradient(-45deg, #000 25%, transparent 25%, transparent 50%, #000 50%, #000 75%, transparent 75%, transparent);-webkit-background-size:50px 50px;-ms-background-size:50px 50px;-moz-background-size:50px 50px;-o-background-size:50px 50px;background-size:50px 50px;-webkit-animation:emuwebapp-move 2s linear infinite;-ms-animation:emuwebapp-move 2s linear infinite;-moz-animation:emuwebapp-move 2s linear infinite;-o-animation:emuwebapp-move 2s linear infinite;animation:emuwebapp-move 2s linear infinite;-webkit-box-shadow:inset 0 6px 6px rgba(152, 152, 152, 0.18);-ms-box-shadow:inset 0 6px 6px rgba(152, 152, 152, 0.18);-moz-box-shadow:inset 0 6px 6px rgba(152, 152, 152, 0.18);-o-box-shadow:inset 0 6px 6px rgba(152, 152, 152, 0.18);box-shadow:inset 0 6px 6px rgba(152, 152, 152, 0.18);overflow:hidden}@-webkit-keyframes emuwebapp-move{0%{background-position:0 0}100%{background-position:50px 50px}}@-moz-keyframes emuwebapp-move{0%{background-position:0 0}100%{background-position:50px 50px}}@-ms-keyframes emuwebapp-move{0%{background-position:0 0}100%{background-position:50px 50px}}@keyframes emuwebapp-move{0%{background-position:0 0}100%{background-position:50px 50px}}.emuwebapp-animationRunning{-webkit-animation-play-state:running;-ms-animation-play-state:running;-moz-animation-play-state:running;-o-animation-play-state:running;animation-play-state:running}.emuwebapp-animationStopped{-webkit-animation-play-state:paused;-ms-animation-play-state:paused;-moz-animation-play-state:paused;-o-animation-play-state:paused;animation-play-state:paused}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(405);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-aboutHint{position:absolute;top:0;right:0;width:400px;height:100px;background:rgba(0,0,0,.7);border:1px solid #fff;z-index:99998;overflow:hidden;color:#fff;-moz-border-radius:10px 0px 10px 10px;-webkit-border-radius:10px 0px 10px 10px;border-radius:10px 0px 10px 10px}.emuwebapp-aboutHint:before{content:"";position:absolute;right:100%;top:26px;width:0;height:0;border-top:13px solid transparent;border-right:26px solid red;border-bottom:13px solid transparent}.emuwebapp-aboutHint .emuwebapp-aboutHint-content{position:relative;margin:0 auto;padding-top:80px;width:100%;height:90%;color:#fff;overflow:hidden}.emuwebapp-aboutHint .emuwebapp-aboutHint-content h1{font-size:2.75em;padding-bottom:5px}.emuwebapp-aboutHint .emuwebapp-aboutHint-content button{color:#fff;background-color:transparent;padding:10px;border-radius:0;border:1px solid #fff}.emuwebapp-aboutHint .emuwebapp-aboutHint-content button:hover{color:#000;background-color:#fff}.emuwebapp-aboutHint .emuwebapp-aboutHint-content .news{margin-left:20%;background-color:transparent;width:60%;max-height:80px;overflow:auto;border:1px solid #fff}.emuwebapp-aboutHint .emuwebapp-aboutHint-content>div{position:relative;height:50%;overflow:hidden}.emuwebapp-aboutHint .emuwebapp-aboutHint-content>div>img{height:100%}.emuwebapp-aboutHint .emuwebapp-aboutHint-arrow{position:absolute;color:#0dc5ff;font-size:200%;top:40px;right:8px;-webkit-animation:wiggleUpDown 0.5s infinite;-moz-animation:wiggleUpDown 0.5s infinite;-o-animation:wiggleUpDown 0.5s infinite;animation:wiggleUpDown 0.5s infinite}.emuwebapp-aboutHint .emuwebapp-aboutHint-hidden{position:absolute;background:linear-gradient(to right, white, 2%, transparent),linear-gradient(to left, white, 2%, transparent),linear-gradient(to bottom, white, 2%, transparent),linear-gradient(to top, white, 2%, transparent);top:0;right:0;width:40px;height:40px;border:0}.emuwebapp-aboutHint .emuwebapp-aboutHint-overlay{position:absolute;top:40%;text-align:center;width:100%;color:#424242;font-size:200%;-webkit-transform:rotate(15deg);-ms-transform:rotate(15deg);-moz-transform:rotate(15deg);-o-transform:rotate(15deg);transform:rotate(15deg)}.emuwebapp-aboutHint.ng-hide-add.ng-hide-add-active{-webkit-animation:shrinkToAboutButton 0.5s 1;-moz-animation:shrinkToAboutButton 0.5s 1;-o-animation:shrinkToAboutButton 0.5s 1;animation:shrinkToAboutButton 0.5s 1}@-webkit-keyframes shrinkToAboutButton{25%{top:25px;right:25px;border-radius:10% 0 10% 10%}50%{border-radius:100% 0 100% 100%}100%{top:25px;right:25px;border-radius:100% 0 100% 100%;width:0;height:0}}@-moz-keyframes shrinkToAboutButton{25%{top:25px;right:25px;border-radius:10% 0 10% 10%}50%{border-radius:100% 0 100% 100%}100%{top:25px;right:25px;border-radius:100% 0 100% 100%;width:0;height:0}}@-ms-keyframes shrinkToAboutButton{25%{top:25px;right:25px;border-radius:10% 0 10% 10%}50%{border-radius:100% 0 100% 100%}100%{top:25px;right:25px;border-radius:100% 0 100% 100%;width:0;height:0}}@-o-keyframes shrinkToAboutButton{25%{top:25px;right:25px;border-radius:10% 0 10% 10%}50%{border-radius:100% 0 100% 100%}100%{top:25px;right:25px;border-radius:100% 0 100% 100%;width:0;height:0}}@keyframes shrinkToAboutButton{25%{top:25px;right:25px;border-radius:10% 0 10% 10%}50%{border-radius:100% 0 100% 100%}100%{top:25px;right:25px;border-radius:100% 0 100% 100%;width:0;height:0}}@-webkit-keyframes wiggleUpDown{0%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}50%{-moz-transform:translate(0, -2px);-o-transform:translate(0, -2px);-ms-transform:translate(0, -2px);-webkit-transform:translate(0, -2px);transform:translate(0, -2px)}100%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}}@-moz-keyframes wiggleUpDown{0%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}50%{-moz-transform:translate(0, -2px);-o-transform:translate(0, -2px);-ms-transform:translate(0, -2px);-webkit-transform:translate(0, -2px);transform:translate(0, -2px)}100%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}}@-ms-keyframes wiggleUpDown{0%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}50%{-moz-transform:translate(0, -2px);-o-transform:translate(0, -2px);-ms-transform:translate(0, -2px);-webkit-transform:translate(0, -2px);transform:translate(0, -2px)}100%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}}@-o-keyframes wiggleUpDown{0%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}50%{-moz-transform:translate(0, -2px);-o-transform:translate(0, -2px);-ms-transform:translate(0, -2px);-webkit-transform:translate(0, -2px);transform:translate(0, -2px)}100%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}}@keyframes wiggleUpDown{0%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}50%{-moz-transform:translate(0, -2px);-o-transform:translate(0, -2px);-ms-transform:translate(0, -2px);-webkit-transform:translate(0, -2px);transform:translate(0, -2px)}100%{-moz-transform:translate(0, 2px);-o-transform:translate(0, 2px);-ms-transform:translate(0, 2px);-webkit-transform:translate(0, 2px);transform:translate(0, 2px)}}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(407);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuwebapp-dropzone{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-dropzone{height:80%;width:calc(100% - 30px);border:1px dashed #000;border-radius:8px;text-align:center;color:#e7e7e7;padding:15px;margin:15px;line-height:1.5;box-sizing:border-box}.emuwebapp-dropzone.not-available{background-color:red}.emuwebapp-dropzone.over{background-color:#bfb}.emuwebapp-dropzone.error{background-color:red}.emuwebapp-dropzone.waiting{background-color:aqua}.emuwebapp-dropzone.hidden{display:none}[draggable]{-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}.drag{cursor:move}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(409);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,".emuwebapp-timeline{position:absolute;padding:0;margin:0;top:0;bottom:0;height:100%;width:100%}.emuwebapp-timeline .emuwebapp-timelineCanvasContainer{position:relative;float:left;height:100%;width:calc(100% - 10px);padding-left:5px;padding-right:5px;padding-top:0px;padding-bottom:0px}.emuwebapp-timeline .emuwebapp-timelineCanvasContainer div{width:100%}.emuwebapp-timeline .emuwebapp-timelineCanvasContainer canvas{float:left;margin:0px;z-index:1;width:100%;height:100%}.emuwebapp-timeline .emuwebapp-timelineCanvasContainer .emuwebapp-timelineCanvasMain{top:0;left:5px;background:#000}.emuwebapp-timeline .emuwebapp-timelineCanvasContainer .emuwebapp-timelineCanvasSSFF{position:absolute;top:0;left:5px;width:calc(100% - 10px) !important;z-index:2}.emuwebapp-timeline .emuwebapp-timelineCanvasContainer .emuwebapp-timelineCanvasMarkup{position:absolute;top:0px;left:5px;background-color:transparent;z-index:2;width:calc(100% - 10px) !important}.emuwebapp-timeline .emuwebapp-timelineCanvasButtons{float:left;width:10px;min-height:20px}",""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(411);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuwebapp-grid-cell .emuwebapp-grid-dotted{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large,.emuwebapp-grid-cell .emuwebapp-grid-head{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-grid{display:flex}.emuwebapp-grid .emuwebapp-grid-button{height:30px;padding-top:5px;border:0;border-left:1px solid #fff;border-right:1px solid #fff}.emuwebapp-grid .emuwebapp-grid-button:first-child{border-left:0}.emuwebapp-grid .emuwebapp-grid-button:last-child{border-right:0}.emuwebapp-grid .emuwebapp-grid-center{align-self:center}.emuwebapp-timeline-flexcontainer{padding:0;margin:0;height:100%;position:relative;display:inline-block;list-style:none;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-wrap:wrap;justify-content:center;min-height:80px}.emuwebapp-timeline-flexcontainer li{margin:0;padding:0;width:100%;margin-top:2px !important;margin-bottom:2px !important;position:relative}.emuwebapp-grid-cell{flex:1}.emuwebapp-grid-cell .emuwebapp-grid-head{border:0;margin-bottom:12px;margin-top:12px;text-align:left;padding:0;text-decoration:underline}.emuwebapp-grid-cell .emuwebapp-grid-dotted{overflow:auto;border:0;margin:0;padding:2px;padding-top:4px;padding-bottom:4px;text-align:left;padding-left:8%;white-space:nowrap}.emuwebapp-grid-cell .emuwebapp-grid-dotted:nth-child(even){background:#fff}.emuwebapp-grid-cell .emuwebapp-grid-dotted:nth-child(odd){background:#e7e7e7}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(413);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,".emuwebapp-level{width:100%;height:64px}.emuwebapp-level .emuwebapp-level-container{position:relative;float:left;width:calc(100% - 10px);height:100%;padding:5px}.emuwebapp-level .emuwebapp-level-canvas{float:left;margin:0;width:100%;height:100%;z-index:1}.emuwebapp-level .emuwebapp-level-markup{position:absolute;top:5px;left:5px;background-color:transparent;width:calc(100% - 10px);height:calc(100% - 10px);z-index:2}.emuwebapp-level .emuwebapp-level-buttons{float:left;width:10px;height:100%}@-webkit-keyframes rotate-the-object{0%{-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);-moz-transform:rotateX(0deg);-o-transform:rotateX(0deg);transform:rotateX(0deg)}100%{-webkit-transform:rotateX(180deg);-ms-transform:rotateX(180deg);-moz-transform:rotateX(180deg);-o-transform:rotateX(180deg);transform:rotateX(180deg)}}@-moz-keyframes rotate-the-object{0%{-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);-moz-transform:rotateX(0deg);-o-transform:rotateX(0deg);transform:rotateX(0deg)}100%{-webkit-transform:rotateX(180deg);-ms-transform:rotateX(180deg);-moz-transform:rotateX(180deg);-o-transform:rotateX(180deg);transform:rotateX(180deg)}}@-ms-keyframes rotate-the-object{0%{-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);-moz-transform:rotateX(0deg);-o-transform:rotateX(0deg);transform:rotateX(0deg)}100%{-webkit-transform:rotateX(180deg);-ms-transform:rotateX(180deg);-moz-transform:rotateX(180deg);-o-transform:rotateX(180deg);transform:rotateX(180deg)}}@-o-keyframes rotate-the-object{0%{-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);-moz-transform:rotateX(0deg);-o-transform:rotateX(0deg);transform:rotateX(0deg)}100%{-webkit-transform:rotateX(180deg);-ms-transform:rotateX(180deg);-moz-transform:rotateX(180deg);-o-transform:rotateX(180deg);transform:rotateX(180deg)}}@keyframes rotate-the-object{0%{-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);-moz-transform:rotateX(0deg);-o-transform:rotateX(0deg);transform:rotateX(0deg)}100%{-webkit-transform:rotateX(180deg);-ms-transform:rotateX(180deg);-moz-transform:rotateX(180deg);-o-transform:rotateX(180deg);transform:rotateX(180deg)}}.emuwebapp-level-animation{-webkit-animation:rotate-the-object .2s 1;-moz-animation:rotate-the-object .2s 1;-o-animation:rotate-the-object .2s 1;animation:rotate-the-object .2s 1}.emuwebapp-level-button{float:left;width:20px;height:33.3333333333%;background-color:#fff}.emuwebapp-level-button img{width:20px;height:20px;border-radius:10px;vertical-align:middle}.emuwebapp-level-button img:hover{background-color:#0dc5ff}.emuwebapp-canvasSelectors{width:calc(100% - 40px);text-align:center;padding:0;margin-left:5px}.emuwebapp-canvasSelectors div{display:inline-block;padding-left:5px;padding-right:5px}.emuwebapp-canvasSelectors ul{list-style:none;padding:0;margin:0 0 0 0}.emuwebapp-canvasSelectors ul li{display:inline;margin:0 0 0 0}.emuwebapp-canvasSelectors button{padding:0;height:8px;width:8px;border-radius:50%;border:1px solid #424242}.emuwebapp-canvasSelectors button:hover{border:1px solid #0dc5ff}.emuwebapp-canvasSelectors button:focus{outline:none}",""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(415);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-history{position:absolute;display:flex;font-size:150% !important;align-items:center;justify-content:center;left:35%;top:0;width:30%;height:30px;background:#303030;color:#fff;z-index:-10;opacity:0;font-weight:900 !important;border:0;border-left:1px solid #fff;border-right:1px solid #fff;border-bottom:1px solid #fff;border-bottom-left-radius:12px;border-bottom-right-radius:12px}.emuwebapp-history div{max-height:100%;max-width:100%;background-color:transparent}.emuwebapp-history-fade{z-index:999999;opacity:1}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(417);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small,.emuhierarchy-node text,.emuhierarchy-addbutton text,.emuhierarchy-levelcaption text{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-hierarchy-container{width:100%;height:calc(100% - 34px)}.emuhierarchy-node,.emuhierarchy-addbutton,.emuhierarchy-levelcaption{cursor:pointer}.emuhierarchy-node circle,.emuhierarchy-addbutton circle,.emuhierarchy-levelcaption circle{stroke-width:1.5px}.emuhierarchy-node text,.emuhierarchy-addbutton text,.emuhierarchy-levelcaption text{fill:#fff}.emuhierarchy-link{fill:none}.emuhierarchy-ghostlink{fill:none;stroke:#fff;opacity:0}.emuhierarchy-newlinkpreview{fill:none;stroke-dasharray:5 5}.emuwebapp-modal-select{padding:0;margin:0;width:auto;overflow:hidden;border-top:1px solid #000;border-bottom:1px solid #000;background:url("data:image/gif;base64,R0lGODlhDwAUAIABAAAAAP///yH5BAEAAAEALAAAAAAPABQAAAIXjI+py+0Po5wH2HsXzmw//lHiSJZmUAAAOw==") no-repeat 100% 50%}#emuwebapp-selection{width:100% !important;text-align:center}#emuwebapp-selection option{width:100% !important;text-align:center}.emuwebapp-modal-select select{-webkit-appearance:none;-ms-appearance:none;-moz-appearance:none;-o-appearance:none;appearance:none;border:none;background-color:transparent;background-image:none;width:100%;color:#000;padding:3px;margin:3px;box-shadow:0;cursor:pointer}.emuwebapp-modal-select select:focus{outline:none}.emuwebapp-modal-select select option{padding-left:40px;padding-right:40px}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(419);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-2d-map{position:absolute;right:0px;top:calc(100% - 200px);height:200px;width:200px;background-color:#424242;color:#000;box-shadow:-4px -4px 18px -4px rgba(0,0,0,.7);border-radius:0;z-index:1000000}.emuwebapp-2d-map .corner{position:absolute;height:10px;width:10px;border-top:1px solid #424242;border-left:1px solid #424242;cursor:nwse-resize;background:linear-gradient(135deg, #fff 30%, #000 30%, #000 40%, #fff 40%, #fff 50%, #000 50%, #000 60%, #fff 60%, #fff 70%, #000 70%, #000 80%, #fff 80%)}.emuwebapp-2d-map .topBorder{position:absolute;left:10px;height:10px;width:calc(100% - 10px);background-color:#424242;border-top:1px solid #000;border-bottom:1px solid #000;cursor:ns-resize}.emuwebapp-2d-map .leftBorder{position:absolute;height:calc(100% - 10px);top:10px;width:10px;background-color:#424242;border-left:1px solid #000;border-right:1px solid #000;cursor:ew-resize}.emuwebapp-split-panes{left:0px;right:0px;top:0px;bottom:0px;position:absolute}.emuwebapp-split-panes>.emuwebapp-split-handler{background:#424242;position:absolute;z-index:999}.emuwebapp-split-panes.horizontal>.emuwebapp-split-handler{width:4px;top:0px;left:50%;bottom:0px;cursor:ew-resize}.emuwebapp-split-panes.horizontal>.split-pane1{position:absolute;height:100%;width:50%}.emuwebapp-split-panes.horizontal>.split-pane2{position:absolute;height:100%;left:50%;right:0px;border-left:1px solid #fff}.emuwebapp-split-panes.vertical>.emuwebapp-split-handler{height:14px !important;width:100%;top:50%;left:0px;right:0px;cursor:ns-resize;vertical-align:middle;text-align:center;border-top:1px solid #111;border-bottom:1px solid #111;border-left:0px;border-right:0px}.emuwebapp-split-panes.vertical>.emuwebapp-split-handler:before{content:"";position:absolute;left:calc(50% - 20px);top:.21em;bottom:.21em;width:20px;background:linear-gradient(180deg, transparent, transparent 20%, #fff 20%, #fff 35%, transparent 35%, transparent 65%, #fff 65%, #fff 80%, transparent 80%, transparent 100%)}.emuwebapp-split-panes.vertical>.split-pane1{position:absolute;width:100%;height:50%}.emuwebapp-split-panes.vertical>.split-pane2{position:absolute;width:100%;z-index:100;top:50%;bottom:0px;overflow-y:auto;scrollbar-width:none}.emuwebapp-split-panes.vertical>.split-pane2::-webkit-scrollbar{display:none}.emuwebapp-split-panes.vertical{z-index:0 !important}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(421);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input,.emuwebapp-tabbed .emuwebapp-tabbed-link{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-tabbed{margin:0;padding:0;text-align:center;position:relative;overflow:hidden;top:0;left:0;height:100%}.emuwebapp-tabbed .emuwebapp-tabbed-menu{height:100%;width:240px !important;background:#424242;color:#fff;margin-left:0;line-height:1;left:0;top:0}.emuwebapp-tabbed .emuwebapp-tabbed-menu li{text-align:left;padding-left:10px;padding-top:2px;padding-bottom:2px}.emuwebapp-tabbed a{text-decoration:underline;cursor:pointer}.emuwebapp-tabbed .emuwebapp-tabbed-link{color:#fff;text-decoration:none;cursor:pointer;background:transparent}.emuwebapp-tabbed .emuwebapp-tabbed-view{border:0;clear:both;overflow-y:-moz-scrollbars-vertical;overflow-y:scroll;overflow-x:hidden;position:absolute;width:calc(100% - 240px);height:100%;overflow:auto;padding:0;top:0;right:0}.emuwebapp-tabbed .emuwebapp-tabbed-error{color:red;margin-left:10px;width:100%;font-size:1.1em}.emuwebapp-tabbed .emuwebapp-tabbed-rounded{border:0;border-radius:10px;text-align:left;background:#fff;margin:10px;padding:10px;padding-left:20px;padding-right:20px;margin-top:50px;position:relative;font-size:.9em}.emuwebapp-tabbed .emuwebapp-tabbed-rounded .highlight{background:#e7e7e7 !important}.emuwebapp-tabbed .dashed{border-style:dashed;padding-top:25px}.emuwebapp-tabbed .emuwebapp-tabbed-button,.emuwebapp-tabbed .emuwebapp-tabbed-add-small,.emuwebapp-tabbed .emuwebapp-tabbed-add,.emuwebapp-tabbed .emuwebapp-tabbed-delete-small,.emuwebapp-tabbed .emuwebapp-tabbed-delete,.emuwebapp-tabbed .emuwebapp-tabbed-close{background:#0dc5ff;color:#fff;line-height:18px;text-align:center;width:18px;text-decoration:none;font-weight:900;-webkit-border-radius:9px;-ms-border-radius:9px;-moz-border-radius:9px;-o-border-radius:9px;border-radius:9px;-webkit-box-shadow:1px 1px 3px #0DC5FF;-ms-box-shadow:1px 1px 3px #0DC5FF;-moz-box-shadow:1px 1px 3px #0DC5FF;-o-box-shadow:1px 1px 3px #0DC5FF;box-shadow:1px 1px 3px #0DC5FF;z-index:99999}.emuwebapp-tabbed .emuwebapp-tabbed-close{position:absolute;right:-9px;top:-9px}.emuwebapp-tabbed .emuwebapp-tabbed-close:hover{background:rgba(255,0,0,.95);text-decoration:none}.emuwebapp-tabbed .emuwebapp-tabbed-close:active{background:rgba(255,0,0,.95);color:#000;text-decoration:none}.emuwebapp-tabbed .emuwebapp-tabbed-delete{display:inline-block;margin-left:20px}.emuwebapp-tabbed .emuwebapp-tabbed-delete:hover{background:rgba(255,0,0,.95);text-decoration:none}.emuwebapp-tabbed .emuwebapp-tabbed-delete:active{background:rgba(255,0,0,.95);color:#000;text-decoration:none}.emuwebapp-tabbed .emuwebapp-tabbed-delete-small{display:inline-block;margin-left:10px;width:9px;line-height:9px;font-size:.5em}.emuwebapp-tabbed .emuwebapp-tabbed-add{display:inline-block}.emuwebapp-tabbed .emuwebapp-tabbed-add-small{display:inline-block;width:9px;line-height:9px;font-size:.5em}.emuwebapp-tabbed .emuwebapp-tabbed-border{position:absolute;top:-12px;left:5px;background-color:#fff}.emuwebapp-tabbed .emuwebapp-tabbed-table{display:table;width:100%}.emuwebapp-tabbed .emuwebapp-tabbed-table .emuwebapp-tabbed-row{display:table-row;width:100%;vertical-align:top}.emuwebapp-tabbed .emuwebapp-tabbed-table .emuwebapp-tabbed-cell{display:table-cell;width:50%;vertical-align:top}.emuwebapp-tabbed .emuwebapp-tabbed-table .emuwebapp-tabbed-cell3{display:table-cell;width:33%;vertical-align:top}.emuwebapp-tabbed .emuwebapp-tabbed-table .emuwebapp-tabbed-cell4{display:table-cell;width:25%;vertical-align:top}.emuwebapp-tabbed .emuwebapp-tabbed-table .emuwebapp-tabbed-cell5{display:table-cell;width:20%;vertical-align:top}.emuwebapp-tabbed .emuwebapp-tabbed-table .emuwebapp-align-right{text-align:right;padding-right:10px}.emuwebapp-tabbed .emuwebapp-tabbed-rowframe{border:0;border-radius:10px;text-align:left;background:linear-gradient(#E7E7E7, #fff);margin-bottom:5px;padding:5px}.emuwebapp-tabbed .emuwebapp-tabbed-orderitem{background:#fff;border:1px solid #0dc5ff;margin:4px;padding:4px;cursor:move;width:300px !important}.emuwebapp-tabbed .emuwebapp-tabbed-order{-webkit-box-sizing:border-box;-ms-box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;padding:2px;width:100%}.emuwebapp-tabbed .emuwebapp-tabbed-text,.emuwebapp-tabbed .emuwebapp-tabbed-input-bold,.emuwebapp-tabbed .emuwebapp-tabbed-input,.emuwebapp-tabbed .emuwebapp-tabbed-input-small{overflow:hidden;-webkit-box-sizing:border-box;-ms-box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;padding:2px;background:#fff}.emuwebapp-tabbed .emuwebapp-tabbed-input-small{width:50%;font-size:75%;border:1px solid #424242}.emuwebapp-tabbed .emuwebapp-tabbed-input{font-size:90%;border:1px solid #424242}.emuwebapp-tabbed .emuwebapp-tabbed-input-bold{font-size:115%;border:1px solid #0dc5ff}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(423);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-expandHeightTo20px{height:20px;-webkit-transition:height 400ms;-ms-transition:height 400ms;-moz-transition:height 400ms;-o-transition:height 400ms;transition:height 400ms}.emuwebapp-shrinkHeightTo0px{height:0;-webkit-transition:height 400ms;-ms-transition:height 400ms;-moz-transition:height 400ms;-o-transition:height 400ms;transition:height 400ms}.emuwebapp-expandWidthTo200px{right:0;-webkit-transition:right 400ms;-ms-transition:right 400ms;-moz-transition:right 400ms;-o-transition:right 400ms;transition:right 400ms}.emuwebapp-shrinkWidthTo0px{right:-201px;-webkit-transition:right 400ms;-ms-transition:right 400ms;-moz-transition:right 400ms;-o-transition:right 400ms;transition:right 400ms}.emuwebapp-opacityTo1{opacity:1;-webkit-transition:opacity 400ms;-ms-transition:opacity 400ms;-moz-transition:opacity 400ms;-o-transition:opacity 400ms;transition:opacity 400ms}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(425);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,".emuwebapp-rgbTextInput{width:50px;text-align:center}.emuwebapp-modalTable{border:1px solid rgba(0,0,0,.1);text-align:left;margin:0 auto}.emuwebapp-card{width:100%;margin-top:10px;background-color:transparent;border:1px solid #000;box-shadow:2px 2px 5px #888}.emuwebapp-card:hover{background-color:rgba(152,152,152,.28)}",""]),e.exports=t},function(e,t,n){var r=n(5),i=n(427);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.emuwebapp-largetextinputfield{background:pink;height:10%}.emuwebapp-largetextinputfield textarea{height:100%;width:100%;background:#ff0;border:none}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){var r=n(5),i=n(429);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){(t=n(6)(!1)).push([e.i,'.emuwebapp-font-small{font-family:Arial;font-size:12px;font-weight:400}.emuwebapp-font-large{font-family:Arial;font-size:16px;font-weight:400}.emuwebapp-font-code{font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:14px;font-weight:600}.emuwebapp-font-input{font-family:Arial;font-size:14px;font-weight:400}.allLevelCanvasesGrid{display:grid;border:1px solid #f76707;background-color:#fff4e6;margin-top:25px}.allLevelCanvasesGrid .levelCanvasGrid{display:grid;border:1px solid #ffa94d;background-color:#ffd8a8;color:#d9480f;height:64px;grid-template-columns:1fr 20px}.allLevelCanvasesGrid .levelCanvasGrid .levelCanvasArea{border:1px solid #f76707}.allLevelCanvasesGrid .levelCanvasGrid .levelCanvasButtonGrid{border:1px solid #f76707;display:grid;height:100%}',""]),t.locals={colorBlack:"#000",colorWhite:"#fff",colorBlue:"#0dc5ff",colorRed:"red",colorYellow:"#ff0",colorGreen:"#eeff41",colorGrey:"#424242",colorLightGrey:"#e7e7e7",colorDarkGrey:"#303030",colorTransparentGrey:"rgba(22,22,22,.1)",colorTransparentLightGrey:"rgba(152,152,152,.18)",colorTransparentBlack:"rgba(0,0,0,.7)",colorTransparentRed:"rgba(255,0,0,.95)",colorTransparentYellow:"rgba(255,255,22,.35)",animationPeriod:"400",fontSmallFamily:"Arial",fontSmallSize:"12px",fontSmallWeight:"400",fontLargeFamily:"Arial",fontLargeSize:"16px",fontLargeWeight:"400",fontInputFamily:"Arial",fontInputSize:"14px",fontInputWeight:"400",fontCodeFamily:'Consolas,"Liberation Mono",Menlo,Courier,monospace',fontCodeSize:"14px",fontCodeWeight:"600"},e.exports=t},function(e,t,n){"use strict";n.r(t);var r=n(0),i=(n(19),n(193),n(195),n(197),n(199),n(201),n(203),n(205),n(53)),a=n(99);r.module("emuwebApp",["ngAnimate","angular.filter","ngRoute"]).config(["$locationProvider",function(e){e.html5Mode(!0)}]);n(207),n(211);var o={selector:"largeTextFieldInput",template:'\n    <div class="emuwebapp-largetextinputfield" ng-show="$ctrl.ViewStateService.largeTextFieldInputFieldVisable" ng-focus="vs.largeTextFieldInputFieldVisable"><textarea ng-model="vs.largeTextFieldInputFieldCurLabel"></textarea></div>\n    ',bindings:{},controller:[function(){}]};r.module("emuwebApp").component(o.selector,o);var s=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},l=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return s(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}};var c=l(s),u=c.right,h=(c.left,u);var p=Array.prototype,f=(p.slice,p.map,Math.sqrt(50)),d=Math.sqrt(10),v=Math.sqrt(2),m=function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=g(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;return r&&a.reverse(),a};function g(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=f?10:a>=d?5:a>=v?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=f?10:a>=d?5:a>=v?2:1)}function S(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=f?i*=10:a>=d?i*=5:a>=v&&(i*=2),t<e?-i:i}var w=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r},y=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r};var b=Array.prototype.slice,x=function(e){return e};function k(e){return"translate("+(e+.5)+",0)"}function C(e){return"translate(0,"+(e+.5)+")"}function $(e){return function(t){return+e(t)}}function P(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function E(){return!this.__axis}function T(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,l=1===e||4===e?-1:1,c=4===e||2===e?"x":"y",u=1===e||3===e?k:C;function h(h){var p=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,f=null==i?t.tickFormat?t.tickFormat.apply(t,n):x:i,d=Math.max(a,0)+s,v=t.range(),m=+v[0]+.5,g=+v[v.length-1]+.5,S=(t.bandwidth?P:$)(t.copy()),w=h.selection?h.selection():h,y=w.selectAll(".domain").data([null]),b=w.selectAll(".tick").data(p,t).order(),k=b.exit(),C=b.enter().append("g").attr("class","tick"),T=b.select("line"),_=b.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(C),T=T.merge(C.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),_=_.merge(C.append("text").attr("fill","currentColor").attr(c,l*d).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),h!==w&&(y=y.transition(h),b=b.transition(h),T=T.transition(h),_=_.transition(h),k=k.transition(h).attr("opacity",1e-6).attr("transform",(function(e){return isFinite(e=S(e))?u(e):this.getAttribute("transform")})),C.attr("opacity",1e-6).attr("transform",(function(e){var t=this.parentNode.__axis;return u(t&&isFinite(t=t(e))?t:S(e))}))),k.remove(),y.attr("d",4===e||2==e?o?"M"+l*o+","+m+"H0.5V"+g+"H"+l*o:"M0.5,"+m+"V"+g:o?"M"+m+","+l*o+"V0.5H"+g+"V"+l*o:"M"+m+",0.5H"+g),b.attr("opacity",1).attr("transform",(function(e){return u(S(e))})),T.attr(c+"2",l*a),_.attr(c,l*d).text(f),w.filter(E).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),w.each((function(){this.__axis=S}))}return h.scale=function(e){return arguments.length?(t=e,h):t},h.ticks=function(){return n=b.call(arguments),h},h.tickArguments=function(e){return arguments.length?(n=null==e?[]:b.call(e),h):n.slice()},h.tickValues=function(e){return arguments.length?(r=null==e?null:b.call(e),h):r&&r.slice()},h.tickFormat=function(e){return arguments.length?(i=e,h):i},h.tickSize=function(e){return arguments.length?(a=o=+e,h):a},h.tickSizeInner=function(e){return arguments.length?(a=+e,h):a},h.tickSizeOuter=function(e){return arguments.length?(o=+e,h):o},h.tickPadding=function(e){return arguments.length?(s=+e,h):s},h}var _={value:function(){}};function M(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new A(r)}function A(e){this._=e}function D(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function L(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function V(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}A.prototype=M.prototype={constructor:A,on:function(e,t){var n,r=this._,i=D(e+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=V(r[n],e.name,t);else if(null==t)for(n in r)r[n]=V(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=L(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new A(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var I=M;function O(){}var N=function(e){return null==e?O:function(){return this.querySelector(e)}};function B(){return[]}var F=function(e){return null==e?B:function(){return this.querySelectorAll(e)}},R=function(e){return function(){return this.matches(e)}},H=function(e){return new Array(e.length)};function j(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}j.prototype={constructor:j,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function z(e,t,n,r,i,a){for(var o,s=0,l=t.length,c=a.length;s<c;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new j(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function U(e,t,n,r,i,a,o){var s,l,c,u={},h=t.length,p=a.length,f=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(f[s]=c="$"+o.call(l,l.__data__,s,t),c in u?i[s]=l:u[c]=l);for(s=0;s<p;++s)(l=u[c="$"+o.call(e,a[s],s,a)])?(r[s]=l,l.__data__=a[s],u[c]=null):n[s]=new j(e,a[s]);for(s=0;s<h;++s)(l=t[s])&&u[f[s]]===l&&(i[s]=l)}function W(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var G="http://www.w3.org/1999/xhtml",q={svg:"http://www.w3.org/2000/svg",xhtml:G,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Y=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),q.hasOwnProperty(t)?{space:q[t],local:e}:e};function X(e){return function(){this.removeAttribute(e)}}function Z(e){return function(){this.removeAttributeNS(e.space,e.local)}}function K(e,t){return function(){this.setAttribute(e,t)}}function J(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Q(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ee(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var te=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function ne(e){return function(){this.style.removeProperty(e)}}function re(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ie(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ae(e,t){return e.style.getPropertyValue(t)||te(e).getComputedStyle(e,null).getPropertyValue(t)}function oe(e){return function(){delete this[e]}}function se(e,t){return function(){this[e]=t}}function le(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ce(e){return e.trim().split(/^|\s+/)}function ue(e){return e.classList||new he(e)}function he(e){this._node=e,this._names=ce(e.getAttribute("class")||"")}function pe(e,t){for(var n=ue(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function fe(e,t){for(var n=ue(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function de(e){return function(){pe(this,e)}}function ve(e){return function(){fe(this,e)}}function me(e,t){return function(){(t.apply(this,arguments)?pe:fe)(this,e)}}he.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ge(){this.textContent=""}function Se(e){return function(){this.textContent=e}}function we(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ye(){this.innerHTML=""}function be(e){return function(){this.innerHTML=e}}function xe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ke(){this.nextSibling&&this.parentNode.appendChild(this)}function Ce(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $e(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===G&&t.documentElement.namespaceURI===G?t.createElement(e):t.createElementNS(n,e)}}function Pe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var Ee=function(e){var t=Y(e);return(t.local?Pe:$e)(t)};function Te(){return null}function _e(){var e=this.parentNode;e&&e.removeChild(this)}function Me(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ae(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}var De={},Le=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(De={mouseenter:"mouseover",mouseleave:"mouseout"}));function Ve(e,t,n){return e=Ie(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Ie(e,t,n){return function(r){var i=Le;Le=r;try{e.call(this,this.__data__,t,n)}finally{Le=i}}}function Oe(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Ne(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function Be(e,t,n){var r=De.hasOwnProperty(e.type)?Ve:Ie;return function(i,a,o){var s,l=this.__on,c=r(t,a,o);if(l)for(var u=0,h=l.length;u<h;++u)if((s=l[u]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=t);this.addEventListener(e.type,c,n),s={type:e.type,name:e.name,value:t,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function Fe(e,t,n,r){var i=Le;e.sourceEvent=Le,Le=e;try{return t.apply(n,r)}finally{Le=i}}function Re(e,t,n){var r=te(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function He(e,t){return function(){return Re(this,e,t)}}function je(e,t){return function(){return Re(this,e,t.apply(this,arguments))}}var ze=[null];function Ue(e,t){this._groups=e,this._parents=t}function We(){return new Ue([[document.documentElement]],ze)}Ue.prototype=We.prototype={constructor:Ue,select:function(e){"function"!=typeof e&&(e=N(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=e.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new Ue(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=F(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(e.call(o,o.__data__,c,s)),i.push(o));return new Ue(r,i)},filter:function(e){"function"!=typeof e&&(e=R(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new Ue(r,this._parents)},data:function(e,t){if(!e)return d=new Array(this.size()),u=-1,this.each((function(e){d[++u]=e})),d;var n,r=t?U:z,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var h=i[u],p=a[u],f=p.length,d=e.call(h,h&&h.__data__,u,i),v=d.length,m=l[u]=new Array(v),g=s[u]=new Array(v);r(h,p,m,g,c[u]=new Array(f),d,t);for(var S,w,y=0,b=0;y<v;++y)if(S=m[y]){for(y>=b&&(b=y+1);!(w=g[b])&&++b<v;);S._next=w||null}}return(s=new Ue(s,i))._enter=l,s._exit=c,s},enter:function(){return new Ue(this._enter||this._groups.map(H),this._parents)},exit:function(){return new Ue(this._exit||this._groups.map(H),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=t[s],u=n[s],h=c.length,p=o[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)o[s]=t[s];return new Ue(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=W);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(t)}return new Ue(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=Y(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Z:X:"function"==typeof t?n.local?ee:Q:n.local?J:K)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ne:"function"==typeof t?ie:re)(e,t,null==n?"":n)):ae(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?oe:"function"==typeof t?le:se)(e,t)):this.node()[e]},classed:function(e,t){var n=ce(e+"");if(arguments.length<2){for(var r=ue(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?me:t?de:ve)(n,t))},text:function(e){return arguments.length?this.each(null==e?ge:("function"==typeof e?we:Se)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ye:("function"==typeof e?xe:be)(e)):this.node().innerHTML},raise:function(){return this.each(ke)},lower:function(){return this.each(Ce)},append:function(e){var t="function"==typeof e?e:Ee(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Ee(e),r=null==t?Te:"function"==typeof t?t:N(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(_e)},clone:function(e){return this.select(e?Ae:Me)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=Oe(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?Be:Ne,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?je:He)(e,t))}};var Ge=We,qe=function(e){return"string"==typeof e?new Ue([[document.querySelector(e)]],[document.documentElement]):new Ue([[e]],ze)};var Ye=function(){Le.preventDefault(),Le.stopImmediatePropagation()},Xe=function(e){var t=e.document.documentElement,n=qe(e).on("dragstart.drag",Ye,!0);"onselectstart"in t?n.on("selectstart.drag",Ye,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function Ze(e,t){var n=e.document.documentElement,r=qe(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ye,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ke=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Je(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qe(){}var et="\\s*([+-]?\\d+)\\s*",tt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rt=/^#([0-9a-f]{3,8})$/,it=new RegExp("^rgb\\("+[et,et,et]+"\\)$"),at=new RegExp("^rgb\\("+[nt,nt,nt]+"\\)$"),ot=new RegExp("^rgba\\("+[et,et,et,tt]+"\\)$"),st=new RegExp("^rgba\\("+[nt,nt,nt,tt]+"\\)$"),lt=new RegExp("^hsl\\("+[tt,nt,nt]+"\\)$"),ct=new RegExp("^hsla\\("+[tt,nt,nt,tt]+"\\)$"),ut={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ht(){return this.rgb().formatHex()}function pt(){return this.rgb().formatRgb()}function ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?dt(t):3===n?new St(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new St(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new St(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=it.exec(e))?new St(t[1],t[2],t[3],1):(t=at.exec(e))?new St(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ot.exec(e))?vt(t[1],t[2],t[3],t[4]):(t=st.exec(e))?vt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=lt.exec(e))?xt(t[1],t[2]/100,t[3]/100,1):(t=ct.exec(e))?xt(t[1],t[2]/100,t[3]/100,t[4]):ut.hasOwnProperty(e)?dt(ut[e]):"transparent"===e?new St(NaN,NaN,NaN,0):null}function dt(e){return new St(e>>16&255,e>>8&255,255&e,1)}function vt(e,t,n,r){return r<=0&&(e=t=n=NaN),new St(e,t,n,r)}function mt(e){return e instanceof Qe||(e=ft(e)),e?new St((e=e.rgb()).r,e.g,e.b,e.opacity):new St}function gt(e,t,n,r){return 1===arguments.length?mt(e):new St(e,t,n,null==r?1:r)}function St(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function wt(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)}function yt(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function bt(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function xt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ct(e,t,n,r)}function kt(e){if(e instanceof Ct)return new Ct(e.h,e.s,e.l,e.opacity);if(e instanceof Qe||(e=ft(e)),!e)return new Ct;if(e instanceof Ct)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ct(o,s,l,e.opacity)}function Ct(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function $t(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Pt(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}Ke(Qe,ft,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ht,formatHex:ht,formatHsl:function(){return kt(this).formatHsl()},formatRgb:pt,toString:pt}),Ke(St,gt,Je(Qe,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wt,formatHex:wt,formatRgb:yt,toString:yt})),Ke(Ct,(function(e,t,n,r){return 1===arguments.length?kt(e):new Ct(e,t,n,null==r?1:r)}),Je(Qe,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Ct(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Ct(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new St($t(e>=240?e-240:e+120,i,r),$t(e,i,r),$t(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Et=function(e){return function(){return e}};function Tt(e,t){return function(n){return e+n*t}}function _t(e){return 1==(e=+e)?Mt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Et(isNaN(t)?n:t)}}function Mt(e,t){var n=t-e;return n?Tt(e,n):Et(isNaN(e)?t:e)}var At=function e(t){var n=_t(t);function r(e,t){var r=n((e=gt(e)).r,(t=gt(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Mt(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Dt(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=gt(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}Dt((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return Pt((n-r/t)*t,o,i,a,s)}})),Dt((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Pt((n-r/t)*t,i,a,o,s)}}));var Lt=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}};function Vt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function It(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Ut(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}var Ot=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},Nt=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},Bt=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Ut(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},Ft=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rt=new RegExp(Ft.source,"g");var Ht,jt,zt=function(e,t){var n,r,i,a=Ft.lastIndex=Rt.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=Ft.exec(e))&&(r=Rt.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Nt(n,r)})),a=Rt.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})},Ut=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Et(t):("number"===r?Nt:"string"===r?(n=ft(t))?(t=n,At):zt:t instanceof ft?At:t instanceof Date?Ot:Vt(t)?Lt:Array.isArray(t)?It:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Bt:Nt)(e,t)},Wt=function(){for(var e,t=Le;e=t.sourceEvent;)t=e;return t},Gt=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},qt=function(e,t,n){arguments.length<3&&(n=t,t=Wt().changedTouches);for(var r,i=0,a=t?t.length:0;i<a;++i)if((r=t[i]).identifier===n)return Gt(e,r);return null},Yt=function(e){var t=Wt();return t.changedTouches&&(t=t.changedTouches[0]),Gt(e,t)},Xt=0,Zt=0,Kt=0,Jt=0,Qt=0,en=0,tn="object"==typeof performance&&performance.now?performance:Date,nn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rn(){return Qt||(nn(an),Qt=tn.now()+en)}function an(){Qt=0}function on(){this._call=this._time=this._next=null}function sn(e,t,n){var r=new on;return r.restart(e,t,n),r}function ln(){Qt=(Jt=tn.now())+en,Xt=Zt=0;try{!function(){rn(),++Xt;for(var e,t=Ht;t;)(e=Qt-t._time)>=0&&t._call.call(null,e),t=t._next;--Xt}()}finally{Xt=0,function(){var e,t,n=Ht,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ht=t);jt=e,un(r)}(),Qt=0}}function cn(){var e=tn.now(),t=e-Jt;t>1e3&&(en-=t,Jt=e)}function un(e){Xt||(Zt&&(Zt=clearTimeout(Zt)),e-Qt>24?(e<1/0&&(Zt=setTimeout(ln,e-tn.now()-en)),Kt&&(Kt=clearInterval(Kt))):(Kt||(Jt=tn.now(),Kt=setInterval(cn,1e3)),Xt=1,nn(ln)))}on.prototype=sn.prototype={constructor:on,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?rn():+n)+(null==t?0:+t),this._next||jt===this||(jt?jt._next=this:Ht=this,jt=this),this._call=e,this._time=n,un()},stop:function(){this._call&&(this._call=null,this._time=1/0,un())}};var hn=function(e,t,n){var r=new on;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r},pn=I("start","end","cancel","interrupt"),fn=[],dn=function(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(l){var c,u,h,p;if(1!==n.state)return s();for(c in i)if((p=i[c]).name===n.name){if(3===p.state)return hn(a);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(hn((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function o(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=sn((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:i,on:pn,tween:fn,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function vn(e,t){var n=gn(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function mn(e,t){var n=gn(e,t);if(n.state>3)throw new Error("too late; already running");return n}function gn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Sn,wn,yn,bn,xn=function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}},kn=180/Math.PI,Cn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},$n=function(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*kn,skewX:Math.atan(l)*kn,scaleX:o,scaleY:s}};function Pn(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:Nt(e,i)},{i:l-2,x:Nt(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Nt(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Nt(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,l),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Nt(e,n)},{i:s-2,x:Nt(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var En=Pn((function(e){return"none"===e?Cn:(Sn||(Sn=document.createElement("DIV"),wn=document.documentElement,yn=document.defaultView),Sn.style.transform=e,e=yn.getComputedStyle(wn.appendChild(Sn),null).getPropertyValue("transform"),wn.removeChild(Sn),e=e.slice(7,-1).split(","),$n(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Tn=Pn((function(e){return null==e?Cn:(bn||(bn=document.createElementNS("http://www.w3.org/2000/svg","g")),bn.setAttribute("transform",e),(e=bn.transform.baseVal.consolidate())?(e=e.matrix,$n(e.a,e.b,e.c,e.d,e.e,e.f)):Cn)}),", ",")",")");function _n(e,t){var n,r;return function(){var i=mn(this,e),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function Mn(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=mn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function An(e,t,n){var r=e._id;return e.each((function(){var e=mn(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return gn(e,r).value[t]}}var Dn=function(e,t){var n;return("number"==typeof t?Nt:t instanceof ft?At:(n=ft(t))?(t=n,At):zt)(e,t)};function Ln(e){return function(){this.removeAttribute(e)}}function Vn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function In(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function On(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function Nn(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(e))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttribute(e)}}function Bn(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttributeNS(e.space,e.local)}}function Fn(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Rn(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Hn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Rn(e,i)),n}return i._value=t,i}function jn(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Fn(e,i)),n}return i._value=t,i}function zn(e,t){return function(){vn(this,e).delay=+t.apply(this,arguments)}}function Un(e,t){return t=+t,function(){vn(this,e).delay=t}}function Wn(e,t){return function(){mn(this,e).duration=+t.apply(this,arguments)}}function Gn(e,t){return t=+t,function(){mn(this,e).duration=t}}function qn(e,t){if("function"!=typeof t)throw new Error;return function(){mn(this,e).ease=t}}function Yn(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?vn:mn;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}var Xn=Ge.prototype.constructor;function Zn(e){return function(){this.style.removeProperty(e)}}function Kn(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Jn(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Kn(e,a,n)),r}return a._value=t,a}function Qn(e){return function(t){this.textContent=e.call(this,t)}}function er(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Qn(r)),t}return r._value=e,r}var tr=0;function nr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function rr(){return++tr}var ir=Ge.prototype;nr.prototype=function(e){return Ge().transition(e)}.prototype={constructor:nr,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=N(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=r[o],u=c.length,h=a[o]=new Array(u),p=0;p<u;++p)(s=c[p])&&(l=e.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),h[p]=l,dn(h[p],t,n,p,h,gn(s,n)));return new nr(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=F(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var p,f=e.call(l,l.__data__,h,c),d=gn(l,n),v=0,m=f.length;v<m;++v)(p=f[v])&&dn(p,t,n,v,f,d);a.push(f),o.push(l)}return new nr(a,o,t,n)},filter:function(e){"function"!=typeof e&&(e=R(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new nr(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=t[s],u=n[s],h=c.length,p=o[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)o[s]=t[s];return new nr(o,this._parents,this._name,this._id)},selection:function(){return new Xn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=rr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=gn(o,t);dn(o,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nr(r,this._parents,e,n)},call:ir.call,nodes:ir.nodes,node:ir.node,size:ir.size,empty:ir.empty,each:ir.each,on:function(e,t){var n=this._id;return arguments.length<2?gn(this.node(),n).on.on(e):this.each(Yn(n,e,t))},attr:function(e,t){var n=Y(e),r="transform"===n?Tn:Dn;return this.attrTween(e,"function"==typeof t?(n.local?Bn:Nn)(n,r,An(this,"attr."+e,t)):null==t?(n.local?Vn:Ln)(n):(n.local?On:In)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Y(e);return this.tween(n,(r.local?Hn:jn)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?En:Dn;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=ae(this,e),o=(this.style.removeProperty(e),ae(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,Zn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=ae(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=ae(this,e)),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}(e,r,An(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var l=mn(this,e),c=l.on,u=null==l.value[o]?a||(a=Zn(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=ae(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Jn(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(An(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,er(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=gn(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?_n:Mn)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?zn:Un)(t,e)):gn(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Wn:Gn)(t,e)):gn(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(qn(t,e)):gn(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each((function(){var n=mn(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}))}))}};var ar={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function or(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return ar.time=rn(),ar;return n}Ge.prototype.interrupt=function(e){return this.each((function(){xn(this,e)}))},Ge.prototype.transition=function(e){var t,n;e instanceof nr?(t=e._id,e=e._name):(t=rr(),(n=ar).time=rn(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)(o=s[c])&&dn(o,e,t,c,s,n||or(o,t));return new nr(r,this._parents,e,t)};function sr(e){return[+e[0],+e[1]]}function lr(e){return[sr(e[0]),sr(e[1])]}["w","e"].map(cr),["n","s"].map(cr),["n","w","e","s","nw","ne","sw","se"].map(cr);function cr(e){return{type:e}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var ur=Math.PI,hr=2*ur,pr=hr-1e-6;function fr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function dr(){return new fr}fr.prototype=dr.prototype={constructor:fr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-e,l=r-t,c=a-e,u=o-t,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>1e-6)if(Math.abs(u*s-l*c)>1e-6&&i){var p=n-a,f=r-o,d=s*s+l*l,v=p*p+f*f,m=Math.sqrt(d),g=Math.sqrt(h),S=i*Math.tan((ur-Math.acos((d+h-v)/(2*m*g)))/2),w=S/g,y=S/m;Math.abs(w-1)>1e-6&&(this._+="L"+(e+w*c)+","+(t+w*u)),this._+="A"+i+","+i+",0,0,"+ +(u*p>c*f)+","+(this._x1=e+y*s)+","+(this._y1=t+y*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+o,c=t+s,u=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%hr+hr),h>pr?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=ur)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var vr=dr;function mr(){}function gr(e,t){var n=new mr;if(e instanceof mr)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}mr.prototype=gr.prototype={constructor:mr,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var Sr=gr;function wr(){}var yr=Sr.prototype;function br(e,t){var n=new wr;if(e instanceof wr)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}wr.prototype=br.prototype={constructor:wr,has:yr.has,add:function(e){return this["$"+(e+="")]=e,this},remove:yr.remove,clear:yr.clear,values:yr.keys,size:yr.size,empty:yr.empty,each:yr.each};Array.prototype.slice;var xr={},kr={};function Cr(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function $r(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Pr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Er(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Pr(-t,6):t>9999?"+"+Pr(t,6):Pr(t,4))+"-"+Pr(e.getUTCMonth()+1,2)+"-"+Pr(e.getUTCDate(),2)+(a?"T"+Pr(n,2)+":"+Pr(r,2)+":"+Pr(i,2)+"."+Pr(a,3)+"Z":i?"T"+Pr(n,2)+":"+Pr(r,2)+":"+Pr(i,2)+"Z":r||n?"T"+Pr(n,2)+":"+Pr(r,2)+"Z":"")}var Tr=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],a=e.length,o=0,s=0,l=a<=0,c=!1;function u(){if(l)return kr;if(c)return c=!1,xr;var t,r,i=o;if(34===e.charCodeAt(i)){for(;o++<a&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=a?l=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(i+1,t-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,a)}for(10===e.charCodeAt(a-1)&&--a,13===e.charCodeAt(a-1)&&--a;(r=u())!==kr;){for(var h=[];r!==xr&&r!==kr;)h.push(r),r=u();t&&null==(h=t(h,s++))||i.push(h)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function a(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?Er(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,a=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Cr(e);return function(r,i){return t(n(r),i,e)}}(e,t):Cr(e)}));return a.columns=i||[],a},parseRows:r,format:function(t,n){return null==n&&(n=$r(t)),[n.map(o).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=$r(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(a).join("\n")},formatRow:a,formatValue:o}},_r=Tr(","),Mr=_r.parse,Ar=(_r.parseRows,_r.format,_r.formatBody,_r.formatRows,_r.formatRow,_r.formatValue,Tr("\t")),Dr=Ar.parse;Ar.parseRows,Ar.format,Ar.formatBody,Ar.formatRows,Ar.formatRow,Ar.formatValue;function Lr(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var Vr=function(e,t){return fetch(e,t).then(Lr)};function Ir(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Vr(t,n).then((function(t){return e(t,r)}))}}Ir(Mr),Ir(Dr);function Or(e){return function(t,n){return Vr(t,n).then((function(t){return(new DOMParser).parseFromString(t,e)}))}}Or("application/xml"),Or("text/html"),Or("image/svg+xml");function Nr(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,s,l,c,u,h,p,f=e._root,d={data:r},v=e._x0,m=e._y0,g=e._x1,S=e._y1;if(!f)return e._root=d,e;for(;f.length;)if((c=t>=(a=(v+g)/2))?v=a:g=a,(u=n>=(o=(m+S)/2))?m=o:S=o,i=f,!(f=f[h=u<<1|c]))return i[h]=d,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)return d.next=f,i?i[h]=d:e._root=d,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(c=t>=(a=(v+g)/2))?v=a:g=a,(u=n>=(o=(m+S)/2))?m=o:S=o}while((h=u<<1|c)==(p=(l>=o)<<1|s>=a));return i[p]=f,i[h]=d,e}var Br=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function Fr(e){return e[0]}function Rr(e){return e[1]}function Hr(e,t,n){var r=new jr(null==t?Fr:t,null==n?Rr:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function jr(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function zr(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ur=Hr.prototype=jr.prototype;Ur.copy=function(){var e,t,n=new jr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=zr(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=zr(t));return n},Ur.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Nr(this.cover(t,n),t,n,e)},Ur.addAll=function(e){var t,n,r,i,a=e.length,o=new Array(a),s=new Array(a),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>h&&(h=i));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<a;++n)Nr(this,o[n],s[n],e[n]);return this},Ur.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,s,l=i-n,c=this._root;n>e||e>=i||r>t||t>=a;)switch(s=(t<r)<<1|e<n,(o=new Array(4))[s]=c,c=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},Ur.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Ur.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ur.find=function(e,t,n){var r,i,a,o,s,l,c,u=this._x0,h=this._y0,p=this._x1,f=this._y1,d=[],v=this._root;for(v&&d.push(new Br(v,u,h,p,f)),null==n?n=1/0:(u=e-n,h=t-n,p=e+n,f=t+n,n*=n);l=d.pop();)if(!(!(v=l.node)||(i=l.x0)>p||(a=l.y0)>f||(o=l.x1)<u||(s=l.y1)<h))if(v.length){var m=(i+o)/2,g=(a+s)/2;d.push(new Br(v[3],m,g,o,s),new Br(v[2],i,g,m,s),new Br(v[1],m,a,o,g),new Br(v[0],i,a,m,g)),(c=(t>=g)<<1|e>=m)&&(l=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=l)}else{var S=e-+this._x.call(null,v.data),w=t-+this._y.call(null,v.data),y=S*S+w*w;if(y<n){var b=Math.sqrt(n=y);u=e-b,h=t-b,p=e+b,f=t+b,r=v.data}}return r},Ur.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,s,l,c,u,h,p,f=this._root,d=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!f)return this;if(f.length)for(;;){if((c=a>=(s=(d+m)/2))?d=s:m=s,(u=o>=(l=(v+g)/2))?v=l:g=l,t=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,p=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[p]=f:this._root=f),this):(this._root=i,this)},Ur.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Ur.root=function(){return this._root},Ur.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Ur.visit=function(e){var t,n,r,i,a,o,s=[],l=this._root;for(l&&s.push(new Br(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&l.length){var c=(r+a)/2,u=(i+o)/2;(n=l[3])&&s.push(new Br(n,c,u,a,o)),(n=l[2])&&s.push(new Br(n,r,u,c,o)),(n=l[1])&&s.push(new Br(n,c,i,a,u)),(n=l[0])&&s.push(new Br(n,r,i,c,u))}return this},Ur.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Br(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,s=t.y0,l=t.x1,c=t.y1,u=(o+l)/2,h=(s+c)/2;(a=i[0])&&n.push(new Br(a,o,s,u,h)),(a=i[1])&&n.push(new Br(a,u,s,l,h)),(a=i[2])&&n.push(new Br(a,o,h,u,c)),(a=i[3])&&n.push(new Br(a,u,h,l,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Ur.x=function(e){return arguments.length?(this._x=e,this):this._x},Ur.y=function(e){return arguments.length?(this._y=e,this):this._y};Math.PI,Math.sqrt(5);var Wr=function(){return Math.random()},Gr=(function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(Wr),function e(t){function n(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*t()-1,a=2*t()-1,i=r*r+a*a}while(!i||i>1);return e+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=e,n}(Wr)),qr=(function e(t){function n(){var e=Gr.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(Wr),function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}(Wr));(function e(t){function n(e){var n=qr.source(t)(e);return function(){return n()/e}}return n.source=e,n})(Wr),function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(Wr);function Yr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Xr=Array.prototype,Zr=Xr.map,Kr=Xr.slice;var Jr=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},Qr=function(e){return+e},ei=[0,1];function ti(e){return e}function ni(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ri(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function ii(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=ni(i,r),a=n(o,a)):(r=ni(r,i),a=n(a,o)),function(e){return a(r(e))}}function ai(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ni(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=h(e,t,1,r)-1;return a[n](i[n](t))}}function oi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function si(){var e,t,n,r,i,a,o=ei,s=ei,l=Ut,c=ti;function u(){return r=Math.min(o.length,s.length)>2?ai:ii,i=a=null,h}function h(t){return isNaN(t=+t)?n:(i||(i=r(o.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((a||(a=r(s,o.map(e),Nt)))(n)))},h.domain=function(e){return arguments.length?(o=Zr.call(e,Qr),c===ti||(c=ri(o)),u()):o.slice()},h.range=function(e){return arguments.length?(s=Kr.call(e),u()):s.slice()},h.rangeRound=function(e){return s=Kr.call(e),l=Jr,u()},h.clamp=function(e){return arguments.length?(c=e?ri(o):ti,h):c!==ti},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function li(e,t){return si()(e,t)}var ci=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ui(e){if(!(t=ci.exec(e)))throw new Error("invalid format: "+e);var t;return new hi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function hi(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}ui.prototype=hi.prototype,hi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var pi,fi,di,vi,mi=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},gi=function(e){return(e=mi(Math.abs(e)))?e[1]:NaN},Si=function(e,t){var n=mi(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},wi={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Si(100*e,t)},r:Si,s:function(e,t){var n=mi(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(pi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+mi(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},yi=function(e){return e},bi=Array.prototype.map,xi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];fi=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?yi:(t=bi.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?yi:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(bi.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=ui(e)).fill,n=e.align,h=e.sign,p=e.symbol,f=e.zero,d=e.width,v=e.comma,m=e.precision,g=e.trim,S=e.type;"n"===S?(v=!0,S="g"):wi[S]||(void 0===m&&(m=12),g=!0,S="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var w="$"===p?i:"#"===p&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",y="$"===p?a:/[%p]/.test(S)?l:"",b=wi[S],x=/[defgprs%]/.test(S);function k(e){var i,a,l,p=w,k=y;if("c"===S)k=b(e)+k,e="";else{var C=(e=+e)<0;if(e=isNaN(e)?u:b(Math.abs(e),m),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),C&&0==+e&&(C=!1),p=(C?"("===h?h:c:"-"===h||"("===h?"":h)+p,k=("s"===S?xi[8+pi/3]:"")+k+(C&&"("===h?")":""),x)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){k=(46===l?o+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}v&&!f&&(e=r(e,1/0));var $=p.length+e.length+k.length,P=$<d?new Array(d-$+1).join(t):"";switch(v&&f&&(e=r(P+e,P.length?d-k.length:1/0),P=""),n){case"<":e=p+e+k+P;break;case"=":e=p+P+e+k;break;case"^":e=P.slice(0,$=P.length>>1)+p+e+k+P.slice($);break;default:e=P+p+e+k}return s(e)}return m=void 0===m?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return e+""},k}return{format:h,formatPrefix:function(e,t){var n=h(((e=ui(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(gi(t)/3))),i=Math.pow(10,-r),a=xi[8+r/3];return function(e){return n(i*e)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),di=fi.format,vi=fi.formatPrefix;var ki=function(e,t,n,r){var i,a=S(e,t,n);switch((r=ui(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gi(t)/3)))-gi(Math.abs(e)))}(a,o))||(r.precision=i),vi(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gi(t)-gi(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-gi(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return di(r)};function Ci(e){var t=e.domain;return e.ticks=function(e){var n=t();return m(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return ki(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,s=i[a],l=i[o];return l<s&&(r=s,s=l,l=r,r=a,a=o,o=r),(r=g(s,l,n))>0?r=g(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=g(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(l/r)*r,t(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(l*r)/r,t(i)),e},e}function $i(){var e=li(ti,ti);return e.copy=function(){return oi(e,$i())},Yr.apply(e,arguments),Ci(e)}var Pi=new Date,Ei=new Date;function Ti(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return s},i.filter=function(n){return Ti((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Pi.setTime(+t),Ei.setTime(+r),e(Pi),e(Ei),Math.floor(n(Pi,Ei))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var _i=Ti((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));_i.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ti((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Mi=_i,Ai=(_i.range,Ti((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})));Ai.range;function Di(e){return Ti((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}var Li=Di(0),Vi=Di(1),Ii=Di(2),Oi=Di(3),Ni=Di(4),Bi=Di(5),Fi=Di(6),Ri=(Li.range,Vi.range,Ii.range,Oi.range,Ni.range,Bi.range,Fi.range,Ti((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1}))),Hi=Ri,ji=(Ri.range,Ti((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()}))),zi=(ji.range,Ti((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()}))),Ui=(zi.range,Ti((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()}))),Wi=(Ui.range,Ti((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));Wi.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ti((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Wi:null};Wi.range;function Gi(e){return Ti((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}var qi=Gi(0),Yi=Gi(1),Xi=Gi(2),Zi=Gi(3),Ki=Gi(4),Ji=Gi(5),Qi=Gi(6),ea=(qi.range,Yi.range,Xi.range,Zi.range,Ki.range,Ji.range,Qi.range,Ti((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1}))),ta=ea,na=(ea.range,Ti((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));na.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ti((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var ra=na;na.range;function ia(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function aa(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oa(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var sa,la={"-":"",_:" ",0:"0"},ca=/^\s*\d+/,ua=/^%/,ha=/[\\^$*+?|[\]().{}]/g;function pa(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function fa(e){return e.replace(ha,"\\$&")}function da(e){return new RegExp("^(?:"+e.map(fa).join("|")+")","i")}function va(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function ma(e,t,n){var r=ca.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ga(e,t,n){var r=ca.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Sa(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function wa(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ya(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ba(e,t,n){var r=ca.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function xa(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ka(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ca(e,t,n){var r=ca.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function $a(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Pa(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ea(e,t,n){var r=ca.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ta(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _a(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ma(e,t,n){var r=ca.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Aa(e,t,n){var r=ca.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Da(e,t,n){var r=ca.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function La(e,t,n){var r=ua.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Va(e,t,n){var r=ca.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Ia(e,t,n){var r=ca.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Oa(e,t){return pa(e.getDate(),t,2)}function Na(e,t){return pa(e.getHours(),t,2)}function Ba(e,t){return pa(e.getHours()%12||12,t,2)}function Fa(e,t){return pa(1+Hi.count(Mi(e),e),t,3)}function Ra(e,t){return pa(e.getMilliseconds(),t,3)}function Ha(e,t){return Ra(e,t)+"000"}function ja(e,t){return pa(e.getMonth()+1,t,2)}function za(e,t){return pa(e.getMinutes(),t,2)}function Ua(e,t){return pa(e.getSeconds(),t,2)}function Wa(e){var t=e.getDay();return 0===t?7:t}function Ga(e,t){return pa(Li.count(Mi(e)-1,e),t,2)}function qa(e,t){var n=e.getDay();return e=n>=4||0===n?Ni(e):Ni.ceil(e),pa(Ni.count(Mi(e),e)+(4===Mi(e).getDay()),t,2)}function Ya(e){return e.getDay()}function Xa(e,t){return pa(Vi.count(Mi(e)-1,e),t,2)}function Za(e,t){return pa(e.getFullYear()%100,t,2)}function Ka(e,t){return pa(e.getFullYear()%1e4,t,4)}function Ja(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pa(t/60|0,"0",2)+pa(t%60,"0",2)}function Qa(e,t){return pa(e.getUTCDate(),t,2)}function eo(e,t){return pa(e.getUTCHours(),t,2)}function to(e,t){return pa(e.getUTCHours()%12||12,t,2)}function no(e,t){return pa(1+ta.count(ra(e),e),t,3)}function ro(e,t){return pa(e.getUTCMilliseconds(),t,3)}function io(e,t){return ro(e,t)+"000"}function ao(e,t){return pa(e.getUTCMonth()+1,t,2)}function oo(e,t){return pa(e.getUTCMinutes(),t,2)}function so(e,t){return pa(e.getUTCSeconds(),t,2)}function lo(e){var t=e.getUTCDay();return 0===t?7:t}function co(e,t){return pa(qi.count(ra(e)-1,e),t,2)}function uo(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Ki(e):Ki.ceil(e),pa(Ki.count(ra(e),e)+(4===ra(e).getUTCDay()),t,2)}function ho(e){return e.getUTCDay()}function po(e,t){return pa(Yi.count(ra(e)-1,e),t,2)}function fo(e,t){return pa(e.getUTCFullYear()%100,t,2)}function vo(e,t){return pa(e.getUTCFullYear()%1e4,t,4)}function mo(){return"+0000"}function go(){return"%"}function So(e){return+e}function wo(e){return Math.floor(+e/1e3)}!function(e){sa=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=da(i),u=va(i),h=da(a),p=va(a),f=da(o),d=va(o),v=da(s),m=va(s),g=da(l),S=va(l),w={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Oa,e:Oa,f:Ha,H:Na,I:Ba,j:Fa,L:Ra,m:ja,M:za,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:So,s:wo,S:Ua,u:Wa,U:Ga,V:qa,w:Ya,W:Xa,x:null,X:null,y:Za,Y:Ka,Z:Ja,"%":go},y={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Qa,e:Qa,f:io,H:eo,I:to,j:no,L:ro,m:ao,M:oo,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:So,s:wo,S:so,u:lo,U:co,V:uo,w:ho,W:po,x:null,X:null,y:fo,Y:vo,Z:mo,"%":go},b={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=S[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return C(e,t,n,r)},d:Pa,e:Pa,f:Da,H:Ta,I:Ta,j:Ea,L:Aa,m:$a,M:_a,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u[r[0].toLowerCase()],n+r[0].length):-1},q:Ca,Q:Va,s:Ia,S:Ma,u:ga,U:Sa,V:wa,w:ma,W:ya,x:function(e,t,r){return C(e,n,t,r)},X:function(e,t,n){return C(e,r,t,n)},y:xa,Y:ba,Z:ka,"%":La};function x(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=la[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function k(e,t){return function(n){var r,i,a=oa(1900,void 0,1);if(C(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=aa(oa(a.y,0,1))).getUTCDay(),r=i>4||0===i?Yi.ceil(r):Yi(r),r=ta.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=ia(oa(a.y,0,1))).getDay(),r=i>4||0===i?Vi.ceil(r):Vi(r),r=Hi.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?aa(oa(a.y,0,1)).getUTCDay():ia(oa(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,aa(a)):ia(a)}}function C(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=b[i in la?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return w.x=x(n,w),w.X=x(r,w),w.c=x(t,w),y.x=x(n,y),y.X=x(r,y),y.c=x(t,y),{format:function(e){var t=x(e+="",w);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}(e),sa.format,sa.parse,sa.utcFormat,sa.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var yo=Ti((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),bo=(yo.range,Ti((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()}))),xo=(bo.range,Ti((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()})));xo.range;var ko=function(e){return function(){return e}};function Co(e){this._context=e}Co.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var $o=function(e){return new Co(e)};function Po(e){return e[0]}function Eo(e){return e[1]}function To(){this._=null}function _o(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Mo(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ao(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Do(e){for(;e.L;)e=e.L;return e}To.prototype={constructor:To,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Do(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Mo(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ao(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Ao(this,n),n=(e=n).U),n.C=!1,r.C=!0,Mo(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?Do(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Mo(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ao(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Mo(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Ao(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Mo(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Ao(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var Lo=To;function Vo(e,t,n,r){var i=[null,null],a=is.push(i)-1;return i.left=e,i.right=t,n&&Oo(i,e,t,n),r&&Oo(i,t,e,r),ns[e.index].halfedges.push(a),ns[t.index].halfedges.push(a),i}function Io(e,t,n){var r=[t,n];return r.left=e,r}function Oo(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function No(e,t,n,r,i){var a,o=e[0],s=e[1],l=o[0],c=o[1],u=0,h=1,p=s[0]-l,f=s[1]-c;if(a=t-l,p||!(a>0)){if(a/=p,p<0){if(a<u)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>u&&(u=a)}if(a=r-l,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>u&&(u=a)}else if(p>0){if(a<u)return;a<h&&(h=a)}if(a=n-c,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>u&&(u=a)}if(a=i-c,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<h&&(h=a)}return!(u>0||h<1)||(u>0&&(e[0]=[l+u*p,c+u*f]),h<1&&(e[1]=[l+h*p,c+h*f]),!0)}}}}}function Bo(e,t,n,r,i){var a=e[1];if(a)return!0;var o,s,l=e[0],c=e.left,u=e.right,h=c[0],p=c[1],f=u[0],d=u[1],v=(h+f)/2,m=(p+d)/2;if(d===p){if(v<t||v>=r)return;if(h>f){if(l){if(l[1]>=i)return}else l=[v,n];a=[v,i]}else{if(l){if(l[1]<n)return}else l=[v,i];a=[v,n]}}else if(s=m-(o=(h-f)/(d-p))*v,o<-1||o>1)if(h>f){if(l){if(l[1]>=i)return}else l=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/o,i];a=[(n-s)/o,n]}else if(p<d){if(l){if(l[0]>=r)return}else l=[t,o*t+s];a=[r,o*r+s]}else{if(l){if(l[0]<t)return}else l=[r,o*r+s];a=[t,o*t+s]}return e[0]=l,e[1]=a,!0}function Fo(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ro(e,t){return t[+(t.left!==e.site)]}function Ho(e,t){return t[+(t.left===e.site)]}var jo,zo=[];function Uo(){_o(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wo(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],s=i[1],l=r[0]-o,c=r[1]-s,u=a[0]-o,h=a[1]-s,p=2*(l*h-c*u);if(!(p>=-os)){var f=l*l+c*c,d=u*u+h*h,v=(h*f-c*d)/p,m=(l*d-u*f)/p,g=zo.pop()||new Uo;g.arc=e,g.site=i,g.x=v+o,g.y=(g.cy=m+s)+Math.sqrt(v*v+m*m),e.circle=g;for(var S=null,w=rs._;w;)if(g.y<w.y||g.y===w.y&&g.x<=w.x){if(!w.L){S=w.P;break}w=w.L}else{if(!w.R){S=w;break}w=w.R}rs.insert(S,g),S||(jo=g)}}}}function Go(e){var t=e.circle;t&&(t.P||(jo=t.N),rs.remove(t),zo.push(t),_o(t),e.circle=null)}var qo=[];function Yo(){_o(this),this.edge=this.site=this.circle=null}function Xo(e){var t=qo.pop()||new Yo;return t.site=e,t}function Zo(e){Go(e),ts.remove(e),qo.push(e),_o(e)}function Ko(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,s=[e];Zo(e);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<as&&Math.abs(r-l.circle.cy)<as;)a=l.P,s.unshift(l),Zo(l),l=a;s.unshift(l),Go(l);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<as&&Math.abs(r-c.circle.cy)<as;)o=c.N,s.push(c),Zo(c),c=o;s.push(c),Go(c);var u,h=s.length;for(u=1;u<h;++u)c=s[u],l=s[u-1],Oo(c.edge,l.site,c.site,i);l=s[0],(c=s[h-1]).edge=Vo(l.site,c.site,null,i),Wo(l),Wo(c)}function Jo(e){for(var t,n,r,i,a=e[0],o=e[1],s=ts._;s;)if((r=Qo(s,o)-a)>as)s=s.L;else{if(!((i=a-es(s,o))>as)){r>-as?(t=s.P,n=s):i>-as?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){ns[e.index]={site:e,halfedges:[]}}(e);var l=Xo(e);if(ts.insert(t,l),t||n){if(t===n)return Go(t),n=Xo(t.site),ts.insert(l,n),l.edge=n.edge=Vo(t.site,l.site),Wo(t),void Wo(n);if(n){Go(t),Go(n);var c=t.site,u=c[0],h=c[1],p=e[0]-u,f=e[1]-h,d=n.site,v=d[0]-u,m=d[1]-h,g=2*(p*m-f*v),S=p*p+f*f,w=v*v+m*m,y=[(m*S-f*w)/g+u,(p*w-v*S)/g+h];Oo(n.edge,c,d,y),l.edge=Vo(c,e,null,y),n.edge=Vo(e,d,null,y),Wo(t),Wo(n)}else l.edge=Vo(t.site,l.site)}}function Qo(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site)[0],l=n[1],c=l-t;if(!c)return s;var u=s-r,h=1/a-1/c,p=u/c;return h?(-p+Math.sqrt(p*p-2*h*(u*u/(-2*c)-l+c/2+i-a/2)))/h+r:(r+s)/2}function es(e,t){var n=e.N;if(n)return Qo(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var ts,ns,rs,is,as=1e-6,os=1e-12;function ss(e,t){return t[1]-e[1]||t[0]-e[0]}function ls(e,t){var n,r,i,a=e.sort(ss).pop();for(is=[],ns=new Array(e.length),ts=new Lo,rs=new Lo;;)if(i=jo,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Jo(a),n=a[0],r=a[1]),a=e.pop();else{if(!i)break;Ko(i.arc)}if(function(){for(var e,t,n,r,i=0,a=ns.length;i<a;++i)if((e=ns[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=Fo(e,is[t[n]]);for(o.sort((function(e,t){return s[t]-s[e]})),n=0;n<r;++n)s[n]=t[o[n]];for(n=0;n<r;++n)t[n]=s[n]}}(),t){var o=+t[0][0],s=+t[0][1],l=+t[1][0],c=+t[1][1];!function(e,t,n,r){for(var i,a=is.length;a--;)Bo(i=is[a],e,t,n,r)&&No(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>as||Math.abs(i[0][1]-i[1][1])>as)||delete is[a]}(o,s,l,c),function(e,t,n,r){var i,a,o,s,l,c,u,h,p,f,d,v,m=ns.length,g=!0;for(i=0;i<m;++i)if(a=ns[i]){for(o=a.site,s=(l=a.halfedges).length;s--;)is[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)d=(f=Ho(a,is[l[s]]))[0],v=f[1],h=(u=Ro(a,is[l[++s%c]]))[0],p=u[1],(Math.abs(d-h)>as||Math.abs(v-p)>as)&&(l.splice(s,0,is.push(Io(o,f,Math.abs(d-e)<as&&r-v>as?[e,Math.abs(h-e)<as?p:r]:Math.abs(v-r)<as&&n-d>as?[Math.abs(p-r)<as?h:n,r]:Math.abs(d-n)<as&&v-t>as?[n,Math.abs(h-n)<as?p:t]:Math.abs(v-t)<as&&d-e>as?[Math.abs(p-t)<as?h:e,t]:null))-1),++c);c&&(g=!1)}if(g){var S,w,y,b=1/0;for(i=0,g=null;i<m;++i)(a=ns[i])&&(y=(S=(o=a.site)[0]-e)*S+(w=o[1]-t)*w)<b&&(b=y,g=a);if(g){var x=[e,t],k=[e,r],C=[n,r],$=[n,t];g.halfedges.push(is.push(Io(o=g.site,x,k))-1,is.push(Io(o,k,C))-1,is.push(Io(o,C,$))-1,is.push(Io(o,$,x))-1)}}for(i=0;i<m;++i)(a=ns[i])&&(a.halfedges.length||delete ns[i])}(o,s,l,c)}this.edges=is,this.cells=ns,ts=rs=is=ns=null}ls.prototype={constructor:ls,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return Ro(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,l,c,u=n.site,h=-1,p=t[i[a-1]],f=p.left===u?p.right:p.left;++h<a;)o=f,f=(p=t[i[h]]).left===u?p.right:p.left,o&&f&&r<o.index&&r<f.index&&(l=o,c=f,((s=u)[0]-c[0])*(l[1]-s[1])-(s[0]-l[0])*(c[1]-s[1])<0)&&e.push([u.data,o.data,f.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var l=e-i.site[0],c=t-i.site[1],u=l*l+c*c;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=e-s[0],c=t-s[1],h=l*l+c*c;h<u&&(u=h,o=s.index)}}))}while(null!==o);return a._found=r,null==n||u<=n*n?i.site:null}};var cs=Math.SQRT2;function us(e){return((e=Math.exp(e))+1/e)/2}var hs=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],c=t[2],u=s-i,h=l-a,p=u*u+h*h;if(p<1e-12)r=Math.log(c/o)/cs,n=function(e){return[i+e*u,a+e*h,o*Math.exp(cs*e*r)]};else{var f=Math.sqrt(p),d=(c*c-o*o+4*p)/(2*o*2*f),v=(c*c-o*o-4*p)/(2*c*2*f),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);r=(g-m)/cs,n=function(e){var t,n=e*r,s=us(m),l=o/(2*f)*(s*(t=cs*n+m,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[i+l*u,a+l*h,o*s/us(cs*n+m)]}}return n.duration=1e3*r,n},ps=function(e){return function(){return e}};function fs(e,t,n){this.target=e,this.type=t,this.transform=n}function ds(e,t,n){this.k=e,this.x=t,this.y=n}ds.prototype={constructor:ds,scale:function(e){return 1===e?this:new ds(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ds(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vs=new ds(1,0,0);function ms(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vs;return e.__zoom}function gs(){Le.stopImmediatePropagation()}ms.prototype=ds.prototype;var Ss=function(){Le.preventDefault(),Le.stopImmediatePropagation()};function ws(){return!Le.ctrlKey&&!Le.button}function ys(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function bs(){return this.__zoom||vs}function xs(){return-Le.deltaY*(1===Le.deltaMode?.05:Le.deltaMode?1:.002)}function ks(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cs(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var $s={selector:"lineChart",bindings:{data:"<",threshold:"<"},controller:["$element",function(){function e(e){var t,n=this;this.$element=e,this.margin={top:20,right:20,bottom:20,left:40},this.width=400-this.margin.left-this.margin.right,this.height=200-this.margin.top-this.margin.bottom,this.svg=qe(this.$element[0]).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.x=$i().range([0,this.width]),this.y=$i().range([this.height,0]),this.xAxis=(t=this.x,T(3,t)).tickSize(5),this.yAxis=function(e){return T(4,e)}(this.y),this.lineFunc=function(){var e=Po,t=Eo,n=ko(!0),r=null,i=$o,a=null;function o(o){var s,l,c,u=o.length,h=!1;for(null==r&&(a=i(c=vr())),s=0;s<=u;++s)!(s<u&&n(l=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(l,s,o),+t(l,s,o));if(c)return a=null,c+""||null}return o.x=function(t){return arguments.length?(e="function"==typeof t?t:ko(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:ko(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:ko(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o}().x((function(e){return n.x(e.x)})).y((function(e){return n.y(e.y)})).curve($o)}return e.prototype.$postLink=function(){},e.prototype.$onChanges=function(e){(e.data||e.threshold)&&this.render()},e.prototype.$onInit=function(){},e.prototype.render=function(){this.x.domain([y(this.data,(function(e){return e.x})),w(this.data,(function(e){return e.x}))]),this.y.domain([y(this.data,(function(e){return e.y})),w(this.data,(function(e){return e.y}))]),this.svg.selectAll("g.axis").remove(),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").call(this.yAxis),this.svg.append("svg:path").attr("d",this.lineFunc(this.data)).attr("stroke","red").attr("stroke-width",1).attr("fill","none"),this.svg.append("line").attr("x1",this.x(this.threshold)).attr("y1",0).attr("x2",this.x(this.threshold)).attr("y2",this.height).attr("stroke","steelblue").attr("class","verticalLine")},e}()]};r.module("emuwebApp").component($s.selector,$s);var Ps={selector:"bundleListSideBar",template:'\n\t<div class="emuwebapp-bundle-outer" ng-style="$ctrl.bundleListStyle">\n\t<div>\n\t\t<h3>\n\t\t\t<div>\n\t\t\t\t<input type="text" ng-model="$ctrl.filterText" placeholder="&#x1f50d; Bundle Filter" ng-focus="$ctrl.ViewStateService.setcursorInTextField(true)" ng-blur="$ctrl.ViewStateService.setcursorInTextField(false)" class="emuwebapp-filter"/>\n\t\t\t</div>\n\t\t</h3>\n\t\t<my-drop-zone ng-if="$ctrl.ViewStateService.showDropZone && $ctrl.open"></my-drop-zone>\n\t\t<div id="emuwebapp-bundleListContainer" class="emuwebapp-bundle-container" ng-if="!$ctrl.ViewStateService.showDropZone">\n\t\t\t<ul ng-repeat="(key, value) in $ctrl.LoadedMetaDataService.getRendOptBndlList()" ng-class="{\'emuwebapp-bundle-last\':$last}">\n\t\t\t\t<div class="emuwebapp-bundle-session" ng-if="$ctrl.isSessionDefined(key)" ng-click="$ctrl.LoadedMetaDataService.toggleCollapseSession(key)">\n\t\t\t\t\t<div ng-if="$ctrl.LoadedMetaDataService.getSessionCollapseState(key)">\n\t\t\t\t\t\t▷{{key}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="!$ctrl.LoadedMetaDataService.getSessionCollapseState(key)">\n\t\t\t\t\t\t▽{{key}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="emuwebapp-bundleListSessionBndlsContainer" ng-if="!$ctrl.LoadedMetaDataService.getSessionCollapseState(key)">\n\t\t\t\t\t<div class="emuwebapp-bundleListSessionPager" ng-if="value.length > $ctrl.ViewStateService.pageSize">\n\t\t\t\t\t\t<button ng-disabled="$ctrl.ViewStateService.currentPage == 0" ng-click="$ctrl.turn(false);">\n\t\t\t\t\t\t\t←\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{{$ctrl.ViewStateService.currentPage+1}}/{{$ctrl.ViewStateService.numberOfPages(value.length)}}\n\t\t\t\t\t\t<button ng-disabled="$ctrl.ViewStateService.currentPage >= value.length/$ctrl.ViewStateService.pageSize - 1" ng-click="$ctrl.turn(true);">\n\t\t\t\t\t\t\t→\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-repeat="bundle in value | startFrom:$ctrl.ViewStateService.currentPage*$ctrl.ViewStateService.pageSize | limitTo:$ctrl.ViewStateService.pageSize | regex:$ctrl.filterText track by $index">\n\t\t\t\t\t\t<div class="emuwebapp-bundle-item" id="uttListItem" ng-style="$ctrl.getBndlColor(bundle);" ng-click="$ctrl.DbObjLoadSaveService.loadBundle(bundle);" dragout draggable="true" name="{{bundle.name}}">\n\t\t\t\t\t\t\t<b>{{bundle.name}}</b>\n\t\t\t\t\t\t\t<button ng-if="$ctrl.ConfigProviderService.vals.activeButtons.saveBundle && $ctrl.isCurBndl(bundle)" class="emuwebapp-saveBundleButton" ng-click="$ctrl.DbObjLoadSaveService.saveBundle();"><i class="material-icons">save</i></button>\n\t\t\t\t\t\t\t\x3c!----\x3e\n\t\t\t\t\t\t\t\x3c!--regulate finished editing display--\x3e\n\t\t\t\t\t\t\t\x3c!--display checkbox if current--\x3e\n\t\t\t\t\t\t\t<div ng-if="$ctrl.ConfigProviderService.vals.restrictions.bundleFinishedEditing && $ctrl.isCurBndl(bundle)">\n\t\t\t\t\t\t\t\tfinished editing:\n\t\t\t\t\t\t\t\t<input type="checkbox" ng-model="bundle.finishedEditing" ng-change="$ctrl.finishedEditing(bundle.finishedEditing, key, $index)"/>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!--display text "true" or "false" depending on model if not current--\x3e\n\t\t\t\t\t\t\t<div ng-if="$ctrl.ConfigProviderService.vals.restrictions.bundleFinishedEditing && !$ctrl.isCurBndl(bundle)">\n\t\t\t\t\t\t\t\tfinished editing:\n\t\t\t\t\t\t\t\t<strong ng-if="bundle.finishedEditing" style="color:green;">true</strong>\n\t\t\t\t\t\t\t\t<strong ng-if="!bundle.finishedEditing" style="color:red;">false</strong>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!----\x3e\n\t\t\t\t\t\t\t\x3c!--regulate comment editing display--\x3e\n\t\t\t\t\t\t\t\x3c!--display text input if current--\x3e\n\t\t\t\t\t\t\t<div ng-if="$ctrl.ConfigProviderService.vals.restrictions.bundleComments && $ctrl.isCurBndl(bundle)">\n\t\t\t\t\t\t\t\tcomment:\n\t\t\t\t\t\t\t\t<input type="text" ng-focus="$ctrl.ViewStateService.setcursorInTextField(true); $ctrl.startHistory(bundle);" ng-blur="$ctrl.ViewStateService.setcursorInTextField(false); $ctrl.updateHistory(bundle, key, $index); $ctrl.endHistory(bundle);" ng-model="bundle.comment"/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div ng-if="$ctrl.ConfigProviderService.vals.restrictions.bundleComments && !$ctrl.isCurBndl(bundle)">\n\t\t\t\t\t\t\t\tcomment: <strong style="font-style: italic;max-height: 20px; overflow-y: auto">{{bundle.comment}}</strong>\n\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t\x3c!----\x3e\n\t\t\t\t\t\t\t\x3c!--timeAnchors controlls--\x3e\n\t\t\t\t\t\t\t<div class="emuwebapp-bundleListSessionPager" ng-if="bundle.timeAnchors.length > 0 && $ctrl.isCurBndl(bundle)">\n\t\t\t\t\t\t\t\t<button ng-disabled="$ctrl.ViewStateService.curTimeAnchorIdx == 0" ng-click="$ctrl.nextPrevAnchor(false);">\n\t\t\t\t\t\t\t\t\t←\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\ttime anchor idx: {{$ctrl.ViewStateService.curTimeAnchorIdx}}\n\t\t\t\t\t\t\t\t<button ng-disabled="$ctrl.ViewStateService.curTimeAnchorIdx == $ctrl.getTimeAnchorIdxMax()" ng-click="$ctrl.nextPrevAnchor(true);">\n\t\t\t\t\t\t\t\t\t→\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="emuwebapp-bundleListSessionPager" ng-if="value.length > $ctrl.ViewStateService.pageSize">\n\t\t\t\t\t\t<button ng-disabled="$ctrl.ViewStateService.currentPage == 0" ng-click="$ctrl.turn(false);">\n\t\t\t\t\t\t\t←\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{{$ctrl.ViewStateService.currentPage+1}}/{{$ctrl.ViewStateService.numberOfPages(value.length)}}\n\t\t\t\t\t\t<button ng-disabled="$ctrl.ViewStateService.currentPage >= value.length/$ctrl.ViewStateService.pageSize - 1" ng-click="ctrl.turn(true);">\n\t\t\t\t\t\t\t→\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>\n',bindings:{open:"<"},controller:["$scope","$element","$animate","ViewStateService","HistoryService","LoadedMetaDataService","DbObjLoadSaveService","ConfigProviderService","LevelService",function(){function e(e,t,n,r,i,a,o,s,l){var c=this;this.$scope=e,this.$element=t,this.$animate=n,this.ViewStateService=r,this.HistoryService=i,this.LoadedMetaDataService=a,this.DbObjLoadSaveService=o,this.ConfigProviderService=s,this.LevelService=l,this.comment="",this.filterText="",this.ViewStateService.pageSize=500,this.ViewStateService.currentPage=0,this.bundleListWidth=240,this.bundleListStyle={"--bundle-width":this.bundleListWidth+"px"},this._inited=!1,this.$scope.$watch((function(){return c.LoadedMetaDataService.getBundleList()}),(function(){c.recomputeSidebarWidth()}),!0)}return e.prototype.$onChanges=function(e){this._inited&&e.open&&(e.open.currentValue?(this.$animate.removeClass(this.$element.find("div")[0],"emuwebapp-shrinkBundleListSidebarWidthTo0px"),this.$animate.addClass(this.$element.find("div")[0],"emuwebapp-expandBundleListSidebarWidthTo200px")):(this.$animate.removeClass(this.$element.find("div")[0],"emuwebapp-expandBundleListSidebarWidthTo200px"),this.$animate.addClass(this.$element.find("div")[0],"emuwebapp-shrinkBundleListSidebarWidthTo0px")))},e.prototype.$onInit=function(){this._inited=!0,this.recomputeSidebarWidth()},e.prototype.$postLink=function(){var e=this,t=function(t){e.isFileDrag(t)&&(e.ViewStateService.showDropZone||(t.preventDefault(),e.$scope.$applyAsync((function(){e.ViewStateService.showDropZone=!0}))))},n=function(t){e.isFileDrag(t)&&(e.ViewStateService.showDropZone||t.preventDefault())},r=function(t){if(e.isFileDrag(t)&&e.ViewStateService.showDropZone){var n=t.relatedTarget||t.toElement,r=e.$element[0];r&&n&&r.contains(n)||e.$scope.$applyAsync((function(){e.ViewStateService.showDropZone=!1}))}};this.$element.on("dragenter",t),this.$element.on("dragover",n),this.$element.on("dragleave",r),this.$scope.$on("$destroy",(function(){e.$element.off("dragenter",t),e.$element.off("dragover",n),e.$element.off("dragleave",r)}))},e.prototype.isFileDrag=function(e){var t=e.originalEvent||e,n=t&&t.dataTransfer;return!!n&&(!(!n.types||-1===Array.prototype.indexOf.call(n.types,"Files"))||!!(n.files&&n.files.length>0))},e.prototype.recomputeSidebarWidth=function(){var e=this.LoadedMetaDataService.getBundleList(),t=0;Array.isArray(e)&&e.forEach((function(e){if(e&&e.name){var n=String(e.name).length;n>t&&(t=n)}}));var n=Math.min(560,Math.max(240,9*t+120));this.bundleListWidth!==n&&(this.bundleListWidth=n,this.bundleListStyle={"--bundle-width":this.bundleListWidth+"px"})},e.prototype.finishedEditing=function(e,t,n){this.HistoryService.addObjToUndoStack({type:"WEBAPP",action:"FINISHED",finished:e,key:t,index:n})},e.prototype.updateHistory=function(e,t,n){this.comment!==e.comment&&this.HistoryService.updateCurChangeObj({type:"WEBAPP",action:"COMMENT",initial:this.comment,comment:e.comment,key:t,index:n})},e.prototype.endHistory=function(e){this.comment!==e.comment&&this.HistoryService.addCurChangeObjToUndoStack()},e.prototype.startHistory=function(e){this.comment=e.comment},e.prototype.turn=function(e){e?this.ViewStateService.currentPage++:this.ViewStateService.currentPage--},e.prototype.getBndlColor=function(e){var t;t=0!==this.HistoryService.movesAwayFromLastSave?{"background-color":"#f00",color:"white"}:{"background-color":"#999",color:"black"};var n=this.LoadedMetaDataService.getCurBndl();if(e.name===n.name&&e.session===n.session)return t},e.prototype.isSessionDefined=function(e){return"undefined"!==e},e.prototype.nextPrevAnchor=function(e){var t=this.LoadedMetaDataService.getCurBndl();e?this.ViewStateService.curTimeAnchorIdx<t.timeAnchors.length-1&&(this.ViewStateService.curTimeAnchorIdx=this.ViewStateService.curTimeAnchorIdx+1,this.ViewStateService.select(t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_start,t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_end),this.ViewStateService.setViewPort(t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_start,t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_end),this.ViewStateService.zoomViewPort(!1,this.LevelService)):this.ViewStateService.curTimeAnchorIdx>0&&(this.ViewStateService.curTimeAnchorIdx=this.ViewStateService.curTimeAnchorIdx-1,this.ViewStateService.select(t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_start,t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_end),this.ViewStateService.setViewPort(t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_start,t.timeAnchors[this.ViewStateService.curTimeAnchorIdx].sample_end),this.ViewStateService.zoomViewPort(!1,this.LevelService))},e.prototype.getTimeAnchorIdxMax=function(){var e=this.LoadedMetaDataService.getCurBndl();return r.equals({},e)?-1:e.timeAnchors.length-1},e.prototype.isCurBndl=function(e){var t=this.LoadedMetaDataService.getCurBndl();return e.name===t.name&&e.session===t.session},e}()]};r.module("emuwebApp").component(Ps.selector,Ps);var Es=n(1),Ts=n.n(Es),_s={selector:"emuhierarchy",template:'<div class="emuwebapp-hierarchy-container" ng-mousemove="$ctrl.checkLink($event)"></div>',bindings:{vertical:"<",playing:"<",curLevelAttrDefs:"<",hierarchyPath:"<",movesAwayFromLastSave:"<",newLinkFromId:"<",isShown:"<",contextMenuId:"<",hierarchyResize:"<",attributeDefinitionClickCounter:"<"},controller:["$scope","$element","$timeout","ViewStateService","HistoryService","DataService","LevelService","HierarchyManipulationService","HierarchyLayoutService","SoundHandlerService","ConfigProviderService",function(){function e(e,t,n,r,i,a,o,s,l,c,u){this.$scope=e,this.$element=t,this.$timeout=n,this.ViewStateService=r,this.HistoryService=i,this.DataService=a,this.LevelService=o,this.HierarchyManipulationService=s,this.HierarchyLayoutService=l,this.SoundHandlerService=c,this.ConfigProviderService=u,this.offsetX=25,this.offsetY=30,this.vertOffsetX=150,this.vertOffsetY=25,this.transition={duration:750,links:!1,nodes:!1,rotation:!1,contextMenu:!1},this.scaleExtent=[.5,10],this.panningLimit=.95,this.allowCrossAxisZoom=!1,this.allowCrossAxisPan=!1,this.timeAxisStartPosition=void 0,this.timeAxisEndPosition=void 0,this.crossAxisStartPosition=void 0,this.crossAxisEndPosition=void 0,this.northernBoundary=void 0,this.southernBoundary=void 0,this.westernBoundary=void 0,this.easternBoundary=void 0,this.zoomTimeoutPromise=null,this.lastScaleFactor=1,this._inited=!1}return e.prototype.$postLink=function(){this.element=this.$element,this.width=0,this.height=0,this.background=Ts.a.colorDarkGrey,this.zoomListener=function(){var e,t,n=ws,r=ys,i=Cs,a=xs,o=ks,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,u=hs,h=I("start","zoom","end"),p=0;function f(e){e.property("__zoom",bs).on("wheel.zoom",y).on("mousedown.zoom",b).on("dblclick.zoom",x).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(e,t){return(t=Math.max(s[0],Math.min(s[1],t)))===e.k?e:new ds(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new ds(e.k,r,i)}function m(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function g(e,t,n){e.on("start.zoom",(function(){S(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){S(this,arguments).end()})).tween("zoom",(function(){var e=this,i=arguments,a=S(e,i),o=r.apply(e,i),s=null==n?m(o):"function"==typeof n?n.apply(e,i):n,l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=e.__zoom,h="function"==typeof t?t.apply(e,i):t,p=u(c.invert(s).concat(l/c.k),h.invert(s).concat(l/h.k));return function(e){if(1===e)e=h;else{var t=p(e),n=l/t[2];e=new ds(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}}))}function S(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.extent=r.apply(e,t),this.taps=0}function y(){if(n.apply(this,arguments)){var e=S(this,arguments),t=this.__zoom,r=Math.max(s[0],Math.min(s[1],t.k*Math.pow(2,a.apply(this,arguments)))),o=Yt(this);if(e.wheel)e.mouse[0][0]===o[0]&&e.mouse[0][1]===o[1]||(e.mouse[1]=t.invert(e.mouse[0]=o)),clearTimeout(e.wheel);else{if(t.k===r)return;e.mouse=[o,t.invert(o)],xn(this),e.start()}Ss(),e.wheel=setTimeout(c,150),e.zoom("mouse",i(v(d(t,r),e.mouse[0],e.mouse[1]),e.extent,l))}function c(){e.wheel=null,e.end()}}function b(){if(!t&&n.apply(this,arguments)){var e=S(this,arguments,!0),r=qe(Le.view).on("mousemove.zoom",c,!0).on("mouseup.zoom",u,!0),a=Yt(this),o=Le.clientX,s=Le.clientY;Xe(Le.view),gs(),e.mouse=[a,this.__zoom.invert(a)],xn(this),e.start()}function c(){if(Ss(),!e.moved){var t=Le.clientX-o,n=Le.clientY-s;e.moved=t*t+n*n>p}e.zoom("mouse",i(v(e.that.__zoom,e.mouse[0]=Yt(e.that),e.mouse[1]),e.extent,l))}function u(){r.on("mousemove.zoom mouseup.zoom",null),Ze(Le.view,e.moved),Ss(),e.end()}}function x(){if(n.apply(this,arguments)){var e=this.__zoom,t=Yt(this),a=e.invert(t),o=e.k*(Le.shiftKey?.5:2),s=i(v(d(e,o),t,a),r.apply(this,arguments),l);Ss(),c>0?qe(this).transition().duration(c).call(g,s,t):qe(this).call(f.transform,s)}}function k(){if(n.apply(this,arguments)){var t,r,i,a,o=Le.touches,s=o.length,l=S(this,arguments,Le.changedTouches.length===s);for(gs(),r=0;r<s;++r)i=o[r],a=[a=qt(this,o,i.identifier),this.__zoom.invert(a),i.identifier],l.touch0?l.touch1||l.touch0[2]===a[2]||(l.touch1=a,l.taps=0):(l.touch0=a,t=!0,l.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(l.taps<2&&(e=setTimeout((function(){e=null}),500)),xn(this),l.start())}}function C(){if(this.__zooming){var t,n,r,a,o=S(this,arguments),s=Le.changedTouches,c=s.length;for(Ss(),e&&(e=clearTimeout(e)),o.taps=0,t=0;t<c;++t)n=s[t],r=qt(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=r);if(n=o.that.__zoom,o.touch1){var u=o.touch0[0],h=o.touch0[1],p=o.touch1[0],f=o.touch1[1],m=(m=p[0]-u[0])*m+(m=p[1]-u[1])*m,g=(g=f[0]-h[0])*g+(g=f[1]-h[1])*g;n=d(n,Math.sqrt(m/g)),r=[(u[0]+p[0])/2,(u[1]+p[1])/2],a=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",i(v(n,r,a),o.extent,l))}}function $(){if(this.__zooming){var e,n,r=S(this,arguments),i=Le.changedTouches,a=i.length;for(gs(),t&&clearTimeout(t),t=setTimeout((function(){t=null}),500),e=0;e<a;++e)n=i[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var o=qe(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return f.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",bs),e!==r?g(e,t,n):r.interrupt().each((function(){S(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},f.scaleBy=function(e,t,n){f.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n)},f.scaleTo=function(e,t,n){f.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,o=null==n?m(e):"function"==typeof n?n.apply(this,arguments):n,s=a.invert(o),c="function"==typeof t?t.apply(this,arguments):t;return i(v(d(a,c),o,s),e,l)}),n)},f.translateBy=function(e,t,n){f.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),l)}))},f.translateTo=function(e,t,n,a){f.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,s=null==a?m(e):"function"==typeof a?a.apply(this,arguments):a;return i(vs.translate(s[0],s[1]).scale(o.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),a)},w.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){Fe(new fs(f,e,this.that.__zoom),h.apply,h,[e,this.that,this.args])}},f.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:ps(+e),f):a},f.filter=function(e){return arguments.length?(n="function"==typeof e?e:ps(!!e),f):n},f.touchable=function(e){return arguments.length?(o="function"==typeof e?e:ps(!!e),f):o},f.extent=function(e){return arguments.length?(r="function"==typeof e?e:ps([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),f):r},f.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],f):[s[0],s[1]]},f.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],f):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},f.constrain=function(e){return arguments.length?(i=e,f):i},f.duration=function(e){return arguments.length?(c=+e,f):c},f.interpolate=function(e){return arguments.length?(u=e,f):u},f.on=function(){var e=h.on.apply(h,arguments);return e===h?f:e},f.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,f):Math.sqrt(p)},f}().scaleExtent(this.scaleExtent).on("zoom",this.zoom.bind(this)),this.svg=qe(this.element.find("div")[0]).append("svg").attr("width","100%").attr("height","100%").style("background-color",this.background).call(this.zoomListener).on("dblclick.zoom",null).on("mousemove",this.svgOnMouseMove.bind(this)).on("click",this.svgOnClick.bind(this)).append("g"),this.zoomer=this.svg.append("rect").attr("width","100%").attr("height","100%").style("fill","none").style("pointer-events","all").call(this.zoomListener),this.shiftMode=!1,this.captionLayer=this.svg.append("g").style("z-index",5),this.timeArrow=this.svg.append("g").append("text").style("fill",Ts.a.colorWhite).text("time →"),this.scaleFactorDisplay=this.svg.append("g"),this.scaleFactorDisplay.append("text"),this.svg=this.svg.append("g").style("z-index",1);var e=ms(this.zoomer.node());this.zoomer.call(this.zoomListener.transform,vs.translate(e.x,e.y).scale(e.k))},e.prototype.$onChanges=function(e){e.vertical&&e.vertical.currentValue!==e.vertical.previousValue&&this._inited&&this.rotate(),e.curLevelAttrDefs&&e.curLevelAttrDefs.currentValue!==e.curLevelAttrDefs.previousValue&&this._inited&&this.render(),e.playing&&e.playing.currentValue!==e.playing.previousValue&&this._inited&&void 0!==this.selectedItem&&this.play(this.selectedItem),e.hierarchyPath&&e.hierarchyPath.currentValue!==e.hierarchyPath.previousValue&&this._inited&&(this.newLinkFromId=void 0,this.render()),e.movesAwayFromLastSave&&e.movesAwayFromLastSave.currentValue!==e.movesAwayFromLastSave.previousValue&&this._inited&&this.render(),e.newLinkFromId&&e.newLinkFromId.currentValue!==e.newLinkFromId.previousValue&&this._inited&&(this.newLinkSrc=this.LevelService.getItemByID(e.newLinkFromId.currentValue),this.render()),e.isShown&&e.isShown.currentValue!==e.isShown.previousValue&&e.isShown.currentValue&&this._inited&&this.render(),e.contextMenuId&&e.contextMenuId.currentValue!==e.contextMenuId.previousValue&&this._inited&&this.render(),e.hierarchyResize&&e.hierarchyResize.currentValue!==e.hierarchyResize.previousValue&&this._inited&&this.render(),e.attributeDefinitionClickCounter&&e.attributeDefinitionClickCounter.currentValue!==e.attributeDefinitionClickCounter.previousValue&&this._inited&&this.render()},e.prototype.$onInit=function(){this._inited=!0},e.prototype.checkLink=function(e){if(e.shiftKey&&!this.shiftMode&&void 0===this.ViewStateService.hierarchyState.newLinkFromID&&(this.ViewStateService.hierarchyState.newLinkFromID=this.ViewStateService.hierarchyState.selectedItemID,this.shiftMode=!0),!e.shiftKey&&this.shiftMode){this.shiftMode=!1;var t=this.HierarchyManipulationService.addLink(this.ViewStateService.hierarchyState.path,this.ViewStateService.hierarchyState.newLinkFromID,this.ViewStateService.hierarchyState.selectedItemID);this.ViewStateService.hierarchyState.newLinkFromID=void 0,null!==t&&this.HistoryService.addObjToUndoStack({type:"HIERARCHY",action:"ADDLINK",link:t})}},e.prototype.selectItem=function(e){this.selectedItem=e,this.ViewStateService.hierarchyState.selectedItemID=e.id},e.prototype.selectLink=function(e){this.selectedLink=e,this.ViewStateService.hierarchyState.selectedLinkFromID=e.fromID,this.ViewStateService.hierarchyState.selectedLinkToID=e.toID},e.prototype.zoom=function(){var e=ms(this.zoomer.node());e=this.limitPanning(e),this.ViewStateService.hierarchyState.translate=[e.x,e.y],this.ViewStateService.hierarchyState.scaleFactor=e.k,this.svg.attr("transform",this.getOrientatedTransform(!0)),this.captionLayer.attr("transform",this.getOrientatedLevelCaptionLayerTransform()),this.captionLayer.selectAll("g.emuhierarchy-levelcaption").attr("transform",this.getOrientatedLevelCaptionTransform.bind(this)),null!==this.zoomTimeoutPromise&&(this.$timeout.cancel(this.zoomTimeoutPromise),this.zoomTimeoutPromise=null),this.zoomTimeoutPromise=this.$timeout(this.render.bind(this),200)},e.prototype.limitPanning=function(e){var t=e.x,n=e.y;return this.vertical?(this.allowCrossAxisPan?(n>this.southernBoundary-this.crossAxisStartPosition&&(n=this.southernBoundary-this.crossAxisStartPosition),n<this.northernBoundary-this.crossAxisEndPosition&&(n=this.northernBoundary-this.crossAxisEndPosition)):n=0,t>this.easternBoundary-this.timeAxisStartPosition&&(t=this.easternBoundary-this.timeAxisStartPosition),t<this.westernBoundary-this.timeAxisEndPosition&&(t=this.westernBoundary-this.timeAxisEndPosition)):(this.allowCrossAxisPan?(t>this.easternBoundary-this.crossAxisStartPosition&&(t=this.easternBoundary-this.crossAxisStartPosition),t<this.westernBoundary-this.crossAxisEndPosition&&(t=this.westernBoundary-this.crossAxisEndPosition)):t=0,n>this.southernBoundary-this.timeAxisStartPosition&&(n=this.southernBoundary-this.timeAxisStartPosition),n<this.northernBoundary-this.timeAxisEndPosition&&(n=this.northernBoundary-this.timeAxisEndPosition)),{x:t,y:n,k:e.k}},e.prototype.rotate=function(){var e,t,n=ms(this.zoomer.node());!0===this.vertical?(e=n.y/this.timeAxisEndPosition,t=n.x/this.crossAxisEndPosition):(e=n.x/this.timeAxisEndPosition,t=n.y/this.crossAxisEndPosition),this.render(),e*=this.timeAxisEndPosition,t*=this.crossAxisEndPosition,!0===this.vertical?this.zoomer.call(this.zoomListener.transform,vs.translate(e,t).scale(n.k)):this.zoomer.call(this.zoomListener.transform,vs.translate(t,e).scale(n.k)),this.limitPanning(n)},e.prototype.getOrientatedTransform=function(e){var t="",n=ms(this.zoomer.node());if(n=this.limitPanning(n),this.vertical?(t+="translate("+n.x+","+n.y+")",t+="scale(-1,1),rotate(90)"):(t+="translate("+n.x+","+n.y+")",t+="rotate(0)"),!0===e){var r=n.k/this.lastScaleFactor;this.allowCrossAxisZoom?t+="scale("+r+")":t+="scale(1,"+r+")"}return t},e.prototype.getOrientatedNodeTransform=function(){return this.vertical?"scale(-1,1)rotate(90)":"rotate(0)"},e.prototype.getOrientatedLinkStrokeWidth=function(){return"2px"},e.prototype.getOrientatedGhostLinkStrokeWidth=function(){return"15px"},e.prototype.getNodeText=function(e){for(var t=this.ViewStateService.getCurAttrDef(this.LevelService.getLevelName(e.id)),n=0;n<e.labels.length;++n)if(e.labels[n].name===t)return e.labels[n].value;return console.debug("Likely a bug: Did not find the label selected for display","Selected level:",t,"Node: ",e),"NO VALUE"},e.prototype.getLevelCaptionText=function(e){var t=this.ViewStateService.getCurAttrDef(e);return e===t?e:e+":"+t},e.prototype.getOrientatedNodeCollapseText=function(e){return this.vertical?this.ViewStateService.hierarchyState.getCollapsed(e.id)?"↓":"↑":this.ViewStateService.hierarchyState.getCollapsed(e.id)?"→":"←"},e.prototype.getOrientatedTextTransform=function(){},e.prototype.getOrientatedTextAnchor=function(){return this.vertical?"middle":"begin"},e.prototype.getOrientatedTextX=function(){return this.vertical?0:10},e.prototype.getOrientatedTextY=function(){return this.vertical?"1.45em":"0.35em"},e.prototype.getOrientatedLevelCaptionLayerTransform=function(){var e=ms(this.zoomer.node());return e=this.limitPanning(e),this.vertical?"translate(0, "+e.y+")":"translate("+e.x+", 0)"},e.prototype.getOrientatedLevelCaptionTransform=function(e){var t=r.copy(this.ViewStateService.hierarchyState.path).reverse();return this.vertical?"translate(25, "+this.depthToX(t.indexOf(e))+")":"translate("+this.depthToX(t.indexOf(e))+", 20)"},e.prototype.getOrientatedAddItemButtonTransform=function(){return this.vertical,"translate(-12, -5)"},e.prototype.getOrientatedTimeLevelBackgroundTransform=function(){return this.vertical?"translate("+(this.vertOffsetX-25)+",-8)":"translate(-8,"+(this.offsetY-20)+")"},e.prototype.getOrientatedTimeLevelBackgroundWidth=function(){return this.vertical?"100%":"15px"},e.prototype.getOrientatedTimeLevelBackgroundHeight=function(){return this.vertical?"15px":"100%"},e.prototype.getOrientatedMousePosition=function(e){var t=ms(this.zoomer.node());return t=this.limitPanning(t),this.vertical?[e[1]-t.y,e[0]-t.x]:[e[0]-t.x,e[1]-t.y]},e.prototype.getPath=function(e){return"M"+e._fromX+" "+e._fromY+"Q"+e._fromX+" "+e._toY+" "+e._toX+" "+e._toY},e.prototype.getPreviewPath=function(){var e=this.newLinkSrc._x,t=this.newLinkSrc._y,n=this.selectedItem._x,r=this.selectedItem._y;return"M"+e+" "+t+"Q"+e+" "+r+" "+n+" "+r},e.prototype.getPreviewColor=function(){var e=this.HierarchyManipulationService.checkLinkValidity(this.ViewStateService.hierarchyState.path,this.newLinkSrc.id,this.selectedItem.id);return e.valid||3===e.reason&&(e=this.HierarchyManipulationService.checkLinkValidity(this.ViewStateService.hierarchyState.path,this.selectedItem.id,this.newLinkSrc.id)).valid?"green":"red"},e.prototype.getLabelLegalnessColor=function(e){var t=this.svg.select(".emuhierarchy-contextmenu input").node(),n=this.LevelService.getLevelName(e.id),r=this.ViewStateService.getCurAttrIndex(n),i=this.ConfigProviderService.getLevelDefinition(n).attributeDefinitions[r].legalLabels;return void 0===i||t.value.length>0&&i.indexOf(t.value)>=0?"lightgreen":"red"},e.prototype.svgOnMouseMove=function(){if(void 0!==this.newLinkSrc){var e=this.getOrientatedMousePosition(Yt(this.element.find("svg")[0])),t=e[0],n=e[1];this.svg.select("path.emuhierarchy-newlink").attr("d","M"+this.newLinkSrc._x+","+this.newLinkSrc._y+" L"+t+","+n)}},e.prototype.svgOnClick=function(){var e=this;void 0!==this.ViewStateService.hierarchyState.contextMenuID&&this.$scope.$apply((function(){e.ViewStateService.hierarchyState.contextMenuID=void 0}))},e.prototype.nodeOnClick=function(e){var t=this;console.debug("Clicked node",e),void 0===this.ViewStateService.hierarchyState.contextMenuID&&(Le.stopPropagation(),this.ViewStateService.hierarchyState.contextMenuID=e.id,this.ViewStateService.hierarchyState.setEditValue(this.getNodeText(e)),this.$scope.$apply((function(){t.render()}))),this.ViewStateService.hierarchyState.contextMenuID===e.id&&Le.stopPropagation()},e.prototype.nodeOnPlayClick=function(e){this.play(e)},e.prototype.nodeOnCollapseClick=function(e){var t=this;console.debug("collapsing",e),this.HierarchyLayoutService.toggleCollapse(e,this.ViewStateService.hierarchyState.path),this.$scope.$apply((function(){t.render()}))},e.prototype.nodeOnMouseOver=function(e){this.selectItem(e),this.renderSelectionOnly()},e.prototype.nodeOnInput=function(e){var t=this.svg.select(".emuhierarchy-contextmenu input").node();this.ViewStateService.hierarchyState.setEditValue(t.value),t.style.backgroundColor=this.getLabelLegalnessColor(e)},e.prototype.nodeOnFocusIn=function(){this.ViewStateService.hierarchyState.inputFocus=!0},e.prototype.nodeOnFocusOut=function(){this.ViewStateService.hierarchyState.inputFocus=!1},e.prototype.linkOnMouseOver=function(e){this.selectLink(e),this.renderSelectionOnly()},e.prototype.addButtonOnClick=function(e){var t=this,n=this.LevelService.pushNewItem(e);-1!==n&&this.HistoryService.addObjToUndoStack({type:"HIERARCHY",action:"PUSHITEM",newID:n,level:e}),this.$scope.$apply((function(){t.render()}))},e.prototype.play=function(e){var t=this.ViewStateService.hierarchyState.path[0];if(void 0!==t){for(var n,r=this.LevelService.getLevelDetails(t).type,i=null,a=null,o=[e];o.length>0;){if((n=o.pop()).labels[0].name===t)if("EVENT"===r)(n.samplePoint<i||null===i)&&(i=n.samplePoint),(n.samplePoint>a||null===a)&&(a=n.samplePoint);else if("SEGMENT"===r){(n.sampleStart<i||null===i)&&(i=n.sampleStart);var s=n.sampleStart+n.sampleDur;(s>a||null===a)&&(a=s)}o=o.concat(this.HierarchyLayoutService.findChildren(n,this.ViewStateService.hierarchyState.path))}console.debug("Node info for playback: ",r,e,i,a),null!==i&&null!==a?this.SoundHandlerService.playFromTo(i,a):console.debug("No time information found for node, aborting playback",e)}else console.debug("Likely a bug: There is no path selection. Not executing play():",e)},e.prototype.depthToX=function(e){var t,n;this.vertical?(t=this.height,n=this.vertOffsetY):(t=this.width,n=this.offsetX);var r=e/this.ViewStateService.hierarchyState.path.length*t;return this.allowCrossAxisZoom&&(r*=this.zoomListener.scale()),r+=n},e.prototype.posInLevelToY=function(e){var t,n,r=ms(this.zoomer.node());r=this.limitPanning(r);this.vertical?(t=this.vertOffsetX,n=this.width-t):(t=this.offsetY,n=this.height-t);var i=e*n*r.k;return i+=t},e.prototype.renderSelectionOnly=function(){var e=this;this.svg.selectAll("circle.emuhierarchy-nodeCircle").style("fill",(function(t){var n=Ts.a.colorWhite;return void 0!==e.selectedItem&&t.id===e.selectedItem.id&&(n=Ts.a.colorBlue),n})),this.svg.selectAll("path.emuhierarchy-link").style("stroke",(function(t){return e.selectedLink===t?Ts.a.colorYellow:Ts.a.colorGrey})),this.svg.select(".emuhierarchy-newlinkpreview").attr("d",this.getPreviewPath.bind(this)).style("stroke",this.getPreviewColor.bind(this))},e.prototype.render=function(){var e,t=this,n=ms(this.zoomer.node());n=this.limitPanning(n),this.lastScaleFactor=n.k,this.width=parseInt(qe(this.element.find("svg")[0]).style("width"),10),this.height=parseInt(qe(this.element.find("svg")[0]).style("height"),10),this.transition.rotation?this.svg.transition().duration(this.transition.duration).attr("transform",this.getOrientatedTransform(!1)):this.svg.attr("transform",this.getOrientatedTransform(!1)),this.vertical?this.timeArrow.attr("transform","translate("+this.width/2+","+(this.height-10)+")"):this.timeArrow.attr("transform","translate("+(this.width-20)+","+this.height/2+")rotate(90)"),this.vertical?(this.scaleFactorDisplay.attr("transform","translate("+this.width+", 20)"),this.scaleFactorDisplay.select("text").attr("text-anchor","end").style("fill",Ts.a.colorWhite).text("Zoom: "+Math.round(100*n.k)+" %")):(this.scaleFactorDisplay.attr("transform","translate(0, "+this.height+")"),this.scaleFactorDisplay.select("text").attr("text-anchor","start").style("fill",Ts.a.colorWhite).text("Zoom: "+Math.round(100*n.k)+" %")),this.captionLayer.attr("transform",this.getOrientatedLevelCaptionLayerTransform());var r=this.captionLayer.selectAll("g.emuhierarchy-levelcaption").data(this.ViewStateService.hierarchyState.path,(function(e){return e})),i=r.exit(),a=r.enter();(a=a.append("g").attr("class","emuhierarchy-levelcaption")).append("text");var o=a.filter((function(e){return"ITEM"===t.LevelService.getLevelDetails(e).type})).append("g").attr("class","emuhierarchy-addbutton").attr("transform",this.getOrientatedAddItemButtonTransform.bind(this)).on("click",this.addButtonOnClick.bind(this));o.append("circle").style("fill",Ts.a.colorBlue).attr("r",8),o.append("path").style("stroke",Ts.a.colorWhite).attr("d","M0,-6 V6 M-6,0 H6"),a.filter((function(e){var n=t.LevelService.getLevelDetails(e).type;return"SEGMENT"===n||"EVENT"===n})).append("rect").attr("class","emuhierarchy-timelevelbackground").style("fill",Ts.a.colorTransparentGrey),(r=r.merge(a)).attr("transform",this.getOrientatedLevelCaptionTransform.bind(this)),r.select("text").text(this.getLevelCaptionText.bind(this)),r.select(".emuhierarchy-timelevelbackground").attr("transform",this.getOrientatedTimeLevelBackgroundTransform.bind(this)).style("width",this.getOrientatedTimeLevelBackgroundWidth.bind(this)).style("height",this.getOrientatedTimeLevelBackgroundHeight.bind(this)),this.transition.rotation?i=i.transition().duration(this.transition.duration).remove():i.remove(),i.select("text").style("fill-opacity",0);var s=[];for(this.HierarchyLayoutService.calculateWeightsBottomUp(this.ViewStateService.hierarchyState.path),e=0;e<this.ViewStateService.hierarchyState.path.length;++e)for(var l=this.LevelService.getLevelDetails(this.ViewStateService.hierarchyState.path[e]).items,c=0;c<l.length;++c)l[c]._visible&&s.push(l[c]);var u=this.LevelService.getItemByID(this.ViewStateService.hierarchyState.selectedItemID),h=this.LevelService.getItemByID(this.ViewStateService.hierarchyState.contextMenuID),p=this.LevelService.getItemByID(this.ViewStateService.hierarchyState.selectedLinkFromID),f=this.LevelService.getItemByID(this.ViewStateService.hierarchyState.selectedLinkToID);void 0===u||u._visible||(console.debug("Unselecting node"),this.ViewStateService.hierarchyState.selectedItemID=void 0),void 0===p||p._visible||(console.debug("Unselecting link"),this.ViewStateService.hierarchyState.selectedLinkFromID=void 0,this.ViewStateService.hierarchyState.selectedLinkToID=void 0),void 0===f||f._visible||(console.debug("Unselecting link"),this.ViewStateService.hierarchyState.selectedLinkFromID=void 0,this.ViewStateService.hierarchyState.selectedLinkToID=void 0),void 0===h||h._visible||(console.debug("Closing context menu (node became invisible)"),this.ViewStateService.hierarchyState.contextMenuID=void 0);for(var d=[],v=this.DataService.getData().links,m=0;m<v.length;++m)for(e=0;e<this.ViewStateService.hierarchyState.path.length-1;++e){var g=this.LevelService.getItemFromLevelById(this.ViewStateService.hierarchyState.path[e],v[m].toID),S=this.LevelService.getItemFromLevelById(this.ViewStateService.hierarchyState.path[e+1],v[m].fromID);null!==g&&(null!==S&&g._visible&&!this.ViewStateService.hierarchyState.getCollapsed(S.id)&&S._visible&&d.push(v[m]))}s.forEach((function(e){e._x=t.depthToX(e._depth),e._y=t.posInLevelToY(e._posInLevel)})),d.forEach((function(e){e._fromX=t.depthToX(e._fromDepth),e._fromY=t.posInLevelToY(e._fromPosInLevel),e._toX=t.depthToX(e._toDepth),e._toY=t.posInLevelToY(e._toPosInLevel)}));var w=this.svg.selectAll("g.emuhierarchy-node").data(s,(function(e){return e.id})),y=w.exit(),b=w.enter(),x=(b=b.append("g").attr("class","emuhierarchy-node").merge(b).attr("pointer-events","mouseover").on("click",this.nodeOnClick.bind(this)).on("mouseover",this.nodeOnMouseOver.bind(this))).append("circle").attr("class","emuhierarchy-nodeCircle").style("stroke",Ts.a.colorGrey);this.transition.nodes?x.attr("r",0).transition().duration(this.transition.duration).attr("r",4.5):x.attr("r",4.5),b.append("text").attr("class","emuhierarchy-nodeText"),b.attr("transform",(function(e){var n=t.ViewStateService.hierarchyState.getCollapsePosition(e.id);if(void 0!==n){var r=n[0],i=n[1];return t.ViewStateService.hierarchyState.setCollapsePosition(e.id,void 0),"translate("+r+","+i+")"+t.getOrientatedNodeTransform()}})),w=w.merge(b),(y=this.transition.nodes?y.transition().duration(this.transition.duration).attr("transform",(function(e){var n=t.ViewStateService.hierarchyState.getCollapsePosition(e.id);if(void 0!==n){var r=n[0],i=n[1];return t.ViewStateService.hierarchyState.setCollapsePosition(e.id,void 0),"translate("+r+","+i+")"}return"translate(0,0)"})).remove():y.attr("transform",(function(e){var n=t.ViewStateService.hierarchyState.getCollapsePosition(e.id);if(void 0!==n){var r=n[0],i=n[1];return t.ViewStateService.hierarchyState.setCollapsePosition(e.id,void 0),"translate("+r+","+i+")"}return"translate(0,0)"})).remove()).select("text").style("fill-opacity",0),w.select("text").attr("x",this.getOrientatedTextX.bind(this)).attr("y",this.getOrientatedTextY.bind(this)).attr("text-anchor",this.getOrientatedTextAnchor.bind(this)).attr("transform",this.getOrientatedTextTransform.bind(this)).text(this.getNodeText.bind(this)),w.select("circle.emuhierarchy-nodeCircle").style("fill",(function(e){var n=Ts.a.colorWhite;return void 0!==t.selectedItem&&e.id===t.selectedItem.id&&(n=Ts.a.colorBlue),n})).style("stroke",(function(e){return t.ViewStateService.hierarchyState.getCollapsed(e.id)?Ts.a.colorRed:Ts.a.colorGrey})),this.transition.nodes?w.transition().duration(this.transition.duration).attr("transform",(function(e){return"translate("+e._x+","+e._y+")"+t.getOrientatedNodeTransform()})):w.attr("transform",(function(e){return"translate("+e._x+","+e._y+")"+t.getOrientatedNodeTransform()})),void 0===this.ViewStateService.hierarchyState.contextMenuID&&this.svg.selectAll(".emuhierarchy-contextmenu").remove();var k=this.svg.select(".emuhierarchy-contextmenu");if(k.empty()){(k=w.filter((function(e){return e.id===t.ViewStateService.hierarchyState.contextMenuID})).append("g").attr("class","emuhierarchy-contextmenu")).append("circle").style("fill","darkgrey").attr("r",50).style("cursor","default"),this.transition.contextMenu&&k.style("opacity",0).transition().duration(this.transition.duration).style("opacity",.5),k.append("text").text(this.getOrientatedNodeCollapseText.bind(this)).attr("x",-25).attr("y",-25).attr("text-anchor","middle").on("click",this.nodeOnCollapseClick.bind(this)),this.transition.contextMenu&&k.style("opacity",0).transition().duration(this.transition.duration).style("opacity",1),k.append("text").text("play").attr("x",-25).attr("y",25).attr("text-anchor","middle").on("click",this.nodeOnPlayClick.bind(this)),this.transition.contextMenu&&k.style("opacity",0).transition().duration(this.transition.duration).style("opacity",1);var C=k.append("foreignObject").attr("height",30).attr("x",10).attr("y",-15).attr("width",0);this.transition.contextMenu?C.transition().duration(this.transition.duration).attr("width",100):C.attr("width",100),C.append("xhtml:body").append("input").attr("value",this.getNodeText.bind(this)).style("width","100%").style("height","100%").style("outline","none").style("border","0").style("background-color",this.getLabelLegalnessColor.bind(this)).on("input",this.nodeOnInput.bind(this)).on("focus",this.nodeOnFocusIn.bind(this)).on("blur",this.nodeOnFocusOut.bind(this)),C.empty()||(C.select("input").node().focus(),C.select("input").node().select())}else this.svg.select(".emuhierarchy-contextmenu text").text(this.getOrientatedNodeCollapseText.bind(this));this.svg.selectAll(".emuhierarchy-node").sort((function(e,n){return e.id===t.ViewStateService.hierarchyState.contextMenuID?1:n.id===t.ViewStateService.hierarchyState.contextMenuID?-1:0}));var $=this.svg.selectAll(".emuhierarchy-linkgroup").data(d,(function(e){return"s"+e.fromID+"t"+e.toID})),P=$.exit(),E=$.enter();(E=E.insert("g",":first-child").attr("class","emuhierarchy-linkgroup")).append("path").attr("class","emuhierarchy-ghostlink").style("stroke-width",this.getOrientatedGhostLinkStrokeWidth.bind(this)).on("mouseover",this.linkOnMouseOver.bind(this)),E.append("path").attr("class","emuhierarchy-link").style("stroke-width",this.getOrientatedLinkStrokeWidth.bind(this)),this.transition.links&&E.style("opacity",0).transition().duration(this.transition.duration).style("opacity",1),$=$.merge(E),this.transition.links?P.transition().duration(this.transition.duration).style("opacity",0).remove():P.remove(),$.selectAll(".emuhierarchy-link").style("stroke",(function(e){return t.selectedLink===e?Ts.a.colorYellow:Ts.a.colorGrey})),this.transition.links?$.selectAll(".emuhierarchy-link").transition().duration(this.transition.duration).attr("d",this.getPath.bind(this)).style("stroke-width",this.getOrientatedLinkStrokeWidth.bind(this)).style("opacity",1):$.selectAll(".emuhierarchy-link").attr("d",this.getPath.bind(this)).style("stroke-width",this.getOrientatedLinkStrokeWidth),$.selectAll(".emuhierarchy-ghostlink").attr("d",this.getPath.bind(this)),this.svg.selectAll(".emuhierarchy-newlink").remove(),this.svg.selectAll(".emuhierarchy-newlinkpreview").remove(),void 0!==this.newLinkSrc&&(this.svg.append("path").attr("class","emuhierarchy-newlink").style("stroke","black").style("stroke-width",this.getOrientatedLinkStrokeWidth.bind(this)),this.svg.append("path").attr("class","emuhierarchy-newlinkpreview").attr("d",this.getPreviewPath.bind(this)).style("stroke",this.getPreviewColor.bind(this)).style("stroke-width",this.getOrientatedLinkStrokeWidth.bind(this))),this.vertical?(this.northernBoundary=this.vertOffsetY+this.height*(1-this.panningLimit),this.southernBoundary=this.height*this.panningLimit,this.westernBoundary=this.vertOffsetX+this.width*(1-this.panningLimit),this.easternBoundary=this.width*this.panningLimit):(this.northernBoundary=this.offsetY+this.height*(1-this.panningLimit),this.southernBoundary=this.height*this.panningLimit,this.westernBoundary=this.offsetX+this.width*(1-this.panningLimit),this.easternBoundary=this.width*this.panningLimit),this.timeAxisStartPosition=this.svg.node().getBBox().y,this.timeAxisEndPosition=this.timeAxisStartPosition+this.svg.node().getBBox().height,this.crossAxisStartPosition=this.svg.node().getBBox().x,this.crossAxisEndPosition=this.crossAxisStartPosition+this.svg.node().getBBox().width},e}()]};r.module("emuwebApp").component(_s.selector,_s);var Ms={selector:"settings",template:'\n\t<div class="emuwebapp-text">\n\t\t<div ng-if="$ctrl.ConfigProviderService.curDbConfig.linkDefinitions.length > 0">\n\t\t<h1>Hierarchy Settings</h1>\n\n\t\t<span>Show hierarchy path canvas: <input type="checkbox" ng-model="$ctrl.hierarchySettings.showHierarchyPathCanvas"></span>\n\n\t\t<h2>Visable Path</h2>\n\t\t<select \n\t\tid="emuwebapp-selection" \n\t\tname="emuwebapp-selection" \n\t\tng-model="$ctrl.hierarchySettings.paths.selected" \n\t\tng-options="value for value in $ctrl.hierarchySettings.paths.possibleAsStr"\n\t\tng-change="$ctrl.getCurVisAttributes()"></select>\n\t\t\n\t\t<h2>Visable Attribute Definitions</h2>\n\t\t<div class="emuwebapp-nav-wrap" ng-repeat="(key, levelName) in $ctrl.StandardFuncsService.reverseCopy($ctrl.hierarchySettings.paths.possible[$ctrl.getSelHierarchyPathIdx()])">\n\t\t{{levelName}}: \n\t\t\t<select \n\t\t\tid="emuwebapp-selection" \n\t\t\tname="emuwebapp-selection"\n\t\t\tng-options="attrDef as attrDef for attrDef in $ctrl.ConfigProviderService.getAttrDefsNames(levelName)"\n\t\t\tng-model="$ctrl.hierarchySettings.paths.curVisAttributeDefs[levelName]"\n\t\t\t>\n\t\t\t</select>\n\t\t</div>\n\t\t</div>\n\t<h1>Level Canvas Settings</h1>\n\n\t<span>Font scaling factor: <input type="range" ng-model="$ctrl.levelCanvasesFontScalingFactor" min="1" max="200"> {{$ctrl.levelCanvasesFontScalingFactor}}%</span>\n\n\n    <h1>OSCI Settings</h1>\n    <div>\n        <h2>Current channel</h2>\n        <select ng-model="$ctrl.osciChannel" ng-options="channel for channel in $ctrl.osciAvailableChannels"></select>\n    </div>\t\n    <h1>SPEC Settings</h1>\n    <div>\n        <h2>View Range (Hz)</h2>\n\t\tFrom: <input type="text" \n\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\tng-style="$ctrl.cssError(2,4)" \n\t\tng-model="$ctrl.modalVals.rangeFrom" \n\t\tng-focus="$ctrl.cursorInTextField();" \n\t\tng-blur="$ctrl.cursorOutOfTextField();"/>\n\t\tTo: <input type="text" \n\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\tng-style="$ctrl.cssError(1,3)" \n\t\tng-model="$ctrl.modalVals.rangeTo" \n\t\tng-focus="$ctrl.cursorInTextField();" \n\t\tng-blur="$ctrl.cursorOutOfTextField();"/><br />\n        <div ng-show="$ctrl.htmlError(1)"><b style="color: #f00;">Error:</b> Upper Range is bigger then {{upperBoundary}}</div>\n        <div ng-show="$ctrl.htmlError(2)"><b style="color: #f00;">Error:</b> Only positive Integers are allowed.</div>\n        <div ng-show="$ctrl.htmlError(3)"><b style="color: #f00;">Error:</b> Only Integers allowed inside \'To\'.</div>\n        <div ng-show="$ctrl.htmlError(4)"><b style="color: #f00;">Error:</b> Only Integers allowed inside \'From\'.</div>\n    </div>\n    <div>\n        <h2>Window Size (seconds)</h2>\n        <span>resulting number of samples <em>{{$ctrl.modalVals._windowSizeInSamples}}</em> zero-padded to <em>{{$ctrl.modalVals._fftN}} (min. = 512)</em></span>\n\t\t<input type="text" \n\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\tng-style="$ctrl.cssError(6)" \n\t\tng-model="$ctrl.modalVals.windowSizeInSecs" \n\t\tng-change="$ctrl.calcWindowSizeVals()" \n\t\tng-focus="$ctrl.cursorInTextField();" \n\t\tng-blur="$ctrl.cursorOutOfTextField();"/> <br />\n        <div ng-show="$ctrl.htmlError(6)"><b style="color: #f00;">Error:</b> Only Floats are allowed.</div>\n    </div>\n    <div>\n        <h2>Dynamic Range for Maximum (dB)</h2>\n\t\t<input type="text" \n\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\tng-style="$ctrl.cssError(5)" \n\t\tng-model="$ctrl.modalVals.dynamicRange" \n\t\tng-focus="$ctrl.cursorInTextField();" \n\t\tng-blur="$ctrl.cursorOutOfTextField();"/> <br />\n        <div ng-show="$ctrl.htmlError(5)"><b style="color: #f00;">Error:</b> Only Integers are allowed.</div>\n    </div>\n    <div>\n        <h2>Pre-emphasis filter factor</h2> \n        <span>resulting high pass filter function: <em>ŝ(k) = s(k)-{{$ctrl.modalVals.preEmphasisFilterFactor}}*s(k-1)</em></span>\n\t\t<input type="text" \n\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\tng-style="$ctrl.cssError(7)" \n\t\tng-model="$ctrl.modalVals.preEmphasisFilterFactor" \n\t\tng-focus="$ctrl.cursorInTextField();" \n\t\tng-blur="$ctrl.cursorOutOfTextField();"/> <br />\n        <div ng-show="$ctrl.htmlError(7)"><b style="color: #f00;">Error:</b> Only Floats are allowed.</div>\n    </div>\n    <div>\n        <h2>Window Function</h2>\n\t\t<select id="selWindowInfo" \n\t\tng-model="$ctrl.selWindowInfo.name" \n\t\tng-options="opt for opt in $ctrl.windowOptions"></select>\n    </div>\n    <div>\n        <h2>Invert</h2>\n        <span>Invert colors of spectrogram: <input type="checkbox" ng-model="$ctrl.modalVals.invert"></span>\n    </div>\n    <div>\n        <h2>Color Options</h2>\n        <span>Draw spectrogram in heat map colors: <input type="checkbox" ng-model="$ctrl.modalVals.drawHeatMapColors"></span>\n        <table class=\'emuwebapp-modalTable\' ng-style="$ctrl.cssError(8)">\n            <tr>\n                <th></th>\n                <th>red</th>\n                <th>green</th>\n                <th>blue</th>\n                <th>resulting color</th>\n            </tr>\n\n            <tr>\n                <td>First spectrogram color anchor:</td>\n\t\t\t\t<td>r: <input type="text" class="emuwebapp-rgbTextInput" \n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()"  \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[0][0]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n\t\t\t\t<td>g: <input type="text" class="emuwebapp-rgbTextInput"\n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[0][1]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n\t\t\t\t<td>b: <input type="text" class="emuwebapp-rgbTextInput"\n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[0][2]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n                <td><div ng-style="$ctrl.ViewStateService.getColorOfAnchor($ctrl.modalVals.heatMapColorAnchors, 0);"></div></td>\n            </tr>\n            <tr>\n                <td>Second spectrogram color anchor: </td>\n\t\t\t\t<td>r: <input  type="text" class="emuwebapp-rgbTextInput" \n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[1][0]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n\t\t\t\t<td>g: <input  type="text" class="emuwebapp-rgbTextInput" \n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[1][1]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n\t\t\t\t<td>b: <input  type="text" class="emuwebapp-rgbTextInput" \n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[1][2]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n                <td><div ng-style="$ctrl.ViewStateService.getColorOfAnchor($ctrl.modalVals.heatMapColorAnchors, 1);"></div></td>\n            </tr>\n            <tr>\n                <td>Third spectrogram color anchor: </td>\n\t\t\t\t<td>r: <input  type="text" class="emuwebapp-rgbTextInput" \n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[2][0]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n\t\t\t\t<td>g: <input  type="text" class="emuwebapp-rgbTextInput" \n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[2][1]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n\t\t\t\t<td>b: <input  type="text" class="emuwebapp-rgbTextInput" \n\t\t\t\tng-keyup="$ctrl.checkSpectroSettings()" \n\t\t\t\tng-model="$ctrl.modalVals.heatMapColorAnchors[2][2]" \n\t\t\t\tng-focus="$ctrl.cursorInTextField();" \n\t\t\t\tng-blur="$ctrl.cursorOutOfTextField();"/></td>\n                <td><div ng-style="$ctrl.ViewStateService.getColorOfAnchor($ctrl.modalVals.heatMapColorAnchors, 2);"></div></td>\n            </tr>\n        </table>\n        <div ng-show="$ctrl.htmlError(8)"><b style="color: #f00;">Error:</b> Only Integers allowed.</div>\n    </div>\n</div>\n<div class="emuwebapp-inline-modal-footer">\n\t<button class="emuwebapp-mini-btn" ng-click="$ctrl.reset()"><i class="material-icons">cancel</i>Cancel</button>\n\t<button id="emuwebapp-modal-save" class="emuwebapp-mini-btn" ng-click="$ctrl.saveSettings()"><i class="material-icons">save</i>Save</button>\n</div>\n',bindings:{},controller:["$scope","ModalService","ViewStateService","DataService","MathHelperService","SoundHandlerService","StandardFuncsService","HierarchyLayoutService","ConfigProviderService",function(){function e(e,t,n,r,i,a,o,s,l){this.$scope=e,this.ModalService=t,this.ViewStateService=n,this.DataService=r,this.MathHelperService=i,this.SoundHandlerService=a,this.StandardFuncsService=o,this.HierarchyLayoutService=s,this.ConfigProviderService=l,this.windowOptions=Object.keys(this.ViewStateService.getWindowFunctions()),this.selWindowInfo={},this.selWindowInfo.name=Object.keys(this.ViewStateService.getWindowFunctions())[this.ViewStateService.spectroSettings.window-1],this.errorID=[],this.upperBoundary="",this.osciChannel=this.ViewStateService.osciSettings.curChannel,"number"==typeof this.SoundHandlerService.audioBuffer.numberOfChannels&&(this.osciAvailableChannels=Array.from(Array(this.SoundHandlerService.audioBuffer.numberOfChannels).keys())),this.modalVals={rangeFrom:this.ViewStateService.spectroSettings.rangeFrom,rangeTo:this.ViewStateService.spectroSettings.rangeTo,dynamicRange:this.ViewStateService.spectroSettings.dynamicRange,windowSizeInSecs:this.ViewStateService.spectroSettings.windowSizeInSecs,window:this.ViewStateService.spectroSettings.window,drawHeatMapColors:this.ViewStateService.spectroSettings.drawHeatMapColors,preEmphasisFilterFactor:this.ViewStateService.spectroSettings.preEmphasisFilterFactor,heatMapColorAnchors:this.ViewStateService.spectroSettings.heatMapColorAnchors,_fftN:512,_windowSizeInSamples:this.SoundHandlerService.audioBuffer.sampleRate*this.ViewStateService.spectroSettings.windowSizeInSecs,invert:this.ViewStateService.spectroSettings.invert},this.hierarchySettings={paths:{possible:[],possibleAsStr:[],selected:"",curVisAttributeDefs:{}},showHierarchyPathCanvas:"true"==localStorage.getItem("showHierarchyPathCanvas")};var c=this.HierarchyLayoutService.findAllNonPartialPaths();this.hierarchySettings.paths.possible=c.possible,this.hierarchySettings.paths.possibleAsStr=c.possibleAsStr,this.hierarchySettings.paths.selected=this.hierarchySettings.paths.possibleAsStr[n.hierarchyState.curPathIdx],this.getCurVisAttributes(),this.ViewStateService.hierarchyState.curNrOfPaths=this.hierarchySettings.paths.possibleAsStr.length,0===Number(localStorage.getItem("levelCanvasesFontScalingFactor"))?this.levelCanvasesFontScalingFactor=100:this.levelCanvasesFontScalingFactor=Number(localStorage.getItem("levelCanvasesFontScalingFactor"))}return e.prototype.getCurVisAttributes=function(){var e=this;(this.hierarchySettings.paths.curVisAttributeDefs={},void 0!==this.hierarchySettings.paths.possible[this.getSelHierarchyPathIdx()])&&this.StandardFuncsService.reverseCopy(this.hierarchySettings.paths.possible[this.getSelHierarchyPathIdx()]).forEach((function(t){e.hierarchySettings.paths.curVisAttributeDefs[t]=e.ViewStateService.getCurAttrDef(t)}))},e.prototype.getSelHierarchyPathIdx=function(){return this.hierarchySettings.paths.possibleAsStr.indexOf(this.hierarchySettings.paths.selected)},e.prototype.cursorInTextField=function(){this.ViewStateService.setEditing(!0),this.ViewStateService.setcursorInTextField(!0)},e.prototype.cursorOutOfTextField=function(){this.ViewStateService.setEditing(!1),this.ViewStateService.setcursorInTextField(!1)},e.prototype.calcWindowSizeInSamples=function(){this.modalVals._windowSizeInSamples=this.SoundHandlerService.audioBuffer.sampleRate*this.modalVals.windowSizeInSecs},e.prototype.calcFftN=function(){var e=this.MathHelperService.calcClosestPowerOf2Gt(this.modalVals._windowSizeInSamples);e<512&&(e=512),this.modalVals._fftN=e},e.prototype.calcWindowSizeVals=function(){this.calcWindowSizeInSamples(),this.calcFftN()},e.prototype.reset=function(){this.errorID=[],this.modalVals={rangeFrom:this.ViewStateService.spectroSettings.rangeFrom,rangeTo:this.ViewStateService.spectroSettings.rangeTo,dynamicRange:this.ViewStateService.spectroSettings.dynamicRange,windowSizeInSecs:this.ViewStateService.spectroSettings.windowSizeInSecs,window:this.ViewStateService.spectroSettings.window,drawHeatMapColors:this.ViewStateService.spectroSettings.drawHeatMapColors,preEmphasisFilterFactor:this.ViewStateService.spectroSettings.preEmphasisFilterFactor,heatMapColorAnchors:this.ViewStateService.spectroSettings.heatMapColorAnchors,_fftN:512,_windowSizeInSamples:this.SoundHandlerService.audioBuffer.sampleRate*this.ViewStateService.spectroSettings.windowSizeInSecs,invert:this.ViewStateService.spectroSettings.invert},this.ModalService.close()},e.prototype.cssError=function(e,t){return this.errorID[e]||void 0!==t&&this.errorID[t]?{background:"#f00"}:void 0},e.prototype.htmlError=function(e){return this.errorID[e]},e.prototype.saveSettings=function(){var e=this,t=!1;this.errorID.forEach((function(e){!0===e&&(t=!0)})),t||(this.ViewStateService.setspectroSettings(this.modalVals.windowSizeInSecs,this.modalVals.rangeFrom,this.modalVals.rangeTo,this.modalVals.dynamicRange,this.selWindowInfo.name,this.modalVals.drawHeatMapColors,this.modalVals.preEmphasisFilterFactor,this.modalVals.heatMapColorAnchors,this.modalVals.invert),this.ViewStateService.setOsciSettings(this.osciChannel),this.ViewStateService.hierarchyState.path=this.hierarchySettings.paths.possible[this.getSelHierarchyPathIdx()],this.ViewStateService.hierarchyState.curPathIdx=this.getSelHierarchyPathIdx(),Object.keys(this.hierarchySettings.paths.curVisAttributeDefs).forEach((function(t){e.ViewStateService.setCurAttrDef(t,e.hierarchySettings.paths.curVisAttributeDefs[t],e.ConfigProviderService.getAttrDefsNames(t).indexOf(e.hierarchySettings.paths.curVisAttributeDefs[t]))})),this.hierarchySettings.showHierarchyPathCanvas?localStorage.setItem("showHierarchyPathCanvas","true"):localStorage.setItem("showHierarchyPathCanvas","false"),localStorage.setItem("levelCanvasesFontScalingFactor",this.levelCanvasesFontScalingFactor),this.reset())},e.prototype.checkSpectroSettings=function(){this.modalVals.heatMapColorAnchors[0][0]%1!=0||this.modalVals.heatMapColorAnchors[0][1]%1!=0||this.modalVals.heatMapColorAnchors[0][2]%1!=0||this.modalVals.heatMapColorAnchors[1][0]%1!=0||this.modalVals.heatMapColorAnchors[1][1]%1!=0||this.modalVals.heatMapColorAnchors[1][2]%1!=0||this.modalVals.heatMapColorAnchors[2][0]%1!=0||this.modalVals.heatMapColorAnchors[2][1]%1!=0||this.modalVals.heatMapColorAnchors[2][2]%1!=0?this.errorID[8]=!0:this.errorID[8]=!1,isNaN(this.modalVals.preEmphasisFilterFactor*this.SoundHandlerService.audioBuffer.sampleRate)?this.errorID[7]=!0:this.errorID[7]=!1,isNaN(this.SoundHandlerService.audioBuffer.sampleRate*this.modalVals.windowSizeInSecs)?this.errorID[6]=!0:this.errorID[6]=!1,this.modalVals.dynamicRange%1!=0?this.errorID[5]=!0:this.errorID[5]=!1,this.modalVals.rangeFrom%1!=0?this.errorID[4]=!0:this.errorID[4]=!1,this.modalVals.rangeTo%1!=0?this.errorID[3]=!0:this.errorID[3]=!1,this.modalVals.rangeFrom<0?this.errorID[2]=!0:this.errorID[2]=!1,this.upperBoundary=this.DataService.data.sampleRate/2,this.modalVals.rangeTo>this.upperBoundary?this.errorID[1]=!0:this.errorID[1]=!1},e}()]};r.module("emuwebApp").component(Ms.selector,Ms);var As={selector:"osci",template:'\n    <div class="emuwebapp-timeline">\n    <div class="emuwebapp-timelineCanvasContainer">\n    \n    <canvas \n    class="emuwebapp-timelineCanvasMain" \n    width="4096"></canvas>\n    \n    \x3c!--\n    <canvas \n    class="emuwebapp-timelineCanvasSSFF" \n    width="4096" \n    drawssff \n    ssff-trackname="{{$ctrl.trackName}}"></canvas>\n    --\x3e\n\n    <ssff-canvas\n    track-name="$ctrl.trackName"\n    all-ssff-data="$ctrl.SsffDataService.data"\n    view-port-sample-start="$ctrl.viewPortSampleStart"\n    view-port-sample-end="$ctrl.viewPortSampleEnd"\n    cur-bndl="$ctrl.curBundl"\n    cur-mouse-x="$ctrl.curMouseX"\n    cur-mouse-y="$ctrl.curMouseY"\n    ></ssff-canvas>\n\n\n    <signal-canvas-markup-canvas\n    track-name="$ctrl.trackName"\n    play-head-current-sample="$ctrl.playHeadCurrentSample"\n    moving-boundary-sample="$ctrl.movingBoundarySample"\n    cur-mouse-x="$ctrl.curMouseX" \n    moving-boundary="$ctrl.movingBoundary"\n    view-port-sample-start="$ctrl.viewPortSampleStart"\n    view-port-sample-end="$ctrl.viewPortSampleEnd"\n    view-port-select-start="$ctrl.viewPortSelectStart"\n    view-port-select-end="$ctrl.viewPortSelectEnd"\n    cur-bndl="$ctrl.curBundl"\n    ></signal-canvas-markup-canvas>\n    ',bindings:{trackName:"<",curChannel:"<",lastUpdate:"<",timelineSize:"<",curPerspectiveIdx:"<",playHeadCurrentSample:"<",movingBoundarySample:"<",curMouseX:"<",movingBoundary:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",viewPortSelectStart:"<",viewPortSelectEnd:"<",curBndl:"<"},controller:["$scope","$element","$timeout","ViewStateService","SoundHandlerService","ConfigProviderService","SsffDataService","DrawHelperService","LoadedMetaDataService",function(e,t,n,r,i,a,o,s,l){this.$postLink=function(){this.canvasLength=this.$element.find("canvas").length,this.canvas=this.$element.find("canvas")[0]},this.$onChanges=function(e){this._inited&&(e.timelineSize&&this.$timeout(this.redraw,Ts.a.animationPeriod),e.curBndl&&this.DrawHelperService.freshRedrawDrawOsciOnCanvas(this.canvas,this.viewPortSampleStart,this.viewPortSampleEnd,!0),(e.viewPortSampleStart||e.viewPortSampleEnd||e.curChannel)&&this.DrawHelperService.freshRedrawDrawOsciOnCanvas(this.canvas,this.viewPortSampleStart,this.viewPortSampleEnd,!1))},this.$onInit=function(){this._inited=!0},this.$scope=e,this.$element=t,this.$timeout=n,this.ViewStateService=r,this.SoundHandlerService=i,this.ConfigProviderService=a,this.SsffDataService=o,this.DrawHelperService=s,this.LoadedMetaDataService=l,this._inited=!1}]};r.module("emuwebApp").component(As.selector,As);n(212);var Ds=n(69),Ls=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Vs=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Is={selector:"emuwebapp",template:'\n    <div\n    class="emuwebapp-main" \n    id="MainCtrl">\n        \x3c!-- start: modal --\x3e\n        <modal></modal>\n        \x3c!-- end: modal --\x3e\n        \x3c!-- start: hint --\x3e\n\t\t<new-version-hint \n\t\tng-if="$ctrl.internalVars.showAboutHint"\n\t\tabout-btn-overlay-click="$ctrl.aboutBtnClick()"\n\t\t></new-version-hint>\n        \x3c!-- end: hint --\x3e\n        \x3c!-- start: left side menu bar --\x3e\n\t\t<bundle-list-side-bar \n\t\tng-if="!$ctrl.ViewStateService.bundleListSideBarDisabled"\n\t\topen="$ctrl.ViewStateService.bundleListSideBarOpen">\n\t\t</bundle-list-side-bar>\n        \x3c!-- end: left side menu bar --\x3e\n\n        \x3c!-- start: main window --\x3e\n        <div class="emuwebapp-window" id="mainWindow">\n\t\t\t<progress-bar \n\t\t\tclass="emuwebapp-progressBar"\n\t\t\topen="$ctrl.ViewStateService.somethingInProgress"\n\t\t\ttxt="$ctrl.ViewStateService.somethingInProgressTxt"\n\t\t\t></progress-bar>\n\t\t\t\n\t\t\t<div class="printTitle">EMU-webApp : {{$ctrl.LoadedMetaDataService.getCurBndlName()}}</div>\n\n            \x3c!-- start: top menu bar --\x3e\n            <div class="emuwebapp-top-menu">\n                <button class="emuwebapp-button-icon" \n                id="bundleListSideBarOpen" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.openMenu && !$ctrl.ViewStateService.bundleListSideBarDisabled"\n                ng-click="$ctrl.ViewStateService.toggleBundleListSideBar($ctrl.styles.animation.period);" \n                style="float:left"><i class="material-icons">menu</i></button>\n\n                <button class="emuwebapp-mini-btn left"\n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.saveBundle && $ctrl.ViewStateService.bundleListSideBarDisabled"\n                ng-click="$ctrl.DbObjLoadSaveService.saveBundle();"\n                ng-style="$ctrl.getUnsavedChangesColor()"\n                style="float:left"><i class="material-icons">save</i> Save</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.addLevelSeg" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'addLevelSegBtnClick\')" \n                ng-click="$ctrl.addLevelSegBtnClick();">add level (SEG.)</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.addLevelEvent" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'addLevelPointBtnClick\')" \n                ng-click="$ctrl.addLevelPointBtnClick();">add level (EVENT)</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.renameSelLevel" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'renameSelLevelBtnClick\')" \n                ng-click="$ctrl.renameSelLevelBtnClick();">rename sel. level</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                id="downloadTextgrid" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.downloadTextGrid" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'downloadTextGridBtnClick\')" \n                ng-click="$ctrl.downloadTextGridBtnClick();"><i class="material-icons">save</i>TextGrid</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                id="downloadAnnotation" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.downloadAnnotation" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'downloadAnnotationBtnClick\')" \n                ng-click="$ctrl.downloadAnnotationBtnClick();"><i class="material-icons">save</i>annotJSON</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                id="attachAnnotationBtn"\n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.downloadAnnotation" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'downloadAnnotationBtnClick\')" \n                ng-click="$ctrl.attachAnnotationBtnClick();"><i class="material-icons">note_add</i>attach annot</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                id="spectSettingsBtn" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.specSettings" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'spectSettingsChange\')" \n                ng-click="$ctrl.settingsBtnClick();"><i class="material-icons">settings</i> settings</button>\n                \n                <div class="emuwebapp-nav-wrap" ng-show="$ctrl.ConfigProviderService.vals.activeButtons.openDemoDB">\n                    <ul class="emuwebapp-dropdown-container">\n                        <li class="left">\n                            <button type="button" \n                            class="emuwebapp-mini-btn full" \n                            id="demoDB" \n                            ng-mouseover="$ctrl.dropdown = true" \n                            ng-mouseleave="$ctrl.dropdown = false" \n                            ng-click="$ctrl.dropdown = !$ctrl.dropdown" \n                            ng-disabled="!$ctrl.ViewStateService.getPermission(\'openDemoBtnDBclick\')">open demo <span id="emuwebapp-dropdown-arrow"></span></button>\n                            <ul class="emuwebapp-dropdown-menu" \n                            ng-mouseover="$ctrl.dropdown = true" \n                            ng-mouseleave="$ctrl.dropdown = false" \n                            ng-init="$ctrl.dropdown = false" \n                            ng-show="$ctrl.dropdown">\n                                <li class="divider"></li>\n                                <li \n                                ng-repeat="curDB in $ctrl.ConfigProviderService.vals.demoDBs" \n                                ng-click="$ctrl.openDemoDBbtnClick(curDB);" id="demo{{$index}}">{{curDB}}</li>\n                            </ul>\n                        </li>\n                    </ul>\n                </div>\n\n                <button class="emuwebapp-mini-btn left" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.connect" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'connectBtnClick\')" \n                ng-click="$ctrl.connectBtnClick();"><i class="material-icons">input</i>{{connectBtnLabel}}</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                id="showHierarchy" \n                ng-click="$ctrl.showHierarchyBtnClick();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'showHierarchyBtnClick\')" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.showHierarchy"><i class="material-icons" style="transform: rotate(180deg)">details</i>hierarchy</button>\n          \n                <button class="emuwebapp-mini-btn left" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.search" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'searchBtnClick\')" \n                ng-click="$ctrl.searchBtnClick();"><i class="material-icons">search</i>search</button>\n                \n                <button class="emuwebapp-mini-btn left" \n                id="clear" \n                ng-show="$ctrl.ConfigProviderService.vals.activeButtons.clear" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'clearBtnClick\')" \n                ng-click="$ctrl.clearBtnClick();"><i class="material-icons">clear_all</i>clear</button>\n                \n                <button class="emuwebapp-button-icon" \n                id="aboutBtn" \n                style="float: right;" \n                ng-click="$ctrl.aboutBtnClick();"><img src="assets/EMU-webAppEmu.svg" class="_35px" /></button>\n            </div>\n            \x3c!-- top menu bar end --\x3e\n            <input type="file" id="attachAnnotationInput" style="display:none" accept=".textgrid,.TextGrid,.json,.JSON,.annot.json,.Annot.json">\n\n            \x3c!-- start: media toolbar --\x3e\n            <div class="emuwebapp-media-toolbar">\n                <div>\n                    <osci-overview class="preview" \n\t\t\t\t\tid="preview"\n\t\t\t\t\tcur-channel="$ctrl.ViewStateService.osciSettings.curChannel"\n\t\t\t\t\tview-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n\t\t\t\t\tview-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n\t\t\t\t\tcur-bndl="$ctrl.LoadedMetaDataService.getCurBndl()"\n\t\t\t\t\t></osci-overview>\n                </div>\n\n                <button class="emuwebapp-mini-btn left"\n                id="zoomInBtn" \n                ng-click="$ctrl.cmdZoomIn();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'zoom\')"><i class="material-icons">expand_less</i>in</button>\n                \n                <button class="emuwebapp-mini-btn left"\n                id="zoomOutBtn" \n                ng-click="$ctrl.cmdZoomOut();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'zoom\')"><i class="material-icons">expand_more</i>out</button>\n                \n                <button class="emuwebapp-mini-btn left"\n                id="zoomLeftBtn" \n                ng-click="$ctrl.cmdZoomLeft();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'zoom\')"><i class="material-icons">chevron_left</i>left</button>\n                \n                <button class="emuwebapp-mini-btn left"\n                id="zoomRightBtn" \n                ng-click="$ctrl.cmdZoomRight();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'zoom\')"><i class="material-icons">chevron_right</i>right</button>\n                \n                <button class="emuwebapp-mini-btn left"\n                id="zoomAllBtn" \n                ng-click="$ctrl.cmdZoomAll();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'zoom\')"><i class="material-icons" style="transform: rotate(90deg)">unfold_less</i>all</button>\n\n                <button class="emuwebapp-mini-btn left"\n                id="zoomSelBtn" \n                ng-click="$ctrl.cmdZoomSel();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'zoom\')"><i class="material-icons" style="transform: rotate(90deg)">unfold_more</i>selection</button>\n                \n                <button class="emuwebapp-mini-btn left"\n                id="playViewBtn" \n                ng-show="$ctrl.ConfigProviderService.vals.restrictions.playback" \n                ng-click="$ctrl.cmdPlayView();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'playaudio\')" ><i class="material-icons">play_arrow</i>in view</button>\n                \n                <button class="emuwebapp-mini-btn left"\n                id="playSelBtn" \n                ng-show="$ctrl.ConfigProviderService.vals.restrictions.playback" \n                ng-click="$ctrl.cmdPlaySel();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'playaudio\')"><i class="material-icons">play_circle_outline</i>selected</button>\n                \n                <button class="emuwebapp-mini-btn left"\n                id="playAllBtn" \n                ng-show="$ctrl.ConfigProviderService.vals.restrictions.playback" \n                ng-click="$ctrl.cmdPlayAll();" \n                ng-disabled="!$ctrl.ViewStateService.getPermission(\'playaudio\')"><i class="material-icons">play_circle_filled</i>entire file</button>\n            </div>\n            \x3c!-- end: media toolbar --\x3e\n\n            \x3c!-- vertical split layout that contains top and bottom pane --\x3e\n            <div class="emuwebapp-canvas">\n\t\t\t\t<history-action-popup\n\t\t\t\tclass="emuwebapp-history"\n\t\t\t\thistory-action-txt="$ctrl.ViewStateService.historyActionTxt">\n\t\t\t\t</history-action-popup>\n                <bg-splitter show-two-dim-cans="{{$ctrl.ConfigProviderService.vals.perspectives[$ctrl.ViewStateService.curPerspectiveIdx].twoDimCanvases.order.length > 0}}">\n                    <bg-pane type="topPane" min-size="80" max-size="500">\n                        <ul class="emuwebapp-timeline-flexcontainer">\n                            <li class="emuwebapp-timeline-flexitem" ng-style="{\'height\': getEnlarge($index)}" ng-repeat="curTrack in $ctrl.ConfigProviderService.vals.perspectives[$ctrl.ViewStateService.curPerspectiveIdx].signalCanvases.order track by $index" ng-switch on="curTrack">\n                                <osci \n                                ng-switch-when="OSCI" \n                                track-name="curTrack"\n                                cur-channel="$ctrl.ViewStateService.osciSettings.curChannel"\n                                last-update="$ctrl.ViewStateService.lastUpdate"\n                                timeline-size="$ctrl.ViewStateService.timelineSize"\n                                cur-perspective-idx="$ctrl.ViewStateService.curPerspectiveIdx"\n                                play-head-current-sample="$ctrl.ViewStateService.playHeadAnimationInfos.curS"\n                                moving-boundary-sample="$ctrl.ViewStateService.movingBoundarySample"\n                                cur-mouse-x="$ctrl.ViewStateService.curMouseX"\n                                moving-boundary="$ctrl.ViewStateService.movingBoundary"\n                                view-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n                                view-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n                                view-port-select-start="$ctrl.ViewStateService.curViewPort.selectS"\n                                view-port-select-end="$ctrl.ViewStateService.curViewPort.selectE"\n                                cur-bndl="$ctrl.LoadedMetaDataService.getCurBndl()"\n                                ></osci>\n                                \n                                <spectro \n                                ng-switch-when="SPEC" \n                                track-name="curTrack"\n\t\t\t\t\t\t\t\twindow-size-in-secs="$ctrl.ViewStateService.spectroSettings.windowSizeInSecs"\n\t\t\t\t\t\t\t\trange-from="$ctrl.ViewStateService.spectroSettings.rangeFrom"\n\t\t\t\t\t\t\t\trange-to="$ctrl.ViewStateService.spectroSettings.rangeTo"\n\t\t\t\t\t\t\t\tdynamic-range="$ctrl.ViewStateService.spectroSettings.dynamicRange"\n\t\t\t\t\t\t\t\twindow="$ctrl.ViewStateService.spectroSettings.window"\n\t\t\t\t\t\t\t\tdraw-heat-map-colors="$ctrl.ViewStateService.spectroSettings.drawHeatMapColors"\n\t\t\t\t\t\t\t\tpre-emphasis-filter-factor="$ctrl.ViewStateService.spectroSettings.preEmphasisFilterFactor"\n\t\t\t\t\t\t\t\theat-map-color-anchors="$ctrl.ViewStateService.spectroSettings.heatMapColorAnchors"\n\t\t\t\t\t\t\t\tinvert="$ctrl.ViewStateService.spectroSettings.invert"\n                                osci-settings="$ctrl.ViewStateService.osciSettings"\n                                last-update="$ctrl.ViewStateService.lastUpdate"\n                                moving-boundary-sample="$ctrl.ViewStateService.movingBoundarySample"\n\t\t\t\t\t\t\t\tcur-mouse-x="$ctrl.ViewStateService.curMouseX"\n\t\t\t\t\t\t\t\tcur-mouse-y="$ctrl.ViewStateService.curMouseY"\n                                view-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n                                view-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n                                view-port-select-start="$ctrl.ViewStateService.curViewPort.selectS"\n                                view-port-select-end="$ctrl.ViewStateService.curViewPort.selectE"\n                                cur-bndl="$ctrl.LoadedMetaDataService.getCurBndl()"\n                                ></spectro>\n                                \n                                <ssff-track \n                                ng-switch-default \n                                order="{{$index}}" \n\t\t\t\t\t\t\t\ttrack-name="curTrack"\n\t\t\t\t\t\t\t\tcur-mouse-x="$ctrl.ViewStateService.curMouseX"\n\t\t\t\t\t\t\t\tcur-mouse-y="$ctrl.ViewStateService.curMouseY"\n                                view-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n                                view-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n                                view-port-select-start="$ctrl.ViewStateService.curViewPort.selectS"\n                                view-port-select-end="$ctrl.ViewStateService.curViewPort.selectE"\n                                ></ssff-track>\n                            </li>\n                        </ul>\n                    </bg-pane>\n                    <bg-pane type="bottomPane" min-size="80">\n                        \x3c!-- ghost level div containing ul of ghost levels--\x3e\n                        <div style="margin-top: 25px;">\n                            <hierarchy-path-canvas \n                            ng-if="$ctrl.ViewStateService.getPermission(\'zoom\') && $ctrl.ConfigProviderService.curDbConfig.linkDefinitions.length > 0 && $ctrl.showHierarchyPathCanvas()"\n                            annotation="$ctrl.DataService.getData()"\n                            path="$ctrl.ViewStateService.hierarchyState.path"\n                            view-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n                            view-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n                            view-port-select-start="$ctrl.ViewStateService.curViewPort.selectS"\n                            view-port-select-end="$ctrl.ViewStateService.curViewPort.selectE"\n                            cur-mouse-x="$ctrl.ViewStateService.curMouseX"\n                            cur-click-level-name="$ctrl.ViewStateService.curClickLevelName"\n                            moving-boundary-sample="$ctrl.ViewStateService.movingBoundarySample"\n                            moving-boundary="$ctrl.ViewStateService.movingBoundary"\n                            moves-away-from-last-save="$ctrl.HistoryService.movesAwayFromLastSave"\n                            cur-perspective-idx="$ctrl.ViewStateService.curPerspectiveIdx"\n                            cur-bndl="$ctrl.LoadedMetaDataService.getCurBndl()"\n                            ></hierarchy-path-canvas>\n                        </div>\n                        \x3c!-- level div containing ul of levels --\x3e\n                        <div ng-if="true" style="margin-top: 25px;">\n                            <ul>\n                                <li ng-repeat="levelName in $ctrl.ConfigProviderService.vals.perspectives[$ctrl.ViewStateService.curPerspectiveIdx].levelCanvases.order">\n                                    <level \n                                    ng-if="$ctrl.LevelService.getLevelDetails(levelName)"\n                                    level="$ctrl.LevelService.getLevelDetails(levelName)" \n                                    idx="$index" \n                                    view-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n                                    view-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n                                    view-port-select-start="$ctrl.ViewStateService.curViewPort.selectS"\n                                    view-port-select-end="$ctrl.ViewStateService.curViewPort.selectE"\n                                    cur-mouse-x="$ctrl.ViewStateService.curMouseX"\n                                    cur-click-level-name="$ctrl.ViewStateService.curClickLevelName"\n                                    moving-boundary-sample="$ctrl.ViewStateService.movingBoundarySample"\n                                    moving-boundary="$ctrl.ViewStateService.movingBoundary",\n                                    moves-away-from-last-save="$ctrl.HistoryService.movesAwayFromLastSave"\n                                    cur-perspective-idx="$ctrl.ViewStateService.curPerspectiveIdx"\n                                    cur-bndl="$ctrl.LoadedMetaDataService.getCurBndl()"\n                                    ></level>\n                                </li>\n                            </ul>\n                        </div>\n                    </bg-pane>\n                    <bg-pane type="emuwebapp-2d-map">\n                        <ul>\n                            <li ng-repeat="cur2dTrack in $ctrl.ConfigProviderService.vals.perspectives[$ctrl.ViewStateService.curPerspectiveIdx].twoDimCanvases.order" ng-switch on="cur2dTrack">\n\t\t\t\t\t\t\t\t<epg-grid-canvas \n\t\t\t\t\t\t\t\tng-switch-when="EPG"\n\t\t\t\t\t\t\t\tcur-mouse-pos-sample="$ctrl.ViewStateService.curMousePosSample"\n\t\t\t\t\t\t\t\tview-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n\t\t\t\t\t\t\t\tview-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n\t\t\t\t\t\t\t\t></epg-grid-canvas>\n\t\t\t\t\t\t\t\t<dots-canvas \n\t\t\t\t\t\t\t\tng-switch-when="DOTS"\n\t\t\t\t\t\t\t\tcur-bndl="$ctrl.LoadedMetaDataService.getCurBndl()"\n\t\t\t\t\t\t\t\tcur-perspective-idx="$ctrl.ViewStateService.curPerspectiveIdx"\n\t\t\t\t\t\t\t\tcur-perspective-idx="$ctrl.ViewStateService.curPerspectiveIdx"\n\t\t\t\t\t\t\t\tcur-mouse-pos-sample="$ctrl.ViewStateService.curMousePosSample"\n\t\t\t\t\t\t\t\tview-port-sample-start="$ctrl.ViewStateService.curViewPort.sS"\n\t\t\t\t\t\t\t\tview-port-sample-end="$ctrl.ViewStateService.curViewPort.eS"\n\t\t\t\t\t\t\t\t></dots-canvas>\n                            </li>\n                        </ul>\n                    </bg-pane>\n                </bg-splitter>\n            </div>\n            \x3c!-- end: vertical split layout --\x3e\n\n            \x3c!-- start: large text input field --\x3e\n            \x3c!--<large-text-field-input></large-text-field-input>--\x3e\n\n            \x3c!-- start: perspectives menu bar (right) --\x3e\n\t\t\t<perspectives-side-bar></perspectives-side-bar>\n            \x3c!-- end: perspectives menu bar (right) --\x3e\n\n            \x3c!-- start: shortcuts footer --\x3e\n            <div class="emuwebapp-shortcuts">\n                <div class="emuwebapp-shortcuts__content">\n                    <h4>Keyboard Shortcuts</h4>\n                    <ul>\n                        <li><kbd>Space</kbd> Play / pause audio</li>\n                        <li><kbd>Shift</kbd> + scroll Zoom in / out</li>\n                        <li><kbd>Ctrl</kbd> + <kbd>Z</kbd> Undo &nbsp;&nbsp; <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Z</kbd> Redo</li>\n                        <li><kbd>Alt</kbd> + drag Move boundary &nbsp;&nbsp; <kbd>Shift</kbd> + drag Resize selection</li>\n                        <li><kbd>Ctrl</kbd> + click Split segment &nbsp;&nbsp; <kbd>Delete</kbd> Remove segment</li>\n                        <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd> Merge segments (remove boundary)</li>\n                    </ul>\n                </div>\n            </div>\n            \x3c!-- end: shortcuts footer --\x3e\n        </div>\n        \x3c!-- end: main window --\x3e\n    </div>\n    \x3c!-- end: container EMU-webApp --\x3e\n    ',bindings:{audioGetUrl:"<",labelGetUrl:"<",labelType:"<"},controller:["$scope","$element","$window","$document","$location","$timeout","ViewStateService","HistoryService","IoHandlerService","SoundHandlerService","ConfigProviderService","FontScaleService","SsffDataService","LevelService","TextGridParserService","WavParserService","DrawHelperService","ValidationService","AppcacheHandlerService","LoadedMetaDataService","DbObjLoadSaveService","AppStateService","DataService","ModalService","BrowserDetectorService","HierarchyLayoutService","HandleGlobalKeyStrokes","DragnDropService",function(){function e(e,t,n,i,a,o,s,l,c,u,h,p,f,d,v,m,g,S,w,y,b,x,k,C,$,P,E,T){this.$postLink=function(){var e=this;this.$element.bind("mouseenter",(function(){e.ViewStateService.mouseInEmuWebApp=!0})),this.$element.bind("mouseleave",(function(){e.ViewStateService.mouseInEmuWebApp=!1})),this.initializeAttachAnnotationInput();var t=this.$element.find(".emuwebapp-canvas"),n=function(t){if(e.ViewStateService.getPermission("zoom")&&e.SoundHandlerService.audioBuffer&&"number"==typeof e.SoundHandlerService.audioBuffer.length&&0!==e.SoundHandlerService.audioBuffer.length){var n=e.ViewStateService.curViewPort,r=n.eS-n.sS;if(!(r<=0)){var i=t.originalEvent||t;if(!i.ctrlKey&&!i.metaKey){var a=0;if("number"==typeof i.deltaY&&0!==i.deltaY?(a=i.deltaY,1===i.deltaMode?a*=40:2===i.deltaMode&&(a*=120)):i.shiftKey&&"number"==typeof i.deltaX&&0!==i.deltaX?(a=i.deltaX,1===i.deltaMode?a*=40:2===i.deltaMode&&(a*=120)):"number"==typeof i.wheelDelta&&(a=-i.wheelDelta),a){t.preventDefault(),t.stopPropagation();var o=a>0?1:-1;if(i.shiftKey)e.$scope.$apply((function(){e.LevelService.deleteEditArea(),e.ViewStateService.zoomViewPort(o<0,e.LevelService)}));else{var s=Math.abs(a)/120;s<1?s=1:s>5&&(s=5);var l=Math.max(1,Math.round(r/40)),c=o*Math.max(1,Math.round(l*s));e.$scope.$apply((function(){e.ViewStateService.setViewPort(e.ViewStateService.curViewPort.sS+c,e.ViewStateService.curViewPort.eS+c)}))}}}}}};t.on("wheel",n),this.$scope.$on("$destroy",(function(){t.off("wheel",n),e.attachAnnotationInput&&e.attachAnnotationChangeListener&&(e.attachAnnotationInput.removeEventListener("change",e.attachAnnotationChangeListener),e.attachAnnotationInput=void 0,e.attachAnnotationChangeListener=void 0)})),r.element(this.$window).bind("resize",(function(){e.LevelService.deleteEditArea(),e.ViewStateService.setWindowWidth(e.$window.outerWidth),e.ViewStateService.hierarchyState.isShown()&&++e.ViewStateService.hierarchyState.resize,e.$scope.$digest()})),r.element(this.$window).bind("keyup",(function(t){void 0!==e.ConfigProviderService.vals.keyMappings&&(t.keyCode!==e.ConfigProviderService.vals.keyMappings.shift&&t.keyCode!==e.ConfigProviderService.vals.keyMappings.alt||(e.HistoryService.addCurChangeObjToUndoStack(),e.$scope.$digest()))})),window.onbeforeunload=function(){if(""===e.ConfigProviderService.embeddedVals.audioGetUrl&&e.LoadedMetaDataService.getBundleList().length>0&&!e.ConfigProviderService.vals.main.autoConnect&&e.HistoryService.movesAwayFromLastSave>0)return"Do you really wish to leave/reload the EMU-webApp? All unsaved changes will be lost..."};var i=this;this.$scope.$on("connectionDisrupted",(function(){i.AppStateService.resetToInitState()})),this.$scope.$on("resetToInitState",(function(){i.loadDefaultConfig()})),this.$scope.$on("reloadToInitState",(function(e,t){i.loadDefaultConfig(),i.ViewStateService.url=t.url,i.ViewStateService.somethingInProgressTxt="Connecting to server...",i.ViewStateService.somethingInProgress=!0,i.IoHandlerService.WebSocketHandlerService.initConnect(t.url).then((function(e){"error"===e.type?i.ModalService.open("views/error.html","Could not connect to websocket server: "+t.url).then((function(){i.AppStateService.resetToInitState()})):i.handleConnectedToWSserver(t)}),(function(e){i.ModalService.open("views/error.html","Could not connect to websocket server: "+JSON.stringify(e,null,4)).then((function(){i.AppStateService.resetToInitState()}))}))}))},this.$onChanges=function(e){this._inited&&(e.audioGetUrl&&(this.ConfigProviderService.embeddedVals.audioGetUrl=e.audioGetUrl.currentValue),e.labelGetUrl&&(this.ConfigProviderService.embeddedVals.labelGetUrl=e.labelGetUrl.currentValue),e.labelType&&(this.ConfigProviderService.embeddedVals.labelType=e.labelGetUrl.currentValue))},this.$onInit=function(){this._inited=!0},this.$scope=e,this.$element=t,this.$window=n,this.$document=i,this.$location=a,this.$timeout=o,this.ViewStateService=s,this.HistoryService=l,this.IoHandlerService=c,this.SoundHandlerService=u,this.ConfigProviderService=h,this.FontScaleService=p,this.SsffDataService=f,this.LevelService=d,this.TextGridParserService=v,this.WavParserService=m,this.DrawHelperService=g,this.ValidationService=S,this.AppcacheHandlerService=w,this.LoadedMetaDataService=y,this.DbObjLoadSaveService=b,this.AppStateService=x,this.DataService=k,this.ModalService=C,this.BrowserDetectorService=$,this.HierarchyLayoutService=P,this.HandleGlobalKeyStrokes=E,this.DragnDropService=T,this.attachAnnotationInput=void 0,this.attachAnnotationChangeListener=void 0,this.connectBtnLabel="connect",this.dbLoaded=!1,this.is2dCancasesHidden=!0,this.windowWidth=n.outerWidth,this.internalVars={},this.internalVars.showAboutHint=!1,this.AppcacheHandlerService.checkForNewVersion();var _=this.$location.search();_.audioGetUrl&&_.labelGetUrl&&_.labelType&&(h.embeddedVals.audioGetUrl=_.audioGetUrl,h.embeddedVals.labelGetUrl=_.labelGetUrl,h.embeddedVals.labelType=_.labelType,h.embeddedVals.fromUrlParams=!0),_.hasOwnProperty("disableBundleListSidebar")&&(this.ViewStateService.bundleListSideBarDisabled=!0),this.loadDefaultConfig(),this.HandleGlobalKeyStrokes.bindGlobalKeys()}return e.prototype.loadFilesForEmbeddedApp=function(){var e=this,t=this.$location.search();if(t.audioGetUrl||t.bndlJsonGetUrl){if(t.audioGetUrl){this.ConfigProviderService.embeddedVals.audioGetUrl=t.audioGetUrl,this.ConfigProviderService.vals.activeButtons.openDemoDB=!1;var n=this.IoHandlerService.httpGetPath(this.ConfigProviderService.embeddedVals.audioGetUrl,"arraybuffer")}else n=this.IoHandlerService.httpGetPath(t.bndlJsonGetUrl,"application/json");n.then((function(n){e.ViewStateService.showDropZone=!1;var r,i=e.ConfigProviderService.embeddedVals.audioGetUrl;e.LoadedMetaDataService.setCurBndlName(i.substr(0,i.lastIndexOf(".")).substr(i.lastIndexOf("/")+1,i.length)),e.ViewStateService.getBundleListSideBarOpen()&&"true"!==t.saveToWindowParent&&e.ViewStateService.toggleBundleListSideBar(Ts.a.animationPeriod),e.ViewStateService.somethingInProgressTxt="Loading DB config...",r=t.DBconfigGetUrl?t.DBconfigGetUrl:"configFiles/embedded_emuwebappConfig.json",e.IoHandlerService.httpGetPath(r).then((function(r){return Ls(e,void 0,void 0,(function(){var e,i,a=this;return Vs(this,(function(o){return this.ViewStateService.curPerspectiveIdx=0,this.ConfigProviderService.setVals(r.data.EMUwebAppConfig),!0===(e=this.ValidationService.validateJSO("emuwebappConfigSchema",this.ConfigProviderService.vals))?(this.ConfigProviderService.embeddedVals.fromUrlParams&&(this.ConfigProviderService.vals.main.catchMouseForKeyBinding=!1),this.ConfigProviderService.curDbConfig=r.data,!0===(e=this.ValidationService.validateJSO("DBconfigFileSchema",this.ConfigProviderService.curDbConfig))?("true"===t.saveToWindowParent&&(this.ConfigProviderService.vals.activeButtons.saveBundle=!0),i=[{session:"File(s)",name:"from URL parameters"}],this.LoadedMetaDataService.setBundleList(i),this.LoadedMetaDataService.setCurBndl(i[0]),this.ViewStateService.somethingInProgress=!0,this.ViewStateService.somethingInProgressTxt="Parsing WAV file...",t.audioGetUrl?this.WavParserService.parseWavAudioBuf(n.data).then((function(e){var n,r=e;a.ViewStateService.curViewPort.sS=0,a.ViewStateService.curViewPort.eS=r.length,a.ViewStateService.resetSelect(),a.SoundHandlerService.audioBuffer=r,n=(a.ConfigProviderService.embeddedVals.labelType,"text"),t.labelGetUrl?a.IoHandlerService.httpGetPath(a.ConfigProviderService.embeddedVals.labelGetUrl,n).then((function(e){a.ViewStateService.somethingInProgressTxt="Parsing "+a.ConfigProviderService.embeddedVals.labelType+" file...",a.IoHandlerService.parseLabelFile(e.data,a.ConfigProviderService.embeddedVals.labelGetUrl,"embeddedTextGrid",a.ConfigProviderService.embeddedVals.labelType).then((function(e){return Ls(a,void 0,void 0,(function(){var n,r,i,a,o,s,l,c,u,h,p;return Vs(this,(function(f){switch(f.label){case 0:if(n=e,this.DataService.setData(n),t.DBconfigGetUrl)return[3,3];for(r=[],i=[],a=0,o=n.levels.length;a<o;a++){for(s=n.levels[a],r.push(s.name),l=[],c=0,u=s.items[0].labels.length;c<u;c++)l.push({name:s.items[0].labels[c].name,type:"string"});i.push({name:s.name,type:s.type,attributeDefinitions:l})}return this.ConfigProviderService.curDbConfig.levelDefinitions=i,this.ViewStateService.setCurLevelAttrDefs(this.ConfigProviderService.curDbConfig.levelDefinitions),h=[],i.forEach((function(e){"ITEM"!==e.type&&h.push(e.name)})),this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.order=h,[4,new Ds.HierarchyWorker];case 1:return[4,f.sent().guessLinkDefinitions(n)];case 2:p=f.sent(),this.ConfigProviderService.curDbConfig.linkDefinitions=p,this.ConfigProviderService.vals.activeButtons.showHierarchy=!0,f.label=3;case 3:return this.ViewStateService.setCurLevelAttrDefs(this.ConfigProviderService.curDbConfig.levelDefinitions),this.ViewStateService.somethingInProgressTxt="Done!",this.ViewStateService.somethingInProgress=!1,this.ViewStateService.setState("labeling"),[2]}}))}))}),(function(e){this.ModalService.open("views/error.html","Error parsing audio file: "+e.status.message)}))}),(function(e){this.ModalService.open("views/error.html","Could not get label file: "+this.ConfigProviderService.embeddedVals.labelGetUrl+" ERROR "+JSON.stringify(e.message,null,4))})):(a.ConfigProviderService.vals.activeButtons.downloadAnnotation=!1,a.ConfigProviderService.vals.activeButtons.downloadTextGrid=!1,a.ConfigProviderService.vals.activeButtons.search=!1,a.ViewStateService.somethingInProgressTxt="Done!",a.ViewStateService.somethingInProgress=!1,a.ViewStateService.setState("labeling"))}),(function(e){this.ModalService.open("views/error.html","Error parsing audio file: "+e.status.message)})):this.DbObjLoadSaveService.loadBundle({name:"fromURLparams"},t.bndlJsonGetUrl)):this.ModalService.open("views/error.html","Error validating / checking DBconfig: "+JSON.stringify(e,null,4))):this.ModalService.open("views/error.html","Error validating ConfigProviderService.vals (emuwebappConfig data) after applying changes of newly loaded config (most likely due to wrong entry...): "+JSON.stringify(e,null,4)),[2]}))}))}),(function(t){e.ModalService.open("views/error.html","Could not get embedded_config.json: "+t)}))}),(function(t){e.ModalService.open("views/error.html","Could not get audio file:"+e.ConfigProviderService.embeddedVals.audioGetUrl+" ERROR: "+JSON.stringify(t,null,4))}))}},e.prototype.loadDefaultConfig=function(){var e=this;this.ViewStateService.somethingInProgress=!0,this.ViewStateService.somethingInProgressTxt="Loading schema files",this.ValidationService.loadSchemas().then((function(t){e.ValidationService.setSchemas(t),e.IoHandlerService.httpGetDefaultConfig().then((function(t){e.ViewStateService.somethingInProgressTxt="Validating emuwebappConfig";var n=e.ValidationService.validateJSO("emuwebappConfigSchema",t.data);!0===n?(e.ConfigProviderService.setVals(t.data),r.copy(e.ConfigProviderService.vals,e.ConfigProviderService.initDbConfig),e.handleDefaultConfigLoaded(),e.loadFilesForEmbeddedApp(),e.checkIfToShowWelcomeModal(),e.ViewStateService.somethingInProgress=!1):e.ModalService.open("views/error.html","Error validating / checking emuwebappConfigSchema: "+JSON.stringify(n,null,4)).then((function(){e.AppStateService.resetToInitState()}))}),(function(t){e.ModalService.open("views/error.html","Could not get defaultConfig for EMU-webApp:  status: "+t.status+" headers: "+t.headers+" config "+t.config).then((function(){e.AppStateService.resetToInitState()}))}))}),(function(t){e.ModalService.open("views/error.html","Error loading schema file: "+JSON.stringify(t,null,4)).then((function(){e.AppStateService.resetToInitState()}))}))},e.prototype.checkIfToShowWelcomeModal=function(){var e=this,t=localStorage.getItem("haveShownWelcomeModal"),n=this.$location.search();this.BrowserDetectorService.isBrowser.PhantomJS()||null!==t||void 0===n.viewer_pane||(localStorage.setItem("haveShownWelcomeModal","true"),this.internalVars.showAboutHint=!0),this.internalVars.showAboutHint&&this.$timeout((function(){e.internalVars.showAboutHint=!1}),3e3)},e.prototype.getCurBndlName=function(){return this.LoadedMetaDataService.getCurBndlName()},e.prototype.handleDefaultConfigLoaded=function(){var e=this;this.ViewStateService.getBundleListSideBarOpen()||this.ViewStateService.toggleBundleListSideBar(Ts.a.animationPeriod);var t=this.$location.search();(this.ConfigProviderService.vals.main.autoConnect||"true"===t.autoConnect)&&(void 0!==t.serverUrl&&(this.ConfigProviderService.vals.main.serverUrl=t.serverUrl),"GITLAB"!==t.comMode?this.IoHandlerService.WebSocketHandlerService.initConnect(this.ConfigProviderService.vals.main.serverUrl).then((function(t){"error"===t.type?e.ModalService.open("views/error.html","Could not connect to websocket server: "+e.ConfigProviderService.vals.main.serverUrl).then((function(){e.AppStateService.resetToInitState()})):e.handleConnectedToWSserver({session:null,reload:null})}),(function(e){var t=this;this.ModalService.open("views/error.html","Could not connect to websocket server: "+JSON.stringify(e,null,4)).then((function(){t.AppStateService.resetToInitState()}))})):(this.ConfigProviderService.vals.main.comMode="GITLAB",this.handleConnectedToWSserver({session:null,reload:null}))),this.ViewStateService.setspectroSettings(this.ConfigProviderService.vals.spectrogramSettings.windowSizeInSecs,this.ConfigProviderService.vals.spectrogramSettings.rangeFrom,this.ConfigProviderService.vals.spectrogramSettings.rangeTo,this.ConfigProviderService.vals.spectrogramSettings.dynamicRange,this.ConfigProviderService.vals.spectrogramSettings.window,this.ConfigProviderService.vals.spectrogramSettings.drawHeatMapColors,this.ConfigProviderService.vals.spectrogramSettings.preEmphasisFilterFactor,this.ConfigProviderService.vals.spectrogramSettings.heatMapColorAnchors,this.ConfigProviderService.vals.spectrogramSettings.invert),this.ViewStateService.setTransitionTime(Ts.a.animationPeriod)},e.prototype.handleConnectedToWSserver=function(e){var t=this,n=e.session,r=e.reload;this.ViewStateService.showDropZone=!1,"GITLAB"!==this.$location.search().comMode&&(this.ConfigProviderService.vals.main.comMode="WS"),this.ConfigProviderService.vals.activeButtons.openDemoDB=!1,this.ViewStateService.somethingInProgress=!0,this.ViewStateService.somethingInProgressTxt="Checking protocol...",this.IoHandlerService.getProtocol().then((function(e){"EMU-webApp-websocket-protocol"===e.protocol&&"0.0.2"===e.version?(t.ViewStateService.somethingInProgressTxt="Checking user management...",t.IoHandlerService.getDoUserManagement().then((function(e){"NO"===e?t.innerHandleConnectedToWSserver({session:n,reload:r}):t.ModalService.open("views/loginModal.html").then((function(e){e?t.innerHandleConnectedToWSserver({session:n,reload:r}):t.AppStateService.resetToInitState()}))}))):t.ModalService.open("views/error.html","Could not connect to websocket server: "+t.ConfigProviderService.vals.main.serverUrl+'. It does not speak the same protocol as this client. Its protocol answer was: "'+e.protocol+'" with the version: "'+e.version+'"').then((function(){t.AppStateService.resetToInitState()}))}))},e.prototype.innerHandleConnectedToWSserver=function(e){var t=this,n=e.session,r=e.reload;this.ViewStateService.somethingInProgressTxt="Loading DB config...",this.IoHandlerService.getDBconfigFile().then((function(e){t.ViewStateService.curPerspectiveIdx=0,t.ConfigProviderService.setVals(e.EMUwebAppConfig);var i=t.ValidationService.validateJSO("emuwebappConfigSchema",t.ConfigProviderService.vals);!0===i?(t.ConfigProviderService.curDbConfig=e,t.ViewStateService.setCurLevelAttrDefs(t.ConfigProviderService.curDbConfig.levelDefinitions),t.ViewStateService.setspectroSettings(t.ConfigProviderService.vals.spectrogramSettings.windowSizeInSecs,t.ConfigProviderService.vals.spectrogramSettings.rangeFrom,t.ConfigProviderService.vals.spectrogramSettings.rangeTo,t.ConfigProviderService.vals.spectrogramSettings.dynamicRange,t.ConfigProviderService.vals.spectrogramSettings.window,t.ConfigProviderService.vals.spectrogramSettings.drawHeatMapColors,t.ConfigProviderService.vals.spectrogramSettings.preEmphasisFilterFactor,t.ConfigProviderService.vals.spectrogramSettings.heatMapColorAnchors,t.ConfigProviderService.vals.spectrogramSettings.invert),t.ViewStateService.setHierarchySettings(t.HierarchyLayoutService.findAllNonPartialPaths().possible[0]),!0===(i=t.ValidationService.validateJSO("DBconfigFileSchema",e))?(t.ViewStateService.somethingInProgressTxt="Loading bundle list...",t.IoHandlerService.getBundleList().then((function(e){i=t.LoadedMetaDataService.setBundleList(e),t.ConfigProviderService.vals.activeButtons.clear=!0,t.ConfigProviderService.vals.activeButtons.specSettings=!0,!0===i?(null===n&&(n=t.LoadedMetaDataService.getBundleList()[0]),t.DbObjLoadSaveService.loadBundle(n).then((function(){})),r&&t.LoadedMetaDataService.openCollapseSession(n.session)):t.ModalService.open("views/error.html","Error validating bundleList: "+JSON.stringify(i,null,4)).then((function(){t.AppStateService.resetToInitState()}))}))):t.ModalService.open("views/error.html","Error validating / checking DBconfig: "+JSON.stringify(i,null,4)).then((function(){t.AppStateService.resetToInitState()}))):t.ModalService.open("views/error.html","Error validating ConfigProviderService.vals (emuwebappConfig data) after applying changes of newly loaded config (most likely due to wrong entry...): "+JSON.stringify(i,null,4)).then((function(){t.AppStateService.resetToInitState()}))}))},e.prototype.getEnlarge=function(e){var t=this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].signalCanvases.order.length;return-1===this.ViewStateService.getenlarge()||1===t?"auto":2===t?this.ViewStateService.getenlarge()===e?"70%":"27%":this.ViewStateService.getenlarge()===e?"50%":45/(t-1)+"%"},e.prototype.cursorInTextField=function(){this.ViewStateService.setcursorInTextField(!0)},e.prototype.cursorOutOfTextField=function(){this.ViewStateService.setcursorInTextField(!1)},e.prototype.getUnsavedChangesColor=function(){if(0!==this.HistoryService.movesAwayFromLastSave)return{"background-color":"#f00",color:"white"}},e.prototype.addLevelSegBtnClick=function(){if(console.log("[EMU] addLevelSegBtnClick invoked"),this.ViewStateService.getPermission("addLevelSegBtnClick")){console.log("[EMU] Permission granted for addLevelSegBtnClick");var e=0;void 0!==this.DataService.data.levels&&(e=this.DataService.data.levels.length);var t="levelNr"+e;console.log("[EMU] Creating SEGMENT level:",t);var n={items:[],name:t,type:"SEGMENT"};if(void 0===this.ViewStateService.getCurAttrDef(t)){var i={name:t,type:"SEGMENT",attributeDefinitions:[{name:t,type:"string"}]};Array.isArray(this.ConfigProviderService.curDbConfig.levelDefinitions)||(this.ConfigProviderService.curDbConfig.levelDefinitions=[]),this.ConfigProviderService.curDbConfig.levelDefinitions.push(i),console.log("[EMU] Added SEGMENT level definition",r.copy(i)),this.ViewStateService.setCurLevelAttrDefs(i)}else console.log("[EMU] SEGMENT level definition already exists for",t);this.LevelService.insertLevel(n,e,this.ViewStateService.curPerspectiveIdx),console.log("[EMU] Level list after SEGMENT insert",r.copy(this.DataService.data.levels)),this.HistoryService.addObjToUndoStack({type:"ANNOT",action:"INSERTLEVEL",level:n,id:e,curPerspectiveIdx:this.ViewStateService.curPerspectiveIdx}),this.ViewStateService.selectLevel(!1,this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.order,this.LevelService),console.log("[EMU] Level order after SEGMENT insert",r.copy(this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.order))}else console.warn("[EMU] Permission denied for addLevelSegBtnClick")},e.prototype.addLevelPointBtnClick=function(){if(console.log("[EMU] addLevelPointBtnClick invoked"),this.ViewStateService.getPermission("addLevelPointBtnClick")){console.log("[EMU] Permission granted for addLevelPointBtnClick");var e=0;void 0!==this.DataService.data.levels&&(e=this.DataService.data.levels.length);var t="levelNr"+e;console.log("[EMU] Creating EVENT level:",t);var n={items:[],name:t,type:"EVENT"};if(void 0===this.ViewStateService.getCurAttrDef(t)){var i={name:t,type:"EVENT",attributeDefinitions:[{name:t,type:"string"}]};Array.isArray(this.ConfigProviderService.curDbConfig.levelDefinitions)||(this.ConfigProviderService.curDbConfig.levelDefinitions=[]),this.ConfigProviderService.curDbConfig.levelDefinitions.push(i),console.log("[EMU] Added EVENT level definition",r.copy(i)),this.ViewStateService.setCurLevelAttrDefs(i)}else console.log("[EMU] EVENT level definition already exists for",t);this.LevelService.insertLevel(n,e,this.ViewStateService.curPerspectiveIdx),console.log("[EMU] Level list after EVENT insert",r.copy(this.DataService.data.levels)),this.HistoryService.addObjToUndoStack({type:"ANNOT",action:"INSERTLEVEL",level:n,id:e,curPerspectiveIdx:this.ViewStateService.curPerspectiveIdx}),this.ViewStateService.selectLevel(!1,this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.order,this.LevelService),console.log("[EMU] Level order after EVENT insert",r.copy(this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].levelCanvases.order))}else console.warn("[EMU] Permission denied for addLevelPointBtnClick")},e.prototype.renameSelLevelBtnClick=function(){this.ViewStateService.getPermission("renameSelLevelBtnClick")&&(void 0!==this.ViewStateService.getcurClickLevelName()?this.ModalService.open("views/renameLevel.html",this.ViewStateService.getcurClickLevelName()):this.ModalService.open("views/error.html","Rename Error : Please choose a Level first !"))},e.prototype.downloadTextGridBtnClick=function(){var e=this;this.ViewStateService.getPermission("downloadTextGridBtnClick")&&this.TextGridParserService.asyncToTextGrid().then((function(t){t=t.replace(/\t/g,"    "),e.ModalService.open("views/export.html",e.LoadedMetaDataService.getCurBndl().name+".TextGrid",t)}))},e.prototype.downloadAnnotationBtnClick=function(){this.ViewStateService.getPermission("downloadAnnotationBtnClick")&&this.ValidationService.validateJSO("emuwebappConfigSchema",this.DataService.getData())&&this.ModalService.open("views/export.html",this.LoadedMetaDataService.getCurBndl().name+"_annot.json",r.toJson(this.DataService.getData(),!0))},e.prototype.attachAnnotationBtnClick=function(){this.ViewStateService.getPermission("downloadAnnotationBtnClick")&&(this.LoadedMetaDataService.getCurBndl()&&this.SoundHandlerService.audioBuffer?(this.attachAnnotationInput||this.initializeAttachAnnotationInput(),this.attachAnnotationInput&&(this.attachAnnotationInput.value="",this.attachAnnotationInput.click())):this.ModalService.open("views/error.html","No bundle is currently loaded. Please load an audio file before attaching annotations."))},e.prototype.initializeAttachAnnotationInput=function(){var e=this,t=this.$element[0].querySelector("#attachAnnotationInput");t&&(this.attachAnnotationInput=t,this.attachAnnotationChangeListener=function(t){var n=t.target;if(n&&n.files&&0!==n.files.length){var r=n.files[0];e.onAttachAnnotationFileSelected(r),n.value=""}},t.addEventListener("change",this.attachAnnotationChangeListener))},e.prototype.onAttachAnnotationFileSelected=function(e){var t=this,n=this.LoadedMetaDataService.getCurBndl();if(n&&n.name){var r=e.name||"",i=r.toLowerCase(),a=i.endsWith(".textgrid"),o=i.endsWith(".json");if(a||o){this.ViewStateService.somethingInProgress=!0,this.ViewStateService.somethingInProgressTxt="Attaching annotation...";var s=new FileReader;s.onerror=function(){t.ViewStateService.somethingInProgress=!1,t.ModalService.open("views/error.html","Error reading the selected file.")},a?(s.onload=function(e){var i=e.target&&e.target.result?e.target.result.toString():"";t.TextGridParserService.asyncParseTextGrid(i,r,n.name).then((function(e){t.finalizeAnnotationUpdate(e,n.name)}),(function(e){t.ViewStateService.somethingInProgress=!1,t.ModalService.open("views/error.html","Error parsing TextGrid file: "+JSON.stringify(e,null,4))}))},s.readAsText(e)):(s.onload=function(e){try{var r=JSON.parse(e.target&&e.target.result?e.target.result.toString():"{}");t.finalizeAnnotationUpdate(r,n.name)}catch(e){t.ViewStateService.somethingInProgress=!1;var i=e&&e.message?e.message:"Unknown JSON parse error";t.ModalService.open("views/error.html","Error parsing annotation JSON: "+i)}},s.readAsText(e))}else this.ModalService.open("views/error.html","Unsupported annotation format. Please select a .TextGrid or .json file.")}else this.ModalService.open("views/error.html","Unable to determine the current bundle. Please reload the audio file and try again.")},e.prototype.finalizeAnnotationUpdate=function(e,t){if(!e)return this.ViewStateService.somethingInProgress=!1,void this.ModalService.open("views/error.html","Annotation data is empty or invalid.");var n=r.copy(e);n.name||(n.name=t),n.annotates||(n.annotates=t),!n.sampleRate&&this.SoundHandlerService.audioBuffer&&"number"==typeof this.SoundHandlerService.audioBuffer.sampleRate&&(n.sampleRate=this.SoundHandlerService.audioBuffer.sampleRate);var i=this.DragnDropService.updateAnnotationForBundle(t,n);if(i&&i.success)this.$scope.$applyAsync();else{this.ViewStateService.somethingInProgress=!1;var a="Error attaching annotation.";i&&i.error&&("string"==typeof i.error?a+=" "+i.error:a+=" "+JSON.stringify(i.error,null,4)),this.ModalService.open("views/error.html",a)}},e.prototype.settingsBtnClick=function(){this.ViewStateService.getPermission("spectSettingsChange")&&this.ModalService.open("views/settingsModal.html")},e.prototype.connectBtnClick=function(){var e=this;this.ViewStateService.getPermission("connectBtnClick")&&this.ModalService.open("views/connectModal.html").then((function(t){t&&(e.ViewStateService.somethingInProgressTxt="Connecting to server...",e.ViewStateService.somethingInProgress=!0,e.ViewStateService.url=t,e.IoHandlerService.WebSocketHandlerService.initConnect(t).then((function(n){"error"===n.type?e.ModalService.open("views/error.html","Could not connect to websocket server: "+t).then((function(){e.AppStateService.resetToInitState()})):e.handleConnectedToWSserver({session:null,reload:null})}),(function(e){var t=this;this.ModalService.open("views/error.html","Could not connect to websocket server: "+JSON.stringify(e,null,4)).then((function(){t.AppStateService.resetToInitState()}))})))}))},e.prototype.openDemoDBbtnClick=function(e){var t=this;this.ViewStateService.getPermission("openDemoBtnDBclick")&&(this.dropdown=!1,this.ConfigProviderService.vals.activeButtons.openDemoDB=!1,this.LoadedMetaDataService.setDemoDbName(e),this.ViewStateService.showDropZone=!1,this.ViewStateService.somethingInProgress=!0,this.ViewStateService.setState("loadingSaving"),this.ConfigProviderService.vals.main.comMode="DEMO",this.ViewStateService.somethingInProgressTxt="Loading DB config...",this.IoHandlerService.getDBconfigFile(e).then((function(n){var r=n.data;t.ViewStateService.curPerspectiveIdx=0,t.ConfigProviderService.setVals(r.EMUwebAppConfig);var i=t.ValidationService.validateJSO("emuwebappConfigSchema",t.ConfigProviderService.vals);!0===i?(t.ConfigProviderService.curDbConfig=r,t.ViewStateService.setCurLevelAttrDefs(t.ConfigProviderService.curDbConfig.levelDefinitions),!0===(i=t.ValidationService.validateJSO("DBconfigFileSchema",t.ConfigProviderService.curDbConfig))?(t.ViewStateService.somethingInProgressTxt="Loading bundle list...",t.IoHandlerService.getBundleList(e).then((function(e){var n=e.data;t.LoadedMetaDataService.setBundleList(n),t.ConfigProviderService.vals.activeButtons.clear=!0,t.ConfigProviderService.vals.activeButtons.specSettings=!0,t.DbObjLoadSaveService.loadBundle(t.LoadedMetaDataService.getBundleList()[0])}),(function(t){var n=this;this.ModalService.open("views/error.html","Error loading bundle list of "+e+": "+t.data+" STATUS: "+t.status).then((function(){n.AppStateService.resetToInitState()}))}))):t.ModalService.open("views/error.html","Error validating / checking DBconfig: "+JSON.stringify(i,null,4)).then((function(){t.AppStateService.resetToInitState()}))):t.ModalService.open("views/error.html","Error validating ConfigProviderService.vals (emuwebappConfig data) after applying changes of newly loaded config (most likely due to wrong entry...): "+JSON.stringify(i,null,4)).then((function(){t.AppStateService.resetToInitState()}))}),(function(n){t.ModalService.open("views/error.html","Error loading DB config of "+e+": "+n.data+" STATUS: "+n.status).then((function(){t.AppStateService.resetToInitState()}))})))},e.prototype.aboutBtnClick=function(){this.ViewStateService.getPermission("aboutBtnClick")&&this.ModalService.open("views/help.html")},e.prototype.showHierarchyBtnClick=function(){this.ViewStateService.hierarchyState.isShown()||(this.ViewStateService.hierarchyState.toggleHierarchy(),this.ModalService.open("views/showHierarchyModal.html"))},e.prototype.searchBtnClick=function(){this.ViewStateService.getPermission("searchBtnClick")&&this.ModalService.open("views/searchAnnot.html")},e.prototype.clearBtnClick=function(){var e,t=this;e=0!==this.HistoryService.movesAwayFromLastSave&&"DEMO"!==this.ConfigProviderService.vals.main.comMode?"Do you wish to clear all loaded data and if connected disconnect from the server? CAUTION: YOU HAVE UNSAVED CHANGES! These will be lost if you confirm.":"Do you wish to clear all loaded data and if connected disconnect from the server? You have NO unsaved changes so no changes will be lost.",this.ModalService.open("views/confirmModal.html",e).then((function(e){e&&t.AppStateService.resetToInitState()}))},e.prototype.cmdZoomAll=function(){this.ViewStateService.getPermission("zoom")&&(this.LevelService.deleteEditArea(),this.ViewStateService.setViewPort(0,this.SoundHandlerService.audioBuffer.length))},e.prototype.cmdZoomIn=function(){this.ViewStateService.getPermission("zoom")&&(this.LevelService.deleteEditArea(),this.ViewStateService.zoomViewPort(!0))},e.prototype.cmdZoomOut=function(){this.ViewStateService.getPermission("zoom")&&(this.LevelService.deleteEditArea(),this.ViewStateService.zoomViewPort(!1))},e.prototype.cmdZoomLeft=function(){this.ViewStateService.getPermission("zoom")&&(this.LevelService.deleteEditArea(),this.ViewStateService.shiftViewPort(!1))},e.prototype.cmdZoomRight=function(){this.ViewStateService.getPermission("zoom")&&(this.LevelService.deleteEditArea(),this.ViewStateService.shiftViewPort(!0))},e.prototype.cmdZoomSel=function(){this.ViewStateService.getPermission("zoom")&&(this.LevelService.deleteEditArea(),this.ViewStateService.setViewPort(this.ViewStateService.curViewPort.selectS,this.ViewStateService.curViewPort.selectE))},e.prototype.cmdPlayView=function(){this.ViewStateService.getPermission("playaudio")&&(this.SoundHandlerService.playFromTo(this.ViewStateService.curViewPort.sS,this.ViewStateService.curViewPort.eS),this.ViewStateService.animatePlayHead(this.ViewStateService.curViewPort.sS,this.ViewStateService.curViewPort.eS))},e.prototype.cmdPlaySel=function(){this.ViewStateService.getPermission("playaudio")&&(this.SoundHandlerService.playFromTo(this.ViewStateService.curViewPort.selectS,this.ViewStateService.curViewPort.selectE),this.ViewStateService.animatePlayHead(this.ViewStateService.curViewPort.selectS,this.ViewStateService.curViewPort.selectE))},e.prototype.cmdPlayAll=function(){this.ViewStateService.getPermission("playaudio")&&(this.SoundHandlerService.playFromTo(0,this.SoundHandlerService.audioBuffer.length),this.ViewStateService.animatePlayHead(0,this.SoundHandlerService.audioBuffer.length))},e.prototype.showHierarchyPathCanvas=function(){return"true"==localStorage.getItem("showHierarchyPathCanvas")},e}()]};r.module("emuwebApp").component(Is.selector,Is);var Os={selector:"historyActionPopup",template:'\n    <div ng-bind-html="$ctrl.historyActionTxt">\n    test12\n    </div>\n    ',bindings:{historyActionTxt:"<"},controller:["$element","ViewStateService","$animate","$timeout","ConfigProviderService",function(){function e(e,t,n,r,i){this.$element=e,this.ViewStateService=t,this.$animate=n,this.$timeout=r,this.ConfigProviderService=i}return e.prototype.$postLink=function(){},e.prototype.$onChanges=function(e){var t=this;this._inited&&e.historyActionTxt&&""!==this.historyActionTxt&&this.$animate.addClass(this.$element,"emuwebapp-history-fade").then((function(){t.$timeout((function(){t.$animate.removeClass(t.$element,"emuwebapp-history-fade").then((function(){t.$timeout((function(){t.ViewStateService.historyActionTxt=""}),Ts.a.animationPeriod)}))}),Ts.a.animationPeriod)}))},e.prototype.$onInit=function(){this._inited=!0},e}()]};r.module("emuwebApp").component(Os.selector,Os);var Ns={selector:"progressBar",template:"\n    <div>{{$ctrl.txt}}</div>\n    ",bindings:{open:"<",txt:"<"},controller:["$element","$animate",function(){function e(e,t){this._inited=!1,this.$element=e,this.$animate=t}return e.prototype.$onInit=function(){this._inited=!0},e.prototype.$onChanges=function(e){this._inited&&e.open&&(e.open.currentValue?(this.$animate.removeClass(this.$element,"emuwebapp-shrinkHeightTo0px"),this.$animate.removeClass(this.$element,"emuwebapp-animationStopped"),this.$animate.addClass(this.$element,"emuwebapp-expandHeightTo20px"),this.$animate.addClass(this.$element,"emuwebapp-animationRunning")):(this.$animate.removeClass(this.$element,"emuwebapp-expandHeightTo20px"),this.$animate.removeClass(this.$element,"emuwebapp-animationRunning"),this.$animate.addClass(this.$element,"emuwebapp-shrinkHeightTo0px"),this.$animate.addClass(this.$element,"emuwebapp-animationStopped")))},e}()]};r.module("emuwebApp").component(Ns.selector,Ns);n(213);var Bs={selector:"ssffTrack",template:'\n    <div class="emuwebapp-timeline">\n    <div class="emuwebapp-timelineCanvasContainer">\n        <canvas \n        class="emuwebapp-timelineCanvasMain" \n        width="4096">\n        </canvas>\n        \n        \x3c!--\n        <canvas \n        class="emuwebapp-timelineCanvasSSFF" \n        width="4096" \n        drawssff ssff-trackname="{{$ctrl.trackName}}">\n        </canvas>\n        --\x3e\n        \n        <ssff-canvas\n        track-name="$ctrl.trackName"\n        all-ssff-data="$ctrl.SsffDataService.data"\n        view-port-sample-start="$ctrl.viewPortSampleStart"\n        view-port-sample-end="$ctrl.viewPortSampleEnd"\n        cur-bndl="$ctrl.curBundl"\n        cur-mouse-x="$ctrl.curMouseX"\n        cur-mouse-y="$ctrl.curMouseY"\n        moves-away-from-last-save="$ctrl.HistoryService.movesAwayFromLastSave"\n        ></ssff-canvas>\n\n        \n        <signal-canvas-markup-canvas\n        track-name="$ctrl.trackName"\n        play-head-current-sample="$ctrl.playHeadCurrentSample"\n        moving-boundary-sample="$ctrl.movingBoundarySample"\n        cur-mouse-x="$ctrl.curMouseX"\n        cur-mouse-y="$ctrl.curMouseY"\n        moving-boundary="$ctrl.movingBoundary"\n        view-port-sample-start="$ctrl.viewPortSampleStart"\n        view-port-sample-end="$ctrl.viewPortSampleEnd"\n        view-port-select-start="$ctrl.viewPortSelectStart"\n        view-port-select-end="$ctrl.viewPortSelectEnd"\n        cur-bndl="$ctrl.curBundl"\n        ></signal-canvas-markup-canvas>\n    </div>\n    </div>\n    ',bindings:{trackName:"<",playHeadCurrentSample:"<",movingBoundarySample:"<",curMouseX:"<",curMouseY:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<",viewPortSelectStart:"<",viewPortSelectEnd:"<"},controller:["$element","ConfigProviderService","SsffDataService","DrawHelperService","HistoryService",function(){function e(e,t,n,r,i){this.$element=e,this.ConfigProviderService=t,this.SsffDataService=n,this.DrawHelperService=r,this.HistoryService=i}return e.prototype.$postLink=function(){this.ctx=this.$element.find("canvas")[2].getContext("2d")},e.prototype.$onChanges=function(e){this._inited},e.prototype.$onInit=function(){this._inited=!0},e}()]};r.module("emuwebApp").component(Bs.selector,Bs);n(214);var Fs={selector:"perspectivesSideBar",template:'\n    <nav class="emuwebapp-right-menu" ng-show="$ctrl.ConfigProviderService.vals.restrictions.showPerspectivesSidebar">\n    <button ng-click="$ctrl.ViewStateService.setPerspectivesSideBarOpen(!$ctrl.ViewStateService.getPerspectivesSideBarOpen()); $ctrl.toggleShow();">\n        <i class="material-icons">menu</i>\n      \x3c!-- <img src="img/menu.svg" ="_20px _inverted" /> --\x3e\n    </button>\n    <h3>Perspectives</h3>\n    <ul>\n        <li ng-repeat="persp in $ctrl.ConfigProviderService.vals.perspectives" ng-click="$ctrl.changePerspective(persp); $ctrl.toggleShow();" ng-class="$ctrl.getPerspectiveColor(persp);">\n            {{persp.name}}\n        </li>\n    </ul>\n    </nav>\n    ',bindings:{},controller:["$element","$animate","ConfigProviderService","ViewStateService",function(){function e(e,t,n,r){this.$element=e,this.$animate=t,this.ConfigProviderService=n,this.ViewStateService=r,this._inited=!1}return e.prototype.$postLink=function(){},e.prototype.$onChanges=function(e){this._inited},e.prototype.$onInit=function(){this._inited=!0},e.prototype.changePerspective=function(e){for(var t,n=0;n<this.ConfigProviderService.vals.perspectives.length;n++)e.name===this.ConfigProviderService.vals.perspectives[n].name&&(t=n);this.ViewStateService.switchPerspective(t,this.ConfigProviderService.vals.perspectives),this.ViewStateService.setPerspectivesSideBarOpen(!this.ViewStateService.getPerspectivesSideBarOpen())},e.prototype.getPerspectiveColor=function(e){return-1===this.ViewStateService.curPerspectiveIdx||e.name===this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].name?"emuwebapp-curSelPerspLi":"emuwebapp-perspLi"},e.prototype.toggleShow=function(){this.ViewStateService.getPerspectivesSideBarOpen()?(this.$animate.addClass(this.$element.find("nav")[0],"emuwebapp-expandWidthTo200px"),this.$animate.removeClass(this.$element.find("nav")[0],"emuwebapp-shrinkWidthTo0px")):(this.$animate.removeClass(this.$element.find("nav")[0],"emuwebapp-expandWidthTo200px"),this.$animate.addClass(this.$element.find("nav")[0],"emuwebapp-shrinkWidthTo0px"))},e}()]};r.module("emuwebApp").component(Fs.selector,Fs);var Rs={selector:"newVersionHint",template:'\n    <div class="emuwebapp-aboutHint">\n    <button class="emuwebapp-aboutHint-hidden" ng-click="$ctrl.aboutBtnOverlayClick()"></button>\n    Welcome to the EMU-webApp Version {{version}}\n    <div class="emuwebapp-aboutHint-arrow">click here for more information ⇧</div>\n    </div>\n    ',bindings:{aboutBtnOverlayClick:"&"},controller:function(){function e(){}return e.prototype.$postLink=function(){},e}()};r.module("emuwebApp").component(Rs.selector,Rs);n(215);var Hs={selector:"levelCanvasMarkupCanvas",template:'\n    <canvas \n    class="emuwebapp-level-markup" \n    id="levelMarkupCanvas" \n    width="4096" \n    height="256" \n    ></canvas>\n    ',bindings:{level:"<",idx:"<"},controller:["$scope","$element","ViewStateService","SoundHandlerService","ConfigProviderService","LevelService","HistoryService",function(){function e(e,t,n,r,i,a,o){this.$scope=e,this.$element=t,this.ViewStateService=n,this.SoundHandlerService=r,this.ConfigProviderService=i,this.LevelService=a,this.HistoryService=o,this.lastEventClick=void 0,this.lastEventMove=void 0,this.lastNeighboursMove=void 0,this.lastPCM=void 0,this.curMouseSampleNrInView=void 0}return e.prototype.$postLink=function(){var e=this;this.$element.bind("click",(function(t){t.preventDefault(),e.setLastMove(t,!0),e.setLastClick(t)})),this.$element.bind("contextmenu",(function(t){t.preventDefault(),e.setLastMove(t,!0),e.setLastRightClick(t)})),this.$element.bind("dblclick",(function(t){e.setLastMove(t,!0),e.ConfigProviderService.vals.restrictions.editItemName?e.setLastDblClick(t):e.setLastClick(t)})),this.$element.bind("mousemove",(function(t){var n,r;if(document.hasFocus()){if(!e.ViewStateService.getdragBarActive()){n=!0;var i=e.ViewStateService.getSamplesPerPixelVal(t);if(e.curMouseSampleNrInView=e.ViewStateService.getX(t)*i,r=e.curMouseSampleNrInView-e.lastPCM,i<=1){var a=e.LevelService.getClosestItem(e.curMouseSampleNrInView+e.ViewStateService.curViewPort.sS,e.level.name,e.SoundHandlerService.audioBuffer.length);if("SEGMENT"===e.level.type)if(!0===a.isFirst&&!1===a.isLast)r=Math.ceil(e.curMouseSampleNrInView+e.ViewStateService.curViewPort.sS-e.LevelService.getItemDetails(e.level.name,0).sampleStart);else if(!1===a.isFirst&&!0===a.isLast){var o=e.LevelService.getLastItem(e.level.name);r=Math.ceil(e.curMouseSampleNrInView+e.ViewStateService.curViewPort.sS-o.sampleStart-o.sampleDur)}else r=Math.ceil(e.curMouseSampleNrInView+e.ViewStateService.curViewPort.sS-e.LevelService.getItemFromLevelById(e.level.name,a.nearest.id).sampleStart);else r=Math.ceil(e.curMouseSampleNrInView+e.ViewStateService.curViewPort.sS-e.LevelService.getItemFromLevelById(e.level.name,a.nearest.id).samplePoint-.5)}else r=Math.round(e.curMouseSampleNrInView-e.lastPCM)}switch(void 0===t.buttons?t.which:t.buttons){case 1:case 2:case 3:break;default:if(!e.ViewStateService.getdragBarActive()){var s,l=e.ViewStateService.getcurMouseItem();e.ConfigProviderService.vals.restrictions.editItemSize&&t.shiftKey?(e.LevelService.deleteEditArea(),void 0!==l&&(e.ViewStateService.movingBoundary=!0,"SEGMENT"===e.level.type?(e.ViewStateService.getcurMouseisFirst()||e.ViewStateService.getcurMouseisLast()?e.ViewStateService.getcurMouseisFirst()?(s=e.LevelService.getItemDetails(e.level.name,0),e.ViewStateService.movingBoundarySample=s.sampleStart+r):e.ViewStateService.getcurMouseisLast()&&(s=e.LevelService.getLastItem(e.level.name),e.ViewStateService.movingBoundarySample=s.sampleStart+s.sampleDur+r):(e.ViewStateService.movingBoundarySample=l.sampleStart+r,s=l),e.LevelService.moveBoundary(e.level.name,s.id,r,e.ViewStateService.getcurMouseisFirst(),e.ViewStateService.getcurMouseisLast()),e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVEBOUNDARY",name:e.level.name,id:s.id,movedBy:r,isFirst:e.ViewStateService.getcurMouseisFirst(),isLast:e.ViewStateService.getcurMouseisLast()})):(s=l,e.ViewStateService.movingBoundarySample=l.samplePoint+r,e.LevelService.moveEvent(e.level.name,s.id,r),e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVEEVENT",name:e.level.name,id:s.id,movedBy:r})),e.lastPCM=e.curMouseSampleNrInView,e.ViewStateService.setLastPcm(e.lastPCM),e.ViewStateService.selectBoundary(),n=!1)):e.ConfigProviderService.vals.restrictions.editItemSize&&t.altKey?(e.LevelService.deleteEditArea(),"SEGMENT"===e.level.type?(void 0!==(s=e.ViewStateService.getcurClickItems())[0]&&(e.LevelService.moveSegment(e.level.name,s[0].id,s.length,r),e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVESEGMENT",name:e.level.name,id:s[0].id,length:s.length,movedBy:r})),e.lastPCM=e.curMouseSampleNrInView,e.ViewStateService.setLastPcm(e.lastPCM),e.ViewStateService.selectBoundary()):"EVENT"===e.level.type&&(void 0!==(s=e.ViewStateService.getcurClickItems())[0]&&s.forEach((function(t){e.LevelService.moveEvent(e.level.name,t.id,r),e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"MOVEEVENT",name:e.level.name,id:t.id,movedBy:r})})),e.lastPCM=e.curMouseSampleNrInView,e.ViewStateService.setLastPcm(e.lastPCM),e.ViewStateService.selectBoundary())):e.ViewStateService.movingBoundary=!1}}e.ViewStateService.getdragBarActive()||e.setLastMove(t,n)}})),this.$element.bind("mousedown",(function(t){e.ViewStateService.movingBoundary=!0,e.setLastMove(t,!0)})),this.$element.bind("mouseup",(function(t){e.ViewStateService.movingBoundary=!1,e.setLastMove(t,!0)})),this.$element.bind("mouseout",(function(t){e.ViewStateService.movingBoundary=!1,e.setLastMove(t,!0)}))},e.prototype.setLastClick=function(e){this.curMouseSampleNrInView=this.ViewStateService.getX(e)*this.ViewStateService.getSamplesPerPixelVal(e),this.LevelService.deleteEditArea(),this.ViewStateService.setEditing(!1),this.lastEventClick=this.LevelService.getClosestItem(this.curMouseSampleNrInView+this.ViewStateService.curViewPort.sS,this.level.name,this.SoundHandlerService.audioBuffer.length),this.ViewStateService.setcurClickLevel(this.level.name,this.level.type,this.idx),void 0!==this.lastEventClick.current&&void 0!==this.lastEventClick.nearest&&(this.LevelService.setlasteditArea("_"+this.lastEventClick.current.id),this.LevelService.setlasteditAreaElem(this.$element.parent()),this.ViewStateService.setcurClickItem(this.lastEventClick.current),this.ViewStateService.selectBoundary()),this.lastPCM=this.curMouseSampleNrInView,this.ViewStateService.setLastPcm(this.lastPCM),this.$scope.$apply()},e.prototype.setLastRightClick=function(e){if(this.ViewStateService.getcurClickLevelName()!==this.level.name&&this.setLastClick(e),this.curMouseSampleNrInView=this.ViewStateService.getX(e)*this.ViewStateService.getSamplesPerPixelVal(e),this.LevelService.deleteEditArea(),this.lastEventClick=this.LevelService.getClosestItem(this.curMouseSampleNrInView+this.ViewStateService.curViewPort.sS,this.level.name,this.SoundHandlerService.audioBuffer.length),void 0!==this.lastEventClick.current&&void 0!==this.lastEventClick.nearest){var t=this.LevelService.getItemInTime(this.ViewStateService.getcurClickLevelName(),this.lastEventClick.current.id,!0),n=this.LevelService.getItemInTime(this.ViewStateService.getcurClickLevelName(),this.lastEventClick.current.id,!1);this.ViewStateService.setcurClickLevel(this.level.name,this.level.type,this.idx),this.ViewStateService.setcurClickItemMultiple(this.lastEventClick.current,t,n),this.ViewStateService.selectBoundary()}this.lastPCM=this.curMouseSampleNrInView,this.ViewStateService.setLastPcm(this.lastPCM),this.$scope.$apply()},e.prototype.setLastDblClick=function(e){this.curMouseSampleNrInView=this.ViewStateService.getX(e)*this.ViewStateService.getSamplesPerPixelVal(e),this.lastEventClick=this.LevelService.getClosestItem(this.curMouseSampleNrInView+this.ViewStateService.curViewPort.sS,this.level.name,this.SoundHandlerService.audioBuffer.length),"25px"!==this.$element.parent().css("height")||this.$element.parent().parent().find("div")[3].click(),void 0!==this.lastEventClick.current&&void 0!==this.lastEventClick.nearest&&this.ViewStateService.getPermission("labelAction")&&("SEGMENT"===this.level.type?this.lastEventClick.current.sampleStart>=this.ViewStateService.curViewPort.sS&&this.lastEventClick.current.sampleStart+this.lastEventClick.current.sampleDur<=this.ViewStateService.curViewPort.eS&&(this.ViewStateService.setcurClickLevel(this.level.name,this.level.type,this.idx),this.ViewStateService.setcurClickItem(this.lastEventClick.current),this.LevelService.setlasteditArea("_"+this.lastEventClick.current.id),this.LevelService.setlasteditAreaElem(this.$element.parent()),this.ViewStateService.setEditing(!0),this.LevelService.openEditArea(this.lastEventClick.current,this.$element.parent(),this.level.type)):(this.ViewStateService.setcurClickLevel(this.level.name,this.level.type,this.idx),this.ViewStateService.setcurClickItem(this.lastEventClick.current),this.LevelService.setlasteditArea("_"+this.lastEventClick.current.id),this.LevelService.setlasteditAreaElem(this.$element.parent()),this.ViewStateService.setEditing(!0),this.LevelService.openEditArea(this.lastEventClick.current,this.$element.parent(),this.level.type),this.ViewStateService.setEditing(!0))),this.lastPCM=this.curMouseSampleNrInView,this.ViewStateService.setLastPcm(this.lastPCM),this.$scope.$apply()},e.prototype.setLastMove=function(e,t){this.curMouseSampleNrInView=this.ViewStateService.getX(e)*this.ViewStateService.getSamplesPerPixelVal(e),this.lastEventMove=this.LevelService.getClosestItem(this.curMouseSampleNrInView+this.ViewStateService.curViewPort.sS,this.level.name,this.SoundHandlerService.audioBuffer.length),t&&void 0!==this.lastEventMove.current&&void 0!==this.lastEventMove.nearest&&(this.lastNeighboursMove=this.LevelService.getItemNeighboursFromLevel(this.level.name,this.lastEventMove.nearest.id,this.lastEventMove.nearest.id),this.ViewStateService.setcurMouseItem(this.lastEventMove.nearest,this.lastNeighboursMove,this.ViewStateService.getX(e),this.lastEventMove.isFirst,this.lastEventMove.isLast)),this.ViewStateService.setcurMouseLevelName(this.level.name),this.ViewStateService.setcurMouseLevelType(this.level.type),this.lastPCM=this.curMouseSampleNrInView,this.ViewStateService.setLastPcm(this.lastPCM),this.$scope.$apply()},e}()]};r.module("emuwebApp").component(Hs.selector,Hs);var js={selector:"epgGridCanvas",template:'\n    <div class="emuwebapp-twoDimCanvasContainer">\n        <canvas width="512" height="512">\n    </canvas></div>\'\n    ',bindings:{curMousePosSample:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<"},controller:["$scope","$element","ViewStateService","ConfigProviderService","SoundHandlerService","SsffDataService","FontScaleService",function(){function e(e,t,n,r,i,a,o){this.$scope=e,this.$element=t,this.ViewStateService=n,this.ConfigProviderService=r,this.SoundHandlerService=i,this.SsffDataService=a,this.FontScaleService=o,this._inited=!1}return e.prototype.$postLink=function(){this.canvas=this.$element.find("canvas")[0]},e.prototype.$onChanges=function(e){this._inited&&this.drawEpgGrid()},e.prototype.$onInit=function(){this._inited=!0},e.prototype.drawEpgGrid=function(){var e=this.canvas.getContext("2d"),t=this.ConfigProviderService.getSsffTrackConfig("EPG"),n=this.SsffDataService.getColumnOfTrack(t.name,t.columnName);if(void 0!==n){var i=this.SsffDataService.getSampleRateAndStartTimeOfTrack(t.name);e.clearRect(0,0,this.canvas.width,this.canvas.height),e.fillStyle="green",e.strokeStyle=Ts.a.colorBlack,e.font=Ts.a.fontInputSize.slice(0,-2)+"px "+Ts.a.fontInputFamily;var a,o=this.canvas.width/8,s=this.canvas.height/8,l=1/i.sampleRate-i.startTime,c=Math.round(this.ViewStateService.curMousePosSample/this.SoundHandlerService.audioBuffer.sampleRate/l),u=r.copy(n.values[c]);u.reverse(),u.forEach((function(t,n){for(a=t.toString(2).split("").reverse();a.length<8;)a.push("0");a.forEach((function(t,r){"1"===t?(e.fillStyle="grey",e.fillRect(r*o+5,s*n+5,o-10,s-10)):(e.fillStyle="white",e.fillRect(r*o+5,s*n+5,o-10,s-10))}))})),this.FontScaleService.drawUndistortedTextTwoLines(e,"EPG","Frame:"+c,3*parseInt(Ts.a.fontInputSize.slice(0,-2))/4,Ts.a.fontInputFamily,5,0,Ts.a.colorBlack,!0)}},e}()]};r.module("emuwebApp").component(js.selector,js);var zs={selector:"dotsCanvas",template:'\n    <div class="emuwebapp-twoDimCanvasContainer">\n    <canvas class="emuwebapp-twoDimCanvasStatic" width="512" height="512">\n    </canvas>\n    <canvas class="emuwebapp-twoDimCanvasDots" width="512" height="512">\n    </canvas>\n    </div>\n    ',bindings:{curBndl:"<",curPerspectiveIdx:"<",curMousePosSample:"<",viewPortSampleStart:"<",viewPortSampleEnd:"<"},controller:["$scope","$element","ViewStateService","ConfigProviderService","SoundHandlerService","SsffDataService","FontScaleService","MathHelperService",function(){function e(e,t,n,r,i,a,o,s){this.$postLink=function(){this.canvas=this.$element.find("canvas")[1],this.staticContoursCanvas=this.$element.find("canvas")[0]},this.$onChanges=function(e){this._inited&&((e.curBndl||e.curPerspectiveIdx)&&this.resetValues(),this.drawDots())},this.$onInit=function(){this._inited=!0},this.$scope=e,this.$element=t,this.ViewStateService=n,this.ConfigProviderService=r,this.SoundHandlerService=i,this.SsffDataService=a,this.FontScaleService=o,this.MathHelperService=s,this.resetValues(),this._inited=!1}return e.prototype.resetValues=function(){this.globalMinX=1/0,this.globalMaxX=-1/0,this.globalMinY=1/0,this.globalMaxY=-1/0,this.startPoint=0,this.endPoint=Math.PI/180*360},e.prototype.setGlobalMinMaxVals=function(){for(var e=this,t=this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].twoDimCanvases.twoDimDrawingDefinitions[0],n=0;n<t.dots.length;n++){var r=this.ConfigProviderService.getSsffTrackConfig(t.dots[n].xSsffTrack),i=this.SsffDataService.getColumnOfTrack(r.name,r.columnName);if(void 0===i)return 1;i._minVal<this.globalMinX&&(this.globalMinX=i._minVal),i._maxVal>this.globalMaxX&&(this.globalMaxX=i._maxVal),r=this.ConfigProviderService.getSsffTrackConfig(t.dots[n].ySsffTrack);var a=this.SsffDataService.getColumnOfTrack(r.name,r.columnName);a._minVal<this.globalMinY&&(this.globalMinY=a._minVal),a._maxVal>this.globalMaxY&&(this.globalMaxY=a._maxVal)}return void 0!==t.staticDots&&t.staticDots.forEach((function(t){t.xCoordinates.forEach((function(n,r){n<e.globalMinX&&(e.globalMinX=n),n>e.globalMaxX&&(e.globalMaxX=n),t.yCoordinates[r]<e.globalMinY&&(e.globalMinY=t.yCoordinates[r]),t.yCoordinates[r]>e.globalMaxY&&(e.globalMaxY=t.yCoordinates[r])}))})),void 0!==t.staticContours&&t.staticContours.forEach((function(t){var n=e.ConfigProviderService.getSsffTrackConfig(t.xSsffTrack),r=e.SsffDataService.getColumnOfTrack(n.name,n.columnName);r._minVal<e.globalMinX&&(e.globalMinX=r._minVal),r._maxVal>e.globalMaxX&&(e.globalMaxX=r._maxVal),n=e.ConfigProviderService.getSsffTrackConfig(t.ySsffTrack);var i=e.SsffDataService.getColumnOfTrack(n.name,n.columnName);i._minVal<e.globalMinY&&(e.globalMinY=i._minVal),i._maxVal>e.globalMaxY&&(e.globalMaxY=i._maxVal)})),0},e.prototype.drawStaticContour=function(){var e=this.staticContoursCanvas.getContext("2d");e.clearRect(0,0,this.staticContoursCanvas.width,this.staticContoursCanvas.height);for(var t=this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].twoDimCanvases.twoDimDrawingDefinitions[0],n=0;n<t.staticContours.length;n++){var r=this.ConfigProviderService.getSsffTrackConfig(t.staticContours[n].xSsffTrack),i=this.SsffDataService.getColumnOfTrack(r.name,r.columnName);r=this.ConfigProviderService.getSsffTrackConfig(t.staticContours[n].ySsffTrack);for(var a=this.SsffDataService.getColumnOfTrack(r.name,r.columnName),o=void 0,s=void 0,l=0;l<i.values.length;l++){var c=this.SsffDataService.getSampleRateAndStartTimeOfTrack(t.staticContours[n].xSsffTrack),u=this.SsffDataService.getSampleRateAndStartTimeOfTrack(t.staticContours[n].ySsffTrack);if(c.sampleRate!==u.sampleRate||c.startSample!==u.startSample)return void alert("xsRaSt.sampleRate !== ysRaSt.sampleRate || xsRaSt.startSample !== ysRaSt.startSample");var h=(i.values[l][t.staticContours[n].xContourNr]-this.globalMinX)/(this.globalMaxX-this.globalMinX)*this.staticContoursCanvas.width,p=this.staticContoursCanvas.height-(a.values[l][t.staticContours[n].yContourNr]-this.globalMinY)/(this.globalMaxY-this.globalMinY)*this.staticContoursCanvas.height;e.strokeStyle=t.staticContours[n].color,e.fillStyle=t.staticContours[n].color,e.beginPath(),e.arc(h,p,2,this.startPoint,this.endPoint,!0),e.fill(),l>=1&&t.staticContours[n].connect&&(e.beginPath(),e.moveTo(o,s),e.lineTo(h,p),e.stroke()),o=h,s=p}}},e.prototype.drawDots=function(){var e=this;if(this.globalMinX===1/0){if(0!==this.setGlobalMinMaxVals())return 1;void 0!==this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].twoDimCanvases.twoDimDrawingDefinitions[0].staticContours&&this.drawStaticContour()}var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height);var n=t.canvas.width/t.canvas.offsetWidth,r=t.canvas.height/t.canvas.offsetHeight;t.beginPath(),t.moveTo(0,0),t.lineTo(5,5),t.moveTo(0,this.canvas.height),t.lineTo(5,this.canvas.height-5),t.moveTo(this.canvas.width,this.canvas.height),t.lineTo(this.canvas.width-5,this.canvas.height-5),t.stroke(),t.closePath();var i=3*parseInt(Ts.a.fontInputSize.slice(0,-2))/4;this.FontScaleService.drawUndistortedText(t,"yMax: "+this.MathHelperService.roundToNdigitsAfterDecPoint(this.globalMaxY,2),i,Ts.a.fontInputFamily,5,5,Ts.a.colorWhite,!0),this.FontScaleService.drawUndistortedTextTwoLines(t,"yMin: "+this.MathHelperService.roundToNdigitsAfterDecPoint(this.globalMinY,2),"xMin: "+this.MathHelperService.roundToNdigitsAfterDecPoint(this.globalMinX,2),i,Ts.a.fontInputFamily,5,this.canvas.height-i*r*2-5,Ts.a.colorWhite,!0);var a=t.measureText("xMax: "+this.MathHelperService.roundToNdigitsAfterDecPoint(this.globalMaxX,5)).width*n;this.FontScaleService.drawUndistortedText(t,"xMax: "+this.MathHelperService.roundToNdigitsAfterDecPoint(this.globalMaxX,2),i,Ts.a.fontInputFamily,this.canvas.width-a-5,this.canvas.height-i*r-5,Ts.a.colorWhite,!0);var o=this.ConfigProviderService.vals.perspectives[this.ViewStateService.curPerspectiveIdx].twoDimCanvases.twoDimDrawingDefinitions[0],s=this.SsffDataService.getSampleRateAndStartTimeOfTrack(o.dots[0].xSsffTrack),l=this.SsffDataService.getSampleRateAndStartTimeOfTrack(o.dots[0].ySsffTrack);if(void 0===s||void 0===l)return 1;var c,u=this.ViewStateService.curMousePosSample/this.SoundHandlerService.audioBuffer.sampleRate;c=s.startTime===1/s.sampleRate/2?Math.round(u*s.sampleRate):Math.round(u*s.sampleRate+(s.startTime-1/s.sampleRate/2)*s.sampleRate);var h=this.ConfigProviderService.getSsffTrackConfig(o.dots[0].xSsffTrack),p=this.SsffDataService.getColumnOfTrack(h.name,h.columnName);c>p.values.length-1&&(c=p.values.length-1),a=t.measureText("frame: "+c).width*n;t.save(),t.rotate(90*Math.PI/180),this.FontScaleService.drawUndistortedText(t,"frame: "+c,parseInt(Ts.a.fontInputSize.slice(0,-2))-4,Ts.a.fontInputFamily,this.canvas.width/2-a/2,-this.canvas.height,Ts.a.colorWhite,!0),t.restore();for(var f,d,v=0,m=Math.PI/180*360,g=[],S=0;S<o.dots.length;S++){h=this.ConfigProviderService.getSsffTrackConfig(o.dots[S].xSsffTrack),p=this.SsffDataService.getColumnOfTrack(h.name,h.columnName),h=this.ConfigProviderService.getSsffTrackConfig(o.dots[S].ySsffTrack);var w=this.SsffDataService.getColumnOfTrack(h.name,h.columnName);if(p.values.length!==w.values.length)return void alert("columns do not have same length or length of one not 1");if(s=this.SsffDataService.getSampleRateAndStartTimeOfTrack(o.dots[S].xSsffTrack),l=this.SsffDataService.getSampleRateAndStartTimeOfTrack(o.dots[S].ySsffTrack),s.sampleRate!==l.sampleRate||s.startSample!==l.startSample)return void alert("xsRaSt.sampleRate !== ysRaSt.sampleRate || xsRaSt.startSample !== ysRaSt.startSample");var y=(p.values[c][o.dots[S].xContourNr]-this.globalMinX)/(this.globalMaxX-this.globalMinX)*this.canvas.width,b=this.canvas.height-(w.values[c][o.dots[S].yContourNr]-this.globalMinY)/(this.globalMaxY-this.globalMinY)*this.canvas.height;t.strokeStyle=o.dots[S].color,t.beginPath(),t.arc(y,b,20,v,m,!0),t.stroke(),t.closePath(),t.beginPath(),t.arc(y,b,2,v,m,!0),t.fill(),t.closePath(),this.FontScaleService.drawUndistortedText(t,o.dots[S].name,parseInt(Ts.a.fontInputSize.slice(0,-2))-4,Ts.a.fontInputFamily,y,b-5,Ts.a.colorWhite,!0),g.push({name:o.dots[S].name,x:y,y:b})}return o.connectLines.forEach((function(e){g.forEach((function(t){t.name===e.fromDot&&(f=t),t.name===e.toDot&&(d=t)})),t.strokeStyle=e.color,t.beginPath(),t.moveTo(f.x,f.y),t.lineTo(d.x,d.y),t.stroke(),t.closePath()})),v=0,m=Math.PI/180*360,o.staticDots.forEach((function(n){t.strokeStyle=n.color,t.fillStyle=n.color;var r=(n.xNameCoordinate-e.globalMinX)/(e.globalMaxX-e.globalMinX)*e.canvas.width,i=e.canvas.height-(n.yNameCoordinate-e.globalMinY)/(e.globalMaxY-e.globalMinY)*e.canvas.height;e.FontScaleService.drawUndistortedText(t,n.name,parseInt(Ts.a.fontInputSize.slice(0,-2))-4,Ts.a.fontInputFamily,r,i,n.color,!0),n.xCoordinates.forEach((function(r,i){var a=(r-e.globalMinX)/(e.globalMaxX-e.globalMinX)*e.canvas.width,o=e.canvas.height-(n.yCoordinates[i]-e.globalMinY)/(e.globalMaxY-e.globalMinY)*e.canvas.height;if(t.beginPath(),t.arc(a,o,2,v,m,!0),t.fill(),t.closePath(),n.connect&&i>=1){var s=(n.xCoordinates[i-1]-e.globalMinX)/(e.globalMaxX-e.globalMinX)*e.canvas.width,l=e.canvas.height-(n.yCoordinates[i-1]-e.globalMinY)/(e.globalMaxY-e.globalMinY)*e.canvas.height;t.beginPath(),t.moveTo(s,l),t.lineTo(a,o),t.stroke(),t.closePath()}}))})),0},e}()]};r.module("emuwebApp").component(zs.selector,zs),r.module("emuwebApp").controller("ExportCtrl",["$scope","$window","ModalService","BrowserDetectorService","ViewStateService","HistoryService",function(e,t,n,r,i,a){e.firefox=r.isBrowser.Firefox(),e.getBlob=function(){var r;try{r=new Blob([n.dataExport],{type:"text/plain"})}catch(n){(r=new(t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder)).append(e.exportData),r=r.getBlob()}return r},e.updateHistoryService=function(){a.movesAwayFromLastSave=0},e.cursorInTextField=function(){i.setEditing(!0),i.setcursorInTextField(!0)},e.cursorOutOfTextField=function(){i.setEditing(!1),i.setcursorInTextField(!1)},e.export=function(){var t;t="object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.createObjectURL(e.getBlob()):URL.createObjectURL(e.getBlob()),e.SaveToDisk(t,n.dataIn),n.close()},e.SaveToDisk=function(t,n){var r=document.createElement("a");r.setAttribute("download",n),r.href=t,r.innerHTML="",r.style.display="none",document.body.appendChild(r),r.click(),e.updateHistoryService()}}]),r.module("emuwebApp").controller("LoginCtrl",["$scope","$rootScope","$http","ConfigProviderService","IoHandlerService","ViewStateService","ModalService",function(e,t,n,r,i,a,o){e.loginData={username:"",password:"",errorMsg:""},e.tryLogin=function(){i.logOnUser(e.loginData.username,e.loginData.password).then((function(t){"LOGGEDON"===t?o.confirm():e.loginData.errorMsg="ERROR: "+t}))},e.cursorInTextField=function(){a.setEditing(!0),a.setcursorInTextField(!0)},e.cursorOutOfTextField=function(){a.setEditing(!1),a.setcursorInTextField(!1)},e.cancel=function(){o.close()}}]),r.module("emuwebApp").controller("ManualCtrl",["$scope","ConfigProviderService",function(e,t){e.listOfMarkdownFiles=[{title:"Introduction",url:"manual/Introduction.md"},{title:"EMU-webApp-websocket-protocol",url:"manual/EMU-webApp-websocket-protocol.md"},{title:"Labeling articulatory data",url:"manual/Labeling-articulatory-data.md"}],e.curMdFile=e.listOfMarkdownFiles[0],e.setCurrentMdFile=function(t){e.curMdFile=t},e.isCurrentMdFile=function(t){return t===e.curMdFile.url?{"background-color":Ts.a.colorWhite,color:Ts.a.colorBlack,"font-weight":"500"}:{"background-color":Ts.a.colorBlue,color:Ts.a.colorWhite,"font-weight":"400"}}}]),r.module("emuwebApp").controller("ModalCtrl",["$scope","ArrayHelperService","BrowserDetectorService","ModalService","ViewStateService","LevelService","HistoryService","ConfigProviderService",function(e,t,n,r,i,a,o,s){e.cps=s,e.vs=i,e.data=void 0,e.mySelect=null,e.cursorInTextField=function(){i.setEditing(!0),i.setcursorInTextField(!0)},e.cursorOutOfTextField=function(){i.setEditing(!1),i.setcursorInTextField(!1)},e.saveChanges=function(){r.close()},e.discardChanges=function(){r.close()},e.saveURL=function(){var t=e.getURLs();-1===t.indexOf(r.dataOut)&&t.push(r.dataOut),localStorage.setItem("urls",JSON.stringify(t)),e.myUrls=t,e.mySelect=e.myUrls[0]},e.getURLs=function(){var e=localStorage.getItem("urls"),t=[];return n.isBrowser.PhantomJS()||null===e||(t=JSON.parse(e)),t},e.setCurrentURL=function(e){r.dataOut=e},e.deleteURL=function(t){var n=e.getURLs();-1!==n.indexOf(t)&&n.splice(n.indexOf(t),1),localStorage.setItem("urls",JSON.stringify(n)),e.myUrls=n,e.mySelect=e.myUrls[0]},e.renameLevel=function(){a.renameLevel(r.dataIn,e.data,i.curPerspectiveIdx),o.addObjToUndoStack({type:"ANNOT",action:"RENAMELEVEL",newname:e.data,name:r.dataIn,curPerspectiveIdx:i.curPerspectiveIdx}),r.close()},e.deleteLevel=function(){var e=a.getLevelDetails(i.getcurClickLevelName());a.deleteLevel(i.getcurClickLevelIndex(),i.curPerspectiveIdx),o.addObjToUndoStack({type:"ANNOT",action:"DELETELEVEL",level:e,id:i.getcurClickLevelIndex(),curPerspectiveIdx:i.curPerspectiveIdx}),r.close()}}]),r.module("emuwebApp").controller("searchAnnotCtrl",["$scope","ModalService","ViewStateService","HierarchyLayoutService","LevelService","LoadedMetaDataService","ConfigProviderService","StandardFuncsService","DataService",function(e,t,n,r,i,a,o,s,l){e.vs=n,e.hierPaths=r.findAllNonPartialPaths(),e.curHierPathIdx=0,e.curLevels=e.hierPaths.possible[e.curHierPathIdx],e.curLevel=e.curLevels[e.curHierPathIdx],e.curAttrIdx=0,e.curAttrDefs=o.getAttrDefsNames(e.curLevel),e.curAttrDef=e.curAttrDefs[0],e.searchString="",e.useRegExSearch=!1,e.resultTimeAnchors=[],e.changedHierPath=function(){e.curLevels=e.hierPaths.possible[e.curHierPathIdx],e.curLevel=e.curLevels[0],e.curAttrDefs=o.getAttrDefsNames(e.curLevel),e.curAttrDef=e.curAttrDefs[0]},e.changedLevel=function(){e.curAttrDefs=o.getAttrDefsNames(e.curLevel),e.curAttrDef=e.curAttrDefs[0],e.curAttrIdx=e.curAttrDefs.indexOf(e.curAttrDef)},e.changedAttrDef=function(){e.curAttrIdx=e.curAttrDefs.indexOf(e.curAttrDef)},e.cursorInTextField=function(){n.setEditing(!0),n.setcursorInTextField(!0)},e.cursorOutOfTextField=function(){n.setEditing(!1),n.setcursorInTextField(!1)},e.search=function(){r.findParents(e.hierPaths.possible[e.curHierPathIdx]);var t=i.getLevelDetails(e.curLevel);e.resultTimeAnchors=[];for(var n=0;n<t.items.length;n++)e.useRegExSearch?t.items[n].labels[e.curAttrIdx].value.match(e.searchString)&&e.resultTimeAnchors.push({label:t.items[n].labels[e.curAttrIdx].value,sample_start:t.items[n]._derivedSampleStart,sample_end:t.items[n]._derivedSampleEnd}):t.items[n].labels[e.curAttrIdx].value===e.searchString&&e.resultTimeAnchors.push({label:t.items[n].labels[e.curAttrIdx].value,sample_start:t.items[n]._derivedSampleStart,sample_end:t.items[n]._derivedSampleEnd})},e.saveTimeAnchors=function(){a.setTimeAnchors(e.resultTimeAnchors),s.traverseAndClean(l.getData()),t.close()}}]),r.module("emuwebApp").controller("ShowhierarchyCtrl",["$scope","ViewStateService","HistoryService","ModalService","ConfigProviderService","LevelService","HierarchyLayoutService","StandardFuncsService",function(e,t,n,r,i,a,o,s){e.paths={possible:[],possibleAsStr:[],selected:""},e.vs=t,e.HistoryService=n,e.standardFuncServ=s;var l=o.findAllNonPartialPaths();e.paths.possible=l.possible,e.paths.possibleAsStr=l.possibleAsStr,e.paths.selected=e.paths.possibleAsStr[t.hierarchyState.curPathIdx],e.vs.hierarchyState.curNrOfPaths=e.paths.possibleAsStr.length,e.attributeDefinitionClickCounter=0,e.$watch("paths.selected",(function(){t.hierarchyState.path=e.paths.possible[e.getSelIdx()],t.hierarchyState.curPathIdx=e.getSelIdx()}),!1),e.$watch("vs.hierarchyState.curPathIdx",(function(){t.hierarchyState.path=e.paths.possible[e.vs.hierarchyState.curPathIdx],e.paths.selected=e.paths.possibleAsStr[t.hierarchyState.curPathIdx]}),!1),e.getSelIdx=function(){return e.paths.possibleAsStr.indexOf(e.paths.selected)},e.rotateHierarchy=function(){t.hierarchyState.toggleRotation()},e.getRotation=function(){return t.hierarchyState.isRotated()},e.playSelection=function(){++t.hierarchyState.playing},e.getPlaying=function(){return t.hierarchyState.playing},e.isCurrentAttrDef=function(e,n){return t.getCurAttrDef(e)===n},e.setCurrentAttrDef=function(n,r,i){e.attributeDefinitionClickCounter=e.attributeDefinitionClickCounter+1,t.setCurAttrDef(n,r,i)},e.getAllAttrDefs=function(e){return i.getLevelDefinition(e).attributeDefinitions},e.cancel=function(){r.close()}}]),r.module("emuwebApp").controller("TabbedCtrl",["$scope","$timeout","ConfigProviderService","ValidationService","ViewStateService","ModalService",function(e,t,n,i,a,o){e.cps=n,e.vs=a,e.tree=[{title:"Perspectives Configuration",url:"views/config/perspectives.html"},{title:"Spectrogram Settings",url:"views/config/spectro.html"},{title:"Expert Settings",url:"views/config/expert.html"}],e.cps=n,e.modal=o,e.schema=i.getSchema("emuwebappConfigSchema").data.properties,e.modal.dataOut=r.copy(n.vals),e.warning="",e.init=function(){e.options=Object.keys(a.getWindowFunctions()),e.timeMode=Object.keys(a.getTimeModes()),e.comMode=Object.keys(a.getCommunicationModes()),e.signalTypes=Object.keys(a.getSignalTypes()),e.levelTypes=[],n.curDbConfig.ssffTrackDefinitions.forEach((function(t){e.signalTypes.push(t.name)})),n.curDbConfig.levelDefinitions.forEach((function(t){"SEGMENT"!==t.type&&"EVENT"!==t.type||e.levelTypes.push(t.name)})),e.currentSignal=e.signalTypes[0],e.levelTypes.length>0&&(e.currentLevel=e.levelTypes[0])},e.onClickTab=function(t){!1!==t.url&&(e.currentTabUrl=t.url)},e.getType=function(t,n){var r;return e.schema.forEach((function(e,i){i===t&&e.properties.forEach((function(e,t){t===n&&(r=e.type)}))})),r},e.up=function(t,n,r){var i,a=e.modal.dataOut.perspectives[t];n>0&&(0===r?(i=a.signalCanvases.order[n-1],a.signalCanvases.order[n-1]=a.signalCanvases.order[n],a.signalCanvases.order[n]=i):1===r&&(i=a.levelCanvases.order[n-1],a.levelCanvases.order[n-1]=a.levelCanvases.order[n],a.levelCanvases.order[n]=i))},e.down=function(t,n,r){var i,a=e.modal.dataOut.perspectives[t];0===r?void 0!==a.signalCanvases.order[n+1]&&(i=a.signalCanvases.order[n+1],a.signalCanvases.order[n+1]=a.signalCanvases.order[n],a.signalCanvases.order[n]=i):1===r&&void 0!==a.levelCanvases.order[n+1]&&(i=a.levelCanvases.order[n+1],a.levelCanvases.order[n+1]=a.levelCanvases.order[n],a.levelCanvases.order[n]=i)},e.del=function(t,n){var r=e.modal.dataOut.perspectives[t],i=!1,a="";if(void 0!==r.signalCanvases.assign)for(var o=0;o<r.signalCanvases.assign.length;o++)r.signalCanvases.assign[o].signalCanvasName===r.signalCanvases.order[n]&&(i=!0,a=r.signalCanvases.assign[o].signalCanvasName),r.signalCanvases.assign[o].ssffTrackName===r.signalCanvases.order[n]&&(i=!0,a=r.signalCanvases.assign[o].ssffTrackName);i?e.showWarning('Could not delete "'+a+'" because of internal dependencies !'):r.signalCanvases.order.splice(n,1)},e.showWarning=function(n){e.warningSignal=!0,e.warning=n,t((function(){e.warningSignal=!1}),2e3)},e.perspDelete=function(t){e.modal.dataOut.perspectives.splice(t,1)},e.signalAdd=function(t,n){var r=e.modal.dataOut.perspectives[t];void 0===r.signalCanvases.order&&(r.signalCanvases.order=[]),-1===r.signalCanvases.order.indexOf(n)?r.signalCanvases.order.push(n):e.showWarning('Signal "'+n+'" already exists')},e.levelAdd=function(t,n){var r=e.modal.dataOut.perspectives[t];void 0===r.levelCanvases.order&&(r.levelCanvases.order=[]),-1===r.levelCanvases.order.indexOf(n)?r.levelCanvases.order.push(n):e.showWarning('Level "'+n+'" already exists')},e.perspAdd=function(){e.modal.dataOut.perspectives.splice(e.modal.dataOut.perspectives.length,0,{name:"new Perspective",signalCanvases:[],levelCanvases:{order:[]},twoDimCanvases:[]})},e.cursorInTextField=function(){a.setEditing(!0),a.setcursorInTextField(!0)},e.cursorOutOfTextField=function(){a.setEditing(!1),a.setcursorInTextField(!1)},e.onClickTab(e.tree[0]),e.init()}]);var Us=n(144);r.module("emuwebApp").controller("TabbedHelpCtrl",["$scope","$sce","ConfigProviderService","IoHandlerService",function(e,t,n,r){e.cps=n,e.tree=[],e.converter=new a.Converter,r.httpGetPath("manual/index.json",void 0,!0).then((function(t){e.tree=t.data,e.onClickTab(e.tree[0]),e.tree[0].expanded=!0})),e.onClickTab=function(n){n.expanded=!n.expanded,!1!==n.url&&r.httpGetPath(n.url,void 0,!0).then((function(r){"md"===n.url.substr(n.url.lastIndexOf(".")+1).toLowerCase()?(r.data=r.data.replace("@@versionnr",Us.a),e.htmlStr=t.trustAsHtml(e.converter.makeHtml(r.data))):e.htmlStr=t.trustAsHtml(r.data)}))},e.hasChildren=function(e){return void 0!==e.nodes&&e.nodes.length>0}}]),r.module("emuwebApp").directive("dragout",["$window","DataService","LoadedMetaDataService","BrowserDetectorService","ConfigProviderService",function(e,t,n,i,a){return{restrict:"A",replace:!0,scope:{name:"@"},link:function(o,s,l){o.cps=a;var c=s[0];o.generateURL=function(){return o.getURL(r.toJson(t.getData(),!0))},o.isActive=function(){return l.name===n.getCurBndl().name},o.getURL=function(e){return"object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.createObjectURL(o.getBlob(e)):URL.createObjectURL(o.getBlob(e))},o.getBlob=function(t){var n;try{n=new Blob([t],{type:"text/plain"})}catch(r){(n=new(e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder)).append(t),n=n.getBlob()}return n},c.addEventListener("dragstart",(function(e){if(o.isActive()){this.classList.add("drag");var t=o.generateURL();(i.isBrowser.Firefox()||i.isBrowser.Chrome())&&void 0!==e.dataTransfer&&e.dataTransfer.setData("DownloadURL","application/json:"+l.name+"_annot.json:"+t)}else e.preventDefault();return!1}),!1),c.addEventListener("dragend",(function(e){return o.isActive()&&(this.classList.remove("drag"),e.preventDefault()),!1}),!1)}}}]),r.module("emuwebApp").directive("modal",["$animate","ModalService",function(e,t){return{restrict:"E",template:'\n\t\t\t<div id="modalDialog" class="emuwebapp-modal">\n\t\t\t\t<div ng-if="modal.isOpen">\n\t\t\t\t\t<button title="Close" id="modal-close" class="emuwebapp-close-button" ng-click="modal.close()" ng-hide="force">\n\t\t\t\t\t\t<i class="material-icons">cancel</i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<p class="emuwebapp-modal-inner" ng-include="templateUrl"></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t',replace:!0,scope:{},link:function(e,n){e.templateUrl="",e.modal=t,e.isOpen=!1,e.force=!1,e.dataIn="",e.$watch("modal.isOpen",(function(r){void 0!==r&&(e.templateUrl=t.getTemplateUrl(),e.dataIn=t.dataIn,e.force=t.force,r?n[0].classList.add("emuwebapp-modal-open"):n[0].classList.remove("emuwebapp-modal-open"))})),e.$watch("modal.templateUrl",(function(n){void 0!==n&&(e.templateUrl=n,e.dataIn=t.dataIn,e.force=t.force)}))}}}]),r.module("emuwebApp").directive("myDropZone",["$animate","$compile","DragnDropService","BrowserDetectorService","AppStateService","ModalService",function(e,t,n,r,i,a){return{template:'\n\t\t\t<div id="dropzone" class="emuwebapp-dropzone" ng-class="dropClass">\n\t\t\t\t<span><br />{{dropText}}</span>\n\t\t\t\t<my-drop-zone-input></my-drop-zone-input>\n\t\t  \t</div>',restrict:"E",replace:!0,scope:{},link:function(e,t){e.dropTextDefault="Drop your files here (.wav/.mp3 files; audio & annotJSON file pairs; audio & TextGrid file pairs) or click here to do the same with a file dialog",e.dropTextErrorFileType="Error: Could not parse file. The following file types are supported: .WAV .MP3 .TEXTGRID _annot.json",e.dropTextErrorAPI="Sorry ! The File APIs are not supported in your browser.",e.dropAllowed="Drop file(s) to start loading !",e.dropParsingWaiting=".TextGrid loaded! Please load a .WAV or .MP3 file in order to start!",e.dropParsingWAV="Audio file loaded! Proceeding without annotation data.",e.dropParsingWaitingAnnot="Annotation file loaded! Please load a .WAV or .MP3 file in order to start!",e.dropFirefoxWarning="Sorry ! Firefox does not support dropping folders ! please drop single or multiple files !",e.dropText=e.dropTextDefault,e.dropClass="",e.dropClassDefault="",e.dropClassOver="over",e.dropClassError="error",e.count=0,e.handles=[],e.bundles=[],e.bundleNames=[],e.updateQueueLength=function(t){e.count+=t},e.enqueueFileAddition=function(t){var n=t.name.substring(t.name.lastIndexOf("_")+1,t.name.lastIndexOf(".")).toUpperCase(),i=t.name.substr(t.name.lastIndexOf(".")+1).toUpperCase(),a="";a="ANNOT"===n?t.name.substr(0,t.name.lastIndexOf("_")):t.name.substr(0,t.name.lastIndexOf("."));var o=e.bundleNames.indexOf(a);-1===o&&(e.bundleNames.push(a),o=e.bundleNames.indexOf(a),e.bundles[o]=[],e.bundles[o][0]=a),"WAV"===i||"MP3"===i?(e.bundles[o][1]=t,e.handles.push(t),e.dropClass=e.dropClassDefault,e.dropText=e.dropParsingWAV):"TEXTGRID"===i?(e.bundles[o][2]={},e.bundles[o][2].file=t,e.bundles[o][2].type="textgrid",e.handles.push(t),e.dropClass=e.dropClassDefault,e.dropText=e.dropParsingWaiting):"JSON"===i&&"ANNOT"===n?(e.bundles[o][2]={},e.bundles[o][2].file=t,e.bundles[o][2].type="annotation",e.handles.push(t),e.dropClass=e.dropClassDefault,e.dropText=e.dropParsingWaitingAnnot):(r.isBrowser.Firefox()&&0===t.size?(e.dropClass=e.dropClassError,e.dropText=e.dropFirefoxWarning):(e.dropClass=e.dropClassError,e.dropText=e.dropTextErrorFileType),e.handles=[],e.bundles=[],e.bundleNames=[],e.count=0),r.isBrowser.Firefox()||r.isBrowser.Safari()||e.$digest(),void 0!==e.bundles[o]&&e.startRendering()},e.startRendering=function(){e.count===e.handles.length&&(n.setData(e.bundles),e.handles=[],e.bundles=[],e.bundleNames=[],e.count=0,e.dropText=e.dropTextDefault,e.dropClass=e.dropClassDefault)},e.loadFiles=function(t){e.updateQueueLength(t.length);for(var n=0;n<t.length;n++){var r=t[n];if(".DS_Store"===r.name)e.updateQueueLength(-1);else{var i;if(r.isFile||r.isDirectory)i=r;else if(r.getAsEntry)i=r.getAsEntry();else{if(!r.webkitGetAsEntry){if("function"==typeof r.getAsFile){e.enqueueFileAddition(r.getAsFile());continue}if(File&&r instanceof File){e.enqueueFileAddition(r);continue}e.updateQueueLength(-1);continue}i=r.webkitGetAsEntry()}i?i.isFile?i.file((function(t){e.enqueueFileAddition(t)}),(function(e){console.warn(e)})):i.isDirectory&&i.createReader().readEntries((function(t){e.loadFiles(t),e.updateQueueLength(-1)}),(function(e){console.warn(e)})):e.updateQueueLength(-1)}}},e.dropFiles=function(t){t.stopPropagation(),t.preventDefault(),e.$apply((function(){var n;window.File&&window.FileReader&&window.FileList&&window.Blob?void 0!==t.originalEvent&&(n=r.isBrowser.Firefox()||r.isBrowser.Safari()?t.originalEvent.dataTransfer.files:t.originalEvent.dataTransfer.items,e.loadFiles(n)):a.open("views/error.html",e.dropTextErrorAPI).then((function(){e.dropText=e.dropTextDefault,e.dropClass=e.dropClassDefault,i.resetToInitState()}))}))},e.dragEnterLeave=function(t){t.preventDefault(),e.$apply((function(){e.dropText=e.dropTextDefault,e.dropClass=e.dropClassDefault}))},e.handleDragOver=function(t){t.preventDefault(),e.$apply((function(){e.dropText=e.dropAllowed,e.dropClass=e.dropClassOver}))},t.bind("drop",(function(t){e.dropFiles(t)})),t.bind("dragover",(function(t){e.handleDragOver(t)})),t.bind("dragenter",(function(t){e.dragEnterLeave(t)})),t.bind("dragleave",(function(t){e.dragEnterLeave(t)})),t.bind("click",(function(){t.find("input")[0].click()}))}}}]),r.module("emuwebApp").directive("myDropZoneInput",(function(){return{template:'<input style="display:none;" id="fileDialog" ng-model="files" type="file" multiple accept="{{acceptFile}}" />',restrict:"E",scope:{},link:function(e,t){e.acceptGrid=".TextGrid",e.acceptWav="audio/wav, audio/x-wav, audio/wave, audio/x-pn-wav",e.acceptJson="application/json",e.acceptBoth=e.acceptWav+","+e.acceptGrid+","+e.acceptJson,e.acceptFile=e.acceptBoth,e.handleFilesonChange=function(){var n=t[0].firstChild.files;e.$parent.loadFiles(n)},t.bind("change",(function(t){e.handleFilesonChange(t)})),t.bind("click",(function(){var e=r.element("input");void 0!==e[1]&&e[1].click()}))}}})),r.module("emuwebApp").directive("bgSplitter",["$rootScope","ViewStateService",function(e,t){return{restrict:"E",replace:!0,transclude:!0,scope:{showTwoDimCans:"@"},template:'<div class="emuwebapp-split-panes vertical" ng-transclude></div>',controller:["$scope",function(e){e.panes=[],e.bottomRightResizePane=void 0,this.addPane=function(t){if(e.panes.length>1)throw"splitters can only have two panes";return e.panes.push(t),e.panes.length},this.setBottomRightResizePane=function(t){e.bottomRightResizePane=t}}],link:function(n,i,a){var o=!1,s=!1,l=!1,c=r.element('<div id="emuwebapp-split-handler" class="emuwebapp-split-handler"><span></span></div>'),u=n.panes[0],h=n.panes[1],p=n.bottomRightResizePane,f=r.element('<div class="topBorder"></div>'),d=r.element('<div class="leftBorder"></div>'),v=r.element('<div class="corner"></div>');p.elem.prepend(d),p.elem.prepend(f),p.elem.prepend(v);var m=u.minSize||0,g=h.minSize||0,S=!1,w=!1;u.elem.after(c),a.$observe("showTwoDimCans",(function(e){"false"===e?n.bottomRightResizePane.elem.hide():n.bottomRightResizePane.elem.show()})),i.bind("mousemove",(function(n){if(w){var r,a,f,d=i[0].getBoundingClientRect(),v=0;if(S){if(r=d.bottom-d.top,(v=n.clientY-d.top)<m)return;if(r-v<g)return;c.css("top",v+"px"),u.elem.css("height",v+"px"),h.elem.css("top",v+"px"),t.setdragBarHeight(v),e.$digest()}if(o){if(r=d.bottom-d.top,(v=n.clientY-d.top)<=10||r-v<=10)return;p.elem.css("top",v+"px"),f=r-v,p.elem.css("height",f+"px")}if(s){if(a=d.right-d.left,(v=n.clientX-d.left)<=10||a-v<=10)return;f=a-v,p.elem.css("width",f+"px")}if(l){if(r=d.bottom-d.top,(v=n.clientY-d.top)<=10||r-v<=10)return;if(p.elem.css("top",v+"px"),f=r-v,p.elem.css("height",f+"px"),a=d.right-d.left,(v=n.clientX-d.left)<=10||a-v<=10)return;f=a-v,p.elem.css("width",f+"px")}}})),c.bind("mousedown",(function(n){n.preventDefault(),w=!0,S=!0,t.setdragBarActive(!0),e.$digest()})),f.bind("mousedown",(function(n){n.preventDefault(),w=!0,o=!0,t.setdragBarActive(!0),e.$digest()})),d.bind("mousedown",(function(n){n.preventDefault(),w=!0,s=!0,t.setdragBarActive(!0),e.$digest()})),v.bind("mousedown",(function(n){n.preventDefault(),w=!0,l=!0,t.setdragBarActive(!0),e.$digest()})),r.element(document).bind("mouseup",(function(){w=!1,S=!1,o=!1,s=!1,l=!1,t.setdragBarActive(!1),e.$digest()}))}}}]).directive("bgPane",(function(){return{restrict:"E",require:"^bgSplitter",replace:!0,transclude:!0,scope:{minSize:"=",type:"@",showTwoDimCans:"@"},template:'<div class="{{typeclass}}" ng-transclude></div>',link:function(e,t,n,r){"emuwebapp-2d-map"!==e.type?(e.elem=t,e.index=r.addPane(e),e.typeclass="split-pane"+e.index):(e.elem=t,e.index=3,e.typeclass="emuwebapp-2d-map",r.setBottomRightResizePane(e))}}})),r.module("emuwebApp").filter("levelsFilter",["ConfigProviderService","ViewStateService",function(e,t){return function(n){if(n){for(var r=new RegExp("SEGMENT|EVENT"),i=[],a=0;a<n.length;a++)r.test(n[a].type)&&void 0!==e.vals.perspectives[t.curPerspectiveIdx].levelCanvases&&-1!==e.vals.perspectives[t.curPerspectiveIdx].levelCanvases.order.indexOf(n[a].name)&&i.push(n[a]);return i}}}]),r.module("emuwebApp").filter("regex",(function(){return function(e,t){for(var n=new RegExp(t.toLowerCase()),r=[],i=0;i<e.length;i++)n.test(e[i].name.toLowerCase())&&r.push(e[i]);return r}})),r.module("emuwebApp").filter("startFrom",(function(){return function(e,t){return t=+t,e.slice(t)}}));n(216),n(220),n(237),n(242),n(244),n(246),n(259),n(278),n(301),n(309),n(334),n(337),n(338),n(339),n(355),n(368),n(370);var Ws=function(){function e(e,t,n,r,i,a,o,s,l,c,u){this.$q=e,this.$log=t,this.ViewStateService=n,this.LevelService=r,this.LinkService=i,this.ConfigProviderService=a,this.SsffDataService=o,this.ArrayHelperService=s,this.ModalService=l,this.HistoryService=c,this.DataService=u}return e.prototype.insertAnagestEvents=function(){var e=this,t=this.$q.defer();if(0!==this.ViewStateService.getItemsInSelection(this.DataService.data.levels).length)return this.ModalService.open("views/error.html","There are already events in the selected area! This is not permitted...").then((function(){t.reject()})),t;var n=this.ConfigProviderService.getLevelDefinition(this.ViewStateService.getcurClickLevelName()).anagestConfig.verticalPosSsffTrackName,r=this.ConfigProviderService.getSsffTrackConfig(n),i=this.SsffDataService.getColumnOfTrack(r.name,r.columnName),a=this.SsffDataService.getSampleRateAndStartTimeOfTrack(r.name),o=this.ConfigProviderService.getLevelDefinition(this.ViewStateService.getcurClickLevelName()).anagestConfig.velocitySsffTrackName,s=this.ConfigProviderService.getSsffTrackConfig(o),l=this.SsffDataService.getColumnOfTrack(s.name,s.columnName);if(1!==i.length||1!==l.length)return this.ModalService.open("views/error.html","UPS... the column length of of one of the tracks is != 1 this means something is badly configured in the DB!!!").then((function(){t.reject()})),t;var c,u=this.ArrayHelperService.flattenArrayOfArray(i.values),h=this.ArrayHelperService.flattenArrayOfArray(l.values),p=[NaN,NaN],f=[NaN,NaN],d=[NaN,NaN],v=[NaN];c="valley"!==this.ConfigProviderService.getLevelDefinition(this.ViewStateService.getcurClickLevelName()).anagestConfig.gestureDirection,h=this.ArrayHelperService.convertToAbsValues(h);var m,g=this.ViewStateService.getSelectedStartTime(),S=this.ViewStateService.getSelectedEndTime(),w=Math.round(g*a.sampleRate+a.startTime),y=Math.round(S*a.sampleRate+a.startTime)-w,b=u.slice(w,w+y),x=h.slice(w,w+y);c?(m=this.ArrayHelperService.findMinMax(b,"max"),v[0]=m.idx):(m=this.ArrayHelperService.findMinMax(b,"min"),v[0]=m.idx);var k=this.ArrayHelperService.findMinMax(x.slice(0,v[0]+1),"max");f[0]=k.idx;var C=this.ArrayHelperService.findMinMax(x.slice(0,f[0]+1),"min");return this.$log.info("Looking for gesture onset"),this.interactiveFindThresholds(x.slice(0,f[0]+1),C.val,k.val,this.ConfigProviderService.getLevelDefinition(this.ViewStateService.getcurClickLevelName()).anagestConfig.threshold,1,"Looking for gesture onset").then((function(n){var r=n;p[0]=r;var i=e.ArrayHelperService.findMinMax(x.slice(f[0],v[0]+1),"min"),o=i.idx+f[0];e.$log.info("Looking for nucleus onset"),e.interactiveFindThresholds(x.slice(f[0],o+1),i.val,k.val,e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.threshold,-1,"Looking for nucleus onset").then((function(n){var r=n;d[0]=r+f[0];var i=e.ArrayHelperService.findMinMax(x.slice(v[0]),"max");f[1]=i.idx+v[0];var s=e.ArrayHelperService.findMinMax(x.slice(v[0],f[1]+1),"min");o=s.idx+v[0],e.$log.info("Looking for nucleus offset"),e.interactiveFindThresholds(x.slice(o,f[1]+1),s.val,i.val,e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.threshold,1,"Looking for nucleus offset").then((function(n){var r=n;d[1]=r+o;var s=e.ArrayHelperService.findMinMax(x.slice(f[1]),"min");o=s.idx+f[1],e.$log.info("Looking for gesture offset"),e.interactiveFindThresholds(x.slice(f[1],o+1),s.val,i.val,e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.threshold,-1,"Looking for gesture offset").then((function(n){var r,i=n;p[1]=i+f[1],p[0]=e.SsffDataService.calculateSamplePosInVP(w+p[0],a.sampleRate,a.startTime),p[1]=e.SsffDataService.calculateSamplePosInVP(w+p[1],a.sampleRate,a.startTime),r=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.gestureOnOffsetLabels[0];var o=e.LevelService.insertEvent(e.ViewStateService.getcurClickLevelName(),p[0],r);e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTEVENT",name:e.ViewStateService.getcurClickLevelName(),start:p[0],id:o.id,pointName:r}),r=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.gestureOnOffsetLabels[1];var s=e.LevelService.insertEvent(e.ViewStateService.getcurClickLevelName(),p[1],r);e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTEVENT",name:e.ViewStateService.getcurClickLevelName(),start:p[1],id:s.id,pointName:r}),f[0]=e.SsffDataService.calculateSamplePosInVP(w+f[0],a.sampleRate,a.startTime),f[1]=e.SsffDataService.calculateSamplePosInVP(w+f[1],a.sampleRate,a.startTime),r=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.maxVelocityOnOffsetLabels[0];var l=e.LevelService.insertEvent(e.ViewStateService.getcurClickLevelName(),f[0],r);e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTEVENT",name:e.ViewStateService.getcurClickLevelName(),start:f[0],id:l.id,pointName:r}),r=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.maxVelocityOnOffsetLabels[1];var c=e.LevelService.insertEvent(e.ViewStateService.getcurClickLevelName(),f[1],r);e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTEVENT",name:e.ViewStateService.getcurClickLevelName(),start:f[1],id:c.id,pointName:r}),d[0]=e.SsffDataService.calculateSamplePosInVP(w+d[0],a.sampleRate,a.startTime),d[1]=e.SsffDataService.calculateSamplePosInVP(w+d[1],a.sampleRate,a.startTime),r=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.constrictionPlateauBeginEndLabels[0];var u=e.LevelService.insertEvent(e.ViewStateService.getcurClickLevelName(),d[0],r);e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTEVENT",name:e.ViewStateService.getcurClickLevelName(),start:d[0],id:u.id,pointName:r}),r=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.constrictionPlateauBeginEndLabels[1];var h=e.LevelService.insertEvent(e.ViewStateService.getcurClickLevelName(),d[1],r);e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTEVENT",name:e.ViewStateService.getcurClickLevelName(),start:d[1],id:h.id,pointName:r}),v[0]=e.SsffDataService.calculateSamplePosInVP(w+v[0],a.sampleRate,a.startTime),r=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.maxConstrictionLabel;var m=e.LevelService.insertEvent(e.ViewStateService.getcurClickLevelName(),v[0],r);e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTEVENT",name:e.ViewStateService.getcurClickLevelName(),start:v[0],id:m.id,pointName:r});var g=e.ConfigProviderService.getLevelDefinition(e.ViewStateService.getcurClickLevelName()).anagestConfig.autoLinkLevelName,S=e.LevelService.getLevelDetails(g),y=e.LevelService.getAllLabelsOfLevel(S);e.ModalService.open("views/SelectLabelModal.html",y,void 0,!0).then((function(t){if(!1!==t){var n=[o.id,s.id,l.id,c.id,u.id,h.id,m.id];e.LinkService.insertLinksTo(S.items[t].id,n),e.HistoryService.updateCurChangeObj({type:"ANNOT",action:"INSERTLINKSTO",name:S.name,parentID:S.items[t].id,childIDs:n}),e.HistoryService.addCurChangeObjToUndoStack()}})),t.resolve()}))}))}))}),(function(){})),t.promise},e.prototype.interactiveFindThresholds=function(e,t,n,r,i,a){var o,s=this,l=t+(n-t)*r,c=i;l*=c;var u=this.ArrayHelperService.multiplyEachElement(e,c),h=u.length,p=u.slice(1,h),f=h-1,d=[];for(o=0;o<u.length;o++)p[o]>=l&&u[o]<l&&d.push(o);var v=[];for(o=0;o<d.length;o++)d[o]>=0&&d[o]<=f&&v.push(o);if(v.length>1){var m=this.$q.defer(),g={};for(g.description=a,g.options=[],g.y=u,g.minVal=t,g.maxVal=n,g.threshold=r,o=0;o<d.length;o++)g.options.push({thresholdIdx:d[o],thresholdValue:u[o]});return this.ModalService.open("views/SelectThresholdModal.html",g,void 0,!0).then((function(e){var t=d[v[e]];t=s.ArrayHelperService.interp2points(u[t],t,u[t+1],t+1,l),m.resolve(t)})),m.promise}if(0===v.length)return m=this.$q.defer(),this.ModalService.open("views/error.html","Could not find any values that step over the threshold!!").then((function(){m.reject("Could not find any values that step over the threshold!!")})),m.promise;m=this.$q.defer();var S=d[v[0]];return S=this.ArrayHelperService.interp2points(u[S],S,u[S+1],S+1,l),m.resolve(S),m.promise},e}();r.module("emuwebApp").service("AnagestService",["$q","$log","ViewStateService","LevelService","LinkService","ConfigProviderService","SsffDataService","ArrayHelperService","ModalService","HistoryService","DataService",Ws]);var Gs=function(){function e(e,t){this.$http=e,this.ModalService=t}return e.prototype.handleUpdatereadyEvent=function(){},e.prototype.checkForNewVersion=function(){navigator},e}();r.module("emuwebApp").service("AppcacheHandlerService",["$http","ModalService",Gs]);var qs=function(){function e(e,t,n,r,i,a,o,s,l,c,u,h){this.$log=e,this.$rootScope=t,this.$location=n,this.DragnDropService=r,this.DragnDropDataService=i,this.ViewStateService=a,this.IoHandlerService=o,this.LoadedMetaDataService=s,this.SoundHandlerService=l,this.DataService=c,this.SsffDataService=u,this.HistoryService=h}return e.prototype.resetToInitState=function(){var e=this;this.IoHandlerService.WebSocketHandlerService.isConnected()&&this.IoHandlerService.WebSocketHandlerService.disconnectWarning().then((function(){e.$log.info("Closing websocket connection to server"),e.IoHandlerService.WebSocketHandlerService.closeConnect()})),this.LoadedMetaDataService.resetToInitState(),this.SoundHandlerService.audioBuffer={},this.DataService.setData({}),this.DragnDropDataService.resetToInitState(),this.DragnDropService.resetToInitState(),this.SsffDataService.data=[],this.HistoryService.resetToInitState(),this.ViewStateService.setState("noDBorFilesloaded"),this.ViewStateService.somethingInProgress=!1,this.ViewStateService.resetToInitState(),this.HistoryService.resetToInitState(),this.ViewStateService.showDropZone=!0,this.$location.url(this.$location.path()),this.$rootScope.$broadcast("resetToInitState")},e.prototype.reloadToInitState=function(e){this.IoHandlerService.WebSocketHandlerService.closeConnect();var t=this.ViewStateService.url;this.LoadedMetaDataService.resetToInitState(),this.SoundHandlerService.audioBuffer={},this.DataService.setData({}),this.DragnDropDataService.resetToInitState(),this.DragnDropService.resetToInitState(),this.SsffDataService.data=[],this.HistoryService.resetToInitState(),this.ViewStateService.setState("noDBorFilesloaded"),this.ViewStateService.somethingInProgress=!1,this.HistoryService.resetToInitState(),this.ViewStateService.resetToInitState(),this.$rootScope.$broadcast("reloadToInitState",{url:t,session:e,reload:!0})},e}();r.module("emuwebApp").service("AppStateService",["$log","$rootScope","$location","DragnDropService","DragnDropDataService","ViewStateService","IoHandlerService","LoadedMetaDataService","SoundHandlerService","DataService","SsffDataService","HistoryService",qs]);var Ys=function(){function e(){}return e.prototype.convertToAbsValues=function(e){for(var t=0;t<e.length;t++)e[t]=Math.abs(e[t]);return e},e.prototype.multiplyEachElement=function(e,t){for(var n=0;n<e.length;n++)e[n]=e[n]*t;return e},e.prototype.interp2points=function(e,t,n,r,i){return t+(i-e)/(n-e)*(r-t)},e.prototype.findMinMax=function(e,t){var n,r,i;if("min"===t)for(n=1/0,i=0;i<e.length;i++)e[i]<n&&(n=e[i],r=i);else if("max"===t)for(n=-1/0,i=0;i<e.length;i++)e[i]>n&&(n=e[i],r=i);return{val:n,idx:r}},e.prototype.flattenArrayOfArray=function(e){var t=[];return t=t.concat.apply(t,e)},e.prototype.convertArrayToXYjsoArray=function(e){for(var t=[],n=0;n<e.length;n++)t.push({x:n,y:e[n]});return t},e}();r.module("emuwebApp").service("ArrayHelperService",Ys);var Xs=function(){function e(){}return e.prototype.base64ToArrayBuffer=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++){var a=t.charCodeAt(i);r[i]=a}return r.buffer},e.prototype.arrayBufferToBase64=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)},e}();r.module("emuwebApp").service("BinaryDataManipHelperService",Xs);var Zs=function(){function e(){var e=this;this.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.isMobile.Android()||e.isMobile.BlackBerry()||e.isMobile.iOS()||e.isMobile.Opera()||e.isMobile.Windows()}},this.isBrowser={Firefox:function(){return navigator.userAgent.match(/Firefox/i)},Chrome:function(){return navigator.userAgent.match(/Chrome/i)},InternetExplorer:function(){return navigator.userAgent.match(/MSIE/i)},Opera:function(){return navigator.userAgent.match(/Opera/i)},PhantomJS:function(){return navigator.userAgent.match(/PhantomJS/i)},HeadlessChrome:function(){return navigator.userAgent.match(/HeadlessChrome/i)},Safari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0},any:function(){return e.isBrowser.Firefox()||e.isBrowser.Chrome()||e.isBrowser.InternetExplorer()||e.isBrowser.Opera()||e.isBrowser.Safari()||e.isBrowser.PhantomJS()}}}return e.prototype.isMobileDevice=function(){var e=this.isMobile.any();return null!==e&&e.length>0},e.prototype.isDesktopDevice=function(){var e=this.isBrowser.any();return null!==e&&e.length>0},e}();r.module("emuwebApp").service("BrowserDetectorService",Zs);n(371);var Ks=function(){function e(){this.data={levels:[],links:[]},this.maxItemID=0}return e.prototype.getData=function(){return this.data},e.prototype.setLevelData=function(e){this.data.levels=e},e.prototype.getLevelData=function(){return this.data.levels},e.prototype.getLevelOrder=function(e){if(void 0!==this.data.levels)return this.data.levels.sort((function(t,n){return e.indexOf(t.name)-e.indexOf(n.name)}))},e.prototype.getLevelDataAt=function(e){return this.data.levels[e]},e.prototype.insertLevelDataAt=function(e,t){this.data.levels.splice(e,0,t)},e.prototype.deleteLevelDataAt=function(e){this.data.levels.splice(e,1)},e.prototype.getLinkData=function(){return this.data.links},e.prototype.setLinkData=function(e){this.data.links=e},e.prototype.insertLinkData=function(e){this.data.links.push(e)},e.prototype.deleteLinkDataAt=function(e){this.data.links.splice(e,1)},e.prototype.insertLinkDataAt=function(e,t){this.data.links.splice(e,0,t)},e.prototype.changeLinkDataAt=function(e,t,n){this.data.links[e].fromID=t,this.data.links[e].toID=n},e.prototype.setData=function(e){var t=this;r.copy(e,this.data),Array.isArray(this.data.levels)||(this.data.levels=[]),Array.isArray(this.data.links)||(this.data.links=[]),void 0!==this.data.levels&&this.data.levels.forEach((function(e){e.items.forEach((function(e){e.id>t.maxItemID&&(t.maxItemID=e.id)}))}))},e.prototype.getNewId=function(){return this.maxItemID+=1,this.maxItemID},e.prototype.raiseId=function(e){this.maxItemID+=e},e.prototype.lowerId=function(e){this.maxItemID-=e},e}();r.module("emuwebApp").service("DataService",Ks);var Js=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Qs=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},el=function(){function e(e,t,n,r,i,a,o,s,l,c,u,h,p,f,d,v,m,g,S){this.$log=e,this.$q=t,this.$http=n,this.DataService=r,this.ViewStateService=i,this.HistoryService=a,this.LoadedMetaDataService=o,this.SsffDataService=s,this.IoHandlerService=l,this.BinaryDataManipHelperService=c,this.WavParserService=u,this.SoundHandlerService=h,this.SsffParserService=p,this.ValidationService=f,this.LevelService=d,this.ModalService=v,this.ConfigProviderService=m,this.AppStateService=g,this.StandardFuncsService=S}return e.prototype.innerLoadBundle=function(e,t,n,r){var i=this;this.ViewStateService.somethingInProgressTxt="Parsing WAV file...",this.WavParserService.parseWavAudioBuf(n).then((function(n){var a=n;i.ViewStateService.curViewPort.sS=0,i.ViewStateService.curViewPort.eS=a.length,void 0!==e.timeAnchors&&e.timeAnchors.length>0?(i.ViewStateService.curViewPort.selectS=e.timeAnchors[0].sample_start,i.ViewStateService.curViewPort.selectE=e.timeAnchors[0].sample_end):i.ViewStateService.resetSelect(),i.ViewStateService.curTimeAnchorIdx=-1,i.ViewStateService.curClickSegments=[],i.ViewStateService.curClickLevelName=void 0,i.ViewStateService.curClickLevelType=void 0,i.SoundHandlerService.audioBuffer=a;var o=[];t.ssffFiles.forEach((function(e){"GETURL"===e.encoding&&(e.data=i.IoHandlerService.httpGetPath(e.data,"arraybuffer"),o.push(e.data),e.encoding="ARRAYBUFFER")}));var s=!1;if(0===o.length){var l=i.$q.defer();s=!0,o.push(l.promise),l.resolve()}i.$q.all(o).then((function(n){for(var a=0;a<n.length;a++)s||(t.ssffFiles[a].data=n[a]);i.ViewStateService.somethingInProgressTxt="Parsing SSFF files...",i.SsffParserService.asyncParseSsffArr(t.ssffFiles).then((function(n){i.SsffDataService.data=n.data,i.DataService.setData(t.annotation),i.LoadedMetaDataService.setCurBndl(e),i.ViewStateService.selectLevel(!1,i.ConfigProviderService.vals.perspectives[i.ViewStateService.curPerspectiveIdx].levelCanvases.order,i.LevelService),i.ViewStateService.setState("labeling"),i.ViewStateService.somethingInProgress=!1,i.ViewStateService.somethingInProgressTxt="Done!",r.resolve()}),(function(e){i.ModalService.open("views/error.html","Error parsing SSFF file: "+e.status.message).then((function(){i.AppStateService.resetToInitState()}))}))}))}),(function(e){i.ModalService.open("views/error.html","Error parsing audio file: "+e.status.message).then((function(){i.AppStateService.resetToInitState()}))}))},e.prototype.loadBundle=function(e,t){var n=this,r=this.$q.defer();if(this.ViewStateService.setcurClickItem(null),0!==this.HistoryService.movesAwayFromLastSave&&"DEMO"!==this.ConfigProviderService.vals.main.comMode&&this.ConfigProviderService.vals.activeButtons.saveBundle){var i=this.LoadedMetaDataService.getCurBndl();e!==i&&this.ModalService.open("views/saveChanges.html",i.session+":"+i.name).then((function(t){"saveChanges"===t?n.saveBundle().then((function(){n.loadBundle(e,"")})):"discardChanges"===t&&(n.HistoryService.resetToInitState(),n.loadBundle(e,""))}))}else if(e!==this.LoadedMetaDataService.getCurBndl()){if(this.HistoryService.resetToInitState(),this.ViewStateService.hierarchyState.reset(),this.LevelService.deleteEditArea(),this.ViewStateService.setEditing(!1),this.ViewStateService.setState("loadingSaving"),this.ViewStateService.somethingInProgress=!0,this.ViewStateService.somethingInProgressTxt="Loading bundle: "+e.name,this.SsffDataService.data=[],t)a=this.$http.get(t);else var a=this.IoHandlerService.getBundle(e.name,e.session,this.LoadedMetaDataService.getDemoDbName());a.then((function(t){return Js(n,void 0,void 0,(function(){var n,i,a=this;return Qs(this,(function(o){return 200===t.status&&(t=t.data),!0===(n=this.ValidationService.validateJSO("bundleSchema",t))?"BASE64"===t.mediaFile.encoding?(i=this.BinaryDataManipHelperService.base64ToArrayBuffer(t.mediaFile.data),this.innerLoadBundle(e,t,i,r)):"GETURL"===t.mediaFile.encoding?this.IoHandlerService.httpGetPath(t.mediaFile.data,"arraybuffer").then((function(n){200===n.status&&(n=n.data),a.innerLoadBundle(e,t,n,r)})):"ARRAYBUFFER"===t.mediaFile.encoding?(i=t.mediaFile.data&&void 0===t.mediaFile.data.byteLength?this.BinaryDataManipHelperService.base64ToArrayBuffer(t.mediaFile.data):t.mediaFile.data,this.innerLoadBundle(e,t,i,r)):this.ModalService.open("views/error.html",'Error loading bundle: Unsupported media file encoding "'+t.mediaFile.encoding+'"').then((function(){a.AppStateService.resetToInitState()})):this.ModalService.open("views/error.html","Error validating annotation file: "+JSON.stringify(n,null,4)).then((function(){a.AppStateService.resetToInitState()})),[2]}))}))}),(function(e){e.data?n.ModalService.open("views/error.html","Error loading bundle: "+e.data).then((function(){n.AppStateService.resetToInitState()})):n.ModalService.open("views/error.html","Error loading bundle: "+e.status.message).then((function(){n.AppStateService.resetToInitState()}))}))}return r.promise},e.prototype.saveBundle=function(){var e=this;if(this.ViewStateService.getPermission("saveBndlBtnClick")){var t=this.$q.defer();this.ViewStateService.somethingInProgress=!0,this.ViewStateService.setState("loadingSaving");var n={};this.ViewStateService.somethingInProgressTxt="Creating bundle json...",n.ssffFiles=[];var r=this.SsffDataService.getFile("FORMANTS");return void 0!==r?this.SsffParserService.asyncJso2ssff(r).then((function(i){n.ssffFiles.push({fileExtension:r.fileExtension,encoding:"BASE64",data:e.BinaryDataManipHelperService.arrayBufferToBase64(i.data)}),e.getAnnotationAndSaveBndl(n,t)}),(function(n){e.ModalService.open("views/error.html","Error converting javascript object to SSFF file: "+n.status.message),t.reject()})):this.getAnnotationAndSaveBndl(n,t),t.promise}this.$log.info("Action: menuBundleSaveBtnClick not allowed!")},e.prototype.getAnnotationAndSaveBndl=function(e,t){var n=this;this.ViewStateService.somethingInProgressTxt="Validating annotJSON ...";var r=this.ValidationService.validateJSO("annotationFileSchema",this.DataService.getData());!0!==r&&(this.$log.warn("PROBLEM: trying to save bundle but bundle is invalid. traverseAndClean() will be called."),this.$log.error(r)),this.StandardFuncsService.traverseAndClean(this.DataService.getData()),e.annotation=this.DataService.getData(),e.mediaFile={encoding:"BASE64",data:""};var i=this.LoadedMetaDataService.getCurBndl();void 0!==i.session&&(e.session=i.session),void 0!==i.finishedEditing&&(e.finishedEditing=i.finishedEditing),void 0!==i.comment&&(e.comment=i.comment),this.ViewStateService.somethingInProgressTxt="Validating bundle ...",!0!==(r=this.ValidationService.validateJSO("bundleSchema",e))?(this.$log.error("GRAVE PROBLEM: trying to save bundle but bundle is invalid. traverseAndClean() HAS ALREADY BEEN CALLED."),this.$log.error(r),this.ModalService.open("views/error.html","Somehow the data for this bundle has been corrupted. This is most likely a nasty and diffucult to spot bug. If you are at the IPS right now, please contact an EMU developer immediately. The Validation error is: "+JSON.stringify(r,null,4)).then((function(){n.ViewStateService.somethingInProgressTxt="",n.ViewStateService.somethingInProgress=!1,n.ViewStateService.setState("labeling"),t.reject()}))):(this.ViewStateService.somethingInProgressTxt="Saving bundle...",this.IoHandlerService.saveBundle(e).then((function(){n.ViewStateService.somethingInProgressTxt="Done!",n.ViewStateService.somethingInProgress=!1,n.HistoryService.movesAwayFromLastSave=0,t.resolve(),n.ViewStateService.setState("labeling")}),(function(e){n.ModalService.open("views/error.html","Error saving bundle: "+e.status.message).then((function(){n.AppStateService.resetToInitState()})),t.reject()})))},e}();r.module("emuwebApp").service("DbObjLoadSaveService",["$log","$q","$http","DataService","ViewStateService","HistoryService","LoadedMetaDataService","SsffDataService","IoHandlerService","BinaryDataManipHelperService","WavParserService","SoundHandlerService","SsffParserService","ValidationService","LevelService","ModalService","ConfigProviderService","AppStateService","StandardFuncsService",el]);var tl=function(){function e(e){this.$q=e,this.convertedBundles=[],this.sessionDefault=""}return e.prototype.getBundle=function(e){var t=this.$q.defer();console.log("[EMU][Drop] getBundle request for",e,"available",this.convertedBundles.map((function(e){return e&&e.name})));var n=!1;return this.convertedBundles.forEach((function(i){if(i.name===e){console.log("[EMU][Drop] getBundle matched",i.name),n=!0;var a={};Object.keys(i).forEach((function(e){"name"!==e&&"mediaFile"!==e&&(a[e]=r.copy(i[e]))})),i.mediaFile&&("ARRAYBUFFER"===i.mediaFile.encoding&&i.mediaFile.data instanceof ArrayBuffer?a.mediaFile={encoding:"ARRAYBUFFER",data:i.mediaFile.data}:a.mediaFile=r.copy(i.mediaFile)),t.resolve({status:200,data:a})}})),n||(console.warn("[EMU][Drop] getBundle did not find bundle for",e),t.reject({status:404,message:"Bundle not found: "+e})),t.promise},e.prototype.resetToInitState=function(){this.convertedBundles=[],this.sessionDefault=""},e.prototype.setDefaultSession=function(e){this.sessionDefault=e},e.prototype.getDefaultSession=function(){return this.sessionDefault},e}();r.module("emuwebApp").service("DragnDropDataService",["$q",tl]);var nl=function(){function e(e,t,n,r,i,a,o,s,l,c,u,h,p,f,d,v,m){this.$q=e,this.$rootScope=t,this.$window=window,this.ModalService=r,this.DataService=i,this.ValidationService=a,this.ConfigProviderService=o,this.DragnDropDataService=s,this.IoHandlerService=l,this.ViewStateService=c,this.SoundHandlerService=u,this.BinaryDataManipHelperService=h,this.BrowserDetectorService=p,this.WavParserService=f,this.TextGridParserService=d,this.LoadedMetaDataService=v,this.LevelService=m,this.drandropBundles=[],this.bundleList=[],this.sessionName="File(s)",this.bundleEntriesByName={},this.convertedByName={},this.bundleOrder=[]}return e.prototype.setData=function(e){var t=this;if(Array.isArray(e)&&0!==e.length){console.log("[EMU][Drop] Processing dropped bundles",e.map((function(e){return e&&e[0]})));var n=[],i=[];e.forEach((function(e){var t=e[0];t?(n.push(t),i.push({name:t,wav:e[1],annotation:e[2]})):console.warn("[EMU][Drop] Encountered bundle without name, skipping",e)})),this.drandropBundles=i,this.convertDragnDropData(i,0).then((function(){console.log("[EMU][Drop] Finished conversion for names",n),i.forEach((function(e){t.bundleEntriesByName[e.name]||(t.bundleEntriesByName[e.name]={name:e.name,session:t.sessionName})}));var e=[];t.bundleOrder.forEach((function(n){t.convertedByName[n]&&e.push(n)})),t.bundleOrder=e,n.forEach((function(e){-1===t.bundleOrder.indexOf(e)&&t.bundleOrder.push(e)})),t.DragnDropDataService.convertedBundles.map((function(e){return e.name})).forEach((function(e){-1===t.bundleOrder.indexOf(e)&&t.bundleOrder.push(e)})),Object.keys(t.bundleEntriesByName).forEach((function(e){t.convertedByName[e]||delete t.bundleEntriesByName[e]})),Object.keys(t.convertedByName).forEach((function(e){-1===t.bundleOrder.indexOf(e)&&delete t.convertedByName[e]})),t.bundleList=[];var a=[];console.log("[EMU][Drop] convertedByName keys before rebuild",Object.keys(t.convertedByName)),t.bundleOrder.forEach((function(e){var n=t.convertedByName[e];if(n){console.log("[EMU][Drop] Rebuilding bundle entry for",e);var i=t.bundleEntriesByName[e];i?i.session=t.sessionName:(i={name:e,session:t.sessionName},t.bundleEntriesByName[e]=i),t.bundleList.push(i);var o=r.copy(n);o.name=e,a.push(o)}})),t.DragnDropDataService.convertedBundles=a.map((function(e){return r.copy(e)})),console.log("[EMU][Drop] Updated converted bundle names",t.DragnDropDataService.convertedBundles.map((function(e){return e&&e.name})));var o=n.length>0?n[n.length-1]:void 0;console.log("[EMU][Drop] Requested default name",o),!o&&t.bundleOrder.length>0&&(o=t.bundleOrder[t.bundleOrder.length-1]);var s=o?t.bundleOrder.indexOf(o):-1;return s<0&&t.bundleOrder.length>0&&(s=0,o=t.bundleOrder[0]),s<0?t.DragnDropDataService.setDefaultSession(0):t.DragnDropDataService.setDefaultSession(s),console.log("[EMU][Drop] Final bundle order",t.bundleOrder,"default index",s,"default name",o),t.bundleList.length>0&&(t.LoadedMetaDataService.setBundleList(t.bundleList),t.LoadedMetaDataService.setDemoDbName(t.sessionName)),s>=0&&t.DragnDropDataService.convertedBundles[s]&&(console.log("[EMU][Drop] Triggering handleLocalFiles for",o),t.handleLocalFiles()),!0})).catch((function(e){console.warn("[EMU][Drop] Conversion pipeline failed",e)}))}else console.warn("[EMU][Drop] setData called with no bundles, ignoring")},e.prototype.updateAnnotationForBundle=function(e,t){var n={success:!1};if(!e)return n.error="Bundle name is undefined",n;if(!t)return n.error="Annotation is undefined",n;var i=r.copy(t);i.name||(i.name=e),i.annotates||(i.annotates=e),!i.sampleRate&&this.SoundHandlerService.audioBuffer&&"number"==typeof this.SoundHandlerService.audioBuffer.sampleRate&&(i.sampleRate=this.SoundHandlerService.audioBuffer.sampleRate);var a=this.ValidationService.validateJSO("annotationFileSchema",i);if(!0!==a)return n.error=a,n;var o=this.convertedByName[e];if(!o)return n.error="Bundle not found: "+e,n;o.annotation=r.copy(i);var s=-1;return this.DragnDropDataService.convertedBundles.forEach((function(t,n){t.name===e&&(t.annotation=r.copy(i),s=n)})),-1===s?(n.error="Bundle not registered in converted bundle list: "+e,n):(-1===this.bundleOrder.indexOf(e)&&this.bundleOrder.push(e),this.DragnDropDataService.setDefaultSession(s),this.handleLocalFiles(),n.success=!0,n)},e.prototype.resetToInitState=function(){delete this.drandropBundles,this.drandropBundles=[],delete this.bundleList,this.bundleList=[],this.sessionName="File(s)",this.bundleEntriesByName={},this.convertedByName={},this.bundleOrder=[],this.DragnDropDataService.resetToInitState(),this.LoadedMetaDataService.resetToInitState()},e.prototype.getDragnDropData=function(e,t){var n=this.bundleOrder[e];if(!n)return!1;var i=this.convertedByName[n];return!!i&&("wav"===t?r.copy(i.mediaFile):"annotation"===t&&r.copy(i.annotation))},e.prototype.generateDrop=function(e){return"object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.createObjectURL(this.getBlob(e)):URL.createObjectURL(this.getBlob(e))},e.prototype.getBlob=function(e){var t;try{t=new Blob([e],{type:"text/plain"})}catch(n){(t=new(this.$window.BlobBuilder||this.$window.WebKitBlobBuilder||this.$window.MozBlobBuilder)).append(e),t=t.getBlob()}return t},e.prototype.convertDragnDropData=function(e,t){var n=this,i=this.$q.defer();if(e.length>t){var a=e[t],o=new FileReader,s=new FileReader;if(!a||!a.wav)return console.warn("[EMU][Drop] Missing WAV data for entry",a),this.convertDragnDropData(e,t+1).then((function(){i.resolve()}),(function(e){return i.reject(e)})),i.promise;o.readAsArrayBuffer(a.wav),o.onloadend=function(o){if(o.target.readyState===FileReader.DONE){var l=o.target.result,c=n.BinaryDataManipHelperService.arrayBufferToBase64(l);n.WavParserService.parseWavAudioBuf(l).then((function(o){n.SoundHandlerService.audioBuffer=o;var l={name:a.name,mediaFile:{encoding:"BASE64",data:c},ssffFiles:[]},u=function(){var o=r.copy(l);o.name=a.name,n.convertedByName[a.name]=o,n.convertDragnDropData(e,t+1).then((function(){i.resolve()}),(function(e){return i.reject(e)}))};void 0===a.annotation?(l.annotation={levels:[],links:[],sampleRate:o.sampleRate,annotates:a.name,name:a.name},u()):"textgrid"===a.annotation.type&&a.annotation.file?(s.readAsText(a.annotation.file),s.onloadend=function(e){e.target.readyState===FileReader.DONE&&n.TextGridParserService.asyncParseTextGrid(e.currentTarget.result,a.wav.name,a.name).then((function(e){l.annotation=e,u()}),(function(e){n.ModalService.open("views/error.html","Error parsing TextGrid file: "+e.status.message).then((function(){i.reject()}))}))}):"annotation"===a.annotation.type&&a.annotation.file?(s.readAsText(a.annotation.file),s.onloadend=function(e){e.target.readyState===FileReader.DONE&&(l.annotation=r.fromJson(e.currentTarget.result),u())}):(console.warn("[EMU][Drop] Unknown annotation type for",a.name,a.annotation),l.annotation={levels:[],links:[],sampleRate:o.sampleRate,annotates:a.name,name:a.name},u())}),(function(e){n.ModalService.open("views/error.html","Error parsing audio file: "+e.status.message).then((function(){i.reject()}))}))}}}else delete this.drandropBundles,this.drandropBundles=[],i.resolve();return i.promise},e.prototype.handleLocalFiles=function(){var e,t=this;console.log("[EMU][Drop] handleLocalFiles using index",this.DragnDropDataService.sessionDefault,"order",this.bundleOrder),e=void 0!==this.DragnDropDataService.convertedBundles[this.DragnDropDataService.sessionDefault].annotation?this.DragnDropDataService.convertedBundles[this.DragnDropDataService.sessionDefault].annotation:{levels:[],links:[]},this.ViewStateService.showDropZone=!1,this.ViewStateService.setState("loadingSaving"),this.ViewStateService.somethingInProgress=!0,this.ViewStateService.somethingInProgressTxt="Loading local File: "+this.DragnDropDataService.convertedBundles[this.DragnDropDataService.sessionDefault].name,console.log("[EMU][Drop] Loading bundle",this.DragnDropDataService.convertedBundles[this.DragnDropDataService.sessionDefault].name),this.IoHandlerService.httpGetPath("configFiles/standalone_emuwebappConfig.json").then((function(n){var r;if(t.ViewStateService.curPerspectiveIdx=0,t.ConfigProviderService.setVals(n.data.EMUwebAppConfig),delete n.data.EMUwebAppConfig,!0===(r=t.ValidationService.validateJSO("emuwebappConfigSchema",t.ConfigProviderService.vals))){t.ConfigProviderService.curDbConfig=n.data,t.ViewStateService.somethingInProgressTxt="Parsing WAV file...",t.ViewStateService.curViewPort.sS=0,t.ViewStateService.curViewPort.eS=t.SoundHandlerService.audioBuffer.length,t.ViewStateService.curViewPort.selectS=-1,t.ViewStateService.curViewPort.selectE=-1,t.ViewStateService.curClickSegments=[],t.ViewStateService.curClickLevelName=void 0,t.ViewStateService.curClickLevelType=void 0,t.LoadedMetaDataService.setCurBndl(t.DragnDropDataService.convertedBundles[t.DragnDropDataService.sessionDefault]),t.ViewStateService.resetSelect(),t.ViewStateService.curPerspectiveIdx=0,t.DataService.setData(e);var i=[],a=[];e.levels.forEach((function(e){"SEGMENT"!==e.type&&"EVENT"!==e.type||(i.push(e.name),a.push({name:e.name,type:e.type,attributeDefinitions:{name:e.name,type:"string"}}))})),t.ConfigProviderService.curDbConfig.levelDefinitions=a,t.ViewStateService.setCurLevelAttrDefs(t.ConfigProviderService.curDbConfig.levelDefinitions),t.ConfigProviderService.setPerspectivesOrder(t.ViewStateService.curPerspectiveIdx,i),t.ViewStateService.somethingInProgressTxt="Parsing SSFF files...",!0===(r=t.ValidationService.validateJSO("annotationFileSchema",e))?(t.DataService.setLinkData(e.links),t.ViewStateService.setState("labeling"),t.ViewStateService.somethingInProgress=!1,t.ViewStateService.somethingInProgressTxt="Done!"):t.ModalService.open("views/error.html","Error validating annotation file: "+JSON.stringify(r,null,4)).then((function(){t.resetToInitState()})),t.BrowserDetectorService.isBrowser.HeadlessChrome()||t.ViewStateService.selectLevel(!1,t.ConfigProviderService.vals.perspectives[t.ViewStateService.curPerspectiveIdx].levelCanvases.order,t.LevelService)}})),this.ViewStateService.somethingInProgress=!1},e}();r.module("emuwebApp").service("DragnDropService",["$q","$rootScope","$window","ModalService","DataService","ValidationService","ConfigProviderService","DragnDropDataService","IoHandlerService","ViewStateService","SoundHandlerService","BinaryDataManipHelperService","BrowserDetectorService","WavParserService","TextGridParserService","LoadedMetaDataService","LevelService",nl]);var rl=function(){function e(e,t,n,r,i,a){this.ViewStateService=e,this.ConfigProviderService=t,this.SoundHandlerService=n,this.FontScaleService=r,this.SsffDataService=i,this.MathHelperService=a,this.osciPeaks={}}return e.prototype.getScale=function(e,t,n){return e.measureText(t).width*n},e.prototype.getScaleWidth=function(e,t,n,r){return void 0!==t&&t.toString().length>n.toString().length?this.getScale(e,t,r):this.getScale(e,n,r)},e.prototype.calculateOsciPeaks=function(){var e=this.SoundHandlerService.audioBuffer.sampleRate,t=this.SoundHandlerService.audioBuffer.numberOfChannels,n=Math.round(e/400),r=Math.round(e/10),i=Math.round(e/1);this.osciPeaks={numberOfChannels:t,sampleRate:e,winSizes:[n,r,i],channelOsciPeaks:[]};for(var a=0;a<t;a++){for(var o=this.SoundHandlerService.audioBuffer.getChannelData(a),s=new Float32Array(Math.round(this.SoundHandlerService.audioBuffer.length/n)),l=new Float32Array(Math.round(this.SoundHandlerService.audioBuffer.length/n)),c=new Float32Array(Math.round(this.SoundHandlerService.audioBuffer.length/r)),u=new Float32Array(Math.round(this.SoundHandlerService.audioBuffer.length/r)),h=new Float32Array(Math.round(this.SoundHandlerService.audioBuffer.length/i)),p=new Float32Array(Math.round(this.SoundHandlerService.audioBuffer.length/i)),f=0,d=0,v=1/0,m=-1/0,g=0,S=0,w=1/0,y=-1/0,b=0,x=0,k=1/0,C=-1/0,$=0;$<=o.length;$++)o[$]>m&&(m=o[$]),o[$]<v&&(v=o[$]),o[$]>y&&(y=o[$]),o[$]<w&&(w=o[$]),o[$]>C&&(C=o[$]),o[$]<k&&(k=o[$]),f===n&&(s[d]=m,l[d]=v,d+=1,f=0,v=1/0,m=-1/0),g===r&&(c[S]=y,u[S]=w,S+=1,g=0,w=1/0,y=-1/0),b===i&&(h[x]=C,p[x]=k,x+=1,b=0,k=1/0,C=-1/0),f+=1,g+=1,b+=1;this.osciPeaks.channelOsciPeaks[a]={maxPeaks:[s,c,h],minPeaks:[l,u,p]}}},e.prototype.calculatePeaks=function(e,t,n,r){var i,a,o,s,l,c=(r+1-n)/e.width,u=[],h=1/0,p=-1/0,f=1/0,d=-1/0;if(c<=1)l=0===n?t.subarray(n,r+2):t.subarray(n-1,r+2),i=Math.min.apply(Math,l),a=Math.max.apply(Math,l),u=Array.prototype.slice.call(l);else{l=t.subarray(n,r);for(var v=new Float32Array(e.width),m=new Float32Array(e.width),g=0;g<e.width;g++){s=g*c+c/2,(o=g*c-c/2)<0&&(o=0);var S=l.subarray(o,s);f=1/0,d=-1/0;for(var w=0;w<S.length;w++)S[w]>d&&(d=S[w]),S[w]<f&&(f=S[w]);v[g]=d,m[g]=f,d>p&&(p=d),f<h&&(h=f)}}return{samples:u,minSample:i,maxSample:a,minPeaks:m,maxPeaks:v,minMinPeak:h,maxMaxPeak:p,samplePerPx:c}},e.prototype.findMinMaxPeaks=function(e,t,n){for(var r=this.ViewStateService.calcSampleTime(e),i=this.ViewStateService.calcSampleTime(t),a=this.osciPeaks.sampleRate/this.osciPeaks.winSizes[n],o=r*a,s=i*a,l=1/0,c=-1/0,u=Math.round(o);u<Math.round(s);u++)this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].maxPeaks[n][u]>c&&(c=this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].maxPeaks[n][u]),this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].minPeaks[n][u]<l&&(l=this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].minPeaks[n][u]);return{minMinPeak:l,maxMaxPeak:c}},e.prototype.freshRedrawDrawOsciOnCanvas=function(e,t,n,i){var a=e.getContext("2d");a.clearRect(0,0,e.width,e.height),i&&(this.osciPeaks={}),r.equals({},this.osciPeaks)&&this.calculateOsciPeaks();var o,s,l,c,u,h,p,f=(n+1-t)/e.width,d=-1;for(o=0;o<this.osciPeaks.winSizes.length;o++)f>this.osciPeaks.winSizes[o]&&(d=o);if(-1!==d){s=this.findMinMaxPeaks(t,n,d);var v=this.ViewStateService.calcSampleTime(t),m=this.osciPeaks.sampleRate/this.osciPeaks.winSizes[d],g=v*m;a.strokeStyle=Ts.a.colorWhite;var S,w,y,b=Math.round(g);a.beginPath(),l=(s.maxMaxPeak-this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].maxPeaks[d][b])/(s.maxMaxPeak-s.minMinPeak)*e.height,c=(s.maxMaxPeak-this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].minPeaks[d][b])/(s.maxMaxPeak-s.minMinPeak)*e.height,a.moveTo(0,l),u=l,h=c;for(var x=1;x<e.width;x++)w=x/e.width,y=this.ViewStateService.getCurrentSample(w),S=this.ViewStateService.calcSampleTime(y),b=Math.round(S*m),l=(s.maxMaxPeak-this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].maxPeaks[d][b])/(s.maxMaxPeak-s.minMinPeak)*e.height,c=(s.maxMaxPeak-this.osciPeaks.channelOsciPeaks[this.ViewStateService.osciSettings.curChannel].minPeaks[d][b])/(s.maxMaxPeak-s.minMinPeak)*e.height,a.moveTo(x-1,u),a.lineTo(x-1,l),a.moveTo(x-1,h),a.lineTo(x-1,c),a.moveTo(x,l),a.lineTo(x,c),u=l,h=c;a.stroke()}else if((s=this.calculatePeaks(e,this.SoundHandlerService.audioBuffer.getChannelData(this.ViewStateService.osciSettings.curChannel),t,n)).minPeaks&&s.maxPeaks&&s.samplePerPx>=1){for(a.strokeStyle=Ts.a.colorWhite,a.beginPath(),l=(s.maxMaxPeak-s.maxPeaks[0])/(s.maxMaxPeak-s.minMinPeak)*e.height,c=(s.maxMaxPeak-s.minPeaks[0])/(s.maxMaxPeak-s.minMinPeak)*e.height,a.moveTo(0,l),a.lineTo(0,c),u=l,h=c,o=1;o<e.width;o++)l=(s.maxMaxPeak-s.maxPeaks[o])/(s.maxMaxPeak-s.minMinPeak)*e.height,c=(s.maxMaxPeak-s.minPeaks[o])/(s.maxMaxPeak-s.minMinPeak)*e.height,a.moveTo(o-1,u),a.lineTo(o-1,l),a.moveTo(o-1,h),a.lineTo(o-1,c),a.moveTo(o,l),a.lineTo(o,c),u=l,h=c;a.stroke()}else if(s.samplePerPx<1){var k=1/s.samplePerPx/2,C=this.ViewStateService.curViewPort.sS;if(a.strokeStyle=Ts.a.colorWhite,a.fillStyle=Ts.a.colorWhite,0===this.ViewStateService.curViewPort.sS){for(a.moveTo(k,(s.samples[0]-s.minSample)/(s.maxSample-s.minSample)*e.height),o=0;o<s.samples.length;o++)a.lineTo(o/s.samplePerPx+k,(s.samples[o]-s.minSample)/(s.maxSample-s.minSample)*e.height);for(a.stroke(),o=0;o<s.samples.length;o++)a.beginPath(),a.arc(o/s.samplePerPx+k,(s.samples[o]-s.minSample)/(s.maxSample-s.minSample)*e.height-3,4,0,2*Math.PI,!1),a.stroke(),a.fill(),this.ConfigProviderService.vals.restrictions.drawSampleNrs&&(a.strokeText(C,o/s.samplePerPx+k,(s.samples[o]-s.minSample)/(s.maxSample-s.minSample)*e.height-10),C+=1)}else{for(a.beginPath(),a.moveTo(-k,e.height-(s.samples[0]-s.minSample)/(s.maxSample-s.minSample)*e.height),o=1;o<=s.samples.length;o++)a.lineTo(o/s.samplePerPx-k,e.height-((s.samples[o]-s.minSample)/(s.maxSample-s.minSample)*e.height+3));for(a.stroke(),o=1;o<=s.samples.length;o++)a.beginPath(),a.arc(o/s.samplePerPx-k,e.height-(s.samples[o]-s.minSample)/(s.maxSample-s.minSample)*e.height-3,4,0,2*Math.PI,!1),a.stroke(),a.fill(),this.ConfigProviderService.vals.restrictions.drawSampleNrs&&(a.fillText(C,o/s.samplePerPx-k,e.height-(s.samples[o]-s.minSample)/(s.maxSample-s.minSample)*e.height-10),C+=1)}}this.ConfigProviderService.vals.restrictions.drawZeroLine&&(a.strokeStyle=Ts.a.colorBlue,a.fillStyle=Ts.a.colorBlue,f>=1?(p=e.height-(0-s.minMinPeak)/(s.maxMaxPeak-s.minMinPeak)*e.height,a.beginPath(),a.moveTo(0,p),a.lineTo(e.width,p),a.stroke(),a.fillText("0",5,p-5,e.width)):(p=e.height-(0-s.minSample)/(s.maxSample-s.minSample)*e.height,a.beginPath(),a.moveTo(0,p),a.lineTo(e.width,p),a.stroke(),a.fill(),a.fillText("0",5,e.height-(0-s.minSample)/(s.maxSample-s.minSample)*e.height-5,e.width)))},e.prototype.drawMovingBoundaryLine=function(e){var t,n;if(n=this.ViewStateService.getSampleDist(e.canvas.width),t="SEGMENT"===this.ViewStateService.getcurMouseLevelType()?0:n/2,this.ViewStateService.movingBoundary){e.fillStyle=Ts.a.colorBlue;var r=Math.round(this.ViewStateService.getPos(e.canvas.width,this.ViewStateService.movingBoundarySample));this.ViewStateService.getcurMouseisLast()?e.fillRect(r+n,0,1,e.canvas.height):e.fillRect(r+t,0,1,e.canvas.height)}},e.prototype.drawCurViewPortSelected=function(e,t){var n,r,i,a,o=parseInt(Ts.a.fontSmallSize.slice(0,-2));r=this.ViewStateService.getSampleDist(e.canvas.width),n="seg"===this.ViewStateService.getcurMouseLevelType()?0:r/2;var s=this.ViewStateService.getPos(e.canvas.width,this.ViewStateService.curViewPort.selectS),l=this.ViewStateService.getPos(e.canvas.width,this.ViewStateService.curViewPort.selectE);if(s===l)e.fillStyle=Ts.a.colorWhite,e.fillRect(s+n,0,2,e.canvas.height),t&&this.ViewStateService.curViewPort.sS!==this.ViewStateService.curViewPort.selectS&&-1!==this.ViewStateService.curViewPort.selectS&&(a=e.canvas.width/e.canvas.offsetWidth,i=this.getScaleWidth(e,this.ViewStateService.curViewPort.selectS,this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.curViewPort.selectS/this.SoundHandlerService.audioBuffer.sampleRate,6),a),this.FontScaleService.drawUndistortedTextTwoLines(e,this.ViewStateService.curViewPort.selectS,this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.curViewPort.selectS/this.SoundHandlerService.audioBuffer.sampleRate,6),o,Ts.a.fontSmallFamily,l+5,0,Ts.a.colorWhite,!0));else if(e.fillStyle=Ts.a.colorTransparentLightGrey,e.fillRect(s,0,l-s,e.canvas.height),e.strokeStyle=Ts.a.colorWhite,e.beginPath(),e.moveTo(s,0),e.lineTo(s,e.canvas.height),e.moveTo(l,0),e.lineTo(l,e.canvas.height),e.closePath(),e.stroke(),t&&(a=e.canvas.width/e.canvas.offsetWidth,i=this.getScaleWidth(e,this.ViewStateService.curViewPort.selectS,this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.curViewPort.selectS/this.SoundHandlerService.audioBuffer.sampleRate,6),a),this.FontScaleService.drawUndistortedTextTwoLines(e,this.ViewStateService.curViewPort.selectS,this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.curViewPort.selectS/this.SoundHandlerService.audioBuffer.sampleRate,6),o,Ts.a.fontSmallFamily,s-i-5,0,Ts.a.colorWhite,!1),this.FontScaleService.drawUndistortedTextTwoLines(e,this.ViewStateService.curViewPort.selectE,this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.curViewPort.selectE/this.SoundHandlerService.audioBuffer.sampleRate,6),o,Ts.a.fontSmallFamily,l+5,0,Ts.a.colorWhite,!0),l-s>(i=this.getScale(e,this.MathHelperService.roundToNdigitsAfterDecPoint((this.ViewStateService.curViewPort.selectE-this.ViewStateService.curViewPort.selectS)/this.SoundHandlerService.audioBuffer.sampleRate,6),a)))){var c=this.ViewStateService.curViewPort.selectE-this.ViewStateService.curViewPort.selectS-1,u=this.MathHelperService.roundToNdigitsAfterDecPoint((this.ViewStateService.curViewPort.selectE-this.ViewStateService.curViewPort.selectS)/this.SoundHandlerService.audioBuffer.sampleRate,6);i=this.getScaleWidth(e,c,u,a),this.FontScaleService.drawUndistortedTextTwoLines(e,c,u,o,Ts.a.fontSmallFamily,s+(l-s)/2-i/2,0,Ts.a.colorWhite,!1)}},e.prototype.drawCrossHairX=function(e,t){e.strokeStyle=Ts.a.colorRed,e.fillStyle=Ts.a.colorRed,e.beginPath(),e.moveTo(t,0),e.lineTo(t,e.canvas.height),e.stroke()},e.prototype.drawCrossHairs=function(e,t,n,r,i,a,o){if(this.ConfigProviderService.vals.restrictions.drawCrossHairs){var s=parseInt(Ts.a.fontSmallSize.slice(0,-2));e.strokeStyle=Ts.a.colorRed,e.fillStyle=Ts.a.colorRed,e.font=Ts.a.fontSmallSize+"px "+Ts.a.fontSmallFamily;var l,c=this.MathHelperService.roundToNdigitsAfterDecPoint(i-n/e.canvas.height*i,2),u=e.measureText(c+a).width*this.FontScaleService.scaleX,h=s*this.FontScaleService.scaleY,p=Math.round(this.ViewStateService.curViewPort.sS+t/e.canvas.width*(this.ViewStateService.curViewPort.eS-this.ViewStateService.curViewPort.sS)),f=this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.getViewPortStartTime()+t/e.canvas.width*(this.ViewStateService.getViewPortEndTime()-this.ViewStateService.getViewPortStartTime()),6);l=n-(h+1)<0?n+1:n-(h+1),void 0===i&&void 0===r||("OSCI"===o?(e.strokeStyle=Ts.a.colorRed,e.fillStyle=Ts.a.colorRed,e.beginPath(),e.moveTo(t,0),e.lineTo(t,e.canvas.height),e.stroke()):"SPEC"===o?(this.FontScaleService.drawUndistortedText(e,c+a,s,Ts.a.fontSmallFamily,5,l,Ts.a.colorRed,!0),this.FontScaleService.drawUndistortedText(e,c+a,s,Ts.a.fontSmallFamily,e.canvas.width-u,l,Ts.a.colorRed,!0),e.beginPath(),e.moveTo(0,n),e.lineTo(5,n+5),e.moveTo(0,n),e.lineTo(e.canvas.width,n),e.lineTo(e.canvas.width-5,n+5),e.moveTo(t,0),e.lineTo(t,e.canvas.height),e.stroke()):(c=i-n/e.canvas.height*(i-r),c=this.MathHelperService.roundToNdigitsAfterDecPoint(c,2),this.FontScaleService.drawUndistortedText(e,c+a,s,Ts.a.fontSmallFamily,5,l,Ts.a.colorTransparentRed,!0),this.FontScaleService.drawUndistortedText(e,c+a,s,Ts.a.fontSmallFamily,e.canvas.width-5-u,l,Ts.a.colorTransparentRed,!0),e.beginPath(),e.moveTo(0,n),e.lineTo(5,n+5),e.moveTo(0,n),e.lineTo(e.canvas.width,n),e.lineTo(e.canvas.width-5,n+5),e.moveTo(t,0),e.lineTo(t,e.canvas.height),e.stroke())),this.FontScaleService.drawUndistortedTextTwoLines(e,p,f,s,Ts.a.fontSmallFamily,t+5,0,Ts.a.colorTransparentRed,!0)}},e.prototype.drawMinMaxAndName=function(e,t,n,r,i){e.strokeStyle=Ts.a.colorBlue,e.fillStyle=Ts.a.colorBlue;var a=parseInt(Ts.a.fontSmallSize.slice(0,-2)),o=e.canvas.height/e.canvas.offsetHeight,s=3*parseInt(Ts.a.fontSmallSize.slice(0,-2))/4,l=s*o;e.beginPath(),e.moveTo(0,0),e.lineTo(5,5),e.moveTo(0,e.canvas.height),e.lineTo(5,e.canvas.height-5),e.stroke(),e.closePath(),""!==t&&this.FontScaleService.drawUndistortedText(e,t,a,Ts.a.fontSmallFamily,0,e.canvas.height/2-a*o/2,Ts.a.colorBlue,!0),void 0!==r&&this.FontScaleService.drawUndistortedText(e,"max: "+this.MathHelperService.roundToNdigitsAfterDecPoint(r,i),s,Ts.a.fontSmallFamily,5,5,Ts.a.colorBlue,!0),void 0!==n&&this.FontScaleService.drawUndistortedText(e,"min: "+this.MathHelperService.roundToNdigitsAfterDecPoint(n,i),s,Ts.a.fontSmallFamily,5,e.canvas.height-l-5,Ts.a.colorBlue,!0)},e.prototype.drawViewPortTimes=function(e){e.strokeStyle=Ts.a.colorWhite,e.fillStyle=Ts.a.colorWhite,e.font=Ts.a.fontSmallSize+" "+Ts.a.fontSmallFamily;var t=parseInt(Ts.a.fontSmallSize.slice(0,-2));e.beginPath(),e.moveTo(0,0),e.lineTo(5,5),e.moveTo(e.canvas.width,0),e.lineTo(e.canvas.width-5,5),e.closePath(),e.stroke();var n,r,i,a=e.canvas.width/e.canvas.offsetWidth;this.ViewStateService.curViewPort&&(n=this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.curViewPort.sS/this.SoundHandlerService.audioBuffer.sampleRate,6),r=this.MathHelperService.roundToNdigitsAfterDecPoint(this.ViewStateService.curViewPort.eS/this.SoundHandlerService.audioBuffer.sampleRate,6),this.FontScaleService.drawUndistortedTextTwoLines(e,this.ViewStateService.curViewPort.sS,n,t,Ts.a.fontSmallFamily,5,0,Ts.a.colorWhite,!0),i=this.getScaleWidth(e,this.ViewStateService.curViewPort.eS,r,a),this.FontScaleService.drawUndistortedTextTwoLines(e,this.ViewStateService.curViewPort.eS,r,t,Ts.a.fontSmallFamily,e.canvas.width-i-5,0,Ts.a.colorWhite,!1))},e}();function il(e){e=e||window.Worker,this.url=this.getWorkerURL(),this.worker=new e(this.url)}r.module("emuwebApp").service("DrawHelperService",["ViewStateService","ConfigProviderService","SoundHandlerService","FontScaleService","SsffDataService","MathHelperService",rl]),il.prototype={getWorkerScript:function(){var e="";return e+="("+this.workerInit+")(this);"},workerInit:function(e){e.toJSO=function(e,t,n,r){var i={};i.name=n,i.annotates=t,i.sampleRate=r,i.levels=[];for(var a,o=(e=(e=e.replace(/([ \t]*\r?\n)+/g,"\n")).replace(/[ \t]+/g," ")).split("\n"),s=0;s<o.length;s++)if("#"===o[s]){a=s;break}i.levels[0]={},i.levels[0].name=n,i.levels[0].items=[];var l,c=1,u=o[a+1].split(/\s+/);if("H#"!==u[u.length-1]?i.levels[0].type="EVENT":i.levels[0].type="SEGMENT","EVENT"===i.levels[0].type)for(s=a+1;s<o.length-1;s++)u=o[s].split(/\s+/),i.levels[0].items.push({id:c,labels:[{name:n,value:u[u.length-1]}],samplePoint:Math.floor(u[1]*r)}),c+=1;else for(c+=1,s=a+2;s<o.length-1;s++)u=o[s].split(/\s+/),l=o[s-1].split(/\s+/),i.levels[0].items.push({id:c,labels:[{name:n,value:u[u.length-1]}],sampleStart:Math.floor(l[1]*r),sampleDur:Math.floor(u[1]*r)-Math.floor(l[1]*r)-1}),c+=1;return i},e.toESPS=function(e,t,n){var r,i="";i+="signal "+t+"\n",i+="nfields 1\n",i+="#\n";for(var a=0;a<e.length;a++)r=""===e[a].labels[0].value&&0===a?"H#":e[a].labels[0].value,i+="\t"+String((e[a].sampleStart+e[a].sampleDur)/n)+"\t125\t"+r+"\n";return i},e.onmessage=function(t){var n;if(void 0!==t.data)switch(t.data.cmd){case"parseESPS":void 0===(n=e.toJSO(t.data.esps,t.data.annotates,t.data.name,t.data.sampleRate)).type?e.postMessage({status:{type:"SUCCESS",message:""},data:n}):e.postMessage(n);break;case"parseJSO":void 0===(n=e.toESPS(t.data.level.items,t.data.level.name,t.data.sampleRate)).type?e.postMessage({status:{type:"SUCCESS",message:""},data:n}):e.postMessage(n);break;default:e.postMessage({status:{type:"ERROR",message:"Unknown command sent to espsParserWorker"}})}else e.postMessage({status:{type:"ERROR",message:"Undefined message was sent to espsParserWorker"}})}},getWorkerURL:function(){var e;try{e=new Blob([this.getWorkerScript()],{type:"application/javascript"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(e=new BlobBuilder).append(il),e=e.getBlob()}return"object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.createObjectURL(e):URL.createObjectURL(e)},kill:function(){this.worker&&this.worker.terminate(),this.url&&URL.revokeObjectURL(this.url)},tell:function(e){this.worker&&this.worker.postMessage(e)},says:function(e){this.worker&&this.worker.addEventListener("message",(function(t){e(t.data)}))}};var al=function(){function e(e,t,n){var r=this;this.$q=e,this.LevelService=t,this.SoundHandlerService=n,this.worker=new il,this.worker.says((function(e){"SUCCESS"===e.status.type?r.defer.resolve(e.data):r.defer.reject(e.data)}),!1)}return e.prototype.asyncParseEsps=function(e,t,n){return this.defer=this.$q.defer(),this.worker.tell({cmd:"parseESPS",esps:e,sampleRate:this.SoundHandlerService.audioBuffer.sampleRate,annotates:t,name:n}),this.defer.promise},e.prototype.asyncParseJSO=function(e){return this.defer=this.$q.defer(),this.worker.tell({cmd:"parseJSO",level:this.LevelService.getLevelDetails(e),sampleRate:this.SoundHandlerService.audioBuffer.sampleRate}),this.defer.promise},e}();r.module("emuwebApp").service("EspsParserService",["$q","LevelService","SoundHandlerService",al]);var ol=function(){function e(){this.lastTextWidth=null,this.spaceTop=0,this.scaleY=0,this.scaleX=0}return e.prototype.drawUndistortedText=function(e,t,n,r,i,a,o,s){if(this.scaleY=e.canvas.height/e.canvas.offsetHeight,this.scaleX=e.canvas.width/e.canvas.offsetWidth,e.save(),e.font=n+"px "+r,e.scale(this.scaleX,this.scaleY),e.fillStyle=o,s)e.fillText(t,i/this.scaleX,(a+n+this.spaceTop)/this.scaleY);else{var l=i/this.scaleX-e.measureText(t).width/2;e.fillText(t,l,(a+n+this.spaceTop)/this.scaleY)}e.scale(1,1),e.restore()},e.prototype.drawUndistortedTextTwoLines=function(e,t,n,r,i,a,o,s,l){if(this.scaleY=e.canvas.height/e.canvas.offsetHeight,this.scaleX=e.canvas.width/e.canvas.offsetWidth,e.save(),e.font=r+"px "+i,e.scale(this.scaleX,this.scaleY),e.fillStyle=s,l)e.fillText(t,a/this.scaleX,o+r+this.spaceTop),e.fillText(n,a/this.scaleX,o+2*r+this.spaceTop);else{var c=e.measureText(t).width,u=e.measureText(n).width;c>u?(e.fillText(t,a/this.scaleX,o+r+this.spaceTop),e.fillText(n,(a+(c-u))/this.scaleX,o+2*r+this.spaceTop)):(e.fillText(t,(a+(u-c))/this.scaleX,o+r+this.spaceTop),e.fillText(n,a/this.scaleX,o+2*r+this.spaceTop))}e.scale(1,1),e.restore()},e}();r.module("emuwebApp").service("FontScaleService",ol);n(372);var sl=function(){function e(e,t,n,r,i){this.ViewStateService=e,this.ConfigProviderService=t,this.LevelService=n,this.DataService=r,this.StandardFuncsService=i}return e.prototype.findAllNonPartialPaths=function(){var e=this,t={possible:[],possibleAsStr:[]};this.ConfigProviderService.curDbConfig.levelDefinitions.forEach((function(n){t.possible=t.possible.concat(e.findPaths(n.name,void 0))}));var n=[];return t.possible.forEach((function(r,i){t.possible.forEach((function(t,a){i!==a&&-1===n.indexOf(i)&&e.pathStartsWith(t,r)&&n.push(i)}))})),n.reverse().forEach((function(e){t.possible.splice(e,1)})),t.possible.forEach((function(n){var r=e.StandardFuncsService.reverseCopy(n).join(" → ");t.possibleAsStr.push(r)})),t},e.prototype.pathStartsWith=function(e,t){if(t.length>e.length)return!1;for(var n=e.length-t.length,r=t.length-1;r>=0;--r)if(t[r]!==e[r+n])return!1;return!0},e.prototype.findPaths=function(e,t){t=void 0===t?[e]:t.concat([e]);var n=this.findParentLevels(e);if(0===n.length)return[t];for(var r=[],i=0;i<n.length;++i)r=r.concat(this.findPaths(n[i],t));return r},e.prototype.findParentLevels=function(e){for(var t=[],n=0;n<this.ConfigProviderService.curDbConfig.linkDefinitions.length;++n)this.ConfigProviderService.curDbConfig.linkDefinitions[n].sublevelName===e&&t.push(this.ConfigProviderService.curDbConfig.linkDefinitions[n].superlevelName);return t},e.prototype.calculateWeightsBottomUp=function(e){var t,n;for(this.findParents(e),this.findVisibility(e),t=0;t<e.length;++t){var r=this.LevelService.getLevelDetails(e[t]);for(r._weight=0,n=0;n<r.items.length;++n)!1===r.items[n]._visible?r.items[n]._weight=.35:r.items[n]._weight=1,r._weight+=r.items[n]._weight;var i=0;for(n=0;n<r.items.length;++n){r.items[n]._posInLevel=(i+r.items[n]._weight/2)/r._weight,i+=r.items[n]._weight,r.items[n]._depth=e.length-t-1;for(var a=this.DataService.getData().links,o=0;o<a.length;++o)a[o].toID===r.items[n].id&&(a[o]._toPosInLevel=r.items[n]._posInLevel,a[o]._toDepth=r.items[n]._depth),a[o].fromID===r.items[n].id&&(a[o]._fromPosInLevel=r.items[n]._posInLevel,a[o]._fromDepth=r.items[n]._depth)}}},e.prototype.findChildren=function(e,t){var n=[],r=this.LevelService.getLevelName(e.id);if(null===r)return console.log("Likely a bug: failed to find a node's level",e),[];for(var i=null,a=0;a<t.length-1;++a)if(t[a+1]===r){i=t[a];break}if(null===i)return[];for(var o=0;o<this.DataService.getData().links.length;++o)if(this.DataService.getData().links[o].fromID===e.id)for(var s=0;s<this.DataService.getData().levels.length;++s)if(this.DataService.getData().levels[s].name===i)for(var l=0;l<this.DataService.getData().levels[s].items.length;++l)this.DataService.getData().levels[s].items[l].id===this.DataService.getData().links[o].toID&&n.push(this.DataService.getData().levels[s].items[l]);return n},e.prototype.findParents=function(e){var t,n,r,i,a;for(t=0;t<e.length;++t)for(a=this.LevelService.getLevelDetails(e[t]),n=0;n<a.items.length;++n)a.items[n]._parents=[];for(t=0;t<e.length;++t){for(a=this.LevelService.getLevelDetails(e[t]),i=0;i<a.items.length;++i)"SEGMENT"===a.type?(a.items[i]._derivedSampleStart=a.items[i].sampleStart,a.items[i]._derivedSampleEnd=a.items[i].sampleStart+a.items[i].sampleDur):(a.items[i]._derivedSampleStart=1/0,a.items[i]._derivedSampleEnd=-1/0);for(n=0;n<a.items.length;++n){var o=this.findChildren(a.items[n],e);for(r=0;r<o.length;++r)o[r]._parents.push(a.items[n]),o[r]._derivedSampleStart<a.items[n]._derivedSampleStart&&(a.items[n]._derivedSampleStart=o[r]._derivedSampleStart),o[r]._derivedSampleEnd>a.items[n]._derivedSampleEnd&&(a.items[n]._derivedSampleEnd=o[r]._derivedSampleEnd)}}},e.prototype.findVisibility=function(e){if(void 0!==e&&e.length>0){for(var t,n,r=[],i=0;i<e.length;++i){t=this.LevelService.getLevelDetails(e[i]);for(var a=0;a<t.items.length;++a)0===t.items[a]._parents.length&&r.push(t.items[a])}var o=[];for(o=o.concat(r);o.length>0;)n=o.pop(),o=o.concat(this.findChildren(n,e)),n._visible=!1;for(o=(o=[]).concat(r);o.length>0;)n=o.pop(),this.ViewStateService.hierarchyState.getCollapsed(n.id)||(o=o.concat(this.findChildren(n,e))),n._visible=!0}},e.prototype.toggleCollapse=function(e,t){var n,r=!this.ViewStateService.hierarchyState.getCollapsed(e.id);this.ViewStateService.hierarchyState.setCollapsed(e.id,r);for(var i=this.findChildren(e,t);i.length>0;){n=i.pop(),i=i.concat(this.findChildren(n,t));var a=this.ViewStateService.hierarchyState.getNumCollapsedParents(n.id);r?this.ViewStateService.hierarchyState.setNumCollapsedParents(n.id,a+1):this.ViewStateService.hierarchyState.setNumCollapsedParents(n.id,a-1),this.ViewStateService.hierarchyState.setCollapsePosition(n.id,[e._x,e._y])}},e}();r.module("emuwebApp").service("HierarchyLayoutService",["ViewStateService","ConfigProviderService","LevelService","DataService","StandardFuncsService",sl]);var ll=function(){function e(e,t,n,r,i){this.$q=e,this.HierarchyLayoutService=t,this.DataService=n,this.LevelService=r,this.ConfigProviderService=i}return e.prototype.addLink=function(e,t,n){var r,i=this.checkLinkValidity(e,t,n);return i.valid?(r={fromID:t,toID:n},this.DataService.insertLinkData(r),r):(console.debug("Not adding invalid link:",t,"->",n," (Error code:",i.reason,")"),3===i.reason&&(i=this.checkLinkValidity(e,n,t)).valid?(console.debug("Adding reverse link instead"),r={fromID:n,toID:t},this.DataService.insertLinkData(r),r):null)},e.prototype.checkLinkValidity=function(e,t,n){var r,i,a,o={valid:!0,reason:0},s=this.DataService.getLinkData();if(t===n)return o.valid=!1,o.reason=1,o;for(r=0;r<s.length;++r)if(s[r].fromID===t&&s[r].toID===n)return o.valid=!1,o.reason=2,o;var l,c,u,h=this.LevelService.getLevelName(t),p=this.LevelService.getLevelName(n),f=e.indexOf(h);if(e[f-1]!==p)return o.valid=!1,o.reason=3,o;for(r=0;r<this.ConfigProviderService.curDbConfig.linkDefinitions.length;++r)this.ConfigProviderService.curDbConfig.linkDefinitions[r].sublevelName===p&&this.ConfigProviderService.curDbConfig.linkDefinitions[r].superlevelName===h&&(l=this.ConfigProviderService.curDbConfig.linkDefinitions[r].type);if(void 0===l)return console.debug("LIKELY A BUG: link to be added (",t,"->",n,") has been found to be a part of the currently selected path but the link between the respective levels could not be found."),o.valid=!1,o.reason=3,o;if(("ONE_TO_MANY"===l||"ONE_TO_ONE"===l)&&this.LevelService.getItemByID(n)._parents.length>0)return o.valid=!1,o.reason=4,o;if("ONE_TO_ONE"===l){var d=this.LevelService.getItemByID(t);if((i=this.HierarchyLayoutService.findChildren(d,e)).length>0)return o.valid=!1,o.reason=4,o}for(var v,m=this.LevelService.getLevelAndItem(t).level,g=this.LevelService.getLevelAndItem(n).level,S=this.LevelService.getOrderById(h,t),w=this.LevelService.getOrderById(p,n),y=0;void 0===c;){if(y-=1,void 0===(v=m.items[S+y])){c=0;break}for(console.debug("found preceding sibling",v.id,v.labels[0]),i=this.HierarchyLayoutService.findChildren(v,e),r=0;r<i.length;++r)a=this.LevelService.getOrderById(p,i[r].id),(void 0===c||a>c)&&(c=a)}for(y=0;void 0===u;){if(y+=1,void 0===(v=m.items[S+y])){u=g.items.length-1;break}if(console.debug("found successive sibling",v.id,v.labels[0]),0!==(i=this.HierarchyLayoutService.findChildren(v,e)).length)for(r=0;r<i.length;++r)a=this.LevelService.getOrderById(p,i[r].id),(void 0===u||a<u)&&(u=a)}return console.debug("child must be within",c,u),w<c||w>u?(o.valid=!1,o.reason=5,o):o},e}();r.module("emuwebApp").service("HierarchyManipulationService",["$q","HierarchyLayoutService","DataService","LevelService","ConfigProviderService",ll]);n(373);var cl=function(){function e(e,t,n,r,i,a,o,s,l,c,u,h,p,f,d,v,m){this.$rootScope=e,this.$http=t,this.$location=n,this.$q=r,this.$window=i,this.HistoryService=a,this.ViewStateService=o,this.SoundHandlerService=s,this.SsffParserService=l,this.WavParserService=c,this.TextGridParserService=u,this.ConfigProviderService=h,this.EspsParserService=p,this.SsffDataService=f,this.WebSocketHandlerService=d,this.DragnDropDataService=v,this.LoadedMetaDataService=m}return e.prototype.httpGetDefaultConfig=function(){return this.$http.get("configFiles/default_emuwebappConfig.json")},e.prototype.httpGetPath=function(e,t,n){if(void 0===n&&(n=!1),"GITLAB"!==this.ConfigProviderService.vals.main.comMode||n)var r=this.$http.get(e,{responseType:t});else{var i=this.$location.search();r=fetch(e,{method:"GET",headers:{"PRIVATE-TOKEN":i.privateToken}}).then((function(e){return"json"===t?e.json():"arraybuffer"===t?e.arrayBuffer():void 0}))}return r},e.prototype.getProtocol=function(){var e;if("CORS"===this.ConfigProviderService.vals.main.comMode);else if("WS"===this.ConfigProviderService.vals.main.comMode)e=this.WebSocketHandlerService.getProtocol();else if("GITLAB"===this.ConfigProviderService.vals.main.comMode){var t=this.$q.defer();t.resolve({protocol:"EMU-webApp-websocket-protocol",version:"0.0.2"}),e=t.promise}return e},e.prototype.getDoUserManagement=function(){var e;if("CORS"===this.ConfigProviderService.vals.main.comMode);else if("WS"===this.ConfigProviderService.vals.main.comMode)e=this.WebSocketHandlerService.getDoUserManagement();else if("GITLAB"===this.ConfigProviderService.vals.main.comMode){var t=this.$q.defer();t.resolve("NO"),e=t.promise}return e},e.prototype.logOnUser=function(e,t){var n;return"CORS"===this.ConfigProviderService.vals.main.comMode||"WS"===this.ConfigProviderService.vals.main.comMode&&(n=this.WebSocketHandlerService.logOnUser(e,t)),n},e.prototype.getDBconfigFile=function(e){var t;if("CORS"===this.ConfigProviderService.vals.main.comMode);else if("WS"===this.ConfigProviderService.vals.main.comMode)t=this.WebSocketHandlerService.getDBconfigFile();else if("DEMO"===this.ConfigProviderService.vals.main.comMode)t=this.$http.get("demoDBs/"+e+"/"+e+"_DBconfig.json");else if("GITLAB"===this.ConfigProviderService.vals.main.comMode){var n=this.$location.search(),r=this.getGitlabPathFromSearchObject(n);t=fetch(n.gitlabURL+"/api/v4/projects/"+n.projectID+"/repository/files/"+r+n.emuDBname+"_DBconfig.json/raw?ref=master",{method:"GET",headers:{"PRIVATE-TOKEN":n.privateToken}}).then((function(e){return e.json()}))}return t},e.prototype.getBundleList=function(e){var t;if("CORS"===this.ConfigProviderService.vals.main.comMode);else if("WS"===this.ConfigProviderService.vals.main.comMode)t=this.WebSocketHandlerService.getBundleList();else if("DEMO"===this.ConfigProviderService.vals.main.comMode)t=this.$http.get("demoDBs/"+e+"/"+e+"_bundleList.json");else if("GITLAB"===this.ConfigProviderService.vals.main.comMode){var n=this.$location.search(),r=this.getGitlabPathFromSearchObject(n);t=fetch(n.gitlabURL+"/api/v4/projects/"+n.projectID+"/repository/files/"+r+"bundleLists%2F"+n.bundleListName+"_bundleList.json/raw?ref=master",{method:"GET",headers:{"PRIVATE-TOKEN":n.privateToken}}).then((function(e){return e.json()}))}return t},e.prototype.getGitlabPathFromSearchObject=function(e,t){void 0===t&&(t=!0);var n="";if(void 0!==e.gitlabPath){for(n=e.gitlabPath;0==n.indexOf("/");)n=n.substr(1,n.length);-1==n.indexOf("/",n.length-1)&&(n+="/"),t&&(n=encodeURIComponent(n))}return n},e.prototype.getBundle=function(e,t,n){var r;if("CORS"===this.ConfigProviderService.vals.main.comMode);else if("EMBEDDED"===this.ConfigProviderService.vals.main.comMode)r=this.DragnDropDataService.getBundle(e,t);else if("WS"===this.ConfigProviderService.vals.main.comMode)r=this.WebSocketHandlerService.getBundle(e,t);else if("DEMO"===this.ConfigProviderService.vals.main.comMode)r=this.$http.get("demoDBs/"+n+"/"+e+"_bndl.json");else if("GITLAB"===this.ConfigProviderService.vals.main.comMode){var i=this.$location.search(),a=this.getGitlabPathFromSearchObject(i),o=i.gitlabURL+"/api/v4/projects/"+i.projectID+"/repository/files/"+a+t+"_ses%2F"+e+"_bndl%2F",s=this.ConfigProviderService.findAllTracksInDBconfigNeededByEMUwebApp(),l=[];s.forEach((function(t){l.push({encoding:"GETURL",data:o+e+"."+t.fileExtension+"/raw?ref=master",fileExtension:t.fileExtension})})),"true"!==i.useLFS||console.log("using LFS"),r=Promise.all([fetch(o+e+"_annot.json/raw?ref=master",{method:"GET",headers:{"PRIVATE-TOKEN":i.privateToken}}).then((function(e){return e.json()}))]).then((function(t){return{mediaFile:{encoding:"GETURL",data:o+e+".wav/raw?ref=master"},annotation:t[0],ssffFiles:l}}))}return r},e.prototype.saveBundle=function(e){var t;if("CORS"===this.ConfigProviderService.vals.main.comMode);else if("WS"===this.ConfigProviderService.vals.main.comMode)t=this.WebSocketHandlerService.saveBundle(e);else if("GITLAB"===this.ConfigProviderService.vals.main.comMode){var n=this.$location.search(),r=this.getGitlabPathFromSearchObject(n,!1),i=r+e.session+"_ses/"+e.annotation.name+"_bndl/",a=[{action:"update",file_path:i+e.annotation.name+"_annot.json",content:JSON.stringify(e.annotation,null,4),encoding:"text"},{action:"update",file_path:r+"bundleLists/"+n.bundleListName+"_bundleList.json",content:JSON.stringify(this.LoadedMetaDataService.getBundleList(),null,4),encoding:"text"}];e.ssffFiles.length>0&&a.push({action:"update",file_path:i+e.annotation.name+"."+e.ssffFiles[0].fileExtension,content:e.ssffFiles[0].data,encoding:"base64"});var o={branch:"master",commit_message:"EMU-webApp save by user: "+n.bundleListName+"; session: "+e.session+"; bundle: "+e.annotation.name+";",actions:a};t=fetch(n.gitlabURL+"/api/v4/projects/"+n.projectID+"/repository/commits",{method:"POST",headers:{"PRIVATE-TOKEN":n.privateToken,"Content-Type":"application/json"},body:JSON.stringify(o)})}else if("EMBEDDED"===this.ConfigProviderService.vals.main.comMode){var s=this.$q.defer();t=s.promise,window.parent.postMessage({trigger:"manualSave",data:e},"*"),s.resolve()}return t},e.prototype.saveConfiguration=function(e){var t;return"CORS"===this.ConfigProviderService.vals.main.comMode?console.error("CORS version of saveBundle not implemented"):"WS"===this.ConfigProviderService.vals.main.comMode&&(t=this.WebSocketHandlerService.saveConfiguration(e)),t},e.prototype.parseLabelFile=function(e,t,n,i){var a;if("ESPS"===i)a=this.EspsParserService.asyncParseEsps(e,this.ConfigProviderService.embeddedVals.labelGetUrl,"embeddedESPS");else if("TEXTGRID"===i)a=this.TextGridParserService.asyncParseTextGrid(e,this.ConfigProviderService.embeddedVals.labelGetUrl,"embeddedTEXTGRID");else if("annotJSON"===i){var o=this.$q.defer();a=o.promise,o.resolve(r.fromJson(e))}return a},e}();r.module("emuwebApp").service("IoHandlerService",["$rootScope","$http","$location","$q","$window","HistoryService","ViewStateService","SoundHandlerService","SsffParserService","WavParserService","TextGridParserService","ConfigProviderService","EspsParserService","SsffDataService","WebSocketHandlerService","DragnDropDataService","LoadedMetaDataService",cl]);n(374);var ul=function(){function e(e,t){this.DataService=e,this.ConfigProviderService=t}return e.prototype.insertLink=function(e,t){this.DataService.insertLinkData({fromID:e,toID:t})},e.prototype.insertLinkAt=function(e,t,n){this.DataService.insertLinkDataAt(n,{fromID:e,toID:t})},e.prototype.deleteLink=function(e,t){var n=this,r=-1;return this.DataService.getLinkData().forEach((function(i,a){i.fromID===e&&i.toID===t&&(n.DataService.deleteLinkDataAt(a),r=a)})),r},e.prototype.linkExists=function(e,t){var n=!1;return this.DataService.getLinkData().forEach((function(r){r.fromID===e&&r.toID===t&&(n=!0)})),n},e.prototype.hasParents=function(e){var t=!1;return this.DataService.getLinkData().forEach((function(n){n.toID===e&&(t=!0)})),t},e.prototype.hasChildren=function(e){var t=!1;return this.DataService.getLinkData().forEach((function(n){n.fromID===e&&(t=!0)})),t},e.prototype.isLinked=function(e){return this.hasChildren(e)||this.hasParents(e)},e.prototype.insertLinksTo=function(e,t){var n=this;t.forEach((function(t){n.insertLink(e,t)}))},e.prototype.deleteLinksTo=function(e,t){var n=this,r=[];return t.forEach((function(t){n.deleteLink(e,t),r.push({fromID:e,toID:t})})),r},e.prototype.insertLinksFrom=function(e,t){var n=this;e.forEach((function(e){n.insertLink(e,t)}))},e.prototype.deleteLinksFrom=function(e,t){var n=this,r=[];return e.forEach((function(e){r.push({fromID:e,toID:t}),n.deleteLink(e,t)})),r},e.prototype.getLinksTo=function(e){var t=[];return this.DataService.getLinkData().forEach((function(n,r){n.toID===e&&t.push({link:n,order:r})})),t},e.prototype.getLinksFrom=function(e){var t=[];return this.DataService.getLinkData().forEach((function(n,r){n.fromID===e&&t.push({link:n,order:r})})),t},e.prototype.changeLinkTo=function(e,t,n){var r=this;this.DataService.getLinkData().forEach((function(i,a){i.fromID===e&&i.toID===t&&r.DataService.changeLinkDataAt(a,e,n)}))},e.prototype.changeLinkFrom=function(e,t,n){var r=this;this.DataService.getLinkData().forEach((function(i,a){i.fromID===e&&i.toID===t&&r.DataService.changeLinkDataAt(a,n,t)}))},e.prototype.deleteLinkSegment=function(e){var t=this,n=[],r=[];return e.forEach((function(e){t.getLinksTo(e.id).forEach((function(e){n.push({fromID:e.link.fromID,toID:e.link.toID}),t.deleteLink(e.link.fromID,e.link.toID)})),t.getLinksFrom(e.id).forEach((function(e){r.push({fromID:e.link.fromID,toID:e.link.toID}),t.deleteLink(e.link.fromID,e.link.toID)}))})),{linksTo:n,linksFrom:r}},e.prototype.deleteLinkSegmentInvers=function(e){var t=this;e.linksTo.forEach((function(e){t.insertLink(e.fromID,e.toID)})),e.linksFrom.forEach((function(e){t.insertLink(e.fromID,e.toID)}))},e.prototype.deleteLinkBoundary=function(e,t,n){var r=this,i=[],a=[],o=0,s=n.getLevelName(t),l=!0;return this.ConfigProviderService.curDbConfig.linkDefinitions.forEach((function(e){e.superlevelName!==s&&e.sublevelName!==s||"MANY_TO_MANY"!==e.type&&(l=!1)})),t>=0?(this.getLinksTo(e).forEach((function(n){r.linkExists(n.link.fromID,t)?(o=r.deleteLink(n.link.fromID,e),i.push({fromID:n.link.fromID,toID:e,deleted:!0,order:o,neighbourID:0})):l&&(r.changeLinkTo(n.link.fromID,e,t),i.push({fromID:n.link.fromID,toID:e,deleted:!1,order:o,neighbourID:t}))})),this.getLinksFrom(e).forEach((function(n){r.linkExists(t,n.link.toID)?(o=r.deleteLink(e,n.link.toID),a.push({fromID:e,toID:n.link.toID,deleted:!0,order:o,neighbourID:0})):(r.changeLinkFrom(e,n.link.toID,t),a.push({fromID:e,toID:n.link.toID,deleted:!1,order:o,neighbourID:t}))}))):(this.getLinksTo(e).forEach((function(t){o=r.deleteLink(t.link.fromID,e),i.push({fromID:t.link.fromID,toID:e,deleted:!0,order:o,neighbourID:0})})),this.getLinksFrom(e).forEach((function(t){o=r.deleteLink(e,t.link.toID),a.push({fromID:e,toID:t.link.toID,deleted:!0,order:o,neighbourID:0})}))),{linksTo:i,linksFrom:a}},e.prototype.deleteLinkBoundaryInvers=function(e){var t=this;e.linksTo.forEach((function(e){e.deleted?t.insertLinkAt(e.fromID,e.toID,e.order):t.changeLinkTo(e.fromID,e.neighbourID,e.toID)})),e.linksFrom.forEach((function(e){e.deleted?t.insertLinkAt(e.fromID,e.toID,e.order):t.changeLinkFrom(e.neighbourID,e.toID,e.fromID)}))},e}();r.module("emuwebApp").service("LinkService",["DataService","ConfigProviderService",ul]);var hl=function(){function e(e){this.ValidationService=e,this.uniqSessionList=[],this.bundleList=[],this.curBndl={},this.demoDbName="",this.rendOptBndlList={}}return e.prototype.genUniqSessionList=function(e){var t,n=[];return e.forEach((function(e,r){n[e.session]={collapsed:!0},0===r&&(t=e.session)})),n[t].collapsed=!1,n},e.prototype.genRendOptBndlList=function(e){var t={};return e.forEach((function(e){void 0===t[e.session]&&(t[e.session]=[]),t[e.session].push(e)})),t},e.prototype.setBundleList=function(e){var t=this.ValidationService.validateJSO("bundleListSchema",e);return!0===t&&(this.bundleList=e,this.uniqSessionList=this.genUniqSessionList(this.bundleList),this.rendOptBndlList=this.genRendOptBndlList(this.bundleList)),t},e.prototype.getBundleList=function(){return this.bundleList},e.prototype.getRendOptBndlList=function(){return this.rendOptBndlList},e.prototype.getCurBndl=function(){return this.curBndl},e.prototype.setCurBndl=function(e){this.curBndl=e},e.prototype.setBndlComment=function(e,t,n){this.rendOptBndlList[t][n].comment=e},e.prototype.setBndlFinished=function(e,t,n){this.rendOptBndlList[t][n].finishedEditing=e},e.prototype.getCurBndlName=function(){return this.curBndl.name},e.prototype.setCurBndlName=function(e){this.curBndl.name=e},e.prototype.setTimeAnchors=function(e){this.curBndl.timeAnchors=e},e.prototype.setDemoDbName=function(e){this.demoDbName=e},e.prototype.getDemoDbName=function(){return this.demoDbName},e.prototype.toggleCollapseSession=function(e){var t=this;void 0===this.uniqSessionList[e]&&(this.uniqSessionList[e]={}),this.uniqSessionList[e].collapsed=!this.uniqSessionList[e].collapsed,Object.keys(this.uniqSessionList).forEach((function(n){n!==e&&(t.uniqSessionList[n].collapsed=!0)}))},e.prototype.openCollapseSession=function(e){var t=this;this.uniqSessionList[e]={},this.uniqSessionList[e].collapsed=!1,Object.keys(this.uniqSessionList).forEach((function(n){n!==e&&(t.uniqSessionList[n].collapsed=!0)}))},e.prototype.getSessionCollapseState=function(e){return void 0===this.uniqSessionList[e]?void 0:this.uniqSessionList[e].collapsed},e.prototype.resetToInitState=function(){this.uniqSessionList=[],this.bundleList=[],this.curBndl={},this.rendOptBndlList={}},e}();r.module("emuwebApp").service("LoadedMetaDataService",["ValidationService",hl]);var pl=function(){function e(){}return e.prototype.calcClosestPowerOf2Gt=function(e){for(var t=0;Math.pow(2,t)<e;)t+=1;return Math.pow(2,t)},e.prototype.roundToNdigitsAfterDecPoint=function(e,t){(t<1||t>14)&&console.error("error in call of round function!!");var n=Math.pow(10,t),r=(Math.round(e*n)/n).toString();return-1===r.indexOf(".")&&(r+="."),r+=n.toString().substring(1),parseFloat(r.substring(0,r.indexOf(".")+t+1))},e}();r.module("emuwebApp").service("MathHelperService",pl);var fl=function(){function e(e,t,n){this.$q=e,this.ArrayHelperService=t,this.ViewStateService=n}return e.prototype.initialize=function(){this.isOpen=!1,this.templateUrl="",this.defer=void 0,this.deferChange=void 0,this.force=!1,this.dataOut=void 0,this.dataIn=void 0,this.dataExport=void 0},e.prototype.open=function(e,t,n,r){return this.initialize(),void 0!==t&&(this.dataIn=t,void 0!==t.y&&(this.dataIn.chartData=this.ArrayHelperService.convertArrayToXYjsoArray(t.y))),void 0!==n&&(this.dataExport=n),void 0!==r&&(this.force=r),this.defer=this.$q.defer(),this.templateUrl=e,this.ViewStateService.setState("modalShowing"),this.isOpen=!0,this.defer.promise},e.prototype.error=function(e){this.initialize(),this.dataIn=e,this.templateUrl="views/error.html",this.ViewStateService.setState("modalShowing")},e.prototype.close=function(){this.ViewStateService.setEditing(!1),this.ViewStateService.setState(this.ViewStateService.prevState),this.isOpen=!1,this.ViewStateService.hierarchyState.isShown()&&this.ViewStateService.hierarchyState.toggleHierarchy(),this.defer.resolve(!1)},e.prototype.closeAndResolve=function(e){this.ViewStateService.setEditing(!1),this.ViewStateService.setState(this.ViewStateService.prevState),this.isOpen=!1,this.ViewStateService.hierarchyState.isShown()&&this.ViewStateService.hierarchyState.toggleHierarchy(),this.defer.resolve(e)},e.prototype.confirm=function(){this.ViewStateService.setEditing(!1),this.ViewStateService.setState(this.ViewStateService.prevState),this.isOpen=!1,this.defer.resolve(!0)},e.prototype.select=function(e){this.closeAndResolve(e)},e.prototype.confirmContent=function(){this.ViewStateService.setEditing(!1),this.ViewStateService.setState(this.ViewStateService.prevState),this.isOpen=!1,this.defer.resolve(this.dataOut)},e.prototype.getTemplateUrl=function(){return this.templateUrl},e}();r.module("emuwebApp").service("ModalService",["$q","ArrayHelperService","ViewStateService",fl]);var dl=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},vl=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ml=function(){function e(e,t,n,r,i,a,o,s,l){this.$log=e,this.SsffDataService=t,this.SsffParserService=n,this.BinaryDataManipHelperService=r,this.ValidationService=i,this.DataService=a,this.StandardFuncsService=o,this.LoadedMetaDataService=s,this.ConfigProviderService=l}return e.prototype.publishUnsavedBundleToParentWindow=function(){return dl(this,void 0,void 0,(function(){var e,t,n,r,i,a;return vl(this,(function(o){switch(o.label){case 0:if("EMBEDDED"!==this.ConfigProviderService.vals.main.comMode)return[2];if((e={}).ssffFiles=[],void 0===(t=this.SsffDataService.getFile("FORMANTS")))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.SsffParserService.asyncJso2ssff(t)];case 2:return n=o.sent(),e.ssffFiles.push({fileExtension:t.fileExtension,encoding:"BASE64",data:this.BinaryDataManipHelperService.arrayBufferToBase64(n.data)}),[3,4];case 3:return r=o.sent(),this.$log.warn("Error converting FORMANTS javascript object to SSFF file.",r),[2];case 4:return!0!==(i=this.ValidationService.validateJSO("annotationFileSchema",this.DataService.getData()))&&this.$log.warn("PROBLEM: trying to publish bundle to parent window, but bundle is invalid (posssibly because hierarchy view is open). traverseAndClean() will be called."),this.StandardFuncsService.traverseAndClean(this.DataService.getData()),e.annotation=this.DataService.getData(),e.mediaFile={encoding:"BASE64",data:""},void 0!==(a=this.LoadedMetaDataService.getCurBndl()).session&&(e.session=a.session),void 0!==a.finishedEditing&&(e.finishedEditing=a.finishedEditing),void 0!==a.comment&&(e.comment=a.comment),!0!==(i=this.ValidationService.validateJSO("bundleSchema",e))?(this.$log.error("GRAVE PROBLEM: trying to publish bundle to parent window, but bundle is invalid. traverseAndClean() HAS ALREADY BEEN CALLED."),this.$log.error(i),this.$log.error("Not publishing!"),[2]):(window.parent.postMessage({trigger:"autoSave",data:e},"*"),this.$log.info("Posted to parent (autoSave)",e),[2])}}))}))},e}();r.module("emuwebApp").service("PublisherService",["$log","SsffDataService","SsffParserService","BinaryDataManipHelperService","ValidationService","DataService","StandardFuncsService","LoadedMetaDataService","ConfigProviderService",ml]);var gl=function(){function e(e){this.$window=e,this.audioBuffer={},this.isPlaying=!1}return e.prototype.initAudioContext=function(){try{window.AudioContext=this.$window.AudioContext||this.$window.webkitAudioContext,this.audioContext=new AudioContext}catch(e){alert("Error loading the AudioContext (could mean your browser does not support the HTML5 webaudio API):"+e)}},e.prototype.decodeAndPlay=function(e,t){var n=this;void 0===this.audioContext&&this.initAudioContext();var r=e/this.audioBuffer.sampleRate,i=t/this.audioBuffer.sampleRate-r;this.curSource=this.audioContext.createBufferSource(),this.curSource.buffer=this.audioBuffer,this.curSource.connect(this.audioContext.destination),this.curSource.start(0,r,i),this.curSource.onended=function(){n.isPlaying=!1}},e.prototype.playFromTo=function(e,t){this.isPlaying?(this.isPlaying=!1,this.curSource.stop(0)):(this.isPlaying=!0,this.audioBuffer.length>0&&this.decodeAndPlay(e,t))},e}();r.module("emuwebApp").service("SoundHandlerService",["$window",gl]);var Sl=function(){function e(e,t){this.SoundHandlerService=e,this.ConfigProviderService=t,this.data=[]}return e.prototype.getFile=function(e){var t,n=this;return void 0!==this.ConfigProviderService.curDbConfig.ssffTrackDefinitions&&this.ConfigProviderService.curDbConfig.ssffTrackDefinitions.forEach((function(r){r.name===e&&n.data.forEach((function(e){e.fileExtension===r.fileExtension&&(t=e)}))})),t},e.prototype.getColumnOfTrack=function(e,t){var n,r=this.getFile(e);if(void 0!==r)return r.Columns.forEach((function(e){e.name===t&&(n=e)})),n},e.prototype.getSampleRateAndStartTimeOfTrack=function(e){var t={},n=this.getFile(e);if(void 0!==n)return t.sampleRate=n.sampleRate,t.startTime=n.startTime,t},e.prototype.calculateSamplePosInVP=function(e,t,n){var r=e/t+n;return Math.round(r*this.SoundHandlerService.audioBuffer.sampleRate)},e}();function wl(e){e=e||window.Worker,this.url=this.getWorkerURL(),this.worker=new e(this.url)}r.module("emuwebApp").service("SsffDataService",["SoundHandlerService","ConfigProviderService",Sl]),wl.prototype={getWorkerScript:function(){var e="";return e+="("+this.workerInit+")(this);"},workerInit:function(e){var t,n,r={},i="-----------------\n";r.fileExtension="",r.sampleRate=-1,r.startTime=-1,r.origFreq=-1,r.Columns=[],t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),e.btoa||(e.btoa=function(e){var n,r,i,a,o,s;for(i=e.length,r=0,n="";r<i;){if(a=255&e.charCodeAt(r++),r===i){n+=t.charAt(a>>2),n+=t.charAt((3&a)<<4),n+="==";break}if(o=e.charCodeAt(r++),r===i){n+=t.charAt(a>>2),n+=t.charAt((3&a)<<4|(240&o)>>4),n+=t.charAt((15&o)<<2),n+="=";break}s=e.charCodeAt(r++),n+=t.charAt(a>>2),n+=t.charAt((3&a)<<4|(240&o)>>4),n+=t.charAt((15&o)<<2|(192&s)>>6),n+=t.charAt(63&s)}return n}),e.atob||(e.atob=function(e){var t,r,i,a,o,s,l;for(s=e.length,o=0,l="";o<s;){do{t=n[255&e.charCodeAt(o++)]}while(o<s&&-1===t);if(-1===t)break;do{r=n[255&e.charCodeAt(o++)]}while(o<s&&-1===r);if(-1===r)break;l+=String.fromCharCode(t<<2|(48&r)>>4);do{if(61==(i=255&e.charCodeAt(o++)))return l;i=n[i]}while(o<s&&-1===i);if(-1===i)break;l+=String.fromCharCode((15&r)<<4|(60&i)>>2);do{if(61==(a=255&e.charCodeAt(o++)))return l;a=n[a]}while(o<s&&-1===a);if(-1===a)break;l+=String.fromCharCode((3&i)<<6|a)}return l}),e.base64ToArrayBuffer=function(t){for(var n=e.atob(t),r=n.length,i=new Uint8Array(r),a=0;a<r;a++){var o=n.charCodeAt(a);i[a]=o}return i.buffer},e.round=function(e,t){if(t<1||t>14)return!1;var n=Math.pow(10,t),r=(Math.round(e*n)/n).toString();return-1===r.indexOf(".")&&(r+="."),(r+=n.toString().substring(1)).substring(0,r.indexOf(".")+t+1)},e.stringToUint=function(e){for(var t=e.split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)},e.Uint8Concat=function(e,t){var n=e.length,r=new Uint8Array(n+t.length);return r.set(e),r.set(t,n),r},e.ssff2jso=function(e,t){r.fileExtension=t,r.Columns=[];var n=new Uint8Array(e),a=new DataView(e),o="";if("TextDecoder"in this)o=new TextDecoder("ASCII").decode(a);else for(var s=0;s<n.length;s++)o+=String.fromCharCode(n[s]);var l=o.split(/^/m);if("SSFF -- (c) SHLRC\n"!==l[0])return{status:{type:"ERROR",message:"SSFF parse error: first line != SSFF -- (c) SHLRC in file with fileExtension "+t}};if("Machine IBM-PC\n"!==l[1])return{status:{type:"ERROR",message:"SSFF parse error: machineID != Machine IBM-PC in file with fileExtension "+t}};r.sampleRate=void 0,r.startTime=void 0;for(var c=0;l[c]!==i;)"Record_Freq"===l[c].split(/[ ,]+/)[0]&&(r.sampleRate=parseFloat(l[c].split(/[ ,]+/)[1].replace(/(\r\n|\n|\r)/gm,""))),"Start_Time"===l[c].split(/[ ,]+/)[0]&&(r.startTime=parseFloat(l[c].split(/[ ,]+/)[1].replace(/(\r\n|\n|\r)/gm,""))),c+=1;if(void 0===r.sampleRate||void 0===r.startTime)return{status:{type:"ERROR",message:"SSFF parse error: Required fields Record_Freq or Start_Time not set in file with fileExtension "+t}};for(var u=4;u<l.length&&("Original_Freq"===l[u].split(/[ ,]+/)[0]&&(r.origFreq=parseFloat(l[u].split(/[ ,]+/)[2].replace(/(\r\n|\n|\r)/gm,""))),l[u]!==i);u++){var h=l[u].split(/[ ]+/);"Column"===h[0]&&r.Columns.push({name:h[1],ssffdatatype:h[2],length:parseInt(h[3].replace(/(\r\n|\n|\r)/gm,""),10),values:[],_minVal:1/0,_maxVal:-1/0})}for(var p,f,d,v,m,g=l.slice(0,u+1).join("").length;g<n.length;)for(u=0;u<r.Columns.length;u++)if("DOUBLE"===r.Columns[u].ssffdatatype)d=8*r.Columns[u].length,f=e.subarray(g,d),"undefined"==typeof Float64Array&&(Float64Array=Float32Array),p=new Float64Array(f),r.Columns[u].values.push(Array.prototype.slice.call(p)),g+=d,v=Math.min.apply(null,Array.prototype.slice.call(p)),m=Math.max.apply(null,Array.prototype.slice.call(p)),v<r.Columns[u]._minVal&&(r.Columns[u]._minVal=v),m>r.Columns[u]._maxVal&&(r.Columns[u]._maxVal=m);else if("FLOAT"===r.Columns[u].ssffdatatype)d=4*r.Columns[u].length,f=e.subarray(g,d),p=new Float32Array(f),r.Columns[u].values.push(Array.prototype.slice.call(p)),g+=d,v=Math.min.apply(null,Array.prototype.slice.call(p)),m=Math.max.apply(null,Array.prototype.slice.call(p)),v<r.Columns[u]._minVal&&(r.Columns[u]._minVal=v),m>r.Columns[u]._maxVal&&(r.Columns[u]._maxVal=m);else if("SHORT"===r.Columns[u].ssffdatatype)d=2*r.Columns[u].length,f=e.subarray(g,d),p=new Int16Array(f),r.Columns[u].values.push(Array.prototype.slice.call(p)),g+=d,v=Math.min.apply(null,Array.prototype.slice.call(p)),m=Math.max.apply(null,Array.prototype.slice.call(p)),v<r.Columns[u]._minVal&&(r.Columns[u]._minVal=v),m>r.Columns[u]._maxVal&&(r.Columns[u]._maxVal=m);else if("LONG"===r.Columns[u].ssffdatatype)d=4*r.Columns[u].length,f=e.subarray(g,d),p=new Int32Array(f),r.Columns[u].values.push(Array.prototype.slice.call(p)),g+=d,v=Math.min.apply(null,Array.prototype.slice.call(p)),m=Math.max.apply(null,Array.prototype.slice.call(p)),v<r.Columns[u]._minVal&&(r.Columns[u]._minVal=v),m>r.Columns[u]._maxVal&&(r.Columns[u]._maxVal=m);else{if("BYTE"!==r.Columns[u].ssffdatatype)return{status:{type:"ERROR",message:"Unsupported column type! Only DOUBLE, FLOAT, SHORT, LONG, BYTE column types are currently supported in file with fileExtension "+t}};d=1*r.Columns[u].length,f=e.subarray(g,d),p=new Uint8Array(f),r.Columns[u].values.push(Array.prototype.slice.call(p)),g+=d}return r},e.jso2ssff=function(t){var n="SSFF -- (c) SHLRC\nMachine IBM-PC\n";n+="Record_Freq "+e.round(t.sampleRate,1)+"\n",n+="Start_Time "+t.startTime+"\n",t.Columns.forEach(e=>{n+="Column "+e.name+" "+e.ssffdatatype+" "+e.length+"\n"}),n+="Original_Freq DOUBLE "+e.round(t.origFreq,1)+"\n",n+=i;var r=0,a=!1;if(t.Columns.forEach(e=>{"BYTE"===e.ssffdatatype?r+=e.length:"SHORT"===e.ssffdatatype?r+=2*e.length:"LONG"===e.ssffdatatype||"FLOAT"===e.ssffdatatype?r+=4*e.length:"DOUBLE"===e.ssffdatatype?r+=8*e.length:a=!0}),a)return{status:{type:"ERROR",message:"Unsupported SSFF column type! Only DOUBLE, FLOAT, LONG, SHORT, BYTE columns supported,"}};var o,s=r*t.Columns[0].values.length,l=new ArrayBuffer(s),c=new DataView(l),u=new Uint8Array(e.stringToUint(n)),h=0;if(o=!0,t.Columns[0].values.forEach((e,n)=>{t.Columns.forEach(e=>{"BYTE"===e.ssffdatatype?e.values[n].forEach(e=>{c.setInt8(h,e),h+=1}):"SHORT"===e.ssffdatatype?e.values[n].forEach(e=>{c.setInt16(h,e,o),h+=2}):"LONG"===e.ssffdatatype?e.values[n].forEach(e=>{c.setInt32(h,e,o),h+=4}):"FLOAT"===e.ssffdatatype?e.values[n].forEach(e=>{c.setFloat32(h,e,o),h+=4}):"DOUBLE"===e.ssffdatatype?e.values[n].forEach(e=>{c.setFloat64(h,e,o),h+=8}):a=!0})}),a)return{status:{type:"ERROR",message:"Unsupported column type discovered when writing SSFF data; this is not expected behaviour."}};var p=new Uint8Array(c.buffer);return{status:{type:"SUCCESS",message:""},data:(u=new e.Uint8Concat(u,p)).buffer}},e.parseArr=function(t){for(var n,r=!0,i=[],a=0;a<t.length;a++){var o;if({},"BASE64"===t[a].encoding?o=e.base64ToArrayBuffer(t[a].data):"ARRAYBUFFER"===t[a].encoding&&(o=t[a].data),void 0!==(n=e.ssff2jso(o,t[a].fileExtension)).status)return r=!1,n;i.push(JSON.parse(JSON.stringify(n)))}return r?{status:{type:"SUCCESS",message:""},data:i}:{status:{type:"ERROR",message:"Error in parseArr() with: "+JSON.stringify(t)}}},ArrayBuffer.prototype.subarray=function(e,t){for(var n=new ArrayBuffer(t),r=new Int8Array(n),i=new Int8Array(this),a=0;a<t;a++)r[a]=i[e+a];return n},e.onmessage=function(t){if(void 0!==t.data)switch(t.data.cmd){case"parseArr":e.postMessage(e.parseArr(t.data.ssffArr));break;case"jso2ssff":e.postMessage(e.jso2ssff(JSON.parse(t.data.jso)));break;default:e.postMessage({status:{type:"ERROR",message:"Unknown command sent to SsffParserWorker"}})}else e.postMessage({status:{type:"ERROR",message:"Undefined message was sent to SsffParserWorker"}})}},getWorkerURL:function(){var e;try{e=new Blob([this.getWorkerScript()],{type:"application/javascript"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(e=new BlobBuilder).append(wl),e=e.getBlob()}return"object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.createObjectURL(e):URL.createObjectURL(e)},kill:function(){this.worker&&(this.worker.terminate(),this.worker=void 0),this.url&&("object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.revokeObjectURL(this.url):URL.revokeObjectURL(this.url),this.url=void 0)},tell:function(e){this.worker&&this.worker.postMessage(e)},says:function(e){this.worker&&this.worker.addEventListener("message",(function(t){e(t.data)}))}};var yl=function(){function e(e){var t=this;this.$q=e,this.worker=new wl,this.worker.says((function(e){"SUCCESS"===e.status.type?t.defer.resolve(e):t.defer.reject(e)}),!1)}return e.prototype.asyncParseSsffArr=function(e){return this.defer=this.$q.defer(),this.worker.tell({cmd:"parseArr",ssffArr:e}),this.defer.promise},e.prototype.asyncJso2ssff=function(e){return this.defer=this.$q.defer(),this.worker.tell({cmd:"jso2ssff",jso:JSON.stringify(e)}),this.defer.promise},e}();r.module("emuwebApp").service("SsffParserService",["$q",yl]);var bl=function(){function e(){}return e.prototype.traverseAndClean=function(e){for(var t in e)"_"===t.substr(0,1)&&delete e[t],null!==e[t]&&"object"==typeof e[t]&&this.traverseAndClean(e[t])},e.prototype.reverseCopy=function(e){var t=r.copy(e);return t.reverse(),t},e}();function xl(e){e=e||window.Worker,this.url=this.getWorkerURL(),this.worker=new e(this.url)}r.module("emuwebApp").service("StandardFuncsService",bl),xl.prototype={getWorkerScript:function(){var e="";return e+="("+this.workerInit+")(this);"},workerInit:function(e){e.l1='File type = "ooTextFile"',e.l2='Object class = "TextGrid"',e.localID=0,e.testForGapsInLabelJSO=function(e){for(var t=0;t<e.levels.length;t++)if("SEGMENT"===e.levels[t].type)for(var n=0;n<e.levels[t].items.length-1;n++)e.levels[t].items[n].sampleStart+e.levels[t].items[n].sampleDur+1!==e.levels[t].items[n+1].sampleStart&&1},e.findTimeOfMinSample=function(){return 0},e.findTimeOfMaxSample=function(e,t){return e/t},e.toJSO=function(t,n,r,i){t=(t=(t=t.replace(/([ \t]*\r?\n)+/g,"\n")).replace(/("[^\n]*")/g,(function(e,t){return t.replace(/\s+/g,"123abcABCCBAcba321")}))).replace(/[\t ]+/g,"");var a,o,s,l,c=new RegExp("123abcABCCBAcba321","g"),u=(t=t.replace(c," ")).split("\n"),h=!0,p=[],f={name:r,annotates:n,sampleRate:i,levels:[],links:[]};if(u[0].replace(/\s+/g,"")===e.l1.replace(/\s+/g,"")&&u[1].replace(/\s+/g,"")===e.l2.replace(/\s+/g,"")){for(var d=2;d<u.length;d++){var v=u[d];if("item[]:"!==v){if(!h)if(0===v.indexOf("item[")&&(o=u[d+2].split(/=/)[1].replace(/"/g,""),'"IntervalTier"'===u[d+1].split(/=/)[1]?(a="SEGMENT",f.levels.push({name:o,type:a,items:[]})):'"TextTier"'===u[d+1].split(/=/)[1]&&(a="EVENT",f.levels.push({name:o,type:a,items:[]}))),f.levels.length>0&&"SEGMENT"===f.levels[f.levels.length-1].type&&0===v.indexOf("intervals")&&0!==v.indexOf("intervals:")){var m=Math.floor(u[d+1].split(/=/)[1]*i),g=Math.floor(u[d+2].split(/=/)[1]*i);l=u[d+3].split(/=/)[1].replace(/"/g,""),(p=[]).push({name:f.levels[f.levels.length-1].name,value:l}),f.levels[f.levels.length-1].items.push({id:e.localID,sampleStart:m,sampleDur:g-m-1,labels:p}),++e.localID}else f.levels.length>0&&"EVENT"===f.levels[f.levels.length-1].type&&0===v.indexOf("points")&&0!==v.indexOf("points:")&&(s=u[d+1].split(/=/)[1]*i,l=u[d+2].split(/=/)[1].replace(/"/g,""),(p=[]).push({name:f.levels[f.levels.length-1].name,value:l}),f.levels[f.levels.length-1].items.push({id:e.localID,samplePoint:Math.round(s),labels:p}),++e.localID)}else h=!1}return e.testForGapsInLabelJSO(f),f}return{status:{type:"ERROR",message:"bad header in TextGrid file!!! The header has to be: "+e.l1+"\n"+e.l2+"; Note: Currently only long-form text TextGrids are supported!"}}},e.toTextGrid=function(t,n,r){var i="",a="\n",o="\t";i=(i=(i=(i=(i=(i=i+e.l1+a+e.l2+a+a)+"xmin = "+e.findTimeOfMinSample()+a)+"xmax = "+e.findTimeOfMaxSample(n,r)+a)+"levels? <exists>"+a)+"size = "+t.length+a)+"item []:"+a;for(var s=0;s<t.length;s++){var l=t[s];i=i+o+"item ["+s+"]:"+a,"SEGMENT"===l.type?i=i+o+o+'class = "IntervalTier"'+a:"EVENT"===l.type&&(i=i+o+o+'class = "TextTier"'+a),i=(i=(i=i+o+o+'name = "'+l.name+'"'+a)+o+o+"xmin = "+e.findTimeOfMinSample()+a)+o+o+"xmax = "+e.findTimeOfMaxSample(n,r)+a,"SEGMENT"===l.type?i=i+o+o+"intervals: size = "+l.items.length+a:"EVENT"===l.type&&(i=i+o+o+"points: size = "+l.items.length+a);for(var c=0;c<l.items.length;c++){var u=c+1;"SEGMENT"===l.type?(i=i+o+o+o+"intervals ["+u+"]:"+a,i=0!==l.items[c].sampleStart?i+o+o+o+o+"xmin = "+(l.items[c].sampleStart/r+1/r/2)+a:i+o+o+o+o+"xmin = 0"+a,i=(i=c<l.items.length-1?i+o+o+o+o+"xmax = "+((l.items[c].sampleStart+l.items[c].sampleDur)/r+1/r/2)+a:i+o+o+o+o+"xmax = "+e.findTimeOfMaxSample(n,r)+a)+o+o+o+o+'text = "'+l.items[c].labels[0].value+'"'+a):"EVENT"===l.type&&(i=(i=(i=i+o+o+o+"points["+u+"]:"+a)+o+o+o+o+"time = "+l.items[c].samplePoint/r+a)+o+o+o+o+'mark = "'+l.items[c].labels[0].value+'"'+a)}}return i},e.onmessage=function(t){var n;if(void 0!==t.data)switch(t.data.cmd){case"parseTG":void 0===(n=e.toJSO(t.data.textGrid,t.data.annotates,t.data.name,t.data.sampleRate)).status?e.postMessage({status:{type:"SUCCESS",message:""},data:n}):e.postMessage(n);break;case"toTextGrid":void 0===(n=e.toTextGrid(t.data.levels,t.data.buffLength,t.data.sampleRate)).status?e.postMessage({status:{type:"SUCCESS",message:""},data:n}):e.postMessage(n);break;default:e.postMessage({status:{type:"ERROR",message:"Unknown command sent to TextGridParserWorker"}})}else e.postMessage({status:{type:"ERROR",message:"Undefined message was sent to TextGridParserWorker"}})}},getWorkerURL:function(){var e;try{e=new Blob([this.getWorkerScript()],{type:"application/javascript"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(e=new BlobBuilder).append(xl),e=e.getBlob()}return"object"!=typeof URL&&"undefined"!=typeof webkitURL?webkitURL.createObjectURL(e):URL.createObjectURL(e)},kill:function(){this.worker&&this.worker.terminate(),this.url&&URL.revokeObjectURL(this.url)},tell:function(e){this.worker&&this.worker.postMessage(e)},says:function(e){this.worker&&this.worker.addEventListener("message",(function(t){e(t.data)}))}};var kl=function(){function e(e,t,n,r){var i=this;this.$q=e,this.DataService=t,this.ViewStateService=n,this.SoundHandlerService=r,this.worker=new xl,this.worker.says((function(e){"SUCCESS"===e.status.type?i.defer.resolve(e.data):i.defer.reject(e)}),!1)}return e.prototype.asyncToTextGrid=function(){return this.defer=this.$q.defer(),this.worker.tell({cmd:"toTextGrid",levels:this.DataService.getData().levels,sampleRate:this.SoundHandlerService.audioBuffer.sampleRate,buffLength:this.SoundHandlerService.audioBuffer.length}),this.defer.promise},e.prototype.asyncParseTextGrid=function(e,t,n){return this.defer=this.$q.defer(),this.worker.tell({cmd:"parseTG",textGrid:e,sampleRate:this.SoundHandlerService.audioBuffer.sampleRate,annotates:t,name:n}),this.defer.promise},e}();r.module("emuwebApp").service("TextGridParserService",["$q","DataService","ViewStateService","SoundHandlerService",kl]);var Cl=function(){function e(){}return e.prototype.rand=function(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t},e.prototype.new=function(){return this.rand(!1)+this.rand(!0)+this.rand(!0)+this.rand(!1)},e.prototype.newHash=function(){return this.rand(!1)+this.rand(!0)+this.rand(!0)+this.rand(!1)},e.prototype.empty=function(){return"00000000-0000-0000-0000-000000000000"},e}();r.module("emuwebApp").service("UuidService",Cl);var $l=function(){function e(e,t,n){this.$http=e,this.$q=t,this.ConfigProviderService=n,this.schemasJsos=[],this.names=["annotationFileSchema","emuwebappConfigSchema","DBconfigFileSchema","bundleListSchema","bundleSchema","designSchema"]}return e.prototype.checkIfLevelsAreDefined=function(e,t){var n=!0;return t.levelDefinitions.forEach((function(t){for(var n=e.indexOf(t.name);-1!==n;)e.splice(n,1),n=e.indexOf(t.name)})),0!==e.length&&(n="Following levels are not defined: "+e),n},e.prototype.checkIfSsffTracksAreDefined=function(e,t){var n=!0,r=e.indexOf("OSCI");return-1!==r&&e.splice(r,1),-1!==(r=e.indexOf("SPEC"))&&e.splice(r,1),t.ssffTrackDefinitions.forEach((function(t){for(var n=e.indexOf(t.name);-1!==n;)e.splice(n,1),n=e.indexOf(t.name)})),0!==e.length&&(n="Following ssffTracks are not defined: "+e),n},e.prototype.semCheckLoadedConfigs=function(e,t){var n=this,i=!0,a=!0;t.levelDefinitions.forEach((function(e,t){e.attributeDefinitions.forEach((function(n,r){var o=0;e.attributeDefinitions.forEach((function(e){n.name===e.name&&(o+=1)})),o>1&&(i="Error in DBconfig /levelDefinitions["+t+"]/attributeDefinitions["+r+"] duplicate attribute definitions found for this entry!",a=!1)}))})),e.perspectives.forEach((function(e){if(a){var o=n.checkIfSsffTracksAreDefined(r.copy(e.signalCanvases.order),t);!0!==o&&(i="Error in EMUwebAppConfig/perspectives/signalCanvases/order! References to undefined ssffTracks are present. "+o,a=!1);var s=[];e.signalCanvases.assign.forEach((function(r){a&&(s.push(r.ssffTrackName),r.signalCanvasName===r.ssffTrackName&&(i="Error in EMUwebAppConfig/perspectives/signalCanvases/assign! Assignment to self is not possible! signalCanvasesName: "+r.signalCanvasName,a=!1),"OSCI"!==r.ssffTrackName&&"SPEC"!==r.ssffTrackName||(i="Error in EMUwebAppConfig/perspectives/signalCanvases/assign! Assignment of OSCI or SPEC is not possible!",a=!1),!0!==(o=n.checkIfSsffTracksAreDefined([r.signalCanvasName,r.ssffTrackName],t))&&(i="Error in EMUwebAppConfig/perspectives/signalCanvases/assign! References to undefined ssffTracks are present. "+o,a=!1),-1===e.signalCanvases.order.indexOf(r.signalCanvasName)&&(i="Error in EMUwebAppConfig/perspectives/signalCanvases/assign! References to ssffTracks that are not displayed (not in order array of that perspective) are: "+r.signalCanvasName,a=!1))})),e.signalCanvases.contourLims.forEach((function(r){a&&(!0!==(o=n.checkIfSsffTracksAreDefined([r.ssffTrackName],t))&&(i="Error in EMUwebAppConfig/perspectives/signalCanvases/contourLims! References to undefined ssffTracks are present. "+o,a=!1),-1===e.signalCanvases.order.concat(s).indexOf(r.ssffTrackName)&&(i="Error in EMUwebAppConfig/perspectives/signalCanvases/contourLims! References to ssffTracks that are not displayed (not in order array of that perspective) are: "+r.ssffTrackName,a=!1))}));var l=n.checkIfLevelsAreDefined(r.copy(e.levelCanvases.order),t);!0!==l&&(i="Error in EMUwebAppConfig/perspectives/levelCanvases/order! References to undefined levels are present. "+l,a=!1),e.levelCanvases.order.forEach((function(e){if(a){var t=n.ConfigProviderService.getLevelDefinition(e);"SEGMENT"!==t.type&&"EVENT"!==t.type&&(i="Error in EMUwebAppConfig/perspectives/levelCanvases/order! Configured to display levels of type ITEM as levels containing time information (ITEM level in order array). LevelName: "+e,a=!1)}})),void 0!==e.twoDimCanvases&&void 0!==e.twoDimCanvases.twoDimDrawingDefinitions&&e.twoDimCanvases.twoDimDrawingDefinitions.forEach((function(e){if(a){var r=[];e.dots.forEach((function(e){a&&(r.push(e.name),!0!==(o=n.checkIfSsffTracksAreDefined([e.xSsffTrack,e.ySsffTrack],t))&&(i="Error in EMUwebAppConfig/perspectives/twoDimCanvases/twoDimDrawingDefinitions/dots! References to undefined ssffTracks are present. "+o,a=!1))})),e.connectLines.forEach((function(e){if(a){var t=r.indexOf(e.fromDot);-1===t&&(i="Error in EMUwebAppConfig/perspectives/twoDimCanvases/twoDimDrawingDefinitions/connectLines! References dots in fromDot that are not defined. dots.name: "+e.fromDot,a=!1),-1===(t=r.indexOf(e.toDot))&&(i="Error in EMUwebAppConfig/perspectives/twoDimCanvases/twoDimDrawingDefinitions/connectLines! References dots in toDot that are not defined. dots.name: "+e.toDot,a=!1)}})),e.staticDots.forEach((function(e){a&&e.xCoordinates.length!==e.yCoordinates.length&&(i="Error in EMUwebAppConfig/perspectives/twoDimCanvases/twoDimDrawingDefinitions/staticDots! xCoordinates and yCoordinates are not of the same length!",a=!1)}))}}))}}));var o=[],s=[];t.levelDefinitions.forEach((function(e){void 0!==e.anagestConfig&&(o.push(e.anagestConfig.verticalPosSsffTrackName),o.push(e.anagestConfig.velocitySsffTrackName),s.push(e.anagestConfig.autoLinkLevelName))}));var l=this.checkIfLevelsAreDefined(s,t);!0!==l&&(i="Error in DBconfig/levelDefinitions/anagestConfig/autoLinkLevelName! References to undefined levels are present. "+l);var c=this.checkIfSsffTracksAreDefined(o,t);return!0!==c&&(i="Error in DBconfig/levelDefinitions/anagestConfig/verticalPosSsffTrackName || velocitySsffTrackName! References to undefined ssffTracks are present. "+c),i},e.prototype.loadSchemas=function(){var e,t=this,n=[];return this.names.forEach((function(r){e="schemaFiles/"+r+".json",n.push(t.$http.get(e))})),this.$q.all(n)},e.prototype.setSchemas=function(e){var t=this;e.forEach((function(e){t.schemasJsos.push({name:e.config.url,data:e.data}),i.addSchema(e.config.url,e.data)}))},e.prototype.getSchema=function(e){var t;return this.schemasJsos.forEach((function(n){n.name==="schemaFiles/"+e+".json"&&(t=n)})),t},e.prototype.validateJSO=function(e,t){var n,r=this.getSchema(e);if(void 0!==r&&i.validate(t,r.data))if("DBconfigFileSchema"===e){var a=this.semCheckLoadedConfigs(this.ConfigProviderService.vals,this.ConfigProviderService.curDbConfig);n=!0===a||a}else n=!0;else n=void 0===r?"Schema: "+e+" is currently undefined! This is probably due to a misnamed schema file on the server...":i.error;return n},e}();r.module("emuwebApp").service("ValidationService",["$http","$q","ConfigProviderService",$l]);var Pl=function(){function e(e,t,n,r,i,a){this.$rootScope=e,this.$timeout=t,this.$window=n,this.SoundHandlerService=r,this.DataService=i,this.StandardFuncsService=a,this.myWindow={BARTLETT:1,BARTLETTHANN:2,BLACKMAN:3,COSINE:4,GAUSS:5,HAMMING:6,HANN:7,LANCZOS:8,RECTANGULAR:9,TRIANGULAR:10},this.myMode={DEMO:1,WS:2,EMBEDDED:3},this.myTimeMode={absolute:1,relative:2},this.mySignalType={OSCI:1,SPEC:2},this.myTwoDimType={DOTS:1,EPG:2},this.curLevelAttrDefs=[],this.initialize()}return e.prototype.initialize=function(){var e=this;this.curViewPort={sS:0,eS:0,selectS:-1,selectE:-1,movingS:-1,movingE:-1,dragBarActive:!1,dragBarHeight:-1,windowWidth:void 0},this.spectroSettings={windowSizeInSecs:-1,rangeFrom:-1,rangeTo:-1,dynamicRange:-1,window:-1,drawHeatMapColors:-1,preEmphasisFilterFactor:-1},this.osciSettings={curChannel:0},this.playHeadAnimationInfos={sS:-1,eS:-1,curS:null,endFreezeSample:-1,autoscroll:!1},this.timelineSize=-1,this.somethingInProgress=!1,this.somethingInProgressTxt="",this.historyActionTxt="",this.editing=!1,this.cursorInTextField=!1,this.saving=!0,this.bundleListSideBarOpen=!1,this.bundleListSideBarDisabled=!1,this.rightSubmenuOpen=!1,this.curClickItems=[],this.curMousePosSample=0,this.curMouseX=0,this.curMouseTrackName=void 0,this.curMouseLevelName=void 0,this.curMouseLevelType=void 0,this.curClickLevelName=void 0,this.curClickLevelType=void 0,this.lastPcm=void 0,this.curPreselColumnSample=2,this.curCorrectionToolNr=void 0,this.curClickLevelIndex=void 0,this.start=null,this.TransitionTime=void 0,this.showDropZone=!0,this.movingBoundary=!1,this.movingBoundarySample=void 0,this.focusInTextField=!1,this.curTaskPercCompl=0,this.curPerspectiveIdx=-1,this.mouseInEmuWebApp=!1,this.lastKeyCode=void 0,this.lastUpdate=void 0,this.url=void 0,this.pageSize=500,this.currentPage=void 0,this.curTimeAnchorIdx=-1,this.largeTextFieldInputFieldVisable=!1,this.largeTextFieldInputFieldCurLabel="",this.states=[],this.states.noDBorFilesloaded={permittedActions:["connectBtnClick","openDemoBtnDBclick","aboutBtnClick"]},this.states.loadingSaving={permittedActions:[]},this.states.labeling={permittedActions:["zoom","playaudio","spectSettingsChange","addLevelSegBtnClick","addLevelPointBtnClick","renameSelLevelBtnClick","downloadTextGridBtnClick","downloadAnnotationBtnClick","spectSettingsChange","clearBtnClick","labelAction","toggleSideBars","saveBndlBtnClick","showHierarchyBtnClick","editDBconfigBtnClick","aboutBtnClick","searchBtnClick"]},this.states.modalShowing=this.states.loadingSaving,this.prevState=this.states.noDBorFilesloaded,this.curState=this.states.noDBorFilesloaded,this.curLevelAttrDefs=[],this.hierarchyState={hierarchyShown:!1,selectedItemID:void 0,selectedLinkFromID:void 0,selectedLinkToID:void 0,editValue:void 0,inputFocus:!1,collapseInfo:{},scaleFactor:1,translate:[0,0],contextMenuID:void 0,newLinkFromID:void 0,path:[],curPathIdx:0,curNrOfPaths:0,rotated:!0,playing:0,resize:0,closeContextMenu:function(){e.hierarchyState.contextMenuID=void 0},getContextMenuID:function(){return e.hierarchyState.contextMenuID},getInputFocus:function(){return e.hierarchyState.inputFocus},getEditValue:function(){return e.hierarchyState.editValue},setEditValue:function(t){e.hierarchyState.editValue=t},reset:function(){e.hierarchyState.selectedItemID=void 0,e.hierarchyState.selectedLinkFromID=void 0,e.hierarchyState.selectedLinkToID=void 0,e.hierarchyState.editValue=void 0,e.hierarchyState.inputFocus=!1,e.hierarchyState.collapseInfo={},e.hierarchyState.scaleFactor=1,e.hierarchyState.translate=[0,0],e.hierarchyState.contextMenuID=void 0,e.hierarchyState.newLinkFromID=void 0},isRotated:function(){return e.hierarchyState.rotated},toggleRotation:function(){e.hierarchyState.rotated=!e.hierarchyState.rotated},toggleHierarchy:function(){e.hierarchyState.hierarchyShown=!e.hierarchyState.hierarchyShown,!1===e.hierarchyState.hierarchyShown&&e.StandardFuncsService.traverseAndClean(e.DataService.getData())},isShown:function(){return e.hierarchyState.hierarchyShown},getCollapsed:function(t){return void 0!==e.hierarchyState.collapseInfo[t]&&("boolean"==typeof e.hierarchyState.collapseInfo[t].collapsed&&e.hierarchyState.collapseInfo[t].collapsed)},getCollapsePosition:function(t){return void 0===e.hierarchyState.collapseInfo[t]?void 0:"object"==typeof e.hierarchyState.collapseInfo[t].collapsePosition?e.hierarchyState.collapseInfo[t].collapsePosition:void 0},getNumCollapsedParents:function(t){return void 0===e.hierarchyState.collapseInfo[t]?0:"number"==typeof e.hierarchyState.collapseInfo[t].numCollapsedParents?e.hierarchyState.collapseInfo[t].numCollapsedParents:0},setCollapsed:function(t,n){void 0===e.hierarchyState.collapseInfo[t]&&(e.hierarchyState.collapseInfo[t]={}),e.hierarchyState.collapseInfo[t].collapsed=n},setCollapsePosition:function(t,n){void 0===e.hierarchyState.collapseInfo[t]&&(e.hierarchyState.collapseInfo[t]={}),e.hierarchyState.collapseInfo[t].collapsePosition=n},setNumCollapsedParents:function(t,n){void 0===e.hierarchyState.collapseInfo[t]&&(e.hierarchyState.collapseInfo[t]={}),e.hierarchyState.collapseInfo[t].numCollapsedParents=n}}},e.prototype.getPermission=function(e){return this.curState.permittedActions.indexOf(e)>-1},e.prototype.setWindowWidth=function(e){this.curViewPort.windowWidth=e},e.prototype.setState=function(e){this.prevState=this.curState,this.curState="string"==typeof e?this.states[e]:e},e.prototype.updatePlayHead=function(e){this.SoundHandlerService.isPlaying&&this.$window.requestAnimationFrame(this.updatePlayHead.bind(this)),null===this.start&&(this.start=e);var t=Math.floor(e-this.start)/1e3*this.SoundHandlerService.audioBuffer.sampleRate;this.playHeadAnimationInfos.curS=Math.floor(this.playHeadAnimationInfos.sS+t),this.SoundHandlerService.isPlaying&&this.playHeadAnimationInfos.curS<=this.playHeadAnimationInfos.eS?(-1!==this.playHeadAnimationInfos.curS&&(this.curMousePosSample=this.playHeadAnimationInfos.curS),this.playHeadAnimationInfos.autoscroll&&this.playHeadAnimationInfos.curS>=this.curViewPort.eS&&this.setViewPort(this.curViewPort.eS,this.curViewPort.eS+(this.curViewPort.eS-this.curViewPort.sS))):(this.curMousePosSample=this.playHeadAnimationInfos.endFreezeSample,this.playHeadAnimationInfos.sS=-1,this.playHeadAnimationInfos.eS=-1,this.playHeadAnimationInfos.curS=0,this.start=null),this.$rootScope.$apply()},e.prototype.animatePlayHead=function(e,t,n){this.playHeadAnimationInfos.sS=e,this.playHeadAnimationInfos.eS=t,this.playHeadAnimationInfos.endFreezeSample=t,this.playHeadAnimationInfos.curS=e,void 0!==n&&(this.playHeadAnimationInfos.autoscroll=n),this.$window.requestAnimationFrame(this.updatePlayHead.bind(this))},e.prototype.select=function(e,t){this.curViewPort.selectS=e,this.curViewPort.selectE=t},e.prototype.resetSelect=function(){this.curViewPort.selectS=-1,this.curViewPort.selectE=-1},e.prototype.getViewPort=function(){return this.curViewPort},e.prototype.setspectroSettings=function(e,t,n,r,i,a,o,s,l){this.spectroSettings.windowSizeInSecs=e,this.spectroSettings.rangeFrom=parseInt(t,10),this.spectroSettings.rangeTo=parseInt(n,10),this.spectroSettings.dynamicRange=parseInt(r,10),this.setWindowFunction(i),this.spectroSettings.drawHeatMapColors=a,this.spectroSettings.preEmphasisFilterFactor=o,this.spectroSettings.heatMapColorAnchors=s,this.spectroSettings.invert=l},e.prototype.setOsciSettings=function(e){this.osciSettings.curChannel=e},e.prototype.setHierarchySettings=function(e){this.hierarchyState.path=e},e.prototype.getSelect=function(){return[this.curViewPort.selectS,this.curViewPort.selectE]},e.prototype.selectDependent=function(e,t){e<this.curViewPort.selectS&&(this.curViewPort.selectS=e),t>this.curViewPort.selectE&&(this.curViewPort.selectE=t)},e.prototype.selectLevel=function(e,t,n){var r,i=this.getcurClickLevelName();if(void 0===i)return e?(r=n.getLevelDetails(t[t.length-1]),void this.setcurClickLevel(r.name,r.type,t.length-1)):void(null!==(r=n.getLevelDetails(t[0]))&&this.setcurClickLevel(r.name,r.type,0));var a=-1;t.forEach((function(e,t){e===i&&(a=t)})),void 0===a?(r=n.getLevelDetails(t[0]),this.setcurClickLevel(r.name,r.type,0),this.curClickItems=[],this.selectBoundary()):e?a+1<t.length&&(r=n.getLevelDetails(t[a+1]),this.setcurClickLevel(r.name,r.type,t.idxOfNow+1),this.curClickItems=[],this.selectBoundary()):a-1>=0&&(r=n.getLevelDetails(t[a-1]),this.setcurClickLevel(r.name,r.type,t.idxOfNow-1),this.curClickItems=[],this.selectBoundary())},e.prototype.setWindowFunction=function(e){switch(e){case"BARTLETT":this.spectroSettings.window=this.myWindow.BARTLETT;break;case"BARTLETTHANN":this.spectroSettings.window=this.myWindow.BARTLETTHANN;break;case"BLACKMAN":this.spectroSettings.window=this.myWindow.BLACKMAN;break;case"COSINE":this.spectroSettings.window=this.myWindow.COSINE;break;case"GAUSS":this.spectroSettings.window=this.myWindow.GAUSS;break;case"HAMMING":this.spectroSettings.window=this.myWindow.HAMMING;break;case"HANN":this.spectroSettings.window=this.myWindow.HANN;break;case"LANCZOS":this.spectroSettings.window=this.myWindow.LANCZOS;break;case"RECTANGULAR":this.spectroSettings.window=this.myWindow.RECTANGULAR;break;case"TRIANGULAR":this.spectroSettings.window=this.myWindow.TRIANGULAR;break;default:this.spectroSettings.window=this.myWindow.BARTLETTHANN}},e.prototype.getWindowFunctions=function(){return this.myWindow},e.prototype.getCommunicationModes=function(){return this.myMode},e.prototype.getTimeModes=function(){return this.myTimeMode},e.prototype.getSignalTypes=function(){return this.mySignalType},e.prototype.getTwoDimTypes=function(){return this.myTwoDimType},e.prototype.getdragBarActive=function(){return this.curViewPort.dragBarActive},e.prototype.setdragBarActive=function(e){this.curViewPort.dragBarActive=e},e.prototype.getdragBarHeight=function(){return this.curViewPort.dragBarHeight},e.prototype.setdragBarHeight=function(e){this.curViewPort.dragBarHeight=e},e.prototype.getPos=function(e,t){return e*(t-this.curViewPort.sS)/(this.curViewPort.eS-this.curViewPort.sS+1)},e.prototype.getSampleDist=function(e){return this.getPos(e,this.curViewPort.sS+1)-this.getPos(e,this.curViewPort.sS)},e.prototype.toggleBundleListSideBar=function(e){var t=this;this.bundleListSideBarDisabled||(this.bundleListSideBarOpen=!this.bundleListSideBarOpen,this.$timeout((function(){var e=new Date;t.lastUpdate=e.getTime()}),e))},e.prototype.getBundleListSideBarOpen=function(){return this.bundleListSideBarOpen},e.prototype.setBundleListSideBarOpen=function(e){this.bundleListSideBarDisabled||(this.bundleListSideBarOpen=e)},e.prototype.getTransitionTime=function(){return this.TransitionTime},e.prototype.setTransitionTime=function(e){this.TransitionTime=e},e.prototype.getPerspectivesSideBarOpen=function(){return this.rightSubmenuOpen},e.prototype.setPerspectivesSideBarOpen=function(e){this.rightSubmenuOpen=e},e.prototype.setcurClickLevel=function(e,t,n){this.setcurClickLevelName(e,n),this.setcurClickLevelType(t)},e.prototype.setcurClickLevelType=function(e){this.curClickLevelType=e},e.prototype.getcurClickLevelType=function(){return this.curClickLevelType},e.prototype.setcurClickLevelName=function(e,t){this.curClickLevelName=e,this.curClickLevelIndex=t},e.prototype.getcurClickLevelName=function(){return this.curClickLevelName},e.prototype.getcurClickLevelIndex=function(){return this.curClickLevelIndex},e.prototype.getcurClickNeighbours=function(){return this.curClickNeighbours},e.prototype.setcurMouseLevelName=function(e){this.curMouseLevelName=e},e.prototype.getcurMouseLevelName=function(){return this.curMouseLevelName},e.prototype.setcurMouseLevelType=function(e){this.curMouseLevelType=e},e.prototype.getcurMouseLevelType=function(){return this.curMouseLevelType},e.prototype.setcurMouseItem=function(e,t,n,r,i){this.curMouseItem=e,this.curMouseX=n,this.curMouseNeighbours=t,this.curMouseisFirst=r,this.curMouseisLast=i},e.prototype.getcurMouseItem=function(){return this.curMouseItem},e.prototype.getcurMouseisFirst=function(){return this.curMouseisFirst},e.prototype.getcurMouseisLast=function(){return this.curMouseisLast},e.prototype.getcurMouseNeighbours=function(){return this.curMouseNeighbours},e.prototype.getItemsInSelection=function(e){var t=this,n=[],r=this.curViewPort.selectS,i=this.curViewPort.selectE;return e.forEach((function(e){e.name===t.getcurClickLevelName()&&e.items.forEach((function(e){e.sampleStart>=r&&e.sampleStart+e.sampleDur<=i&&n.push(e),e.samplePoint>=r&&e.samplePoint<=i&&n.push(e)}))})),n.sort(this.sortbystart)},e.prototype.setcurClickItem=function(e){null!=e?(this.curClickItems=[],this.curClickItems.push(e),this.selectBoundary()):this.curClickItems=[]},e.prototype.selectBoundary=function(){var e,t;this.curClickItems.length>0&&(e=void 0===this.curClickItems[0].samplePoint?this.curClickItems[0].sampleStart:this.curClickItems[0].samplePoint,t=void 0===this.curClickItems[0].samplePoint?this.curClickItems[this.curClickItems.length-1].sampleStart+this.curClickItems[this.curClickItems.length-1].sampleDur:this.curClickItems[0].samplePoint,this.curClickItems.forEach((function(n){n.sampleStart<=e&&(e=n.sampleStart),n.sampleStart+n.sampleDur>=t&&(t=n.sampleStart+n.sampleDur)})),this.select(e,t+1))},e.prototype.setcurClickItemMultiple=function(e,t){0===this.curClickItems.length||void 0===this.curClickItems||null===this.curClickItems?(this.curClickItems=[],this.curClickItems.push(e)):-1===this.curClickItems.indexOf(e)?(this.curClickItems.indexOf(t)<0&&(this.curClickItems=[]),this.curClickItems.push(e),this.curClickItems.sort(this.sortbystart)):(this.curClickItems=[],this.curClickItems.push(e))},e.prototype.sortbystart=function(e,t){return e.sampleStart>t.sampleStart||e.samplePoint>t.samplePoint?1:e.sampleStart<t.sampleStart||e.samplePoint<t.samplePoint?-1:0},e.prototype.getselectedRange=function(){return this.curClickItems.length>1?{start:this.curClickItems[0].sampleStart,end:this.curClickItems[this.curClickItems.length-1].sampleStart+this.curClickItems[this.curClickItems.length-1].sampleDur}:1===this.curClickItems.length?void 0!==this.curClickItems[0].sampleStart?{start:this.curClickItems[0].sampleStart,end:this.curClickItems[0].sampleStart+this.curClickItems[0].sampleDur}:{start:this.curClickItems[0].samplePoint,end:this.curClickItems[0].samplePoint}:{start:-1,end:-1}},e.prototype.getcurClickItems=function(){return this.curClickItems},e.prototype.getselected=function(){return this.curClickItems},e.prototype.isEditing=function(){return this.editing},e.prototype.setEditing=function(e){this.editing=e},e.prototype.getLasPcm=function(){return this.lastPcm},e.prototype.setLastPcm=function(e){this.lastPcm=e},e.prototype.getcursorInTextField=function(){return this.cursorInTextField},e.prototype.setcursorInTextField=function(e){this.cursorInTextField=e},e.prototype.isSavingAllowed=function(){return this.saving},e.prototype.setSavingAllowed=function(e){this.saving=e},e.prototype.countSelected=function(){return this.curClickItems.length},e.prototype.getCurrentSample=function(e){return this.curViewPort.sS+(this.curViewPort.eS-this.curViewPort.sS)*e},e.prototype.getCurrentPercent=function(e){return e*(100/(this.curViewPort.eS-this.curViewPort.sS)/100)},e.prototype.getSamplesPerPixelVal=function(e){var t=parseFloat(this.curViewPort.sS);return(parseFloat(this.curViewPort.eS)-t)/e.originalEvent.target.width},e.prototype.getViewPortStartTime=function(){return this.curViewPort.sS/this.SoundHandlerService.audioBuffer.sampleRate-.5/this.SoundHandlerService.audioBuffer.sampleRate},e.prototype.getViewPortEndTime=function(){return this.curViewPort.eS/this.SoundHandlerService.audioBuffer.sampleRate+.5/this.SoundHandlerService.audioBuffer.sampleRate},e.prototype.getSelectedStartTime=function(){return this.curViewPort.selectS/this.SoundHandlerService.audioBuffer.sampleRate-.5/this.SoundHandlerService.audioBuffer.sampleRate},e.prototype.getSelectedEndTime=function(){return this.curViewPort.selectE/this.SoundHandlerService.audioBuffer.sampleRate+.5/this.SoundHandlerService.audioBuffer.sampleRate},e.prototype.calcSampleTime=function(e){return e/this.SoundHandlerService.audioBuffer.sampleRate+.5/this.SoundHandlerService.audioBuffer.sampleRate},e.prototype.setViewPort=function(e,t){var n=this.curViewPort.sS,r=this.curViewPort.eS;void 0!==e&&(this.curViewPort.sS=Math.round(e)),void 0!==t&&(this.curViewPort.eS=Math.round(t)),n>this.curViewPort.sS&&r>this.curViewPort.eS&&this.curViewPort.sS<0&&(this.curViewPort.sS=0,this.curViewPort.eS=r+Math.abs(this.curViewPort.sS)),n<this.curViewPort.sS&&r<this.curViewPort.eS&&this.curViewPort.eS>this.SoundHandlerService.audioBuffer.length&&(this.curViewPort.sS=n,this.curViewPort.eS=this.SoundHandlerService.audioBuffer.length),this.curViewPort.sS<0&&(this.curViewPort.sS=0),this.curViewPort.eS>this.SoundHandlerService.audioBuffer.length&&(this.curViewPort.eS=this.SoundHandlerService.audioBuffer.length),this.curViewPort.eS-this.curViewPort.sS<4&&(this.curViewPort.sS=n,this.curViewPort.eS=r)},e.prototype.zoomViewPort=function(e,t){var n,r,i,a=this.getcurMouseItem(),o=this.curViewPort.eS-this.curViewPort.sS,s=!1;if(void 0!==a){this.getcurMouseisFirst()?a=t.getItemDetails(this.getcurMouseLevelName(),0):this.getcurMouseisLast()&&(a=t.getLastItem(this.getcurMouseLevelName()),s=!0);var l=(i="SEGMENT"===this.getcurMouseLevelType()?s?a.sampleStart+a.sampleDur:a.sampleStart:a.samplePoint)-this.curViewPort.sS,c=this.curViewPort.eS-i;e?(n=this.curViewPort.sS+.5*l,r=this.curViewPort.eS-.5*c):(n=this.curViewPort.sS-.5*l,r=this.curViewPort.eS+.5*c)}else e?(n=this.curViewPort.sS+~~(o/4),r=this.curViewPort.eS-~~(o/4)):(n=this.curViewPort.sS-~~(o/4),r=this.curViewPort.eS+~~(o/4));this.setViewPort(n,r)},e.prototype.shiftViewPort=function(e){var t,n;e?(t=this.curViewPort.sS+~~((this.curViewPort.eS-this.curViewPort.sS)/4),n=this.curViewPort.eS+~~((this.curViewPort.eS-this.curViewPort.sS)/4)):(t=this.curViewPort.sS-~~((this.curViewPort.eS-this.curViewPort.sS)/4),n=this.curViewPort.eS-~~((this.curViewPort.eS-this.curViewPort.sS)/4)),this.setViewPort(t,n)},e.prototype.setCurLevelAttrDefs=function(e){var t=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){var n=!1;t.curLevelAttrDefs.forEach((function(t){t.levelName===e.name&&(n=!0)})),n||t.curLevelAttrDefs.push({levelName:e.name,curAttrDefName:e.name})}))},e.prototype.setCurAttrDef=function(e,t,n){this.curLevelAttrDefs.forEach((function(r){r.levelName===e&&(r.curAttrDefName=t,r.curAttrDefIndex=n)}))},e.prototype.getCurAttrDef=function(e){var t;return this.curLevelAttrDefs.forEach((function(n){n.levelName===e&&(t=n.curAttrDefName)})),t},e.prototype.getCurAttrIndex=function(e){var t;return this.curLevelAttrDefs.forEach((function(n){n.levelName===e&&(t=void 0===n.curAttrDefIndex?0:n.curAttrDefIndex)})),t},e.prototype.setlastKeyCode=function(e){this.lastKeyCode=e},e.prototype.getX=function(e){return(e.offsetX||e.originalEvent.layerX)*(e.originalEvent.target.width/e.originalEvent.target.clientWidth)},e.prototype.getY=function(e){return(e.offsetY||e.originalEvent.layerY)*(e.originalEvent.target.height/e.originalEvent.target.clientHeight)},e.prototype.resetToInitState=function(){this.initialize()},e.prototype.getColorOfAnchor=function(e,t){return{"background-color":"rgb("+e[t][0]+","+e[t][1]+","+e[t][2]+")",width:"10px",height:"10px"}},e.prototype.numberOfPages=function(e){return Math.ceil(e/this.pageSize)},e.prototype.switchPerspective=function(e,t){t.length>e&&(this.curPerspectiveIdx=e)},e}();r.module("emuwebApp").service("ViewStateService",["$rootScope","$timeout","$window","SoundHandlerService","DataService","StandardFuncsService",Pl]);var El=function(){function e(e,t){this.$q=e,this.$window=t}return e.prototype.ab2str=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return String.fromCharCode.apply(null,t)},e.prototype.parseWavHeader=function(e){var t,n,r,i={};if(t=0,n=(e=this.ensureUint8Array(e)).subarray(t,4),r=new Uint8Array(n),i.ChunkID=this.ab2str(r),"RIFF"!==i.ChunkID)return{status:{type:"ERROR",message:"Wav read error: ChunkID not RIFF but "+i.ChunkID}};if(t=4,n=e.subarray(t,4),r=new Uint32Array(n),i.ChunkSize=r[0],t=8,n=e.subarray(t,4),r=new Uint8Array(n),i.Format=this.ab2str(r),"WAVE"!==i.Format)return{status:{type:"ERROR",message:"Wav read error: Format not WAVE but "+i.Format}};for(var a=!1,o=12;!a;){if(n=e.subarray(o,4),r=new Uint8Array(n),"fmt "===(l=this.ab2str(r))?(i.FmtSubchunkID="fmt ",a=!0):o+=1,"data"===l)return{status:{type:"ERROR",message:'Wav read error: Reached end of header by reaching data sub-chunk without finding "fmt " sub-chunk   '}}}if(t=o+4,n=e.subarray(t,4),r=new Uint32Array(n),i.FmtSubchunkSize=r[0],t=o+8,n=e.subarray(t,2),r=new Uint16Array(n),i.AudioFormat=r[0],-1===[0,1].indexOf(i.AudioFormat))return{status:{type:"ERROR",message:"Wav read error: AudioFormat not 0 or 1 but "+i.AudioFormat}};if(t=o+10,n=e.subarray(t,2),r=new Uint16Array(n),i.NumChannels=r[0],i.NumChannels<1)return{status:{type:"ERROR",message:"Wav read error: NumChannels not greater than 1 but "+i.NumChannels}};t=o+12,n=e.subarray(t,4),r=new Uint32Array(n),i.SampleRate=r[0],t=o+16,n=e.subarray(t,4),r=new Uint32Array(n),i.ByteRate=r[0],t=o+20,n=e.subarray(t,2),r=new Uint16Array(n),i.BlockAlign=r[0],t=o+12,n=e.subarray(t,2),r=new Uint16Array(n),i.BitsPerSample=r[0];a=!1;for(var s=o+14;!a;){var l;n=e.subarray(s,4),r=new Uint8Array(n),"data"===(l=this.ab2str(r))?(a=!0,n=e.subarray(s+4,4),r=new Uint32Array(n),i.dataChunkSize=r[0]):s+=1}return i},e.prototype.parseWavAudioBuf=function(e){var t,n,r=this;try{t=this.ensureUint8Array(e),n=this.toTightArrayBuffer(t)}catch(e){this.defer=this.$q.defer();var i={status:{}};return i.status.message="Error parsing audio file: Unsupported buffer type.",this.defer.reject(i),this.defer.promise}var a=this.parseWavHeader(t);if(void 0!==a.status&&"ERROR"===a.status.type)return this.shouldTryGenericDecode(a.status.message,t)?this.decodeGenericAudio(n,a.status.message):(this.defer=this.$q.defer(),this.defer.reject(a),this.defer.promise);try{var o=new(this.$window.OfflineAudioContext||this.$window.webkitOfflineAudioContext)(a.NumChannels,a.dataChunkSize/a.NumChannels/(a.BitsPerSample/8),a.SampleRate);return this.defer=this.$q.defer(),o.decodeAudioData(n,(function(e){r.defer.resolve(e)}),(function(e){r.defer.reject(e)})),this.defer.promise}catch(e){var s={};s.exception=JSON.stringify(e,null,4),s.EMUwebAppComment="This could be because you are using Safari (or another webkit based browser) and the audio sample rate is not in the interval >= 44100 and <= 96000 which seem to currently be the only sample rates supported by the webkitOfflineAudioContext (see here https://github.com/WebKit/webkit/blob/29271ffbec500cd9c92050fcc0e613adffd0ce6a/Source/WebCore/Modules/webaudio/AudioContext.cpp#L111)";var l={status:{}};return l.status.message=JSON.stringify(s,null,4),this.defer=this.$q.defer(),this.defer.reject(l),this.defer.promise}},e.prototype.ensureUint8Array=function(e){if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e&&e.buffer instanceof ArrayBuffer)return new Uint8Array(e.buffer,e.byteOffset||0,e.byteLength);throw new Error("Unsupported buffer type")},e.prototype.toTightArrayBuffer=function(e){return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)},e.prototype.shouldTryGenericDecode=function(e,t){var n=(e||"").toLowerCase();return-1!==n.indexOf("chunkid not riff")||-1!==n.indexOf("format not wave")||this.looksLikeMp3(t)},e.prototype.looksLikeMp3=function(e){return!(!e||e.length<3)&&(73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&224==(224&e[1]))},e.prototype.decodeGenericAudio=function(e,t){var n,r=this,i=this.$window.AudioContext||this.$window.webkitAudioContext;if(this.defer=this.$q.defer(),!i)return(a={status:{}}).status.message="Error parsing audio file: Web Audio API not supported in this browser.",this.defer.reject(a),this.defer.promise;try{n=new i}catch(e){var a;return(a={status:{}}).status.message="Error initializing audio decoder: "+e,this.defer.reject(a),this.defer.promise}return n.decodeAudioData(e,(function(e){"function"==typeof n.close&&n.close().catch((function(){})),r.defer.resolve(e)}),(function(e){"function"==typeof n.close&&n.close().catch((function(){}));var i={status:{}},a=e&&e.message?e.message:e;i.status.message=t?"Error parsing audio file: "+a+" ("+t+")":"Error parsing audio file: "+a,r.defer.reject(i)})),this.defer.promise},e}();r.module("emuwebApp").service("WavParserService",["$q","$window",El]);var Tl=function(){function e(e,t,n,r,i,a,o,s,l,c,u,h,p,f,d){this.$q=e,this.$rootScope=t,this.$location=n,this.$timeout=r,this.HistoryService=i,this.SsffParserService=a,this.ConfigProviderService=o,this.ViewStateService=s,this.WavParserService=l,this.SoundHandlerService=c,this.EspsParserService=u,this.UuidService=h,this.BinaryDataManipHelperService=p,this.SsffDataService=f,this.ModalService=d,this.callbacks={},this.conPromise={},this.connected=!1,this.ws={}}return e.prototype.listener=function(e){var t=e;if(this.callbacks.hasOwnProperty(t.callbackID)){switch(t.type){case"getESPSfile":alert("espsfile");break;case"getSSFFfile":alert("ssfffile")}"SUCCESS"===t.status.type?this.$rootScope.$apply(this.callbacks[t.callbackID].cb.resolve(t.data)):(this.closeConnect(),this.$rootScope.$broadcast("resetToInitState"),this.$rootScope.$apply(this.ModalService.open("views/error.html","Communication error with server! Error message is: "+t.status.message))),delete this.callbacks[t.callbackID]}else void 0===t.status?this.ModalService.open("views/error.html","Just got JSON message from server that the EMU-webApp does not know how to deal with! This is not allowed!"):"ERROR:TIMEOUT"===t.status.type||this.ModalService.open("views/error.html","Received invalid messageObj.callbackID that could not be resolved to a request! This should not happen and indicates a bad server response! The invalid callbackID was: "+t.callbackID)},e.prototype.getCallbackId=function(){return this.UuidService.new()},e.prototype.wsonopen=function(e){this.connected=!0,this.$rootScope.$apply(this.conPromise.resolve(e))},e.prototype.wsonmessage=function(e){var t=this;try{var n=r.fromJson(e.data);this.listener(n)}catch(n){this.ModalService.open("views/error.html","Got non-JSON string as message from server! This is not allowed! The message was: "+e.data+" which caused the angular.fromJson error: "+n).then((function(){t.closeConnect(),t.$rootScope.$broadcast("resetToInitState")}))}},e.prototype.wsonerror=function(e){console.error("WEBSOCKET ERROR!!!!!"),this.$rootScope.$apply(this.conPromise.resolve(e))},e.prototype.wsonclose=function(e){var t=this;!e.wasClean&&this.connected&&this.ModalService.open("views/error.html","A non clean disconnect to the server occurred! This probably means that the server is down. Please check the server and reconnect!").then((function(){t.$rootScope.$broadcast("connectionDisrupted")})),this.connected=!1},e.prototype.sendRequest=function(e){var t=this,n=this.$q.defer(),i=this.getCallbackId();return this.callbacks[i]={time:new Date,cb:n},e.callbackID=i,this.ws.send(r.toJson(e)),this.$timeout((function(){var n={callbackID:i,status:{type:"ERROR:TIMEOUT",message:"Sent request of type: "+e.type+" timed out after "+t.ConfigProviderService.vals.main.serverTimeoutInterval+"ms!  Please check the server..."}};t.listener(n)}),this.ConfigProviderService.vals.main.serverTimeoutInterval),n.promise},e.prototype.initConnect=function(e){var t=this.$q.defer();try{this.ws=new WebSocket(e),this.ws.onopen=this.wsonopen.bind(this),this.ws.onmessage=this.wsonmessage.bind(this),this.ws.onerror=this.wsonerror.bind(this),this.ws.onclose=this.wsonclose.bind(this)}catch(e){return this.$q.reject("A malformed websocket URL that does not start with ws:// or wss:// was provided.")}return this.conPromise=t,t.promise},e.prototype.isConnected=function(){return this.connected},e.prototype.closeConnect=function(){this.isConnected()&&(this.ws.onclose=function(){},this.ws.close())},e.prototype.getProtocol=function(){return this.sendRequest({type:"GETPROTOCOL"})},e.prototype.getDoUserManagement=function(){return this.sendRequest({type:"GETDOUSERMANAGEMENT"})},e.prototype.logOnUser=function(e,t){var n={type:"LOGONUSER",userName:e,pwd:t};return this.sendRequest(n)},e.prototype.getDBconfigFile=function(){return this.sendRequest({type:"GETGLOBALDBCONFIG"})},e.prototype.getBundleList=function(){return this.sendRequest({type:"GETBUNDLELIST"})},e.prototype.getBundle=function(e,t){var n={type:"GETBUNDLE",name:e,session:t};return this.sendRequest(n)},e.prototype.saveBundle=function(e){var t={type:"SAVEBUNDLE",data:e};return this.sendRequest(t)},e.prototype.saveConfiguration=function(e){var t={type:"SAVEDBCONFIG",data:e};return this.sendRequest(t)},e.prototype.disconnectWarning=function(){return this.sendRequest({type:"DISCONNECTWARNING"})},e.prototype.getDoEditDBConfig=function(){return this.sendRequest({type:"GETDOEDITDBCONFIG"})},e.prototype.editDBConfig=function(e,t){var n={type:"EDITDBCONFIG",subtype:e,data:t};return this.sendRequest(n)},e}();r.module("emuwebApp").service("WebSocketHandlerService",["$q","$rootScope","$location","$timeout","HistoryService","SsffParserService","ConfigProviderService","ViewStateService","WavParserService","SoundHandlerService","EspsParserService","UuidService","BinaryDataManipHelperService","SsffDataService","ModalService",Tl]);n(375),n(377),n(379),n(381),n(383),n(390),n(392),n(394),n(396),n(398),n(400),n(402),n(404),n(406),n(408),n(410),n(412),n(414),n(416),n(418),n(420),n(422),n(424),n(426),n(428)}]);