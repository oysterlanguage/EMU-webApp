!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const r=Symbol("Comlink.proxy"),n=Symbol("Comlink.endpoint"),s=Symbol("Comlink.releaseProxy"),i=new WeakSet,o=new Map([["proxy",{canHandle:e=>e&&e[r],serialize(e){const{port1:t,port2:a}=new MessageChannel;return p(e,t),[a,[a]]},deserialize:e=>{return e.start(),function e(t,a=[],r=function(){}){let i=!1;const o=new Proxy(r,{get(r,n){if(l(i),n===s)return()=>d(t,{type:5,path:a.map(e=>e.toString())}).then(()=>{u(t),i=!0});if("then"===n){if(0===a.length)return{then:()=>o};const e=d(t,{type:0,path:a.map(e=>e.toString())}).then(m);return e.then.bind(e)}return e(t,[...a,n])},set(e,r,n){l(i);const[s,o]=f(n);return d(t,{type:1,path:[...a,r].map(e=>e.toString()),value:s},o).then(m)},apply(r,s,o){l(i);const p=a[a.length-1];if(p===n)return d(t,{type:4}).then(m);if("bind"===p)return e(t,a.slice(0,-1));const[u,h]=c(o);return d(t,{type:2,path:a.map(e=>e.toString()),argumentList:u},h).then(m)},construct(e,r){l(i);const[n,s]=c(r);return d(t,{type:3,path:a.map(e=>e.toString()),argumentList:n},s).then(m)}});return o}(e,[],t);var t}}],["throw",{canHandle:e=>i.has(e),serialize(e){const t=e instanceof Error;let a=e;return t&&(a={isError:t,message:e.message,stack:e.stack}),[a,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error,e);throw e}}]]);function p(e,t=self){t.addEventListener("message",(function a(n){if(!n||!n.data)return;const{id:s,type:o,path:l}=Object.assign({path:[]},n.data),c=(n.data.argumentList||[]).map(m);let d;try{const t=l.slice(0,-1).reduce((e,t)=>e[t],e),a=l.reduce((e,t)=>e[t],e);switch(o){case 0:d=a;break;case 1:t[l.slice(-1)[0]]=m(n.data.value),d=!0;break;case 2:d=a.apply(t,c);break;case 3:d=function(e){return Object.assign(e,{[r]:!0})}(new a(...c));break;case 4:{const{port1:t,port2:a}=new MessageChannel;p(e,a),d=function(e,t){return h.set(e,t),e}(t,[t])}break;case 5:d=void 0}}catch(e){d=e,i.add(e)}Promise.resolve(d).catch(e=>(i.add(e),e)).then(e=>{const[r,n]=f(e);t.postMessage(Object.assign(Object.assign({},r),{id:s}),n),5===o&&(t.removeEventListener("message",a),u(t))})})),t.start&&t.start()}function u(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function l(e){if(e)throw new Error("Proxy has been released and is not useable")}function c(e){const t=e.map(f);return[t.map(e=>e[0]),(a=t.map(e=>e[1]),Array.prototype.concat.apply([],a))];var a}const h=new WeakMap;function f(e){for(const[t,a]of o)if(a.canHandle(e)){const[r,n]=a.serialize(e);return[{type:3,name:t,value:r},n]}return[{type:0,value:e},h.get(e)||[]]}function m(e){switch(e.type){case 3:return o.get(e.name).deserialize(e.value);case 0:return e.value}}function d(e,t,a){return new Promise(r=>{const n=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",(function t(a){a.data&&a.data.id&&a.data.id===n&&(e.removeEventListener("message",t),r(a.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:n},t),a)})}a.d(t,"HierarchyWorker",(function(){return S}));var S=function(){function e(){}return e.prototype.reduceAnnotationToViewableTimeAndPath=function(e,t,a,r){var n=this;this.idHashMap=void 0,this.linkSubToSuperHashMap=void 0,this.createIdHashMapForPath(t,e),this.createLinkSubToSuperHashMap(e);var s=this.reduceToItemsWithTimeInView(e,t,a,r),i=JSON.parse(JSON.stringify(e));i.levels=[],i.levels.push(JSON.parse(JSON.stringify(s))),i.links=[];return t.forEach((function(a,r){if(a!==t[t.length-1]&&a!==t[t.length-1]){var o=JSON.parse(JSON.stringify(n.getLevelDetails(t[r+1],e)));o.items=[],n.giveTimeToParentsAndAppendItemsAndLinks(i,o,s),i.levels.push(o),s=i.levels[i.levels.length-1]}})),i},e.prototype.getLevelDetails=function(e,t){var a=null;return t.levels.forEach((function(t){t.name===e&&(a=t)})),a},e.prototype.guessLinkDefinitions=function(e){this.idHashMap=void 0,this.linkSubToSuperHashMap=void 0,this.createIdHashMapForEveryLevel(e),this.createLinkSubToSuperHashMap(e),this.createLinkSuperToSubHashMap(e);var t=this.findAllLinkDefs(this.linkSuperToSubHashMap,!1),a=this.findAllLinkDefs(this.linkSubToSuperHashMap,!0);return t.forEach((function(e){a.forEach((function(t){e.superlevelName===t.superlevelName&&e.sublevelName===t.sublevelName&&("ONE_TO_ONE"===e.type||"ONE_TO_MANY"===e.type&&"MANY_TO_MANY"===t.type)&&(e.type=t.type)}))})),t},e.prototype.reduceToItemsWithTimeInView=function(e,t,a,r){var n=this.getLevelDetails(t[0],e),s=JSON.parse(JSON.stringify(n));return s.items=[],n.items.forEach((function(e){e.sampleStart+e.sampleDur>a&&e.sampleStart<r&&s.items.push(e)})),s},e.prototype.giveTimeToParentsAndAppendItemsAndLinks=function(e,t,a){var r=this;a.items.forEach((function(a){var n=r.linkSubToSuperHashMap.get(a.id);void 0!==n&&n.forEach((function(n){var s=r.idHashMap.get(n);void 0!==s&&s.labels[0].name===t.name&&(e.links.push({fromID:n,toID:a.id}),void 0===s.sampleStart?(s.sampleStart=a.sampleStart,s.sampleDur=a.sampleDur):a.sampleStart<s.sampleStart?s.sampleStart=a.sampleStart:a.sampleStart+a.sampleDur>s.sampleStart+s.sampleDur&&(s.sampleDur=a.sampleStart+a.sampleDur-s.sampleStart),t.items.push(s))}))}))},e.prototype.giveTimeToParents=function(e,t,a){var r=this;(e===a.name?a:this.getLevelDetails(e,t)).items.forEach((function(e){var t=r.linkSubToSuperHashMap.get(e.id),a=r.idHashMap.get(t);a&&a.forEach((function(t){void 0===t.sampleStart?(t.sampleStart=e.sampleStart,t.sampleDur=e.sampleDur):e.sampleStart<t.sampleStart?t.sampleStart=e.sampleStart:e.sampleStart+e.sampleDur>t.sampleStart+t.sampleDur&&(t.sampleDur=e.sampleStart+e.sampleDur-t.sampleStart)}))}))},e.prototype.createIdHashMapForPath=function(e,t){var a=this;this.idHashMap=new Map,e.forEach((function(e){a.getLevelDetails(e,t).items.forEach((function(e){a.idHashMap.set(e.id,e)}))}))},e.prototype.createIdHashMapForEveryLevel=function(e){var t=this;this.idHashMap=new Map,e.levels.forEach((function(e){e.items.forEach((function(e){t.idHashMap.set(e.id,e)}))}))},e.prototype.createLinkSubToSuperHashMap=function(e){var t=this;this.linkSubToSuperHashMap=new Map,e.links.forEach((function(e){if(t.linkSubToSuperHashMap.has(e.toID)){var a=t.linkSubToSuperHashMap.get(e.toID);a.push(e.fromID),t.linkSubToSuperHashMap.set(e.toID,a)}else t.linkSubToSuperHashMap.set(e.toID,[e.fromID])}))},e.prototype.createLinkSuperToSubHashMap=function(e){var t=this;this.linkSuperToSubHashMap=new Map,e.links.forEach((function(e){if(t.linkSuperToSubHashMap.has(e.fromID)){var a=t.linkSuperToSubHashMap.get(e.fromID);a.push(e.toID),t.linkSuperToSubHashMap.set(e.fromID,a)}else t.linkSuperToSubHashMap.set(e.fromID,[e.toID])}))},e.prototype.findAllLinkDefs=function(e,t){var a=this,r=[],n=[];return e.forEach((function(e,s,i){var o=[],p=a.idHashMap.get(s).labels[0].name;e.forEach((function(e){var s,i=a.idHashMap.get(e).labels[0].name;-1===o.indexOf(i)?(o.push(i),s="ONE_TO_ONE"):s=t?"MANY_TO_MANY":"ONE_TO_MANY";var u=p+" â†’ "+i;-1===n.indexOf(u)?(n.push(u),t?r.push({type:s,superlevelName:i,sublevelName:p}):r.push({type:s,superlevelName:p,sublevelName:i})):("ONE_TO_ONE"===r[n.indexOf(u)].type||"ONE_TO_MANY"===r[n.indexOf(u)].type&&"MANY_TO_MANY"===s)&&(r[n.indexOf(u)].type=s)}))})),r},e}();p(Object.keys(t).reduce((function(e,a){return"__esModule"==a||(e[a]=t[a]),e}),{}))}]);